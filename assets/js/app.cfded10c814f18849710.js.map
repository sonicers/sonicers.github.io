{"version":3,"sources":["webpack:///assets/js/app.cfded10c814f18849710.js","webpack:///./src/Tour.vue?952a","webpack:///./demos/components/demo-block.vue?916f","webpack:///./demos/App.vue?0551","webpack:///./demos/pages/demo-pano.vue?da88","webpack:///./src/Scene.vue?b8ef","webpack:///./src/Pano.vue?67fb","webpack:///./demos/components/demo-block.vue","webpack:///./src/lib/panolens.js","webpack:///./demos/pages/demo-cube-pano.vue","webpack:///./demos/pages/demo-pano.vue","webpack:///./demos/pages/demo-scene.vue","webpack:///./demos/pages/demo-tour.vue","webpack:///./demos/pages/demo-video-pano.vue","webpack:///./src/Scene.vue","webpack:///./src/Tour.vue","webpack:///./src/Tour.vue?3ec2","webpack:///./demos/components/demo-block.vue?6e72","webpack:///./demos/App.vue?8c56","webpack:///./demos/pages/demo-cube-pano.vue?d0a6","webpack:///./demos/pages/demo-pano.vue?c299","webpack:///./demos/pages/demo-video-pano.vue?e6e9","webpack:///./demos/pages/demo-scene.vue?4c58","webpack:///./src/Scene.vue?f0b5","webpack:///./src/Pano.vue?e317","webpack:///./demos/pages/demo-tour.vue?a913","webpack:///./src/Tour.vue?1a47","webpack:///./demos/components/demo-block.vue?9e40","webpack:///./demos/App.vue?0543","webpack:///./demos/pages/demo-pano.vue?0309","webpack:///./src/Scene.vue?6001","webpack:///./src/Pano.vue?5c12","webpack:///./src/Pano.vue","webpack:///./demos/router/index.js","webpack:///./demos/App.vue","webpack:///./demos/index.js","webpack:///./demos/pages/index.js","webpack:///App.vue","webpack:///demo-block.vue","webpack:///demo-cube-pano.vue","webpack:///demo-pano.vue","webpack:///demo-scene.vue","webpack:///demo-tour.vue","webpack:///demo-video-pano.vue","webpack:///Pano.vue","webpack:///Scene.vue","webpack:///Tour.vue"],"names":["webpackJsonp","130","module","exports","__webpack_require__","push","i","131","132","133","134","135","136","18","Component","27","__webpack_exports__","process","global","require","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof__","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise___default","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property__","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default","__WEBPACK_IMPORTED_MODULE_8_three__","PANOLENS","REVISION","enableInlineVideo","e","r","t","d","a","start","stop","requestAnimationFrame","cancelAnimationFrame","stopImmediatePropagation","addEventListener","get","set","dispatchEvent","Event","resolve","then","Audio","crossOrigin","src","currentSrc","u","m","Date","now","h","currentTime","k","T","o","driver","video","duration","s","this","readyState","HAVE_FUTURE_DATA","hasAudio","playbackRate","loop","networkState","NETWORK_IDLE","buffered","length","load","ended","pause","c","g","webkitDisplayingFullscreen","E","paused","play","updater","HAVE_ENOUGH_DATA","v","w","p","bind","muted","autoplay","indexOf","l","f","y","everywhere","b","iPad","ipad","test","navigator","userAgent","classList","add","removeEventListener","platform","console","warn","document","head","style","matchMedia","matches","TWEEN","_tweens","getAll","removeAll","tween","remove","splice","update","time","preserve","undefined","window","hrtime","performance","getTime","Tween","object","_repeatDelayTime","_object","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_repeat","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","Easing","Linear","None","_interpolationFunction","Interpolation","_chainedTweens","_onStartCallback","_onStartCallbackFired","_onUpdateCallback","_onCompleteCallback","_onStopCallback","to","properties","property","Array","concat","call","stopChainedTweens","end","numChainedTweens","delay","amount","repeat","times","repeatDelay","yoyo","easing","interpolation","chain","arguments","onStart","callback","onUpdate","onComplete","onStop","elapsed","value","charAt","parseFloat","isFinite","tmp","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","Math","cos","PI","sin","Exponential","pow","Circular","sqrt","Elastic","Back","Bounce","floor","fn","Utils","Bezier","pw","bn","Bernstein","CatmullRom","p0","p1","fc","Factorial","p2","p3","v0","v1","t2","root","define","THREE","domElement","getAutoRotationAngle","scope","autoRotateSpeed","getZoomScale","zoomSpeed","onMouseDown","event","momentumOn","momentumLeft","momentumUp","enabled","preventDefault","button","mouseButtons","ORBIT","noRotate","state","STATE","ROTATE","rotateStart","clientX","clientY","ZOOM","noZoom","DOLLY","dollyStart","PAN","noPan","panStart","NONE","onMouseMove","onMouseUp","startEvent","element","body","rotateEnd","rotateDelta","subVectors","rotateLeft","x","clientWidth","rotateSpeed","rotateUp","clientHeight","copy","eventPrevious","dollyEnd","dollyDelta","dollyIn","dollyOut","panEnd","panDelta","pan","endEvent","onMouseWheel","stopPropagation","delta","wheelDelta","detail","fov","maxFov","updateProjectionMatrix","minFov","changeEvent","onKeyUp","keyCode","keys","UP","keyUp","BOTTOM","keyBottom","LEFT","keyLeft","RIGHT","keyRight","onKeyDown","noKeys","momentumKeydownFactor","touchstart","touches","TOUCH_ROTATE","pageX","pageY","TOUCH_DOLLY","dx","dy","TOUCH_PAN","touchmove","scale","touchend","frameId","target","center","minDistance","maxDistance","Infinity","minZoom","maxZoom","keyPanSpeed","autoRotate","minPolarAngle","maxPolarAngle","momentumDampingFactor","momentumScalingFactor","minAzimuthAngle","maxAzimuthAngle","MIDDLE","theta","phi","panOffset","offset","phiDelta","thetaDelta","lastPosition","lastQuaternion","target0","clone","position0","position","zoom0","zoom","quat","setFromUnitVectors","up","quatInverse","inverse","type","setLastQuaternion","quaternion","getLastPosition","angle","panLeft","distance","te","matrix","elements","multiplyScalar","panUp","deltaX","deltaY","sub","targetDistance","tan","right","left","top","bottom","momentum","abs","dollyScale","max","min","ignoreUpdate","applyQuaternion","atan2","z","radius","lookAt","distanceToSquared","dot","reset","getPolarAngle","getAzimuthalAngle","prototype","constructor","camera","rotY","rotX","tempX","tempY","rotation","reorder","deviceOrientation","screenOrientation","alpha","alphaOffsetAngle","onDeviceOrientationChangeEvent","onScreenOrientationChangeEvent","orientation","onTouchStartEvent","onTouchMoveEvent","degToRad","updateAlphaOffsetAngle","setCameraQuaternion","beta","gamma","orient","vectorFingerY","zee","euler","q0","q1","fingerQY","fingerQX","setFromAxisAngle","multiply","setFromEuler","connect","disconnect","dispose","direction","axis","_sign","_cosh","exp","_sinhInverse","log","modify","geometry","thirdAxis","crossVectors","P","transpose","InverseP","getInverse","newVertices","oldVertices","anglesBetweenOldandNewVertices","meshGeometryBoundingBoxMaxx","meshGeometryBoundingBoxMinx","meshGeometryBoundingBoxMaxy","meshGeometryBoundingBoxMiny","vertices","applyMatrix4","meshWidthold","meshDepth","ParamB","oldMiddlex","oldMiddley","meshWidth","NewParamB","rightEdgePos","bendCenter","x0","y0","normalize","Q","addVectors","middle","O","acos","computeFaceNormals","verticesNeedUpdate","normalsNeedUpdate","fvNames","fl","faces","face","vertexNormals","vl","rotateMatrix","applyMatrix3","renderer","_camera","_scene","_stereo","aspect","_params","minFilter","magFilter","format","_renderTarget","scissorTest","texture","generateMipmaps","distortion","removeAttribute","toNonIndexed","positions","attributes","array","uvs","uv","count","positions2","Float32Array","uvs2","vector","scalar","material","map","mesh","setSize","width","height","pixelRatio","getPixelRatio","render","scene","updateMatrixWorld","parent","scissor","viewport","cameraL","cameraR","setEyeSeparation","eyeSep","size","getSize","autoClear","clear","setScissorTest","setScissor","setViewport","GSVPANO","PanoLoader","parameters","_zoom","_panoId","_parameters","_panoClient","google","maps","StreetViewService","_count","_total","_canvas","_ctx","_wc","_hc","copyright","levelsW","levelsH","widths","heights","gl","canvas","createElement","getContext","error","maxW","maxH","maxTexSize","getParameter","MAX_TEXTURE_SIZE","setProgress","loaded","total","onProgress","throwError","message","onError","adaptTextureToZoom","ceil","ptr","composeFromTile","px","py","drawImage","progress","round","panoId","onPanoramaLoad","loadFromId","id","composePanorama","url","self","useWebGL","loadTexture","img","Image","panoid","loadPano","getPanoramaById","result","status","StreetViewStatus","OK","onPanoramaData","location","pano","onNoPanoramaData","setZoom","DataImageSource","DataImage","Info","Arrow","FullscreenEnter","FullscreenLeave","VideoPlay","VideoPause","WhiteTile","ReticleIdle","Setting","ChevronRight","Check","ViewIndicator","ReticleDwell","Controls","DEVICEORIENTATION","Modes","UNKNOWN","NORMAL","CARDBOARD","STEREO","checkTouchSupported","msMaxTouchPoints","ImageLoader","onLoad","onImageLoaded","urlCreator","revokeObjectURL","image","cached","request","arrayBufferView","blob","reference","iconName","hasOwnProperty","setTimeout","URL","webkitURL","createElementNS","XMLHttpRequest","open","responseType","onprogress","lengthComputable","onloadend","Uint8Array","response","Blob","createObjectURL","send","TextureLoader","needsUpdate","CubeTextureLoader","urls","all","loadings","index","images","StereographicShader","uniforms","vertexShader","join","fragmentShader","Panorama","ImageQualityLow","ImageQualityFair","ImageQualityMedium","ImageQualityHigh","ImageQualitySuperHigh","animationDuration","defaultInfospotSize","container","linkedSpots","isInfospotVisible","linkingImageURL","linkingImageScale","side","visible","infospotAnimation","fadeIn","setContainer","onClick","setupTransitions","invertedObject","Infospot","method","data","scalePlaceHolder","intersects","traverse","HTMLElement","children","forEach","child","getZoomLevel","innerWidth","updateTexture","toggleInfospotVisibility","isVisible","show","hide","setLinkingImage","link","imageScale","imageSrc","spot","toPanorama","fadeInAnimation","fadeOutAnimation","enterTransition","leaveTransition","opacity","fadeOut","onEnter","onLeave","recursiveDispose","ImagePanorama","transparent","HTMLImageElement","GoogleStreetviewPanorama","gsvLoader","loadRequested","setupGoogleMapAPI","loadGSVLoader","script","onreadystatechange","setGSVLoader","onload","getElementsByTagName","appendChild","getGSVLoader","CubePanorama","edgeLength","shader","JSON","parse","BasicPanorama","tile","VideoPanorama","options","playsinline","videoElement","videoRenderObject","videoProgress","isIOS","isMobile","pauseVideo","resumeVideoProgress","toggleVideo","setVideoCurrentTime","setAttribute","onloadeddata","setVideoTexture","querySelectorAll","ontimeupdate","resetVideo","videoTexture","isVideoPaused","percentage","playVideo","isVideoMuted","muteVideo","unmuteVideo","getVideoElement","EmptyPanorama","color","LittlePlanet","source","ratio","EPS","createGeometry","createMaterial","dragging","userMouse","quatA","quatB","quatCur","quatSlerp","vectorX","vectorY","onWindowResize","registerMouseEvents","onContextMenu","unregisterMouseEvents","pinchDistance","onUpdateCallback","angleX","angleY","addZoomDelta","lowerBound","upperBound","slerp","transform","makeRotationFromQuaternion","resolution","ImageLittlePlanet","Reticle","autoSelect","idleImageUrl","dwellImageUrl","dwellTime","dwellSpriteAmount","dwellInterval","IDLE","DWELLING","scaleIdle","scaleDwell","textureLoaded","idleTexture","dwellTexture","depthTest","currentTile","startTime","renderOrder","timerId","updateStatus","loadTextures","setupDwellSprite","select","completeCallback","completeDwelling","updateDwelling","clearTimer","wrapS","startDwelling","elasped","cancelDwelling","Tile","widthSegments","heightSegments","forceDirection","forceAxis","forceAngle","bendModifier","entity","animationFadeOut","animationFadeIn","animationTranslation","tweens","bend","originalGeometry","setEntity","unbend","name","toState","ripple","TileGroup","tileArray","verticalGap","depthGap","v_gap","d_gap","animationEasing","visibleDelta","setTexture","originalPosition","updateVisbility","imageArray","outline","updateAllTexture","scrollUp","tiles","scrollDown","getIndex","getTileCount","sharedFont","sharedTexture","pendingQueue","SpriteText","text","maxWidth","addText","generateTextGeometry","generateSDFShader","setBMFont","font","anisotropy","pop","textAnchor","computeBoundingBox","computeBoundingSphere","layout","textMesh","getLayout","Widget","DEFAULT_TRANSITION","TOUCH_ENABLED","PREVENT_EVENT_HANDLER","barElement","fullscreenElement","settingElement","mainMenu","activeMainItem","activeSubMenu","mask","addControlBar","bar","styleTranslate","styleOpacity","gradientStyle","float","webkitTransform","msTransform","background","transition","pointerEvents","isHidden","toggle","menu","createDefaultMenu","createMainMenu","createMask","removeChild","deactivate","handler","title","subMenu","addControlButton","createFullscreenButton","createSettingButton","createVideoControl","display","onTap","activated","activate","item","createCustomItem","backgroundImage","webkitTransition","_width","changeSize","unslideAll","tapSkipped","isFullscreen","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","onFullScreenChange","stylesheetId","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","querySelector","sheet","innerHTML","controlButton","createVideoControlButton","seekBar","createVideoControlSeekbar","isDragging","mouseX","changedTouches","percentageNow","parseInt","progressElement","addControlListeners","onVideoControlDrag","percentageNext","onVideoControlStop","removeControlListeners","progressElementControl","getBoundingClientRect","offsetX","onDispose","backgroundColor","borderRadius","marginTop","createMenuItem","textContent","padding","textDecoration","cursor","slide","unslide","setIcon","icon","setSelectionTitle","selection","addSelection","fontSize","fontWeight","addIcon","flip","backgroundSize","addSubMenu","items","createSubMenu","createMenuItemHeader","header","borderBottom","paddingBottom","menus","onNextTick","slideAll","parentElement","createMenu","addItem","paddingLeft","setActiveItem","activeItem","addHeader","fontFamily","visibility","boxShadow","overflow","willChange","backgroundRepeat","backgroundPosition","webkitUserSelect","MozUserSelect","userSelect","filter","webkitFilter","mergeStyleOptions","animated","postLoad","naturalWidth","naturalHeight","startScale","scaleUpAnimation","scaleFactor","scaleDownAnimation","isHovering","cursorStyle","mode","HANDLER_FOCUS","showAnimation","hideAnimation","onHover","onHoverStart","onHoverEnd","onDualEyeEffect","onDismiss","setFocusMethod","getContainer","lockHoverElement","unlockHoverElement","mouseEvent","_height","locked","halfWidth","halfHeight","cloneNode","translateElement","verticalDelta","setElementStyle","setText","setCursorHoverStyle","addHoverText","maxHeight","textShadow","addHoverElement","el","removeHoverElement","focus","Viewer","controlBar","controlButtons","autoHideControlBar","autoHideInfospot","horizontalView","clickTolerance","cameraFov","reverseDragging","enableReticle","autoReticleSelect","viewIndicator","indicatorSize","output","innerHeight","antialias","viewIndicatorSize","reticle","tempEnableReticle","OrbitControls","DeviceOrientationControls","CardboardEffect","StereoEffect","controls","effect","panorama","widget","hoverObject","infospot","pressEntityObject","pressObject","raycaster","raycasterPoint","updateCallbacks","requestAnimationId","cameraFrustum","cameraViewProjectionMatrix","outputDivElement","HANDLER_MOUSE_DOWN","HANDLER_MOUSE_UP","HANDLER_MOUSE_MOVE","HANDLER_WINDOW_RESIZE","HANDLER_KEY_DOWN","HANDLER_KEY_UP","HANDLER_TAP","OUTPUT_INFOSPOT","tweenLeftAnimation","tweenUpAnimation","setPixelRatio","devicePixelRatio","setClearColor","sortObjects","passiveRendering","control","addReticle","addDefaultControlBar","addViewIndicator","reverseDraggingDirection","enableReticleControl","registerMouseAndTouchEvents","addOutputElement","registerEventListeners","animate","eventHandler","addPanoramaEventListener","setPanorama","buttonName","leavingPanorama","hideInfospot","afterEnterComplete","dispatchEventToChildren","activateWidgetItem","controlIndex","ControlMenuItem","ModeMenuItem","enableEffect","disableEffect","disableReticleControl","unregisterMouseAndTouchEvents","registerReticleEvent","updateReticleEvent","unregisterReticleEvent","toggleVideoPlay","onVideoUpdate","addUpdateCallback","removeUpdateCallback","showVideoWidget","hideVideoWidget","updateVideoPlayButton","setCameraControl","getControl","getScene","getCamera","getRenderer","getControlName","getNextControlName","getNextControlIndex","nextIndex","setCameraFov","enableControl","disableControl","toggleNextControl","getScreenVector","worldVector","widthHalf","heightHalf","project","checkSpriteInViewport","sprite","matrixWorldInverse","matrixWorld","multiplyMatrices","projectionMatrix","setFromMatrix","intersectsSprite","tweenControlCenter","ha","va","chv","cvv","hv","vv","vptc","ov","nv","getWorldDirection","getWorldPosition","angleTo","tweenControlCenterByObject","isUnderScalePlaceHolder","traverseAncestors","ancestor","invertXVector","windowWidth","windowHeight","expand","contains","documentElement","outputInfospotPosition","point","panoramaWorldPosition","outputPosition","intersectObject","toFixed","info","onTarget","toggleControlBar","intersect_entity","intersect","offsetLeft","offsetTop","setFromCamera","intersectObjects","getConvertedIntersect","passThrough","key","onChange","centerX","centerY","unregisterEventListeners","destory","onPanoramaDispose","loadAsyncRequest","loadViewIndicator","asyncEvent","viewIndicatorDiv","responseXML","indicator","setIndicatorD","currentPanoAngle","fovAngle","leftAngle","rightAngle","leftX","leftY","rightX","rightY","indicatorD","indicatorOnMouseEnter","indicatorOnMouseLeave","appendControlItem","option","group","Error","code","1","TextGeometry","opt","Base","_opt","assign","createLayout","inherits","createIndices","buffer","utils","TypeError","flipY","texWidth","common","scaleW","texHeight","scaleH","glyphs","glyph","bitmap","visibleGlyphs","indices","clockwise","attr","multipage","pages","boundingSphere","itemSize","computeSphere","isNaN","boundingBox","bbox","makeEmpty","computeBox","2","bounds","box","minX","minY","maxX","maxY","3","page","bw","bh","u0","u1","xoffset","yoffset","4","ctor","superCtor","super_","enumerable","writable","configurable","TempCtor","5","TextLayout","_measure","computeMetrics","addGetter","wrapper","Function","getGlyphById","chars","glyphIdx","findChar","getXHeight","X_HEIGHTS","charCodeAt","idx","getMGlyph","M_WIDTHS","getCapHeight","CAP_HEIGHTS","getKerning","kernings","table","kern","first","second","getAlignType","align","ALIGN_CENTER","ALIGN_RIGHT","ALIGN_LEFT","wordWrap","xtend","number","TAB_ID","SPACE_ID","measure","tabSize","_setupSpaceGlyphs","lines","minWidth","maxLineWidth","reduce","prev","line","lineHeight","baseline","base","descender","letterSpacing","_descender","_baseline","_xHeight","_capHeight","_lineHeight","_ascender","lineIndex","lastGlyph","lineWidth","getGlyph","tx","xadvance","_linesTotal","_fallbackSpaceGlyph","_fallbackTabGlyph","space","tabWidth","curPen","curWidth","nextPen","nextWidth","6","num","def","7","8","idxOf","chr","isWhitespace","whitespace","pre","lineStart","isNewline","newline","lineEnd","measured","greedy","testWidth","Number","MAX_VALUE","newLine","newlineChar","nextStart","monospace","substring","9","extend","Object","10","Buffer","isArrayBuffer","arr","toString","getBinaryOpts","xml2","req","overrideMimeType","xhr","noop","parseASCII","parseXML","readBinary","isBinaryFormat","cb","uri","binary","err","res","statusCode","isBuffer","encoding","trim","headers","11","equal","HEADER","buf","slice","12","equals","13","splitLine","replace","split","str","match","dt","parseData","out","parseIntList","val","lineData","file","14","readBlock","blockID","readUInt8","blockSize","readInt32LE","readInfo","readCommon","readPages","readChars","readKernings","readInt16LE","bitField","smooth","unicode","italic","bold","fixedHeight","charset","stretchH","readUInt16LE","aa","readInt8","spacing","readStringNT","packed","alphaChnl","redChnl","greenChnl","blueChnl","readNameNT","len","char","off","readUInt32LE","chnl","pos","every","byte","15","getAttribs","getAttribList","dict","attrib","mapName","nodeName","nodeValue","attribs","NAME_MAP","toLowerCase","parseAttributes","parseFromString","scaleh","scalew","stretchh","lineheight","alphachnl","redchnl","greenchnl","bluechnl","xmlRoot","pageRoot","getAttribute","childTag","16","obj","17","DOMParser","ActiveXObject","xmlDoc","async","loadXML","div","isEmpty","initParams","params","isFunction","createXHR","_createXHR","readystatechange","loadFunc","getBody","responseText","isJson","errorFunc","evt","clearTimeout","timeoutTimer","failureResponse","aborted","useXDR","rawRequest","getAllResponseHeaders","parseHeaders","once","cors","XDomainRequest","sync","json","onerror","ontimeout","username","password","withCredentials","timeout","abort","setRequestHeader","beforeSend","iterator","toUpperCase","19","20","string","alert","confirm","prompt","21","called","apply","proto","defineProperty","22","list","context","forEachArray","forEachString","forEachObject","23","24","isArray","arg","row","25","26","toObject","propIsEnumerable","propertyIsEnumerable","from","symbols","dtype","anArray","CW","CCW","dir","numIndices","j","28","BYTES_PER_ELEMENT","29","Int8Array","Int16Array","Int32Array","Uint16Array","Uint32Array","Float64Array","Uint8ClampedArray","30","_isBuffer","31","setIndex","isR69","newAttrib","updateAttribute","addAttribute","rebuildAttribute","flatten","attribLength","32","flattenVertexData","dim","dstLength","Ctor","33","34","alphaTest","precision","35","loadFont","tex","36","createText","SDFShader","loadBMFont","fontObject","37","kMaxLength","TYPED_ARRAY_SUPPORT","fromNumber","fromString","fromObject","that","allocate","checked","byteLength","write","fromBuffer","fromArray","ArrayBuffer","fromTypedArray","fromArrayBuffer","fromArrayLike","fromJsonObject","__proto__","poolSize","rootParent","RangeError","SlowBuffer","subject","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","binarySlice","base64Slice","utf16leSlice","hexWrite","remaining","strLen","parsed","substr","utf8Write","blitBuffer","asciiWrite","asciiToBytes","binaryWrite","base64Write","ucs2Write","utf16leToBytes","base64","fromByteArray","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","codePoints","MAX_ARGUMENTS_LENGTH","String","fromCharCode","ret","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","ieee754","writeDouble","base64clean","stringtrim","INVALID_BASE64_RE","units","leadSurrogate","byteArray","hi","lo","toByteArray","dst","INSPECT_MAX_BYTES","foo","subarray","compare","isEncoding","inspect","byteOffset","arrayIndexOf","foundIndex","swap","toJSON","_arr","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt16BE","readUInt32BE","readIntLE","readIntBE","readInt16BE","readInt32BE","readFloatLE","read","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","fill","38","decode","elt","PLUS","PLUS_URL_SAFE","SLASH","SLASH_URL_SAFE","NUMBER","UPPER","LOWER","b64ToByteArray","b64","L","placeHolders","Arr","uint8ToBase64","uint8","encode","lookup","temp","extraBytes","base64js","39","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","40","326","327","328","329","330","331","332","333","_vm","_h","$createElement","_self","_c","staticStyle","staticRenderFns","334","staticClass","_t","_v","ref","_s","_f","vueCode","htmlCode","335","attrs","336","slot","on","directives","rawName","expression","337","change","338","339","links","onLoadStart","340","341","342","scenes","344","content","locals","345","346","347","348","349","42","62","Vue","use","Router","routes","path","component","redirect","63","64","router","App","65","DemoPano","DemoCubePano","DemoVideoPano","DemoScene","DemoTour","66","67","__WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__","__WEBPACK_IMPORTED_MODULE_1_highlight_js__","__WEBPACK_IMPORTED_MODULE_1_highlight_js___default","props","default","mounted","filters","codeHandler","components","68","__WEBPACK_IMPORTED_MODULE_0__components_demo_block__","__WEBPACK_IMPORTED_MODULE_0__components_demo_block___default","__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__","__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default","69","__WEBPACK_IMPORTED_MODULE_0__src_Pano_vue__","__WEBPACK_IMPORTED_MODULE_0__src_Pano_vue___default","__WEBPACK_IMPORTED_MODULE_1__components_demo_block_vue__","__WEBPACK_IMPORTED_MODULE_1__components_demo_block_vue___default","loading","methods","Pano","DemoBlock","70","__WEBPACK_IMPORTED_MODULE_1__src_Scene_vue__","__WEBPACK_IMPORTED_MODULE_1__src_Scene_vue___default","Scene","71","__WEBPACK_IMPORTED_MODULE_1__src_Tour_vue__","__WEBPACK_IMPORTED_MODULE_1__src_Tour_vue___default","rx","rz","ry","connections","Tour","initialScene","72","73","__WEBPACK_IMPORTED_MODULE_0__lib_panolens__","viewer","created","onResize","destroyed","$el","offsetWidth","offsetHeight","watch","$nextTick","_log","setPano","$emit","74","addHotspot","emissive","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","geometryBorder","materialBorder","circle","hotspot","merged","updateMatrix","merge","toRadian","hotspotData","targetScene","addArrow","arrowGeometry","makeArrowGeometry","arrowMaterial","arrow","x1","z1","x2","currentPosition","z2","ath","toDegree","arrowPos","sphereToWorld","moveTo","lineTo","mY","atv","mX","mZ","__WEBPACK_IMPORTED_MODULE_1_three__","scene_index","hotspots","loadScene","initViewer","INTERSECTED","getSceneIndexByKey","mouse","intersectedObject","setHex","currentHex","getHex","translateZ","translateX","translateY","near","75","sceneIndex","arrowGroup"],"mappings":"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","file":"assets/js/app.cfded10c814f18849710.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 130:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(12)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"div[data-v-09ad1f51]{cursor:pointer}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 131:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(12)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".demo-block{width:100%;height:100%;background-color:#fff;border-radius:3px}.demo-block .demo-block-preview{width:70%;height:100%;float:left;position:relative}.demo-block .demo-block-code{width:30%;height:100%;background:#f9fafc;border-left:1px solid #dfe2e7;font-size:13px;float:left}.demo-block .demo-block-code pre code{font:normal 10pt Consolas,Monaco,monospace}.demo-block .demo-block-code .demo-block-code-box{width:100%;height:50%;position:relative;overflow:hidden}.demo-block .demo-block-code-box:after{content:\\\"\\\";display:block;position:absolute;bottom:0;left:0;width:90%;height:1px;background:-webkit-linear-gradient(left,#dfe2e7 80%,rgba(223,226,231,0))}.demo-block .demo-block-code-box h3{width:100%;padding:10px 20px;font-size:16px;font-weight:700;position:absolute}.demo-block .demo-block-code-box-content{position:absolute;top:40px;bottom:10px;left:20px;right:20px;overflow:auto}.demo-block .hljs{background:transparent}.demo-block .demo-block-code code{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 132:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(12)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"*{margin:0;border:0;padding:0;box-sizing:border-box}li,ol,ul{list-style:none}a{color:#657180;text-decoration:none}.demos,body,html{width:100%;height:100%;color:#657180}body{background:#eee;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background:#fff}.demos-header{position:absolute;top:0;width:100%;background:#f3f6fb;text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-bottom:1px solid #dfe2e7;padding:15px 15px 15px 30px;line-height:20px}.demos-header .title{font-weight:700;font-size:18px;display:inline-block}.demos-header .github{color:#39f;display:inline-block;font-size:12px;float:right}.demos-content{width:100%;height:100%;padding-top:52px;overflow:hidden}.demos-menu{float:left;width:230px;height:100%;border-right:1px solid #dfe2e7;padding:10px 30px}.demos-menu .demos-menu-item{display:block;width:100%;height:30px;line-height:30px;font-size:14px;cursor:pointer}.demos-menu .demos-menu-item>a{display:block;width:100%;height:100%}.demos-menu .demos-menu-title{display:block;width:100%;padding:6px 0;margin-top:10px;font-size:14px;font-weight:700}.demos-menu .demos-menu-item:hover>a{color:#39f}.demos-pages{height:100%;overflow:hidden}.demo-loading{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center}.demo-loading:before{border-radius:100%;margin:2px;border:3px solid #20a0ff;border-bottom-color:transparent;height:36px;width:36px;animation:loading-rotate .75s 0s linear infinite}.demo-loading:after,.demo-loading:before{content:\\\"\\\";display:inline-block;vertical-align:middle}.demo-loading:after{height:100%;width:0}@keyframes loading-rotate{0%{transform:rotate(0) scale(1)}50%{transform:rotate(180deg) scale(.6)}to{transform:rotate(1turn) scale(1)}}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 133:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(12)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".info[data-v-2a5bfa54]{position:absolute;top:30px;left:10%}.info button[data-v-2a5bfa54]{padding:10px;cursor:pointer}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 134:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(12)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"div[data-v-66d382e3]{cursor:pointer}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 135:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(12)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".v-pano{width:100%;height:100%;margin:0;padding:0;border:0}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 136:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 18:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(345)\n\nvar Component = __webpack_require__(3)(\n  /* script */\n  __webpack_require__(67),\n  /* template */\n  __webpack_require__(334),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 27:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process, module, global) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols__ = __webpack_require__(81);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan__ = __webpack_require__(77);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify__ = __webpack_require__(76);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create__ = __webpack_require__(79);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof__ = __webpack_require__(85);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise__ = __webpack_require__(82);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property__ = __webpack_require__(80);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_three__ = __webpack_require__(41);\nvar require;var require;\n\n\n\n\n\n\n\n\n\nvar PANOLENS = { REVISION: '9' };\n\nvar enableInlineVideo = function () {\n  'use strict';\n\n  function e(e, i, n, r) {\n    function t(n) {\n      d = i(t, r), e(n - (a || n)), a = n;\n    }var d, a;return { start: function start() {\n        d || t(0);\n      }, stop: function stop() {\n        n(d), d = null, a = 0;\n      } };\n  }function i(i) {\n    return e(i, requestAnimationFrame, cancelAnimationFrame);\n  }function n(e, i, n) {\n    function r(r) {\n      n && !n(e, i) || r.stopImmediatePropagation();\n    }return e.addEventListener(i, r), r;\n  }function r(e, i, n, r) {\n    function t() {\n      return n[i];\n    }function d(e) {\n      n[i] = e;\n    }r && d(e[i]), __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default()(e, i, { get: t, set: d });\n  }function t(e, i, n) {\n    n.addEventListener(i, function () {\n      return e.dispatchEvent(new Event(i));\n    });\n  }function d(e, i) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise___default.a.resolve().then(function () {\n      e.dispatchEvent(new Event(i));\n    });\n  }function a(e) {\n    var i = new Audio();return t(e, 'play', i), t(e, 'playing', i), t(e, 'pause', i), i.crossOrigin = e.crossOrigin, i.src = e.src || e.currentSrc || 'data:', i;\n  }function u(e, i, n) {\n    (m || 0) + 200 < Date.now() && (e[h] = !0, m = Date.now()), n || (e.currentTime = i), k[++T % 3] = 100 * i | 0;\n  }function o(e) {\n    return e.driver.currentTime >= e.video.duration;\n  }function s(e) {\n    var i = this;i.video.readyState >= i.video.HAVE_FUTURE_DATA ? (i.hasAudio || (i.driver.currentTime = i.video.currentTime + e * i.video.playbackRate / 1e3, i.video.loop && o(i) && (i.driver.currentTime = 0)), u(i.video, i.driver.currentTime)) : i.video.networkState === i.video.NETWORK_IDLE && i.video.buffered.length === 0 && i.video.load(), i.video.ended && (delete i.video[h], i.video.pause(!0));\n  }function c() {\n    var e = this,\n        i = e[g];if (e.webkitDisplayingFullscreen) return void e[E]();i.driver.src !== 'data:' && i.driver.src !== e.src && (u(e, 0, !0), i.driver.src = e.src), e.paused && (i.paused = !1, e.buffered.length === 0 && e.load(), i.driver.play(), i.updater.start(), i.hasAudio || (d(e, 'play'), i.video.readyState >= i.video.HAVE_ENOUGH_DATA && d(e, 'playing')));\n  }function v(e) {\n    var i = this,\n        n = i[g];n.driver.pause(), n.updater.stop(), i.webkitDisplayingFullscreen && i[w](), n.paused && !e || (n.paused = !0, n.hasAudio || d(i, 'pause'), i.ended && !i.webkitDisplayingFullscreen && (i[h] = !0, d(i, 'ended')));\n  }function p(e, n) {\n    var r = {};e[g] = r, r.paused = !0, r.hasAudio = n, r.video = e, r.updater = i(s.bind(r)), n ? r.driver = a(e) : (e.addEventListener('canplay', function () {\n      e.paused || d(e, 'playing');\n    }), r.driver = { src: e.src || e.currentSrc || 'data:', muted: !0, paused: !0, pause: function pause() {\n        r.driver.paused = !0;\n      }, play: function play() {\n        r.driver.paused = !1, o(r) && u(e, 0);\n      }, get ended() {\n        return o(r);\n      } }), e.addEventListener('emptied', function () {\n      var i = !r.driver.src || r.driver.src === 'data:';r.driver.src && r.driver.src !== e.src && (u(e, 0, !0), r.driver.src = e.src, i || !n && e.autoplay ? r.driver.play() : r.updater.stop());\n    }, !1), e.addEventListener('webkitbeginfullscreen', function () {\n      e.paused ? n && r.driver.buffered.length === 0 && r.driver.load() : (e.pause(), e[E]());\n    }), n && (e.addEventListener('webkitendfullscreen', function () {\n      r.driver.currentTime = e.currentTime;\n    }), e.addEventListener('seeking', function () {\n      k.indexOf(100 * e.currentTime | 0) < 0 && (r.driver.currentTime = e.currentTime);\n    }));\n  }function l(e) {\n    var i = e[h];return delete e[h], !e.webkitDisplayingFullscreen && !i;\n  }function f(e) {\n    var i = e[g];e[E] = e.play, e[w] = e.pause, e.play = c, e.pause = v, r(e, 'paused', i.driver), r(e, 'muted', i.driver, !0), r(e, 'playbackRate', i.driver, !0), r(e, 'ended', i.driver), r(e, 'loop', i.driver, !0), n(e, 'seeking', function (e) {\n      return !e.webkitDisplayingFullscreen;\n    }), n(e, 'seeked', function (e) {\n      return !e.webkitDisplayingFullscreen;\n    }), n(e, 'timeupdate', l), n(e, 'ended', l);\n  }function y(e, i) {\n    if (void 0 === i && (i = {}), !e[g]) {\n      if (!i.everywhere) {\n        if (!b) return;if (!(i.iPad || i.ipad ? /iPhone|iPod|iPad/ : /iPhone|iPod/).test(navigator.userAgent)) return;\n      }e.pause();var n = e.autoplay;e.autoplay = !1, p(e, !e.muted), f(e), e.classList.add('IIV'), e.muted && n && (e.play(), e.addEventListener('playing', function i() {\n        e.autoplay = !0, e.removeEventListener('playing', i);\n      })), /iPhone|iPod|iPad/.test(navigator.platform) || console.warn('iphone-inline-video is not guaranteed to work in emulated environments');\n    }\n  }var m,\n      b = (typeof document === 'undefined' ? 'undefined' : __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default()(document)) === 'object' && 'object-fit' in document.head.style && !matchMedia('(-webkit-video-playable-inline)').matches,\n      g = 'bfred-it:iphone-inline-video',\n      h = 'bfred-it:iphone-inline-video:event',\n      E = 'bfred-it:iphone-inline-video:nativeplay',\n      w = 'bfred-it:iphone-inline-video:nativepause',\n      k = [],\n      T = 0;return y;\n}();\n\n\nvar TWEEN = TWEEN || function () {\n  var _tweens = [];\n\n  return {\n\n    getAll: function getAll() {\n      return _tweens;\n    },\n\n    removeAll: function removeAll() {\n      _tweens = [];\n    },\n\n    add: function add(tween) {\n      _tweens.push(tween);\n    },\n\n    remove: function remove(tween) {\n      var i = _tweens.indexOf(tween);\n\n      if (i !== -1) {\n        _tweens.splice(i, 1);\n      }\n    },\n\n    update: function update(time, preserve) {\n      if (_tweens.length === 0) {\n        return false;\n      }\n\n      var i = 0;\n\n      time = time !== undefined ? time : TWEEN.now();\n\n      while (i < _tweens.length) {\n        if (_tweens[i].update(time) || preserve) {\n          i++;\n        } else {\n          _tweens.splice(i, 1);\n        }\n      }\n\n      return true;\n    }\n  };\n}();\n\nif (typeof window === 'undefined' && typeof process !== 'undefined') {\n  TWEEN.now = function () {\n    var time = process.hrtime();\n\n    return time[0] * 1000 + time[1] / 1000000;\n  };\n} else if (typeof window !== 'undefined' && window.performance !== undefined && window.performance.now !== undefined) {\n    TWEEN.now = window.performance.now.bind(window.performance);\n  } else if (Date.now !== undefined) {\n      TWEEN.now = Date.now;\n    } else {\n        TWEEN.now = function () {\n          return new Date().getTime();\n        };\n      }\n\nTWEEN.Tween = function (object) {\n  var _object = object;\n  var _valuesStart = {};\n  var _valuesEnd = {};\n  var _valuesStartRepeat = {};\n  var _duration = 1000;\n  var _repeat = 0;\n  var _repeatDelayTime;\n  var _yoyo = false;\n  var _isPlaying = false;\n  var _reversed = false;\n  var _delayTime = 0;\n  var _startTime = null;\n  var _easingFunction = TWEEN.Easing.Linear.None;\n  var _interpolationFunction = TWEEN.Interpolation.Linear;\n  var _chainedTweens = [];\n  var _onStartCallback = null;\n  var _onStartCallbackFired = false;\n  var _onUpdateCallback = null;\n  var _onCompleteCallback = null;\n  var _onStopCallback = null;\n\n  this.to = function (properties, duration) {\n    _valuesEnd = properties;\n\n    if (duration !== undefined) {\n      _duration = duration;\n    }\n\n    return this;\n  };\n\n  this.start = function (time) {\n    TWEEN.add(this);\n\n    _isPlaying = true;\n\n    _onStartCallbackFired = false;\n\n    _startTime = time !== undefined ? time : TWEEN.now();\n    _startTime += _delayTime;\n\n    for (var property in _valuesEnd) {\n      if (_valuesEnd[property] instanceof Array) {\n        if (_valuesEnd[property].length === 0) {\n          continue;\n        }\n\n        _valuesEnd[property] = [_object[property]].concat(_valuesEnd[property]);\n      }\n\n      if (_object[property] === undefined) {\n        continue;\n      }\n\n      _valuesStart[property] = _object[property];\n\n      if (_valuesStart[property] instanceof Array === false) {\n        _valuesStart[property] *= 1.0;\n      }\n\n      _valuesStartRepeat[property] = _valuesStart[property] || 0;\n    }\n\n    return this;\n  };\n\n  this.stop = function () {\n    if (!_isPlaying) {\n      return this;\n    }\n\n    TWEEN.remove(this);\n    _isPlaying = false;\n\n    if (_onStopCallback !== null) {\n      _onStopCallback.call(_object, _object);\n    }\n\n    this.stopChainedTweens();\n    return this;\n  };\n\n  this.end = function () {\n    this.update(_startTime + _duration);\n    return this;\n  };\n\n  this.stopChainedTweens = function () {\n    for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n      _chainedTweens[i].stop();\n    }\n  };\n\n  this.delay = function (amount) {\n    _delayTime = amount;\n    return this;\n  };\n\n  this.repeat = function (times) {\n    _repeat = times;\n    return this;\n  };\n\n  this.repeatDelay = function (amount) {\n    _repeatDelayTime = amount;\n    return this;\n  };\n\n  this.yoyo = function (yoyo) {\n    _yoyo = yoyo;\n    return this;\n  };\n\n  this.easing = function (easing) {\n    _easingFunction = easing;\n    return this;\n  };\n\n  this.interpolation = function (interpolation) {\n    _interpolationFunction = interpolation;\n    return this;\n  };\n\n  this.chain = function () {\n    _chainedTweens = arguments;\n    return this;\n  };\n\n  this.onStart = function (callback) {\n    _onStartCallback = callback;\n    return this;\n  };\n\n  this.onUpdate = function (callback) {\n    _onUpdateCallback = callback;\n    return this;\n  };\n\n  this.onComplete = function (callback) {\n    _onCompleteCallback = callback;\n    return this;\n  };\n\n  this.onStop = function (callback) {\n    _onStopCallback = callback;\n    return this;\n  };\n\n  this.update = function (time) {\n    var property;\n    var elapsed;\n    var value;\n\n    if (time < _startTime) {\n      return true;\n    }\n\n    if (_onStartCallbackFired === false) {\n      if (_onStartCallback !== null) {\n        _onStartCallback.call(_object, _object);\n      }\n\n      _onStartCallbackFired = true;\n    }\n\n    elapsed = (time - _startTime) / _duration;\n    elapsed = elapsed > 1 ? 1 : elapsed;\n\n    value = _easingFunction(elapsed);\n\n    for (property in _valuesEnd) {\n      if (_valuesStart[property] === undefined) {\n        continue;\n      }\n\n      var start = _valuesStart[property] || 0;\n      var end = _valuesEnd[property];\n\n      if (end instanceof Array) {\n        _object[property] = _interpolationFunction(end, value);\n      } else {\n        if (typeof end === 'string') {\n          if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n            end = start + parseFloat(end);\n          } else {\n            end = parseFloat(end);\n          }\n        }\n\n        if (typeof end === 'number') {\n          _object[property] = start + (end - start) * value;\n        }\n      }\n    }\n\n    if (_onUpdateCallback !== null) {\n      _onUpdateCallback.call(_object, value);\n    }\n\n    if (elapsed === 1) {\n      if (_repeat > 0) {\n        if (isFinite(_repeat)) {\n          _repeat--;\n        }\n\n        for (property in _valuesStartRepeat) {\n          if (typeof _valuesEnd[property] === 'string') {\n            _valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property]);\n          }\n\n          if (_yoyo) {\n            var tmp = _valuesStartRepeat[property];\n\n            _valuesStartRepeat[property] = _valuesEnd[property];\n            _valuesEnd[property] = tmp;\n          }\n\n          _valuesStart[property] = _valuesStartRepeat[property];\n        }\n\n        if (_yoyo) {\n          _reversed = !_reversed;\n        }\n\n        if (_repeatDelayTime !== undefined) {\n          _startTime = time + _repeatDelayTime;\n        } else {\n          _startTime = time + _delayTime;\n        }\n\n        return true;\n      } else {\n        if (_onCompleteCallback !== null) {\n          _onCompleteCallback.call(_object, _object);\n        }\n\n        for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n          _chainedTweens[i].start(_startTime + _duration);\n        }\n\n        return false;\n      }\n    }\n\n    return true;\n  };\n};\n\nTWEEN.Easing = {\n\n  Linear: {\n\n    None: function None(k) {\n      return k;\n    }\n\n  },\n\n  Quadratic: {\n\n    In: function In(k) {\n      return k * k;\n    },\n\n    Out: function Out(k) {\n      return k * (2 - k);\n    },\n\n    InOut: function InOut(k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k;\n      }\n\n      return -0.5 * (--k * (k - 2) - 1);\n    }\n\n  },\n\n  Cubic: {\n\n    In: function In(k) {\n      return k * k * k;\n    },\n\n    Out: function Out(k) {\n      return --k * k * k + 1;\n    },\n\n    InOut: function InOut(k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k;\n      }\n\n      return 0.5 * ((k -= 2) * k * k + 2);\n    }\n\n  },\n\n  Quartic: {\n\n    In: function In(k) {\n      return k * k * k * k;\n    },\n\n    Out: function Out(k) {\n      return 1 - --k * k * k * k;\n    },\n\n    InOut: function InOut(k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k;\n      }\n\n      return -0.5 * ((k -= 2) * k * k * k - 2);\n    }\n\n  },\n\n  Quintic: {\n\n    In: function In(k) {\n      return k * k * k * k * k;\n    },\n\n    Out: function Out(k) {\n      return --k * k * k * k * k + 1;\n    },\n\n    InOut: function InOut(k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k * k;\n      }\n\n      return 0.5 * ((k -= 2) * k * k * k * k + 2);\n    }\n\n  },\n\n  Sinusoidal: {\n\n    In: function In(k) {\n      return 1 - Math.cos(k * Math.PI / 2);\n    },\n\n    Out: function Out(k) {\n      return Math.sin(k * Math.PI / 2);\n    },\n\n    InOut: function InOut(k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k));\n    }\n\n  },\n\n  Exponential: {\n\n    In: function In(k) {\n      return k === 0 ? 0 : Math.pow(1024, k - 1);\n    },\n\n    Out: function Out(k) {\n      return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n    },\n\n    InOut: function InOut(k) {\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      if ((k *= 2) < 1) {\n        return 0.5 * Math.pow(1024, k - 1);\n      }\n\n      return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n    }\n\n  },\n\n  Circular: {\n\n    In: function In(k) {\n      return 1 - Math.sqrt(1 - k * k);\n    },\n\n    Out: function Out(k) {\n      return Math.sqrt(1 - --k * k);\n    },\n\n    InOut: function InOut(k) {\n      if ((k *= 2) < 1) {\n        return -0.5 * (Math.sqrt(1 - k * k) - 1);\n      }\n\n      return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n    }\n\n  },\n\n  Elastic: {\n\n    In: function In(k) {\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      return -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n    },\n\n    Out: function Out(k) {\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      return Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n    },\n\n    InOut: function InOut(k) {\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      k *= 2;\n\n      if (k < 1) {\n        return -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n      }\n\n      return 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\n    }\n\n  },\n\n  Back: {\n\n    In: function In(k) {\n      var s = 1.70158;\n\n      return k * k * ((s + 1) * k - s);\n    },\n\n    Out: function Out(k) {\n      var s = 1.70158;\n\n      return --k * k * ((s + 1) * k + s) + 1;\n    },\n\n    InOut: function InOut(k) {\n      var s = 1.70158 * 1.525;\n\n      if ((k *= 2) < 1) {\n        return 0.5 * (k * k * ((s + 1) * k - s));\n      }\n\n      return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n    }\n\n  },\n\n  Bounce: {\n\n    In: function In(k) {\n      return 1 - TWEEN.Easing.Bounce.Out(1 - k);\n    },\n\n    Out: function Out(k) {\n      if (k < 1 / 2.75) {\n        return 7.5625 * k * k;\n      } else if (k < 2 / 2.75) {\n        return 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;\n      } else if (k < 2.5 / 2.75) {\n        return 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;\n      } else {\n        return 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;\n      }\n    },\n\n    InOut: function InOut(k) {\n      if (k < 0.5) {\n        return TWEEN.Easing.Bounce.In(k * 2) * 0.5;\n      }\n\n      return TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\n    }\n\n  }\n\n};\n\nTWEEN.Interpolation = {\n\n  Linear: function Linear(v, k) {\n    var m = v.length - 1;\n    var f = m * k;\n    var i = Math.floor(f);\n    var fn = TWEEN.Interpolation.Utils.Linear;\n\n    if (k < 0) {\n      return fn(v[0], v[1], f);\n    }\n\n    if (k > 1) {\n      return fn(v[m], v[m - 1], m - f);\n    }\n\n    return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n  },\n\n  Bezier: function Bezier(v, k) {\n    var b = 0;\n    var n = v.length - 1;\n    var pw = Math.pow;\n    var bn = TWEEN.Interpolation.Utils.Bernstein;\n\n    for (var i = 0; i <= n; i++) {\n      b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n    }\n\n    return b;\n  },\n\n  CatmullRom: function CatmullRom(v, k) {\n    var m = v.length - 1;\n    var f = m * k;\n    var i = Math.floor(f);\n    var fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n    if (v[0] === v[m]) {\n      if (k < 0) {\n        i = Math.floor(f = m * (1 + k));\n      }\n\n      return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n    } else {\n      if (k < 0) {\n        return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n      }\n\n      if (k > 1) {\n        return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n      }\n\n      return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n    }\n  },\n\n  Utils: {\n\n    Linear: function Linear(p0, p1, t) {\n      return (p1 - p0) * t + p0;\n    },\n\n    Bernstein: function Bernstein(n, i) {\n      var fc = TWEEN.Interpolation.Utils.Factorial;\n\n      return fc(n) / fc(i) / fc(n - i);\n    },\n\n    Factorial: function () {\n      var a = [1];\n\n      return function (n) {\n        var s = 1;\n\n        if (a[n]) {\n          return a[n];\n        }\n\n        for (var i = n; i > 1; i--) {\n          s *= i;\n        }\n\n        a[n] = s;\n        return s;\n      };\n    }(),\n\n    CatmullRom: function CatmullRom(p0, p1, p2, p3, t) {\n      var v0 = (p2 - p0) * 0.5;\n      var v1 = (p3 - p1) * 0.5;\n      var t2 = t * t;\n      var t3 = t * t2;\n\n      return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n    }\n\n  }\n\n};\n\n(function (root) {\n  if (typeof define === 'function' && __webpack_require__(351)) {\n    define([], function () {\n      return TWEEN;\n    });\n  } else if (typeof module !== 'undefined' && (typeof exports === 'undefined' ? 'undefined' : __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default()(exports)) === 'object') {\n    module.exports = TWEEN;\n  } else if (root !== undefined) {\n    root.TWEEN = TWEEN;\n  }\n})(this);\n\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"] = function (object, domElement) {\n  this.object = object;\n  this.domElement = domElement !== undefined ? domElement : document;\n  this.frameId;\n\n  this.enabled = true;\n\n  this.target = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n  this.center = this.target;\n\n  this.noZoom = false;\n  this.zoomSpeed = 1.0;\n\n  this.minDistance = 0;\n  this.maxDistance = Infinity;\n\n  this.minZoom = 0;\n  this.maxZoom = Infinity;\n\n  this.noRotate = false;\n  this.rotateSpeed = -0.15;\n\n  this.noPan = true;\n  this.keyPanSpeed = 7.0;\n  this.autoRotate = false;\n  this.autoRotateSpeed = 2.0;\n  this.minPolarAngle = 0;\n  this.maxPolarAngle = Math.PI;\n  this.momentumDampingFactor = 0.90;\n  this.momentumScalingFactor = -0.005;\n  this.momentumKeydownFactor = 20;\n\n  this.minFov = 30;\n  this.maxFov = 120;\n\n  this.minAzimuthAngle = -Infinity;\n  this.maxAzimuthAngle = Infinity;\n  this.noKeys = false;\n\n  this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n  this.mouseButtons = { ORBIT: __WEBPACK_IMPORTED_MODULE_8_three__[\"MOUSE\"].LEFT, ZOOM: __WEBPACK_IMPORTED_MODULE_8_three__[\"MOUSE\"].MIDDLE, PAN: __WEBPACK_IMPORTED_MODULE_8_three__[\"MOUSE\"].RIGHT };\n\n  var scope = this;\n\n  var EPS = 10e-8;\n  var MEPS = 10e-5;\n\n  var rotateStart = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var rotateEnd = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var rotateDelta = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\n  var panStart = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var panEnd = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var panDelta = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var panOffset = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n  var offset = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n  var dollyStart = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var dollyEnd = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var dollyDelta = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\n  var theta;\n  var phi;\n  var phiDelta = 0;\n  var thetaDelta = 0;\n  var scale = 1;\n  var pan = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n  var lastPosition = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n  var lastQuaternion = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n  var momentumLeft = 0,\n      momentumUp = 0;\n  var eventCurrent, eventPrevious;\n  var momentumOn = false;\n\n  var keyUp, keyBottom, keyLeft, keyRight;\n\n  var STATE = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\n\n  var state = STATE.NONE;\n\n  this.target0 = this.target.clone();\n  this.position0 = this.object.position.clone();\n  this.zoom0 = this.object.zoom;\n\n  var quat = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]().setFromUnitVectors(object.up, new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0));\n  var quatInverse = quat.clone().inverse();\n\n  var changeEvent = { type: 'change' };\n  var startEvent = { type: 'start' };\n  var endEvent = { type: 'end' };\n\n  this.setLastQuaternion = function (quaternion) {\n    lastQuaternion.copy(quaternion);\n    scope.object.quaternion.copy(quaternion);\n  };\n\n  this.getLastPosition = function () {\n    return lastPosition;\n  };\n\n  this.rotateLeft = function (angle) {\n    if (angle === undefined) {\n      angle = getAutoRotationAngle();\n    }\n\n    thetaDelta -= angle;\n  };\n\n  this.rotateUp = function (angle) {\n    if (angle === undefined) {\n      angle = getAutoRotationAngle();\n    }\n\n    phiDelta -= angle;\n  };\n\n  this.panLeft = function (distance) {\n    var te = this.object.matrix.elements;\n\n    panOffset.set(te[0], te[1], te[2]);\n    panOffset.multiplyScalar(-distance);\n\n    pan.add(panOffset);\n  };\n\n  this.panUp = function (distance) {\n    var te = this.object.matrix.elements;\n\n    panOffset.set(te[4], te[5], te[6]);\n    panOffset.multiplyScalar(distance);\n\n    pan.add(panOffset);\n  };\n\n  this.pan = function (deltaX, deltaY) {\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"]) {\n      var position = scope.object.position;\n      var offset = position.clone().sub(scope.target);\n      var targetDistance = offset.length();\n\n      targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0);\n\n      scope.panLeft(2 * deltaX * targetDistance / element.clientHeight);\n      scope.panUp(2 * deltaY * targetDistance / element.clientHeight);\n    } else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"]) {\n      scope.panLeft(deltaX * (scope.object.right - scope.object.left) / element.clientWidth);\n      scope.panUp(deltaY * (scope.object.top - scope.object.bottom) / element.clientHeight);\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n    }\n  };\n\n  this.momentum = function () {\n    if (!momentumOn) return;\n\n    if (Math.abs(momentumLeft) < MEPS && Math.abs(momentumUp) < MEPS) {\n      momentumOn = false;\n      return;\n    }\n\n    momentumUp *= this.momentumDampingFactor;\n    momentumLeft *= this.momentumDampingFactor;\n\n    thetaDelta -= this.momentumScalingFactor * momentumLeft;\n    phiDelta -= this.momentumScalingFactor * momentumUp;\n  };\n\n  this.dollyIn = function (dollyScale) {\n    if (dollyScale === undefined) {\n      dollyScale = getZoomScale();\n    }\n\n    if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"]) {\n      scale /= dollyScale;\n    } else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"]) {\n      scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom * dollyScale));\n      scope.object.updateProjectionMatrix();\n      scope.dispatchEvent(changeEvent);\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n    }\n  };\n\n  this.dollyOut = function (dollyScale) {\n    if (dollyScale === undefined) {\n      dollyScale = getZoomScale();\n    }\n\n    if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"]) {\n      scale *= dollyScale;\n    } else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"]) {\n      scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom / dollyScale));\n      scope.object.updateProjectionMatrix();\n      scope.dispatchEvent(changeEvent);\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n    }\n  };\n\n  this.update = function (ignoreUpdate) {\n    var position = this.object.position;\n\n    offset.copy(position).sub(this.target);\n\n    offset.applyQuaternion(quat);\n\n    theta = Math.atan2(offset.x, offset.z);\n\n    phi = Math.atan2(Math.sqrt(offset.x * offset.x + offset.z * offset.z), offset.y);\n\n    if (this.autoRotate && state === STATE.NONE) {\n      this.rotateLeft(getAutoRotationAngle());\n    }\n\n    this.momentum();\n\n    theta += thetaDelta;\n    phi += phiDelta;\n\n    theta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, theta));\n\n    phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, phi));\n\n    phi = Math.max(EPS, Math.min(Math.PI - EPS, phi));\n\n    var radius = offset.length() * scale;\n\n    radius = Math.max(this.minDistance, Math.min(this.maxDistance, radius));\n\n    this.target.add(pan);\n\n    offset.x = radius * Math.sin(phi) * Math.sin(theta);\n    offset.y = radius * Math.cos(phi);\n    offset.z = radius * Math.sin(phi) * Math.cos(theta);\n\n    offset.applyQuaternion(quatInverse);\n\n    position.copy(this.target).add(offset);\n\n    this.object.lookAt(this.target);\n\n    thetaDelta = 0;\n    phiDelta = 0;\n    scale = 1;\n    pan.set(0, 0, 0);\n\n    if (lastPosition.distanceToSquared(this.object.position) > EPS || 8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS) {\n      ignoreUpdate !== true && this.dispatchEvent(changeEvent);\n\n      lastPosition.copy(this.object.position);\n      lastQuaternion.copy(this.object.quaternion);\n    }\n  };\n\n  this.reset = function () {\n    state = STATE.NONE;\n\n    this.target.copy(this.target0);\n    this.object.position.copy(this.position0);\n    this.object.zoom = this.zoom0;\n\n    this.object.updateProjectionMatrix();\n    this.dispatchEvent(changeEvent);\n\n    this.update();\n  };\n\n  this.getPolarAngle = function () {\n    return phi;\n  };\n\n  this.getAzimuthalAngle = function () {\n    return theta;\n  };\n\n  function getAutoRotationAngle() {\n    return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n  }\n\n  function getZoomScale() {\n    return Math.pow(0.95, scope.zoomSpeed);\n  }\n\n  function onMouseDown(event) {\n    momentumOn = false;\n\n    momentumLeft = momentumUp = 0;\n\n    if (scope.enabled === false) return;\n    event.preventDefault();\n\n    if (event.button === scope.mouseButtons.ORBIT) {\n      if (scope.noRotate === true) return;\n\n      state = STATE.ROTATE;\n\n      rotateStart.set(event.clientX, event.clientY);\n    } else if (event.button === scope.mouseButtons.ZOOM) {\n      if (scope.noZoom === true) return;\n\n      state = STATE.DOLLY;\n\n      dollyStart.set(event.clientX, event.clientY);\n    } else if (event.button === scope.mouseButtons.PAN) {\n      if (scope.noPan === true) return;\n\n      state = STATE.PAN;\n\n      panStart.set(event.clientX, event.clientY);\n    }\n\n    if (state !== STATE.NONE) {\n      document.addEventListener('mousemove', onMouseMove, false);\n      document.addEventListener('mouseup', onMouseUp, false);\n      scope.dispatchEvent(startEvent);\n    }\n\n    scope.update();\n  }\n\n  function onMouseMove(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    if (state === STATE.ROTATE) {\n      if (scope.noRotate === true) return;\n\n      rotateEnd.set(event.clientX, event.clientY);\n      rotateDelta.subVectors(rotateEnd, rotateStart);\n\n      scope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n      scope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n      rotateStart.copy(rotateEnd);\n\n      if (eventPrevious) {\n        momentumLeft = event.clientX - eventPrevious.clientX;\n        momentumUp = event.clientY - eventPrevious.clientY;\n      }\n\n      eventPrevious = event;\n    } else if (state === STATE.DOLLY) {\n      if (scope.noZoom === true) return;\n\n      dollyEnd.set(event.clientX, event.clientY);\n      dollyDelta.subVectors(dollyEnd, dollyStart);\n\n      if (dollyDelta.y > 0) {\n        scope.dollyIn();\n      } else if (dollyDelta.y < 0) {\n        scope.dollyOut();\n      }\n\n      dollyStart.copy(dollyEnd);\n    } else if (state === STATE.PAN) {\n      if (scope.noPan === true) return;\n\n      panEnd.set(event.clientX, event.clientY);\n      panDelta.subVectors(panEnd, panStart);\n\n      scope.pan(panDelta.x, panDelta.y);\n\n      panStart.copy(panEnd);\n    }\n\n    if (state !== STATE.NONE) scope.update();\n  }\n\n  function onMouseUp() {\n    momentumOn = true;\n\n    eventPrevious = undefined;\n\n    if (scope.enabled === false) return;\n\n    document.removeEventListener('mousemove', onMouseMove, false);\n    document.removeEventListener('mouseup', onMouseUp, false);\n    scope.dispatchEvent(endEvent);\n    state = STATE.NONE;\n  }\n\n  function onMouseWheel(event) {\n    if (scope.enabled === false || scope.noZoom === true || state !== STATE.NONE) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    var delta = 0;\n\n    if (event.wheelDelta !== undefined) {\n      delta = event.wheelDelta;\n    } else if (event.detail !== undefined) {\n      delta = -event.detail;\n    }\n\n    if (delta > 0) {\n      scope.object.fov = scope.object.fov < scope.maxFov ? scope.object.fov + 1 : scope.maxFov;\n      scope.object.updateProjectionMatrix();\n    } else if (delta < 0) {\n      scope.object.fov = scope.object.fov > scope.minFov ? scope.object.fov - 1 : scope.minFov;\n      scope.object.updateProjectionMatrix();\n    }\n\n    scope.update();\n    scope.dispatchEvent(changeEvent);\n    scope.dispatchEvent(startEvent);\n    scope.dispatchEvent(endEvent);\n  }\n\n  function onKeyUp(event) {\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        keyUp = false;\n        break;\n\n      case scope.keys.BOTTOM:\n        keyBottom = false;\n        break;\n\n      case scope.keys.LEFT:\n        keyLeft = false;\n        break;\n\n      case scope.keys.RIGHT:\n        keyRight = false;\n        break;\n    }\n  }\n\n  function onKeyDown(event) {\n    if (scope.enabled === false || scope.noKeys === true || scope.noRotate === true) return;\n\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        keyUp = true;\n        break;\n\n      case scope.keys.BOTTOM:\n        keyBottom = true;\n        break;\n\n      case scope.keys.LEFT:\n        keyLeft = true;\n        break;\n\n      case scope.keys.RIGHT:\n        keyRight = true;\n        break;\n    }\n\n    if (keyUp || keyBottom || keyLeft || keyRight) {\n      momentumOn = true;\n\n      if (keyUp) momentumUp = -scope.rotateSpeed * scope.momentumKeydownFactor;\n      if (keyBottom) momentumUp = scope.rotateSpeed * scope.momentumKeydownFactor;\n      if (keyLeft) momentumLeft = -scope.rotateSpeed * scope.momentumKeydownFactor;\n      if (keyRight) momentumLeft = scope.rotateSpeed * scope.momentumKeydownFactor;\n    }\n  }\n\n  function touchstart(event) {\n    momentumOn = false;\n\n    momentumLeft = momentumUp = 0;\n\n    if (scope.enabled === false) return;\n\n    switch (event.touches.length) {\n      case 1:\n\n        if (scope.noRotate === true) return;\n\n        state = STATE.TOUCH_ROTATE;\n\n        rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n        break;\n\n      case 2:\n\n        if (scope.noZoom === true) return;\n\n        state = STATE.TOUCH_DOLLY;\n\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n\n        break;\n\n      case 3:\n\n        if (scope.noPan === true) return;\n\n        state = STATE.TOUCH_PAN;\n\n        panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n        break;\n\n      default:\n\n        state = STATE.NONE;\n    }\n\n    if (state !== STATE.NONE) scope.dispatchEvent(startEvent);\n  }\n\n  function touchmove(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    switch (event.touches.length) {\n      case 1:\n\n        if (scope.noRotate === true) return;\n        if (state !== STATE.TOUCH_ROTATE) return;\n\n        rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n        rotateDelta.subVectors(rotateEnd, rotateStart);\n\n        scope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n        scope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n        rotateStart.copy(rotateEnd);\n\n        if (eventPrevious) {\n          momentumLeft = event.touches[0].pageX - eventPrevious.pageX;\n          momentumUp = event.touches[0].pageY - eventPrevious.pageY;\n        }\n\n        eventPrevious = {\n          pageX: event.touches[0].pageX,\n          pageY: event.touches[0].pageY\n        };\n\n        scope.update();\n        break;\n\n      case 2:\n\n        if (scope.noZoom === true) return;\n        if (state !== STATE.TOUCH_DOLLY) return;\n\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n\n        if (event.scale < 1) {\n          scope.object.fov = scope.object.fov < scope.maxFov ? scope.object.fov + 1 : scope.maxFov;\n          scope.object.updateProjectionMatrix();\n        } else if (event.scale > 1) {\n          scope.object.fov = scope.object.fov > scope.minFov ? scope.object.fov - 1 : scope.minFov;\n          scope.object.updateProjectionMatrix();\n        }\n\n        scope.update();\n        scope.dispatchEvent(changeEvent);\n        break;\n\n      case 3:\n\n        if (scope.noPan === true) return;\n        if (state !== STATE.TOUCH_PAN) return;\n\n        panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n        panDelta.subVectors(panEnd, panStart);\n\n        scope.pan(panDelta.x, panDelta.y);\n\n        panStart.copy(panEnd);\n\n        scope.update();\n        break;\n\n      default:\n\n        state = STATE.NONE;\n    }\n  }\n\n  function touchend() {\n    momentumOn = true;\n\n    eventPrevious = undefined;\n\n    if (scope.enabled === false) return;\n\n    scope.dispatchEvent(endEvent);\n    state = STATE.NONE;\n  }\n\n  this.domElement.addEventListener('mousedown', onMouseDown, false);\n  this.domElement.addEventListener('mousewheel', onMouseWheel, false);\n  this.domElement.addEventListener('DOMMouseScroll', onMouseWheel, false);\n\n  this.domElement.addEventListener('touchstart', touchstart, false);\n  this.domElement.addEventListener('touchend', touchend, false);\n  this.domElement.addEventListener('touchmove', touchmove, false);\n\n  window.addEventListener('keyup', onKeyUp, false);\n  window.addEventListener('keydown', onKeyDown, false);\n\n  this.update();\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"].prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n__WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"].prototype.constructor = __WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"];\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"] = function (camera, domElement) {\n  var scope = this;\n  var changeEvent = { type: 'change' };\n\n  var rotY = 0;\n  var rotX = 0;\n  var tempX = 0;\n  var tempY = 0;\n\n  this.camera = camera;\n  this.camera.rotation.reorder('YXZ');\n  this.domElement = domElement !== undefined ? domElement : document;\n\n  this.enabled = true;\n\n  this.deviceOrientation = {};\n  this.screenOrientation = 0;\n\n  this.alpha = 0;\n  this.alphaOffsetAngle = 0;\n\n  var onDeviceOrientationChangeEvent = function onDeviceOrientationChangeEvent(event) {\n    scope.deviceOrientation = event;\n  };\n\n  var onScreenOrientationChangeEvent = function onScreenOrientationChangeEvent() {\n    scope.screenOrientation = window.orientation || 0;\n  };\n\n  var onTouchStartEvent = function onTouchStartEvent(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    tempX = event.touches[0].pageX;\n    tempY = event.touches[0].pageY;\n  };\n\n  var onTouchMoveEvent = function onTouchMoveEvent(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    rotY += __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad((event.touches[0].pageX - tempX) / 4);\n    rotX += __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad((tempY - event.touches[0].pageY) / 4);\n\n    scope.updateAlphaOffsetAngle(rotY);\n\n    tempX = event.touches[0].pageX;\n    tempY = event.touches[0].pageY;\n  };\n\n  var setCameraQuaternion = function setCameraQuaternion(quaternion, alpha, beta, gamma, orient) {\n    var zee = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 0, 1);\n\n    var euler = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Euler\"]();\n\n    var q0 = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n    var q1 = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"](-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5));\n\n    var vectorFingerY;\n    var fingerQY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n    var fingerQX = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n    if (scope.screenOrientation == 0) {\n      vectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0, 0);\n      fingerQY.setFromAxisAngle(vectorFingerY, -rotX);\n    } else if (scope.screenOrientation == 180) {\n      vectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0, 0);\n      fingerQY.setFromAxisAngle(vectorFingerY, rotX);\n    } else if (scope.screenOrientation == 90) {\n      vectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n      fingerQY.setFromAxisAngle(vectorFingerY, rotX);\n    } else if (scope.screenOrientation == -90) {\n      vectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n      fingerQY.setFromAxisAngle(vectorFingerY, -rotX);\n    }\n\n    q1.multiply(fingerQY);\n    q1.multiply(fingerQX);\n\n    euler.set(beta, alpha, -gamma, 'YXZ');\n\n    quaternion.setFromEuler(euler);\n\n    quaternion.multiply(q1);\n\n    quaternion.multiply(q0.setFromAxisAngle(zee, -orient));\n  };\n\n  this.connect = function () {\n    onScreenOrientationChangeEvent();\n\n    window.addEventListener('orientationchange', onScreenOrientationChangeEvent, false);\n    window.addEventListener('deviceorientation', onDeviceOrientationChangeEvent, false);\n    window.addEventListener('deviceorientation', this.update.bind(this), false);\n\n    scope.domElement.addEventListener('touchstart', onTouchStartEvent, false);\n    scope.domElement.addEventListener('touchmove', onTouchMoveEvent, false);\n\n    scope.enabled = true;\n  };\n\n  this.disconnect = function () {\n    window.removeEventListener('orientationchange', onScreenOrientationChangeEvent, false);\n    window.removeEventListener('deviceorientation', onDeviceOrientationChangeEvent, false);\n    window.removeEventListener('deviceorientation', this.update.bind(this), false);\n\n    scope.domElement.removeEventListener('touchstart', onTouchStartEvent, false);\n    scope.domElement.removeEventListener('touchmove', onTouchMoveEvent, false);\n\n    scope.enabled = false;\n  };\n\n  this.update = function (ignoreUpdate) {\n    if (scope.enabled === false) return;\n\n    var alpha = scope.deviceOrientation.alpha ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.deviceOrientation.alpha) + this.alphaOffsetAngle : 0;\n    var beta = scope.deviceOrientation.beta ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.deviceOrientation.beta) : 0;\n    var gamma = scope.deviceOrientation.gamma ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.deviceOrientation.gamma) : 0;\n    var orient = scope.screenOrientation ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.screenOrientation) : 0;\n\n    setCameraQuaternion(scope.camera.quaternion, alpha, beta, gamma, orient);\n    this.alpha = alpha;\n\n    ignoreUpdate !== true && this.dispatchEvent(changeEvent);\n  };\n\n  this.updateAlphaOffsetAngle = function (angle) {\n    this.alphaOffsetAngle = angle;\n    this.update();\n  };\n\n  this.dispose = function () {\n    this.disconnect();\n  };\n\n  this.connect();\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"].prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n__WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"].prototype.constructor = __WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"];\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"] = function () {};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"].prototype = {\n\n  constructor: __WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"],\n\n  set: function set(direction, axis, angle) {\n    this.direction = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();this.direction.copy(direction);\n    this.axis = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();this.axis.copy(axis);\n    this.angle = angle;\n    return this;\n  },\n\n  _sign: function _sign(a) {\n    return a < 0 ? -1 : a > 0 ? 1 : 0;\n  },\n\n  _cosh: function _cosh(x) {\n    return (Math.exp(x) + Math.exp(-x)) / 2;\n  },\n\n  _sinhInverse: function _sinhInverse(x) {\n    return Math.log(Math.abs(x) + Math.sqrt(x * x + 1));\n  },\n\n  modify: function modify(geometry) {\n    var thirdAxis = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();thirdAxis.crossVectors(this.direction, this.axis);\n\n    var P = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]();\n    P.set(thirdAxis.x, thirdAxis.y, thirdAxis.z, 0, this.direction.x, this.direction.y, this.direction.z, 0, this.axis.x, this.axis.y, this.axis.z, 0, 0, 0, 0, 1).transpose();\n\n    var InverseP = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]().getInverse(P);\n    var newVertices = [];var oldVertices = [];var anglesBetweenOldandNewVertices = [];\n\n    var meshGeometryBoundingBoxMaxx = 0;var meshGeometryBoundingBoxMinx = 0;\n    var meshGeometryBoundingBoxMaxy = 0;var meshGeometryBoundingBoxMiny = 0;\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      newVertices[i] = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();newVertices[i].copy(geometry.vertices[i]).applyMatrix4(InverseP);\n      if (newVertices[i].x > meshGeometryBoundingBoxMaxx) {\n        meshGeometryBoundingBoxMaxx = newVertices[i].x;\n      }\n      if (newVertices[i].x < meshGeometryBoundingBoxMinx) {\n        meshGeometryBoundingBoxMinx = newVertices[i].x;\n      }\n      if (newVertices[i].y > meshGeometryBoundingBoxMaxy) {\n        meshGeometryBoundingBoxMaxy = newVertices[i].y;\n      }\n      if (newVertices[i].y < meshGeometryBoundingBoxMiny) {\n        meshGeometryBoundingBoxMiny = newVertices[i].y;\n      }\n    }\n\n    var meshWidthold = meshGeometryBoundingBoxMaxx - meshGeometryBoundingBoxMinx;\n    var meshDepth = meshGeometryBoundingBoxMaxy - meshGeometryBoundingBoxMiny;\n    var ParamB = 2 * this._sinhInverse(Math.tan(this.angle)) / meshWidthold;\n    var oldMiddlex = (meshGeometryBoundingBoxMaxx + meshGeometryBoundingBoxMinx) / 2;\n    var oldMiddley = (meshGeometryBoundingBoxMaxy + meshGeometryBoundingBoxMiny) / 2;\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      oldVertices[i] = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();oldVertices[i].copy(newVertices[i]);\n      newVertices[i].x = this._sign(newVertices[i].x - oldMiddlex) * 1 / ParamB * this._sinhInverse((newVertices[i].x - oldMiddlex) * ParamB);\n    }\n\n    var meshWidth = 2 / ParamB * this._sinhInverse(meshWidthold / 2 * ParamB);\n\n    var NewParamB = 2 * this._sinhInverse(Math.tan(this.angle)) / meshWidth;\n\n    var rightEdgePos = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](meshWidth / 2, -meshDepth / 2, 0);\n    rightEdgePos.y = 1 / NewParamB * this._cosh(NewParamB * rightEdgePos.x) - 1 / NewParamB - meshDepth / 2;\n\n    var bendCenter = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, rightEdgePos.y + rightEdgePos.x / Math.tan(this.angle), 0);\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      var x0 = this._sign(oldVertices[i].x - oldMiddlex) * 1 / ParamB * this._sinhInverse((oldVertices[i].x - oldMiddlex) * ParamB);\n      var y0 = 1 / NewParamB * this._cosh(NewParamB * x0) - 1 / NewParamB;\n\n      var k = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](bendCenter.x - x0, bendCenter.y - (y0 - meshDepth / 2), bendCenter.z).normalize();\n\n      var Q = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n      Q.addVectors(new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](x0, y0 - meshDepth / 2, oldVertices[i].z), k.multiplyScalar(oldVertices[i].y + meshDepth / 2));\n      newVertices[i].x = Q.x;newVertices[i].y = Q.y;\n    }\n\n    var middle = oldMiddlex * meshWidth / meshWidthold;\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      var O = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](oldMiddlex, oldMiddley, oldVertices[i].z);\n      var p = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();p.subVectors(oldVertices[i], O);\n      var q = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();q.subVectors(newVertices[i], O);\n\n      anglesBetweenOldandNewVertices[i] = Math.acos(1 / this._cosh(ParamB * newVertices[i].x)) * this._sign(newVertices[i].x);\n\n      newVertices[i].x = newVertices[i].x + middle;\n      geometry.vertices[i].copy(newVertices[i].applyMatrix4(P));\n    }\n\n    geometry.computeFaceNormals();\n    geometry.verticesNeedUpdate = true;\n    geometry.normalsNeedUpdate = true;\n\n    var fvNames = ['a', 'b', 'c', 'd'];\n\n    for (var f = 0, fl = geometry.faces.length; f < fl; f++) {\n      var face = geometry.faces[f];\n      if (face.vertexNormals === undefined) {\n        continue;\n      }\n      for (var v = 0, vl = face.vertexNormals.length; v < vl; v++) {\n        var angle = anglesBetweenOldandNewVertices[face[fvNames[v]]];\n        var x = this.axis.x,\n            y = this.axis.y,\n            z = this.axis.z;\n\n        var rotateMatrix = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix3\"]();\n        rotateMatrix.set(Math.cos(angle) + (1 - Math.cos(angle)) * x * x, (1 - Math.cos(angle)) * x * y - Math.sin(angle) * z, (1 - Math.cos(angle)) * x * z + Math.sin(angle) * y, (1 - Math.cos(angle)) * y * x + Math.sin(angle) * z, Math.cos(angle) + (1 - Math.cos(angle)) * y * y, (1 - Math.cos(angle)) * y * z - Math.sin(angle) * x, (1 - Math.cos(angle)) * z * x - Math.sin(angle) * y, (1 - Math.cos(angle)) * z * y + Math.sin(angle) * x, Math.cos(angle) + (1 - Math.cos(angle)) * z * z);\n\n        face.vertexNormals[v].applyMatrix3(rotateMatrix);\n      }\n    }\n\n\n    return this;\n  }\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"CardboardEffect\"] = function (renderer) {\n  var _camera = new __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"](-1, 1, 1, -1, 0, 1);\n\n  var _scene = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Scene\"]();\n\n  var _stereo = new __WEBPACK_IMPORTED_MODULE_8_three__[\"StereoCamera\"]();\n  _stereo.aspect = 0.5;\n\n  var _params = { minFilter: __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"], magFilter: __WEBPACK_IMPORTED_MODULE_8_three__[\"NearestFilter\"], format: __WEBPACK_IMPORTED_MODULE_8_three__[\"RGBAFormat\"] };\n\n  var _renderTarget = new __WEBPACK_IMPORTED_MODULE_8_three__[\"WebGLRenderTarget\"](512, 512, _params);\n  _renderTarget.scissorTest = true;\n  _renderTarget.texture.generateMipmaps = false;\n\n  var distortion = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"](0.441, 0.156);\n\n  var geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"PlaneBufferGeometry\"](1, 1, 10, 20).removeAttribute('normal').toNonIndexed();\n\n  var positions = geometry.attributes.position.array;\n  var uvs = geometry.attributes.uv.array;\n\n  geometry.attributes.position.count *= 2;\n  geometry.attributes.uv.count *= 2;\n\n  var positions2 = new Float32Array(positions.length * 2);\n  positions2.set(positions);\n  positions2.set(positions, positions.length);\n\n  var uvs2 = new Float32Array(uvs.length * 2);\n  uvs2.set(uvs);\n  uvs2.set(uvs, uvs.length);\n\n  var vector = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var length = positions.length / 3;\n\n  for (var i = 0, l = positions2.length / 3; i < l; i++) {\n    vector.x = positions2[i * 3 + 0];\n    vector.y = positions2[i * 3 + 1];\n\n    var dot = vector.dot(vector);\n    var scalar = 1.5 + (distortion.x + distortion.y * dot) * dot;\n\n    var offset = i < length ? 0 : 1;\n\n    positions2[i * 3 + 0] = vector.x / scalar * 1.5 - 0.5 + offset;\n    positions2[i * 3 + 1] = vector.y / scalar * 3.0;\n\n    uvs2[i * 2] = (uvs2[i * 2] + offset) * 0.5;\n  }\n\n  geometry.attributes.position.array = positions2;\n  geometry.attributes.uv.array = uvs2;\n\n  var material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ map: _renderTarget.texture });\n  var mesh = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"](geometry, material);\n  _scene.add(mesh);\n\n  this.setSize = function (width, height) {\n    renderer.setSize(width, height);\n\n    var pixelRatio = renderer.getPixelRatio();\n\n    _renderTarget.setSize(width * pixelRatio, height * pixelRatio);\n  };\n\n  this.render = function (scene, camera) {\n    scene.updateMatrixWorld();\n\n    if (camera.parent === null) camera.updateMatrixWorld();\n\n    _stereo.update(camera);\n\n    var width = _renderTarget.width / 2;\n    var height = _renderTarget.height;\n\n    _renderTarget.scissor.set(0, 0, width, height);\n    _renderTarget.viewport.set(0, 0, width, height);\n    renderer.render(scene, _stereo.cameraL, _renderTarget);\n\n    _renderTarget.scissor.set(width, 0, width, height);\n    _renderTarget.viewport.set(width, 0, width, height);\n    renderer.render(scene, _stereo.cameraR, _renderTarget);\n\n    renderer.render(_scene, _camera);\n  };\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"StereoEffect\"] = function (renderer) {\n  var _stereo = new __WEBPACK_IMPORTED_MODULE_8_three__[\"StereoCamera\"]();\n  _stereo.aspect = 0.5;\n\n  this.setEyeSeparation = function (eyeSep) {\n    _stereo.eyeSep = eyeSep;\n  };\n\n  this.setSize = function (width, height) {\n    renderer.setSize(width, height);\n  };\n\n  this.render = function (scene, camera) {\n    scene.updateMatrixWorld();\n\n    if (camera.parent === null) camera.updateMatrixWorld();\n\n    _stereo.update(camera);\n\n    var size = renderer.getSize();\n\n    if (renderer.autoClear) renderer.clear();\n    renderer.setScissorTest(true);\n\n    renderer.setScissor(0, 0, size.width / 2, size.height);\n    renderer.setViewport(0, 0, size.width / 2, size.height);\n    renderer.render(scene, _stereo.cameraL);\n\n    renderer.setScissor(size.width / 2, 0, size.width / 2, size.height);\n    renderer.setViewport(size.width / 2, 0, size.width / 2, size.height);\n    renderer.render(scene, _stereo.cameraR);\n\n    renderer.setScissorTest(false);\n  };\n};\nvar GSVPANO = GSVPANO || {};\nGSVPANO.PanoLoader = function (parameters) {\n  'use strict';\n\n  var _parameters = parameters || {},\n      _location,\n      _zoom,\n      _panoId,\n      _panoClient = new google.maps.StreetViewService(),\n      _count = 0,\n      _total = 0,\n      _canvas = [],\n      _ctx = [],\n      _wc = 0,\n      _hc = 0,\n      result = null,\n      rotation = 0,\n      copyright = '',\n      onSizeChange = null,\n      onPanoramaLoad = null;\n\n  var levelsW = [1, 2, 4, 7, 13, 26],\n      levelsH = [1, 1, 2, 4, 7, 13];\n\n  var widths = [416, 832, 1664, 3328, 6656, 13312],\n      heights = [416, 416, 832, 1664, 3328, 6656];\n\n  var gl = null;\n  try {\n    var canvas = document.createElement('canvas');\n    gl = canvas.getContext('experimental-webgl');\n    if (gl == null) {\n      gl = canvas.getContext('webgl');\n    }\n  } catch (error) {}\n\n  var maxW = 1024,\n      maxH = 1024;\n\n  if (gl) {\n    var maxTexSize = Math.max(gl.getParameter(gl.MAX_TEXTURE_SIZE), 6656);\n\n    maxW = maxH = maxTexSize;\n  }\n\n  this.setProgress = function (loaded, total) {\n    if (this.onProgress) {\n      this.onProgress({ loaded: loaded, total: total });\n    }\n  };\n\n  this.throwError = function (message) {\n    if (this.onError) {\n      this.onError(message);\n    } else {\n      console.error(message);\n    }\n  };\n\n  this.adaptTextureToZoom = function () {\n    var w = levelsW[_zoom] * 416,\n        h = levelsH[_zoom] * 416;\n\n    w = widths[_zoom];\n    h = heights[_zoom];\n\n    _wc = Math.ceil(w / maxW);\n    _hc = Math.ceil(h / maxH);\n\n    _canvas = [];_ctx = [];\n\n    var ptr = 0;\n    for (var y = 0; y < _hc; y++) {\n      for (var x = 0; x < _wc; x++) {\n        var c = document.createElement('canvas');\n        if (x < _wc - 1) c.width = maxW;else c.width = w - maxW * x;\n        if (y < _hc - 1) c.height = maxH;else c.height = h - maxH * y;\n        _canvas.push(c);\n        _ctx.push(c.getContext('2d'));\n        ptr++;\n      }\n    }\n  };\n\n  this.composeFromTile = function (x, y, texture) {\n    x *= 512;\n    y *= 512;\n    var px = Math.floor(x / maxW),\n        py = Math.floor(y / maxH);\n\n    x -= px * maxW;\n    y -= py * maxH;\n\n    _ctx[py * _wc + px].drawImage(texture, 0, 0, texture.width, texture.height, x, y, 512, 512);\n    this.progress();\n  };\n\n  this.progress = function () {\n    _count++;\n\n    var p = Math.round(_count * 100 / _total);\n    this.setProgress(_count, _total);\n\n    if (_count === _total) {\n      this.canvas = _canvas;\n      this.panoId = _panoId;\n      this.zoom = _zoom;\n      if (this.onPanoramaLoad) {\n        this.onPanoramaLoad(_canvas[0]);\n      }\n    }\n  };\n\n  this.loadFromId = function (id) {\n    _panoId = id;\n    this.composePanorama();\n  };\n\n  this.composePanorama = function () {\n    this.setProgress(0, 1);\n\n    var w = levelsW[_zoom],\n        h = levelsH[_zoom],\n        self = this,\n        url,\n        x,\n        y;\n\n    _count = 0;\n    _total = w * h;\n\n    var self = this;\n    for (var y = 0; y < h; y++) {\n      for (var x = 0; x < w; x++) {\n        var url = 'https://geo0.ggpht.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=tile&zoom=' + _zoom + '&x=' + x + '&y=' + y + '&panoid=' + _panoId + '&nbt&fover=2';\n        (function (x, y) {\n          if (_parameters.useWebGL) {\n            var texture = __WEBPACK_IMPORTED_MODULE_8_three__[\"ImageUtils\"].loadTexture(url, null, function () {\n              self.composeFromTile(x, y, texture);\n            });\n          } else {\n            var img = new Image();\n            img.addEventListener('load', function () {\n              self.composeFromTile(x, y, this);\n            });\n            img.crossOrigin = '';\n            img.src = url;\n          }\n        })(x, y);\n      }\n    }\n  };\n\n  this.load = function (panoid) {\n    this.loadPano(panoid);\n  };\n\n  this.loadPano = function (id) {\n    var self = this;\n    _panoClient.getPanoramaById(id, function (result, status) {\n      if (status === google.maps.StreetViewStatus.OK) {\n        self.result = result;\n        if (self.onPanoramaData) self.onPanoramaData(result);\n\n        copyright = result.copyright;\n        self.copyright = result.copyright;\n        _panoId = result.location.pano;\n        self.location = location;\n        self.composePanorama();\n      } else {\n        if (self.onNoPanoramaData) self.onNoPanoramaData(status);\n        self.throwError('Could not retrieve panorama for the following reason: ' + status);\n      }\n    });\n  };\n\n  this.setZoom = function (z) {\n    _zoom = z;\n    this.adaptTextureToZoom();\n  };\n\n  this.setZoom(_parameters.zoom || 1);\n};(function () {\n  'use strict';\n\n  PANOLENS.DataImageSource = 'https://pchen66.github.io/Panolens/asset/icon/';\n\n  PANOLENS.DataImage = {\n    Info: PANOLENS.DataImageSource + 'information.png',\n    Arrow: PANOLENS.DataImageSource + 'arrow-up.png',\n    FullscreenEnter: PANOLENS.DataImageSource + 'fullscreen.png',\n    FullscreenLeave: PANOLENS.DataImageSource + 'fullscreen-exit.png',\n    VideoPlay: PANOLENS.DataImageSource + 'video-play.png',\n    VideoPause: PANOLENS.DataImageSource + 'pause.png',\n    WhiteTile: PANOLENS.DataImageSource + 'tiles.png',\n    ReticleIdle: PANOLENS.DataImageSource + 'reticle-idle.png',\n    Setting: PANOLENS.DataImageSource + 'setting.png',\n    ChevronRight: PANOLENS.DataImageSource + 'chevron-right.png',\n    Check: PANOLENS.DataImageSource + 'check.png',\n    ViewIndicator: PANOLENS.DataImageSource + 'view-indicator.svg',\n    ReticleDwell: PANOLENS.DataImageSource + 'reticle-animation.png'\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.Controls = {\n\n    ORBIT: 0,\n\n    DEVICEORIENTATION: 1\n\n  };\n\n  PANOLENS.Modes = {\n    UNKNOWN: 0,\n\n    NORMAL: 1,\n\n    CARDBOARD: 2,\n\n    STEREO: 3\n\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.Utils = {};\n\n  PANOLENS.Utils.checkTouchSupported = function () {\n    return window ? 'ontouchstart' in window || window.navigator.msMaxTouchPoints : false;\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.Utils.ImageLoader = {};\n\n  PANOLENS.Utils.ImageLoader.load = function (url, onLoad, onProgress, onError) {\n    var cached, request, arrayBufferView, blob, urlCreator, image, reference;\n\n    for (var iconName in PANOLENS.DataImage) {\n      if (PANOLENS.DataImage.hasOwnProperty(iconName) && url === PANOLENS.DataImage[iconName]) {\n        reference = iconName;\n      }\n    }\n\n    cached = __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].get(reference || url);\n\n    if (cached !== undefined) {\n      if (onLoad) {\n        setTimeout(function () {\n          if (onProgress) {\n            onProgress({ loaded: 1, total: 1 });\n          }\n\n          onLoad(cached);\n        }, 0);\n      }\n\n      return cached;\n    }\n\n    urlCreator = window.URL || window.webkitURL;\n    image = document.createElementNS('http://www.w3.org/1999/xhtml', 'img');\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].add(reference || url, image);\n\n    function onImageLoaded() {\n      urlCreator.revokeObjectURL(image.src);\n      onLoad && onLoad(image);\n    }\n\n    if (url.indexOf('data:') === 0) {\n      image.addEventListener('load', onImageLoaded, false);\n      image.src = url;\n      return image;\n    }\n\n    image.crossOrigin = this.crossOrigin !== undefined ? this.crossOrigin : '';\n\n    request = new XMLHttpRequest();\n    request.open('GET', url, true);\n    request.responseType = 'arraybuffer';\n    request.onprogress = function (event) {\n      if (event.lengthComputable) {\n        onProgress && onProgress({ loaded: event.loaded, total: event.total });\n      }\n    };\n    request.onloadend = function (event) {\n      arrayBufferView = new Uint8Array(this.response);\n      blob = new Blob([arrayBufferView]);\n\n      image.addEventListener('load', onImageLoaded, false);\n      image.src = urlCreator.createObjectURL(blob);\n    };\n\n    request.send(null);\n  };\n\n  __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].enabled = true;\n})();(function () {\n  'use strict';\n\n  PANOLENS.Utils.TextureLoader = {};\n\n  PANOLENS.Utils.TextureLoader.load = function (url, onLoad, onProgress, onError) {\n    var texture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]();\n\n    PANOLENS.Utils.ImageLoader.load(url, function (image) {\n      texture.image = image;\n      texture.needsUpdate = true;\n\n      onLoad && onLoad(texture);\n    }, onProgress, onError);\n\n    return texture;\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.Utils.CubeTextureLoader = {};\n\n  PANOLENS.Utils.CubeTextureLoader.load = function (urls, onLoad, onProgress, onError) {\n    var texture, loaded, progress, all, loadings;\n\n    texture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"CubeTexture\"]([]);\n\n    loaded = 0;\n    progress = {};\n    all = {};\n\n    urls.map(function (url, index) {\n      PANOLENS.Utils.ImageLoader.load(url, function (image) {\n        texture.images[index] = image;\n\n        loaded++;\n\n        if (loaded === 6) {\n          texture.needsUpdate = true;\n\n          onLoad && onLoad(texture);\n        }\n      }, function (event) {\n        progress[index] = { loaded: event.loaded, total: event.total };\n\n        all.loaded = 0;\n        all.total = 0;\n        loadings = 0;\n\n        for (var i in progress) {\n          loadings++;\n          all.loaded += progress[i].loaded;\n          all.total += progress[i].total;\n        }\n\n        if (loadings < 6) {\n          all.total = all.total / loadings * 6;\n        }\n\n        onProgress && onProgress(all);\n      }, onError);\n    });\n\n    return texture;\n  };\n})();\n\nPANOLENS.StereographicShader = {\n\n  uniforms: {\n\n    'tDiffuse': { value: new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]() },\n    'resolution': { value: 1.0 },\n    'transform': { value: new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]() },\n    'zoom': { value: 1.0 }\n\n  },\n\n  vertexShader: ['varying vec2 vUv;', 'void main() {', 'vUv = uv;', 'gl_Position = vec4( position, 1.0 );', '}'].join('\\n'),\n\n  fragmentShader: ['uniform sampler2D tDiffuse;', 'uniform float resolution;', 'uniform mat4 transform;', 'uniform float zoom;', 'varying vec2 vUv;', 'const float PI = 3.141592653589793;', 'void main(){', 'vec2 position = -1.0 +  2.0 * vUv;', 'position *= vec2( zoom * resolution, zoom * 0.5 );', 'float x2y2 = position.x * position.x + position.y * position.y;', 'vec3 sphere_pnt = vec3( 2. * position, x2y2 - 1. ) / ( x2y2 + 1. );', 'sphere_pnt = vec3( transform * vec4( sphere_pnt, 1.0 ) );', 'vec2 sampleUV = vec2(', '(atan(sphere_pnt.y, sphere_pnt.x) / PI + 1.0) * 0.5,', '(asin(sphere_pnt.z) / PI + 0.5)', ');', 'gl_FragColor = texture2D( tDiffuse, sampleUV );', '}'].join('\\n')\n\n};(function () {\n  'use strict';\n\n  PANOLENS.Panorama = function (geometry, material) {\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].call(this);\n\n    this.type = 'panorama';\n\n    this.ImageQualityLow = 1;\n    this.ImageQualityFair = 2;\n    this.ImageQualityMedium = 3;\n    this.ImageQualityHigh = 4;\n    this.ImageQualitySuperHigh = 5;\n\n    this.animationDuration = 1000;\n\n    this.defaultInfospotSize = 350;\n\n    this.container = undefined;\n\n    this.loaded = false;\n\n    this.linkedSpots = [];\n\n    this.isInfospotVisible = false;\n\n    this.linkingImageURL = undefined;\n    this.linkingImageScale = undefined;\n\n    this.geometry = geometry;\n\n    this.material = material;\n    this.material.side = __WEBPACK_IMPORTED_MODULE_8_three__[\"DoubleSide\"];\n    this.material.visible = false;\n\n    this.scale.x *= -1;\n\n    this.infospotAnimation = new TWEEN.Tween(this).to({}, this.animationDuration / 2);\n\n    this.addEventListener('load', this.fadeIn.bind(this));\n    this.addEventListener('panolens-container', this.setContainer.bind(this));\n    this.addEventListener('click', this.onClick.bind(this));\n\n    this.setupTransitions();\n  };\n\n  PANOLENS.Panorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].prototype);\n\n  PANOLENS.Panorama.prototype.constructor = PANOLENS.Panorama;\n\n  PANOLENS.Panorama.prototype.add = function (object) {\n    var scope, invertedObject;\n\n    scope = this;\n\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[i]);\n      }\n\n      return this;\n    }\n\n    if (object instanceof PANOLENS.Infospot) {\n      invertedObject = object;\n\n      if (object.dispatchEvent) {\n        this.container && object.dispatchEvent({ type: 'panolens-container', container: this.container });\n\n        object.dispatchEvent({ type: 'panolens-infospot-focus',\n          method: function method(vector, duration, easing) {\n            scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'tweenControlCenter', data: [vector, duration, easing] });\n          } });\n      }\n    } else {\n      invertedObject = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"]();\n      invertedObject.scale.x = -1;\n      invertedObject.scalePlaceHolder = true;\n      invertedObject.add(object);\n    }\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].prototype.add.call(this, invertedObject);\n  };\n\n  PANOLENS.Panorama.prototype.load = function () {\n    this.onLoad();\n  };\n\n  PANOLENS.Panorama.prototype.onClick = function (event) {\n    if (event.intersects && event.intersects.length === 0) {\n      this.traverse(function (object) {\n        object.dispatchEvent({ type: 'dismiss' });\n      });\n    }\n  };\n\n  PANOLENS.Panorama.prototype.setContainer = function (data) {\n    var container;\n\n    if (data instanceof HTMLElement) {\n      container = data;\n    } else if (data && data.container) {\n      container = data.container;\n    }\n\n    if (container) {\n      this.children.forEach(function (child) {\n        if (child instanceof PANOLENS.Infospot && child.dispatchEvent) {\n          child.dispatchEvent({ type: 'panolens-container', container: container });\n        }\n      });\n\n      this.container = container;\n    }\n  };\n\n  PANOLENS.Panorama.prototype.onLoad = function () {\n    this.loaded = true;\n\n    this.dispatchEvent({ type: 'load' });\n  };\n\n  PANOLENS.Panorama.prototype.onProgress = function (progress) {\n    this.dispatchEvent({ type: 'progress', progress: progress });\n  };\n\n  PANOLENS.Panorama.prototype.onError = function () {\n    this.dispatchEvent({ type: 'error' });\n  };\n\n  PANOLENS.Panorama.prototype.getZoomLevel = function () {\n    var zoomLevel;\n\n    if (window.innerWidth <= 800) {\n      zoomLevel = this.ImageQualityFair;\n    } else if (window.innerWidth > 800 && window.innerWidth <= 1280) {\n      zoomLevel = this.ImageQualityMedium;\n    } else if (window.innerWidth > 1280 && window.innerWidth <= 1920) {\n      zoomLevel = this.ImageQualityHigh;\n    } else if (window.innerWidth > 1920) {\n      zoomLevel = this.ImageQualitySuperHigh;\n    } else {\n      zoomLevel = this.ImageQualityLow;\n    }\n\n    return zoomLevel;\n  };\n\n  PANOLENS.Panorama.prototype.updateTexture = function (texture) {\n    this.material.map = texture;\n\n    this.material.needsUpdate = true;\n  };\n\n  PANOLENS.Panorama.prototype.toggleInfospotVisibility = function (isVisible, delay) {\n    delay = delay !== undefined ? delay : 0;\n\n    var scope, visible;\n\n    scope = this;\n    visible = isVisible !== undefined ? isVisible : !this.isInfospotVisible;\n\n    this.traverse(function (object) {\n      if (object instanceof PANOLENS.Infospot) {\n        visible ? object.show(delay) : object.hide(delay);\n      }\n    });\n\n    this.isInfospotVisible = visible;\n\n    this.infospotAnimation.onComplete(function () {\n      scope.dispatchEvent({ type: 'infospot-animation-complete', visible: visible });\n    }).delay(delay).start();\n  };\n\n  PANOLENS.Panorama.prototype.setLinkingImage = function (url, scale) {\n    this.linkingImageURL = url;\n    this.linkingImageScale = scale;\n  };\n\n  PANOLENS.Panorama.prototype.link = function (pano, position, imageScale, imageSrc) {\n    var scope = this,\n        spot,\n        scale,\n        img;\n\n    this.visible = true;\n\n    if (!position) {\n      console.warn('Please specify infospot position for linking');\n\n      return;\n    }\n\n    if (imageScale !== undefined) {\n      scale = imageScale;\n    } else if (pano.linkingImageScale !== undefined) {\n      scale = pano.linkingImageScale;\n    } else {\n      scale = 300;\n    }\n\n    if (imageSrc) {\n      img = imageSrc;\n    } else if (pano.linkingImageURL) {\n      img = pano.linkingImageURL;\n    } else {\n      img = PANOLENS.DataImage.Arrow;\n    }\n\n    spot = new PANOLENS.Infospot(scale, img);\n    spot.position.copy(position);\n    spot.toPanorama = pano;\n    spot.addEventListener('click', function () {\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setPanorama', data: pano });\n    });\n\n    this.linkedSpots.push(spot);\n\n    this.add(spot);\n\n    this.visible = false;\n  };\n\n  PANOLENS.Panorama.prototype.reset = function () {\n    this.children.length = 0;\n  };\n\n  PANOLENS.Panorama.prototype.setupTransitions = function () {\n    this.fadeInAnimation = new TWEEN.Tween(this.material).easing(TWEEN.Easing.Quartic.Out).onStart(function () {\n      this.visible = true;\n      this.material.visible = true;\n\n      this.dispatchEvent({ type: 'enter-fade-start' });\n    }.bind(this));\n\n    this.fadeOutAnimation = new TWEEN.Tween(this.material).easing(TWEEN.Easing.Quartic.Out).onComplete(function () {\n      this.visible = false;\n      this.material.visible = true;\n\n      this.dispatchEvent({ type: 'leave-complete' });\n    }.bind(this));\n\n    this.enterTransition = new TWEEN.Tween(this).easing(TWEEN.Easing.Quartic.Out).onComplete(function () {\n      this.dispatchEvent({ type: 'enter-animation-complete' });\n    }.bind(this)).start();\n\n    this.leaveTransition = new TWEEN.Tween(this).easing(TWEEN.Easing.Quartic.Out);\n  };\n\n  PANOLENS.Panorama.prototype.fadeIn = function (duration) {\n    duration = duration >= 0 ? duration : this.animationDuration;\n\n    this.fadeOutAnimation.stop();\n    this.fadeInAnimation.to({ opacity: 1 }, duration).onComplete(function () {\n      this.toggleInfospotVisibility(true, duration / 2);\n\n      this.dispatchEvent({ type: 'enter-fade-complete' });\n    }.bind(this)).start();\n  };\n\n  PANOLENS.Panorama.prototype.fadeOut = function (duration) {\n    duration = duration >= 0 ? duration : this.animationDuration;\n\n    this.fadeInAnimation.stop();\n    this.fadeOutAnimation.to({ opacity: 0 }, duration).start();\n  };\n\n  PANOLENS.Panorama.prototype.onEnter = function () {\n    var duration = this.animationDuration;\n\n    this.leaveTransition.stop();\n    this.enterTransition.to({}, duration).onStart(function () {\n      this.dispatchEvent({ type: 'enter-animation-start' });\n\n      if (this.loaded) {\n        this.fadeIn(duration);\n      } else {\n        this.load();\n      }\n    }.bind(this)).start();\n\n    this.dispatchEvent({ type: 'enter' });\n  };\n\n  PANOLENS.Panorama.prototype.onLeave = function () {\n    var duration = this.animationDuration;\n\n    this.enterTransition.stop();\n    this.leaveTransition.to({}, duration).onStart(function () {\n      this.dispatchEvent({ type: 'leave-animation-start' });\n\n      this.fadeOut(duration);\n      this.toggleInfospotVisibility(false);\n    }.bind(this)).start();\n\n    this.dispatchEvent({ type: 'leave' });\n  };\n\n  PANOLENS.Panorama.prototype.dispose = function () {\n    this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onPanoramaDispose', data: this });\n\n    function recursiveDispose(object) {\n      for (var i = object.children.length - 1; i >= 0; i--) {\n        recursiveDispose(object.children[i]);\n        object.remove(object.children[i]);\n      }\n\n      if (object instanceof PANOLENS.Infospot) {\n        object.dispose();\n      }\n\n      object.geometry && object.geometry.dispose();\n      object.material && object.material.dispose();\n    }\n\n    recursiveDispose(this);\n\n    if (this.parent) {\n      this.parent.remove(this);\n    }\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.ImagePanorama = function (image, radius) {\n    radius = radius || 5000;\n\n    var geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"SphereGeometry\"](radius, 60, 40),\n        material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ opacity: 0, transparent: true });\n\n    PANOLENS.Panorama.call(this, geometry, material);\n\n    this.src = image;\n  };\n\n  PANOLENS.ImagePanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n  PANOLENS.ImagePanorama.prototype.constructor = PANOLENS.ImagePanorama;\n\n  PANOLENS.ImagePanorama.prototype.load = function (src) {\n    src = src || this.src;\n\n    if (!src) {\n      console.warn('Image source undefined');\n    } else if (typeof src === 'string') {\n      PANOLENS.Utils.TextureLoader.load(src, this.onLoad.bind(this), this.onProgress.bind(this), this.onError.bind(this));\n    } else if (src instanceof HTMLImageElement) {\n      this.onLoad(new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"](src));\n    }\n  };\n\n  PANOLENS.ImagePanorama.prototype.onLoad = function (texture) {\n    texture.minFilter = texture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\n    texture.needsUpdate = true;\n\n    this.updateTexture(texture);\n\n    window.requestAnimationFrame(function () {\n      window.requestAnimationFrame(function () {\n        PANOLENS.Panorama.prototype.onLoad.call(this);\n      }.bind(this));\n    }.bind(this));\n  };\n\n  PANOLENS.ImagePanorama.prototype.reset = function () {\n    PANOLENS.Panorama.prototype.reset.call(this);\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.GoogleStreetviewPanorama = function (panoId, radius) {\n    PANOLENS.ImagePanorama.call(this, undefined, radius);\n\n    this.panoId = panoId;\n\n    this.gsvLoader = undefined;\n\n    this.loadRequested = false;\n\n    this.setupGoogleMapAPI();\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.ImagePanorama.prototype);\n\n  PANOLENS.GoogleStreetviewPanorama.constructor = PANOLENS.GoogleStreetviewPanorama;\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.load = function (panoId) {\n    this.loadRequested = true;\n\n    panoId = panoId || this.panoId || {};\n\n    if (panoId && this.gsvLoader) {\n      this.loadGSVLoader(panoId);\n    } else {\n      this.gsvLoader = {};\n    }\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.setupGoogleMapAPI = function () {\n    var script = document.createElement('script');\n    script.src = 'https://maps.googleapis.com/maps/api/js';\n    script.onreadystatechange = this.setGSVLoader.bind(this);\n    script.onload = this.setGSVLoader.bind(this);\n\n    document.getElementsByTagName('head')[0].appendChild(script);\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.setGSVLoader = function () {\n    this.gsvLoader = new GSVPANO.PanoLoader();\n\n    if (this.gsvLoader === {} || this.loadRequested) {\n      this.load();\n    }\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.getGSVLoader = function () {\n    return this.gsvLoader;\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.loadGSVLoader = function (panoId) {\n    this.loadRequested = false;\n\n    this.gsvLoader.onProgress = this.onProgress.bind(this);\n\n    this.gsvLoader.onPanoramaLoad = this.onLoad.bind(this);\n\n    this.gsvLoader.setZoom(this.getZoomLevel());\n\n    this.gsvLoader.load(panoId);\n\n    this.gsvLoader.loaded = true;\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.onLoad = function (canvas) {\n    if (!this.gsvLoader) {\n      return;\n    }\n\n    PANOLENS.ImagePanorama.prototype.onLoad.call(this, new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"](canvas));\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.reset = function () {\n    this.gsvLoader = undefined;\n\n    PANOLENS.ImagePanorama.prototype.reset.call(this);\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.CubePanorama = function (images, edgeLength) {\n    var shader, geometry, material;\n\n    this.images = images || [];\n\n    edgeLength = edgeLength || 10000;\n    shader = JSON.parse(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"ShaderLib\"]['cube']));\n\n    geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"BoxGeometry\"](edgeLength, edgeLength, edgeLength);\n    material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"ShaderMaterial\"]({\n\n      fragmentShader: shader.fragmentShader,\n      vertexShader: shader.vertexShader,\n      uniforms: shader.uniforms,\n      side: __WEBPACK_IMPORTED_MODULE_8_three__[\"BackSide\"]\n\n    });\n\n    PANOLENS.Panorama.call(this, geometry, material);\n  };\n\n  PANOLENS.CubePanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n  PANOLENS.CubePanorama.prototype.constructor = PANOLENS.CubePanorama;\n\n  PANOLENS.CubePanorama.prototype.load = function () {\n    PANOLENS.Utils.CubeTextureLoader.load(this.images, this.onLoad.bind(this), this.onProgress.bind(this), this.onError.bind(this));\n  };\n\n  PANOLENS.CubePanorama.prototype.onLoad = function (texture) {\n    this.material.uniforms['tCube'].value = texture;\n\n    PANOLENS.Panorama.prototype.onLoad.call(this);\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.BasicPanorama = function (edgeLength) {\n    var tile = PANOLENS.DataImage.WhiteTile;\n\n    PANOLENS.CubePanorama.call(this, [tile, tile, tile, tile, tile, tile], edgeLength);\n  };\n\n  PANOLENS.BasicPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.CubePanorama.prototype);\n\n  PANOLENS.BasicPanorama.prototype.constructor = PANOLENS.BasicPanorama;\n})();(function () {\n  'use strict';\n\n  PANOLENS.VideoPanorama = function (src, options, radius) {\n    radius = radius || 5000;\n\n    var geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"SphereGeometry\"](radius, 60, 40),\n        material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ opacity: 0, transparent: true });\n\n    PANOLENS.Panorama.call(this, geometry, material);\n\n    this.src = src;\n    this.options = options || {};\n    this.options.playsinline = this.options.playsinline !== false;\n\n    this.videoElement = undefined;\n    this.videoRenderObject = undefined;\n    this.videoProgress = 0;\n\n    this.isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);\n    this.isMobile = this.isIOS || /Android|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent);\n\n    this.addEventListener('leave', this.pauseVideo.bind(this));\n    this.addEventListener('enter-fade-start', this.resumeVideoProgress.bind(this));\n    this.addEventListener('video-toggle', this.toggleVideo.bind(this));\n    this.addEventListener('video-time', this.setVideoCurrentTime.bind(this));\n  };\n\n  PANOLENS.VideoPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n  PANOLENS.VideoPanorama.constructor = PANOLENS.VideoPanorama;\n\n  PANOLENS.VideoPanorama.prototype.load = function (src, options) {\n    var scope = this;\n\n    src = src || this.src || '';\n    options = options || this.options || {};\n\n    this.videoElement = options.videoElement || document.createElement('video');\n\n    this.videoElement.muted = options.muted || false;\n    this.videoElement.loop = options.loop !== undefined ? options.loop : true;\n    this.videoElement.autoplay = options.autoplay !== undefined ? options.autoplay : false;\n    this.videoElement.crossOrigin = options.crossOrigin !== undefined ? options.crossOrigin : 'anonymous';\n\n    if (options.playsinline) {\n      this.videoElement.setAttribute('playsinline', '');\n      this.videoElement.setAttribute('webkit-playsinline', '');\n    }\n\n    var onloadeddata = function onloadeddata() {\n      scope.onProgress({ loaded: 1, total: 1 });\n      scope.setVideoTexture(scope.videoElement);\n\n      if (scope.videoElement.autoplay) {\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false });\n      }\n\n      if (scope.isMobile) {\n        if (scope.videoElement.autoplay && scope.videoElement.muted) {\n          scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false });\n        } else {\n          scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true });\n        }\n      }\n\n      scope.onLoad();\n    };\n\n    if (this.videoElement.readyState > 2) {\n      onloadeddata();\n    } else {\n      if (!this.videoElement.querySelectorAll('source').length || !this.videoElement.src) {\n        this.videoElement.src = src;\n      }\n\n      this.videoElement.load();\n    }\n\n    this.videoElement.onloadeddata = onloadeddata;\n\n    this.videoElement.ontimeupdate = function (event) {\n      scope.videoProgress = this.duration >= 0 ? this.currentTime / this.duration : 0;\n\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: scope.videoProgress });\n    };\n\n    this.videoElement.addEventListener('ended', function () {\n      if (!scope.options.loop) {\n        scope.resetVideo();\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true });\n      }\n    }, false);\n  };\n\n  PANOLENS.VideoPanorama.prototype.setVideoTexture = function (video) {\n    var videoTexture, videoRenderObject, scene;\n\n    if (!video) return;\n\n    videoTexture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"VideoTexture\"](video);\n    videoTexture.minFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n    videoTexture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n    videoTexture.format = __WEBPACK_IMPORTED_MODULE_8_three__[\"RGBFormat\"];\n\n    videoRenderObject = {\n\n      video: video,\n      videoTexture: videoTexture\n\n    };\n\n    if (this.isIOS) {\n      enableInlineVideo(video);\n    }\n\n    this.updateTexture(videoTexture);\n\n    this.videoRenderObject = videoRenderObject;\n  };\n\n  PANOLENS.VideoPanorama.prototype.reset = function () {\n    this.videoElement = undefined;\n\n    PANOLENS.Panorama.prototype.reset.call(this);\n  };\n\n  PANOLENS.VideoPanorama.prototype.isVideoPaused = function () {\n    return this.videoRenderObject.video.paused;\n  };\n\n  PANOLENS.VideoPanorama.prototype.toggleVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video) {\n      if (this.isVideoPaused()) {\n        this.videoRenderObject.video.play();\n      } else {\n        this.videoRenderObject.video.pause();\n      }\n    }\n  };\n\n  PANOLENS.VideoPanorama.prototype.setVideoCurrentTime = function (event) {\n    if (this.videoRenderObject && this.videoRenderObject.video && !__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan___default()(event.percentage) && event.percentage !== 1) {\n      this.videoRenderObject.video.currentTime = this.videoRenderObject.video.duration * event.percentage;\n\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: event.percentage });\n    }\n  };\n\n  PANOLENS.VideoPanorama.prototype.playVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && this.isVideoPaused()) {\n      this.videoRenderObject.video.play();\n    }\n\n    this.dispatchEvent({ type: 'play' });\n  };\n\n  PANOLENS.VideoPanorama.prototype.pauseVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && !this.isVideoPaused()) {\n      this.videoRenderObject.video.pause();\n    }\n\n    this.dispatchEvent({ type: 'pause' });\n  };\n\n  PANOLENS.VideoPanorama.prototype.resumeVideoProgress = function () {\n    if (this.videoElement.autoplay && !this.isMobile) {\n      this.playVideo();\n\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false });\n    } else {\n      this.pauseVideo();\n\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true });\n    }\n\n    this.setVideoCurrentTime({ percentage: this.videoProgress });\n  };\n\n  PANOLENS.VideoPanorama.prototype.resetVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video) {\n      this.setVideoCurrentTime({ percentage: 0 });\n    }\n  };\n\n  PANOLENS.VideoPanorama.prototype.isVideoMuted = function () {\n    return this.videoRenderObject.video.muted;\n  };\n\n  PANOLENS.VideoPanorama.prototype.muteVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && !this.isVideoMuted()) {\n      this.videoRenderObject.video.muted = true;\n    }\n\n    this.dispatchEvent({ type: 'volumechange' });\n  };\n\n  PANOLENS.VideoPanorama.prototype.unmuteVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && this.isVideoMuted()) {\n      this.videoRenderObject.video.muted = false;\n    }\n\n    this.dispatchEvent({ type: 'volumechange' });\n  };\n\n  PANOLENS.VideoPanorama.prototype.getVideoElement = function () {\n    return this.videoRenderObject.video;\n  };\n\n  PANOLENS.VideoPanorama.prototype.dispose = function () {\n    this.resetVideo();\n    this.pauseVideo();\n\n    this.removeEventListener('leave', this.pauseVideo.bind(this));\n    this.removeEventListener('enter-fade-start', this.resumeVideoProgress.bind(this));\n    this.removeEventListener('video-toggle', this.toggleVideo.bind(this));\n    this.removeEventListener('video-time', this.setVideoCurrentTime.bind(this));\n\n    PANOLENS.Panorama.prototype.dispose.call(this);\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.EmptyPanorama = function (radius) {\n    radius = radius || 5000;\n\n    var geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Geometry\"](),\n        material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({\n      color: 0x000000, opacity: 1, transparent: true\n    });\n\n    PANOLENS.Panorama.call(this, geometry, material);\n  };\n\n  PANOLENS.EmptyPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n  PANOLENS.EmptyPanorama.prototype.constructor = PANOLENS.EmptyPanorama;\n})();(function () {\n  PANOLENS.LittlePlanet = function (type, source, size, ratio) {\n    type = type || 'image';\n\n    type === 'image' && PANOLENS.ImagePanorama.call(this, source, size);\n\n    this.size = size || 10000;\n    this.ratio = ratio || 0.5;\n    this.EPS = 0.000001;\n    this.frameId;\n\n    this.geometry = this.createGeometry();\n    this.material = this.createMaterial(this.size);\n\n    this.dragging = false;\n    this.userMouse = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\n    this.quatA = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n    this.quatB = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n    this.quatCur = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n    this.quatSlerp = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n    this.vectorX = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0, 0);\n    this.vectorY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n\n    this.addEventListener('window-resize', this.onWindowResize);\n  };\n\n  PANOLENS.LittlePlanet.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.ImagePanorama.prototype);\n\n  PANOLENS.LittlePlanet.prototype.constructor = PANOLENS.LittlePlanet;\n\n  PANOLENS.LittlePlanet.prototype.createGeometry = function () {\n    return new __WEBPACK_IMPORTED_MODULE_8_three__[\"PlaneGeometry\"](this.size, this.size * this.ratio);\n  };\n\n  PANOLENS.LittlePlanet.prototype.createMaterial = function (size) {\n    var uniforms = PANOLENS.StereographicShader.uniforms;\n    uniforms.zoom.value = size;\n\n    return new __WEBPACK_IMPORTED_MODULE_8_three__[\"ShaderMaterial\"]({\n\n      uniforms: uniforms,\n      vertexShader: PANOLENS.StereographicShader.vertexShader,\n      fragmentShader: PANOLENS.StereographicShader.fragmentShader\n\n    });\n  };\n\n  PANOLENS.LittlePlanet.prototype.registerMouseEvents = function () {\n    this.container.addEventListener('mousedown', this.onMouseDown.bind(this), false);\n    this.container.addEventListener('mousemove', this.onMouseMove.bind(this), false);\n    this.container.addEventListener('mouseup', this.onMouseUp.bind(this), false);\n    this.container.addEventListener('touchstart', this.onMouseDown.bind(this), false);\n    this.container.addEventListener('touchmove', this.onMouseMove.bind(this), false);\n    this.container.addEventListener('touchend', this.onMouseUp.bind(this), false);\n    this.container.addEventListener('mousewheel', this.onMouseWheel.bind(this), false);\n    this.container.addEventListener('DOMMouseScroll', this.onMouseWheel.bind(this), false);\n    this.container.addEventListener('contextmenu', this.onContextMenu.bind(this), false);\n  };\n\n  PANOLENS.LittlePlanet.prototype.unregisterMouseEvents = function () {\n    this.container.removeEventListener('mousedown', this.onMouseDown.bind(this), false);\n    this.container.removeEventListener('mousemove', this.onMouseMove.bind(this), false);\n    this.container.removeEventListener('mouseup', this.onMouseUp.bind(this), false);\n    this.container.removeEventListener('touchstart', this.onMouseDown.bind(this), false);\n    this.container.removeEventListener('touchmove', this.onMouseMove.bind(this), false);\n    this.container.removeEventListener('touchend', this.onMouseUp.bind(this), false);\n    this.container.removeEventListener('mousewheel', this.onMouseWheel.bind(this), false);\n    this.container.removeEventListener('DOMMouseScroll', this.onMouseWheel.bind(this), false);\n    this.container.removeEventListener('contextmenu', this.onContextMenu.bind(this), false);\n  };\n\n  PANOLENS.LittlePlanet.prototype.onMouseDown = function (event) {\n    var x = event.clientX >= 0 ? event.clientX : event.touches[0].clientX;\n    var y = event.clientY >= 0 ? event.clientY : event.touches[0].clientY;\n\n    var inputCount = event.touches && event.touches.length || 1;\n\n    switch (inputCount) {\n      case 1:\n\n        this.dragging = true;\n        this.userMouse.set(x, y);\n\n        break;\n\n      case 2:\n\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n        this.userMouse.pinchDistance = distance;\n\n        break;\n\n      default:\n\n        break;\n    }\n\n    this.onUpdateCallback();\n  };\n\n  PANOLENS.LittlePlanet.prototype.onMouseMove = function (event) {\n    var x = event.clientX >= 0 ? event.clientX : event.touches[0].clientX;\n    var y = event.clientY >= 0 ? event.clientY : event.touches[0].clientY;\n\n    var inputCount = event.touches && event.touches.length || 1;\n\n    switch (inputCount) {\n      case 1:\n\n        var angleX = __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(x - this.userMouse.x) * 0.4;\n        var angleY = __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(y - this.userMouse.y) * 0.4;\n\n        if (this.dragging) {\n          this.quatA.setFromAxisAngle(this.vectorY, angleX);\n          this.quatB.setFromAxisAngle(this.vectorX, angleY);\n          this.quatCur.multiply(this.quatA).multiply(this.quatB);\n          this.userMouse.set(x, y);\n        }\n\n        break;\n\n      case 2:\n\n        var uniforms = this.material.uniforms;\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n\n        this.addZoomDelta(this.userMouse.pinchDistance - distance);\n\n        break;\n\n      default:\n\n        break;\n    }\n  };\n\n  PANOLENS.LittlePlanet.prototype.onMouseUp = function (event) {\n    this.dragging = false;\n  };\n\n  PANOLENS.LittlePlanet.prototype.onMouseWheel = function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    var delta = 0;\n\n    if (event.wheelDelta !== undefined) {\n      delta = event.wheelDelta;\n    } else if (event.detail !== undefined) {\n      delta = -event.detail;\n    }\n\n    this.addZoomDelta(delta);\n    this.onUpdateCallback();\n  };\n\n  PANOLENS.LittlePlanet.prototype.addZoomDelta = function (delta) {\n    var uniforms = this.material.uniforms;\n    var lowerBound = this.size * 0.1;\n    var upperBound = this.size * 10;\n\n    uniforms.zoom.value += delta;\n\n    if (uniforms.zoom.value <= lowerBound) {\n      uniforms.zoom.value = lowerBound;\n    } else if (uniforms.zoom.value >= upperBound) {\n      uniforms.zoom.value = upperBound;\n    }\n  };\n\n  PANOLENS.LittlePlanet.prototype.onUpdateCallback = function () {\n    this.frameId = window.requestAnimationFrame(this.onUpdateCallback.bind(this));\n\n    this.quatSlerp.slerp(this.quatCur, 0.1);\n    this.material.uniforms.transform.value.makeRotationFromQuaternion(this.quatSlerp);\n\n    if (!this.dragging && 1.0 - this.quatSlerp.clone().dot(this.quatCur) < this.EPS) {\n      window.cancelAnimationFrame(this.frameId);\n    }\n  };\n\n  PANOLENS.LittlePlanet.prototype.reset = function () {\n    this.quatCur.set(0, 0, 0, 1);\n    this.quatSlerp.set(0, 0, 0, 1);\n    this.onUpdateCallback();\n  };\n\n  PANOLENS.LittlePlanet.prototype.onLoad = function () {\n    this.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight;\n\n    this.registerMouseEvents();\n    this.onUpdateCallback();\n\n    this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'disableControl' });\n  };\n\n  PANOLENS.LittlePlanet.prototype.onLeave = function () {\n    this.unregisterMouseEvents();\n\n    this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'enableControl', data: PANOLENS.Controls.ORBIT });\n\n    window.cancelAnimationFrame(this.frameId);\n\n    PANOLENS.Panorama.prototype.onLeave.call(this);\n  };\n\n  PANOLENS.LittlePlanet.prototype.onWindowResize = function () {\n    this.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight;\n  };\n\n  PANOLENS.LittlePlanet.prototype.onContextMenu = function () {\n    this.dragging = false;\n  };\n})();(function () {\n  PANOLENS.ImageLittlePlanet = function (source, size, ratio) {\n    PANOLENS.LittlePlanet.call(this, 'image', source, size, ratio);\n  };\n\n  PANOLENS.ImageLittlePlanet.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.LittlePlanet.prototype);\n\n  PANOLENS.ImageLittlePlanet.prototype.constructor = PANOLENS.ImageLittlePlanet;\n\n  PANOLENS.ImageLittlePlanet.prototype.onLoad = function (texture) {\n    this.updateTexture(texture);\n\n    PANOLENS.ImagePanorama.prototype.onLoad.call(this, texture);\n    PANOLENS.LittlePlanet.prototype.onLoad.call(this);\n  };\n\n  PANOLENS.ImageLittlePlanet.prototype.updateTexture = function (texture) {\n    texture.minFilter = texture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\n    this.material.uniforms['tDiffuse'].value = texture;\n  };\n})();(function () {\n  PANOLENS.Reticle = function (color, autoSelect, idleImageUrl, dwellImageUrl, dwellTime, dwellSpriteAmount) {\n    color = color || 0xffffff;\n\n    this.autoSelect = autoSelect != undefined ? autoSelect : true;\n\n    this.dwellTime = dwellTime || 1500;\n    this.dwellSpriteAmount = dwellSpriteAmount || 45;\n    this.dwellInterval = this.dwellTime / this.dwellSpriteAmount;\n\n    this.IDLE = 0;\n    this.DWELLING = 1;\n    this.status;\n\n    this.scaleIdle = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0.2, 0.2, 1);\n    this.scaleDwell = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0.8, 1);\n\n    this.textureLoaded = false;\n    this.idleImageUrl = idleImageUrl || PANOLENS.DataImage.ReticleIdle;\n    this.dwellImageUrl = dwellImageUrl || PANOLENS.DataImage.ReticleDwell;\n    this.idleTexture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]();\n    this.dwellTexture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]();\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].call(this, new __WEBPACK_IMPORTED_MODULE_8_three__[\"SpriteMaterial\"]({ color: color, depthTest: false }));\n\n    this.currentTile = 0;\n    this.startTime = 0;\n\n    this.visible = false;\n    this.renderOrder = 10;\n    this.timerId;\n\n    this.updateStatus(this.IDLE);\n  };\n\n  PANOLENS.Reticle.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].prototype);\n\n  PANOLENS.Reticle.prototype.constructor = PANOLENS.Reticle;\n\n  PANOLENS.Reticle.prototype.show = function () {\n    this.visible = true;\n  };\n\n  PANOLENS.Reticle.prototype.hide = function () {\n    this.visible = false;\n  };\n\n  PANOLENS.Reticle.prototype.loadTextures = function () {\n    this.idleTexture = PANOLENS.Utils.TextureLoader.load(this.idleImageUrl);\n    this.dwellTexture = PANOLENS.Utils.TextureLoader.load(this.dwellImageUrl);\n\n    this.material.map = this.idleTexture;\n    this.setupDwellSprite(this.dwellTexture);\n    this.textureLoaded = true;\n  };\n\n  PANOLENS.Reticle.prototype.select = function (completeCallback) {\n    if (performance.now() - this.startTime >= this.dwellTime) {\n      this.completeDwelling();\n      completeCallback();\n    } else if (this.autoSelect) {\n      this.updateDwelling(performance.now());\n      this.timerId = window.requestAnimationFrame(this.select.bind(this, completeCallback));\n    }\n  };\n\n  PANOLENS.Reticle.prototype.clearTimer = function () {\n    window.cancelAnimationFrame(this.timerId);\n    this.timerId = null;\n  };\n\n  PANOLENS.Reticle.prototype.setupDwellSprite = function (texture) {\n    texture.wrapS = __WEBPACK_IMPORTED_MODULE_8_three__[\"RepeatWrapping\"];\n    texture.repeat.set(1 / this.dwellSpriteAmount, 1);\n  };\n\n  PANOLENS.Reticle.prototype.updateStatus = function (status) {\n    this.status = status;\n\n    if (status === this.IDLE) {\n      this.scale.copy(this.scaleIdle);\n      this.material.map = this.idleTexture;\n    } else if (status === this.DWELLING) {\n      this.scale.copy(this.scaleDwell);\n      this.material.map = this.dwellTexture;\n    }\n\n    this.currentTile = 0;\n    this.material.map.offset.x = 0;\n  };\n\n  PANOLENS.Reticle.prototype.startDwelling = function (completeCallback) {\n    if (!this.autoSelect) {\n      return;\n    }\n\n    this.startTime = performance.now();\n    this.updateStatus(this.DWELLING);\n    this.select(completeCallback);\n  };\n\n  PANOLENS.Reticle.prototype.updateDwelling = function (time) {\n    var elasped = time - this.startTime;\n\n    if (this.currentTile <= this.dwellSpriteAmount) {\n      this.currentTile = Math.floor(elasped / this.dwellTime * this.dwellSpriteAmount);\n      this.material.map.offset.x = this.currentTile / this.dwellSpriteAmount;\n    } else {\n      this.updateStatus(this.IDLE);\n    }\n  };\n\n  PANOLENS.Reticle.prototype.cancelDwelling = function () {\n    this.clearTimer();\n    this.updateStatus(this.IDLE);\n  };\n\n  PANOLENS.Reticle.prototype.completeDwelling = function () {\n    this.clearTimer();\n    this.updateStatus(this.IDLE);\n  };\n})();(function () {\n  PANOLENS.Tile = function (width, height, widthSegments, heightSegments, forceDirection, forceAxis, forceAngle) {\n    var scope = this;\n\n    this.parameters = {\n      width: width,\n      height: height,\n      widthSegments: widthSegments,\n      heightSegments: heightSegments,\n      forceDirection: forceDirection,\n      forceAxis: forceAxis,\n      forceAngle: forceAngle\n    };\n\n    width = width || 10;\n    height = height || 5;\n    widthSegments = widthSegments || 1;\n    heightSegments = heightSegments || 1;\n    forceDirection = forceDirection || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 0, 1);\n    forceAxis = forceAxis || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n    forceAngle = forceAngle !== undefined ? forceAngle : 0;\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].call(this, new __WEBPACK_IMPORTED_MODULE_8_three__[\"PlaneGeometry\"](width, height, widthSegments, heightSegments), new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ color: 0xffffff, transparent: true }));\n\n    this.bendModifier = new __WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"]();\n\n    this.entity = undefined;\n\n    this.animationDuration = 500;\n    this.animationFadeOut = undefined;\n    this.animationFadeIn = undefined;\n    this.animationTranslation = undefined;\n    this.tweens = {};\n\n    if (forceAngle !== 0) {\n      this.bend(forceDirection, forceAxis, forceAngle);\n    }\n\n    this.originalGeometry = this.geometry.clone();\n  };\n\n  PANOLENS.Tile.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].prototype);\n\n  PANOLENS.Tile.prototype.constructor = PANOLENS.Tile;\n\n  PANOLENS.Tile.prototype.clone = function () {\n    var parameters = this.parameters,\n        tile;\n\n    tile = new PANOLENS.Tile(parameters.width, parameters.height, parameters.widthSegments, parameters.heightSegments, parameters.forceDirection, parameters.forceAxis, parameters.forceAngle);\n\n    tile.setEntity(this.entity);\n    tile.material = this.material.clone();\n\n    return tile;\n  };\n\n  PANOLENS.Tile.prototype.bend = function (direction, axis, angle) {\n    this.bendModifier.set(direction, axis, angle).modify(this.geometry);\n  };\n\n  PANOLENS.Tile.prototype.unbend = function () {\n    var geometry = this.geometry;\n\n    this.geometry = this.originalGeometry;\n    this.originalGeometry = this.geometry.clone();\n\n    geometry.dispose();\n    geometry = null;\n  };\n\n  PANOLENS.Tile.prototype.tween = function (name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete) {\n    object = object || this;\n    toState = toState || {};\n    duration = duration || this.animationDuration;\n    easing = easing || TWEEN.Easing.Exponential.Out;\n    delay = delay !== undefined ? delay : 0;\n    onStart = onStart || null;\n    onUpdate = onUpdate || null;\n    onComplete = onComplete || null;\n\n    if (!this.tweens[name]) {\n      this.tweens[name] = new TWEEN.Tween(object).to(toState, duration).easing(easing).delay(delay).onStart(onStart).onUpdate(onUpdate).onComplete(onComplete);\n    }\n\n    return this.tweens[name];\n  };\n\n  PANOLENS.Tile.prototype.ripple = function (scale, duration, easing) {\n    scale = scale || 2;\n    duration = duration || 200;\n    easing = easing || TWEEN.Easing.Cubic.Out;\n\n    var scope = this,\n        ripple = this.clone();\n\n    new TWEEN.Tween(ripple.scale).to({ x: scale, y: scale }, duration).easing(easing).start();\n\n    new TWEEN.Tween(ripple.material).to({ opacity: 0 }, duration).easing(easing).onComplete(function () {\n      scope.remove(ripple);\n      ripple.geometry.dispose();\n      ripple.material.dispose();\n    }).start();\n\n    this.add(ripple);\n  };\n\n  PANOLENS.Tile.prototype.setEntity = function (entity) {\n    this.entity = entity;\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.TileGroup = function (tileArray, verticalGap, depthGap, animationDuration, offset) {\n    var scope = this,\n        textureLoader;\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].call(this);\n\n    this.tileArray = tileArray || [];\n    this.offset = offset !== undefined ? offset : 0;\n    this.v_gap = verticalGap !== undefined ? verticalGap : 6;\n    this.d_gap = depthGap !== undefined ? depthGap : 2;\n    this.animationDuration = animationDuration !== undefined ? animationDuration : 200;\n    this.animationEasing = TWEEN.Easing.Exponential.Out;\n    this.visibleDelta = 2;\n\n    this.tileArray.map(function (tile, index) {\n      if (tile.image) {\n        PANOLENS.Utils.TextureLoader.load(tile.image, scope.setTexture.bind(tile));\n      }\n\n      tile.position.set(0, index * -scope.v_gap, index * -scope.d_gap);\n      tile.originalPosition = tile.position.clone();\n      tile.setEntity(scope);\n      scope.add(tile);\n    });\n\n    this.updateVisbility();\n  };\n\n  PANOLENS.TileGroup.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].prototype);\n\n  PANOLENS.TileGroup.prototype.constructor = PANOLENS.TileGroup;\n\n  PANOLENS.TileGroup.prototype.updateTexture = function (imageArray) {\n    var scope = this;\n\n    imageArray = imageArray || [];\n    this.children.map(function (child, index) {\n      if (child instanceof PANOLENS.Tile && imageArray[index]) {\n        PANOLENS.Utils.TextureLoader.load(imageArray[index], scope.setTexture.bind(child));\n        if (child.outline) {\n          child.outline.material.visible = true;\n        }\n      }\n    });\n  };\n\n  PANOLENS.TileGroup.prototype.updateAllTexture = function (imageArray) {\n    this.updateTexture(imageArray);\n\n    if (imageArray.length < this.children.length) {\n      for (var i = imageArray.length; i < this.children.length; i++) {\n        if (this.children[i] instanceof PANOLENS.Tile) {\n          this.children[i].material.visible = false;\n          if (this.children[i].outline) {\n            this.children[i].outline.material.visible = false;\n          }\n        }\n      }\n    }\n  };\n\n  PANOLENS.TileGroup.prototype.setTexture = function (texture) {\n    texture.minFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n    texture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n    this.material.visible = true;\n    this.material.map = texture;\n    this.material.needsUpdate = true;\n  };\n\n  PANOLENS.TileGroup.prototype.updateVisbility = function () {\n    this.children[this.offset].visible = true;\n    new TWEEN.Tween(this.children[this.offset].material).to({ opacity: 1 }, this.animationDuration).easing(this.animationEasing).start();\n\n    if (this.children[this.offset].outline) {\n      this.children[this.offset].outline.visible = true;\n    }\n\n    for (var i = this.offset - 1; i >= 0; i--) {\n      if (this.tileArray.indexOf(this.children[i]) === -1) {\n        continue;\n      }\n\n      if (this.offset - i <= this.visibleDelta) {\n        this.children[i].visible = true;\n        new TWEEN.Tween(this.children[i].material).to({ opacity: 1 / (this.offset - i) * 0.5 }, this.animationDuration).easing(this.animationEasing).start();\n      } else {\n        this.children[i].visible = false;\n      }\n\n      this.children[i].outline && (this.children[i].outline.visible = false);\n    }\n\n    for (var i = this.offset + 1; i < this.children.length; i++) {\n      if (this.tileArray.indexOf(this.children[i]) === -1) {\n        continue;\n      }\n\n      if (i - this.offset <= this.visibleDelta) {\n        this.children[i].visible = true;\n        new TWEEN.Tween(this.children[i].material).to({ opacity: 1 / (i - this.offset) * 0.5 }, this.animationDuration).easing(this.animationEasing).start();\n      } else {\n        this.children[i].visible = false;\n      }\n\n      this.children[i].outline && (this.children[i].outline.visible = false);\n    }\n  };\n\n  PANOLENS.TileGroup.prototype.scrollUp = function (duration) {\n    var tiles = this.tileArray,\n        offset;\n\n    duration = duration !== undefined ? duration : this.animationDuration;\n\n    offset = this.offset + 1;\n\n    if (this.offset < tiles.length - 1 && tiles[this.offset + 1].material.visible) {\n      for (var i = tiles.length - 1; i >= 0; i--) {\n        new TWEEN.Tween(tiles[i].position).to({ y: (i - offset) * -this.v_gap,\n          z: Math.abs(i - offset) * -this.d_gap }, duration).easing(this.animationEasing).start();\n      }\n\n      this.offset++;\n      this.updateVisbility();\n      this.dispatchEvent({ type: 'scroll', direction: 'up' });\n    }\n  };\n\n  PANOLENS.TileGroup.prototype.scrollDown = function (duration) {\n    var tiles = this.tileArray,\n        offset;\n\n    duration = duration !== undefined ? duration : this.animationDuration;\n\n    offset = this.offset - 1;\n\n    if (this.offset > 0 && tiles[this.offset - 1].material.visible) {\n      for (var i = 0; i < tiles.length; i++) {\n        new TWEEN.Tween(tiles[i].position).to({ y: (i - offset) * -this.v_gap,\n          z: Math.abs(i - offset) * -this.d_gap }, duration).easing(this.animationEasing).start();\n      }\n\n      this.offset--;\n      this.updateVisbility();\n      this.dispatchEvent({ type: 'scroll', direction: 'down' });\n    }\n  };\n\n  PANOLENS.TileGroup.prototype.reset = function () {\n    this.tileArray.map(function (child, index) {\n      child.position.copy(child.originalPosition);\n    });\n\n    this.offset = 0;\n    this.updateVisbility();\n  };\n\n  PANOLENS.TileGroup.prototype.getIndex = function () {\n    return this.offset;\n  };\n\n  PANOLENS.TileGroup.prototype.getTileCount = function () {\n    var count = 0;\n\n    this.tileArray.map(function (tile) {\n      if (tile.material.visible) {\n        count++;\n      }\n    });\n\n    return count;\n  };\n})();(function () {\n  'use strict';\n\n  var sharedFont, sharedTexture;\n  var pendingQueue = [];\n\n  PANOLENS.SpriteText = function (text, maxWidth, color, opacity, options) {\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].call(this);\n\n    this.text = text || '';\n    this.maxWidth = maxWidth || 2000;\n    this.color = color || 0xffffff;\n    this.opacity = opacity !== undefined ? opacity : 1;\n    this.options = options || {};\n\n    this.animationDuration = 500;\n    this.animationFadeOut = undefined;\n    this.animationFadeIn = undefined;\n    this.tweens = {};\n\n    this.addText(text);\n  };\n\n  PANOLENS.SpriteText.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].prototype);\n\n  PANOLENS.SpriteText.prototype.constructor = PANOLENS.SpriteText;\n\n  PANOLENS.SpriteText.prototype.generateTextGeometry = function () {};\n  PANOLENS.SpriteText.prototype.generateSDFShader = function () {};\n\n  PANOLENS.SpriteText.prototype.setBMFont = function (callback, font, texture) {\n    texture.needsUpdate = true;\n    texture.minFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearMipMapLinearFilter\"];\n    texture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n    texture.generateMipmaps = true;\n    texture.anisotropy = 8;\n\n    sharedFont = font;\n    sharedTexture = texture;\n\n    for (var i = pendingQueue.length - 1; i >= 0; i--) {\n      pendingQueue[i].target.addText(pendingQueue[i].text);\n    }\n\n    while (pendingQueue.length > 0) {\n      pendingQueue.pop();\n    }\n\n    callback && callback();\n  };\n\n  PANOLENS.SpriteText.prototype.addText = function (text) {\n    if (!sharedFont || !sharedTexture) {\n      pendingQueue.push({ target: this, text: text });\n      return;\n    }\n\n    var textAnchor = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"]();\n\n    this.options.text = text;\n    this.options.font = sharedFont;\n    this.options.width = this.maxWidth;\n\n    var geometry = this.generateTextGeometry(this.options);\n    geometry.computeBoundingBox();\n    geometry.computeBoundingSphere();\n\n    var material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"RawShaderMaterial\"](this.generateSDFShader({\n      map: sharedTexture,\n      side: __WEBPACK_IMPORTED_MODULE_8_three__[\"DoubleSide\"],\n      transparent: true,\n      color: this.color,\n      opacity: this.opacity\n    }));\n\n    var layout = geometry.layout;\n    var textMesh = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"](geometry, material);\n\n    textMesh.entity = this;\n    textMesh.position.x = -layout.width / 2;\n    textMesh.position.y = layout.height * 1.035;\n\n    textAnchor.scale.x = textAnchor.scale.y = -0.05;\n    textAnchor.add(textMesh);\n\n    this.mesh = textMesh;\n    this.add(textAnchor);\n  };\n\n  PANOLENS.SpriteText.prototype.update = function (options) {\n    var mesh;\n\n    options = options || {};\n\n    mesh = this.mesh;\n\n    mesh.geometry.update(options);\n    mesh.position.x = -mesh.geometry.layout.width / 2;\n    mesh.position.y = mesh.geometry.layout.height * 1.035;\n  };\n\n  PANOLENS.SpriteText.prototype.tween = function (name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete) {\n    object = object || this;\n    toState = toState || {};\n    duration = duration || this.animationDuration;\n    easing = easing || TWEEN.Easing.Exponential.Out;\n    delay = delay !== undefined ? delay : 0;\n    onStart = onStart || null;\n    onUpdate = onUpdate || null;\n    onComplete = onComplete || null;\n\n    if (!this.tweens[name]) {\n      this.tweens[name] = new TWEEN.Tween(object).to(toState, duration).easing(easing).delay(delay).onStart(onStart).onUpdate(onUpdate).onComplete(onComplete);\n    }\n\n    return this.tweens[name];\n  };\n\n  PANOLENS.SpriteText.prototype.getLayout = function () {\n    return this.mesh && this.mesh.geometry && this.mesh.geometry.layout || {};\n  };\n\n  PANOLENS.SpriteText.prototype.setEntity = function (entity) {\n    this.entity = entity;\n  };\n})();(function () {\n  PANOLENS.Widget = function (container) {\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].call(this);\n\n    this.DEFAULT_TRANSITION = 'all 0.27s ease';\n    this.TOUCH_ENABLED = PANOLENS.Utils.checkTouchSupported();\n    this.PREVENT_EVENT_HANDLER = function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    };\n\n    this.container = container;\n\n    this.barElement;\n    this.fullscreenElement;\n    this.videoElement;\n    this.settingElement;\n\n    this.mainMenu;\n\n    this.activeMainItem;\n    this.activeSubMenu;\n    this.mask;\n  };\n\n  PANOLENS.Widget.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n\n  PANOLENS.Widget.prototype.constructor = PANOLENS.Widget;\n\n  PANOLENS.Widget.prototype.addControlBar = function () {\n    if (!this.container) {\n      console.warn('Widget container not set');\n      return;\n    }\n\n    var scope = this,\n        bar,\n        styleTranslate,\n        styleOpacity,\n        gradientStyle;\n\n    gradientStyle = 'linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))';\n\n    bar = document.createElement('div');\n    bar.style.width = '100%';\n    bar.style.height = '44px';\n    bar.style.float = 'left';\n    bar.style.transform = bar.style.webkitTransform = bar.style.msTransform = 'translateY(-100%)';\n    bar.style.background = '-webkit-' + gradientStyle;\n    bar.style.background = '-moz-' + gradientStyle;\n    bar.style.background = '-o-' + gradientStyle;\n    bar.style.background = '-ms-' + gradientStyle;\n    bar.style.background = gradientStyle;\n    bar.style.transition = this.DEFAULT_TRANSITION;\n    bar.style.pointerEvents = 'none';\n    bar.isHidden = false;\n    bar.toggle = function () {\n      bar.isHidden = !bar.isHidden;\n      styleTranslate = bar.isHidden ? 'translateY(0)' : 'translateY(-100%)';\n      styleOpacity = bar.isHidden ? 0 : 1;\n      bar.style.transform = bar.style.webkitTransform = bar.style.msTransform = styleTranslate;\n      bar.style.opacity = styleOpacity;\n    };\n\n    var menu = this.createDefaultMenu();\n    this.mainMenu = this.createMainMenu(menu);\n    bar.appendChild(this.mainMenu);\n\n    var mask = this.createMask();\n    this.mask = mask;\n    this.container.appendChild(mask);\n\n    bar.dispose = function () {\n      if (scope.fullscreenElement) {\n        bar.removeChild(scope.fullscreenElement);\n        scope.fullscreenElement.dispose();\n        scope.fullscreenElement = null;\n      }\n\n      if (scope.settingElement) {\n        bar.removeChild(scope.settingElement);\n        scope.settingElement.dispose();\n        scope.settingElement = null;\n      }\n\n      if (scope.videoElement) {\n        bar.removeChild(scope.videoElement);\n        scope.videoElement.dispose();\n        scope.videoElement = null;\n      }\n    };\n\n    this.container.appendChild(bar);\n\n    this.mask.addEventListener('mousemove', this.PREVENT_EVENT_HANDLER, true);\n    this.mask.addEventListener('mouseup', this.PREVENT_EVENT_HANDLER, true);\n    this.mask.addEventListener('mousedown', this.PREVENT_EVENT_HANDLER, true);\n    this.mask.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      scope.mask.hide();\n      scope.settingElement.deactivate();\n    }, false);\n\n    this.addEventListener('control-bar-toggle', bar.toggle);\n\n    this.barElement = bar;\n  };\n\n  PANOLENS.Widget.prototype.createDefaultMenu = function () {\n    var scope = this,\n        handler;\n\n    handler = function handler(method, data) {\n      return function () {\n        scope.dispatchEvent({\n\n          type: 'panolens-viewer-handler',\n          method: method,\n          data: data\n\n        });\n      };\n    };\n\n    return [{\n      title: 'Control',\n      subMenu: [{\n        title: this.TOUCH_ENABLED ? 'Touch' : 'Mouse',\n        handler: handler('enableControl', PANOLENS.Controls.ORBIT)\n      }, {\n        title: 'Sensor',\n        handler: handler('enableControl', PANOLENS.Controls.DEVICEORIENTATION)\n      }]\n    }, {\n      title: 'Mode',\n      subMenu: [{\n        title: 'Normal',\n        handler: handler('disableEffect')\n      }, {\n        title: 'Cardboard',\n        handler: handler('enableEffect', PANOLENS.Modes.CARDBOARD)\n      }, {\n        title: 'Stereoscopic',\n        handler: handler('enableEffect', PANOLENS.Modes.STEREO)\n      }]\n    }];\n  };\n\n  PANOLENS.Widget.prototype.addControlButton = function (name) {\n    var element;\n\n    switch (name) {\n      case 'fullscreen':\n\n        element = this.createFullscreenButton();\n        this.fullscreenElement = element;\n\n        break;\n\n      case 'setting':\n\n        element = this.createSettingButton();\n        this.settingElement = element;\n\n        break;\n\n      case 'video':\n\n        element = this.createVideoControl();\n        this.videoElement = element;\n\n        break;\n\n      default:\n\n        return;\n    }\n\n    if (!element) {\n      return;\n    }\n\n    this.barElement.appendChild(element);\n  };\n\n  PANOLENS.Widget.prototype.createMask = function () {\n    var element = document.createElement('div');\n    element.style.position = 'absolute';\n    element.style.top = 0;\n    element.style.left = 0;\n    element.style.width = '100%';\n    element.style.height = '100%';\n    element.style.background = 'transparent';\n    element.style.display = 'none';\n\n    element.show = function () {\n      this.style.display = 'block';\n    };\n\n    element.hide = function () {\n      this.style.display = 'none';\n    };\n\n    return element;\n  };\n\n  PANOLENS.Widget.prototype.createSettingButton = function () {\n    var scope = this,\n        item;\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      scope.mainMenu.toggle();\n\n      if (this.activated) {\n        this.deactivate();\n      } else {\n        this.activate();\n      }\n    }\n\n    item = this.createCustomItem({\n\n      style: {\n\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.Setting + '\")',\n        webkitTransition: this.DEFAULT_TRANSITION,\n        transition: this.DEFAULT_TRANSITION\n\n      },\n\n      onTap: onTap\n\n    });\n\n    item.activate = function () {\n      this.style.transform = 'rotate3d(0,0,1,90deg)';\n      this.activated = true;\n      scope.mask.show();\n    };\n\n    item.deactivate = function () {\n      this.style.transform = 'rotate3d(0,0,0,0)';\n      this.activated = false;\n      scope.mask.hide();\n\n      if (scope.mainMenu && scope.mainMenu.visible) {\n        scope.mainMenu.hide();\n      }\n\n      if (scope.activeSubMenu && scope.activeSubMenu.visible) {\n        scope.activeSubMenu.hide();\n      }\n\n      if (scope.mainMenu && scope.mainMenu._width) {\n        scope.mainMenu.changeSize(scope.mainMenu._width);\n        scope.mainMenu.unslideAll();\n      }\n    };\n\n    item.activated = false;\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createFullscreenButton = function () {\n    var scope = this,\n        item,\n        isFullscreen = false,\n        tapSkipped = true,\n        stylesheetId;\n\n    stylesheetId = 'panolens-style-addon';\n\n    if (!document.fullscreenEnabled && !document.webkitFullscreenEnabled && !document.mozFullScreenEnabled && !document.msFullscreenEnabled) {\n      return;\n    }\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      tapSkipped = false;\n\n      if (!isFullscreen) {\n        scope.container.requestFullscreen && scope.container.requestFullscreen();\n        scope.container.msRequestFullscreen && scope.container.msRequestFullscreen();\n        scope.container.mozRequestFullScreen && scope.container.mozRequestFullScreen();\n        scope.container.webkitRequestFullscreen && scope.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n        isFullscreen = true;\n      } else {\n        document.exitFullscreen && document.exitFullscreen();\n        document.msExitFullscreen && document.msExitFullscreen();\n        document.mozCancelFullScreen && document.mozCancelFullScreen();\n        document.webkitExitFullscreen && document.webkitExitFullscreen();\n        isFullscreen = false;\n      }\n\n      this.style.backgroundImage = isFullscreen ? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")' : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")';\n    }\n\n    function onFullScreenChange(e) {\n      if (tapSkipped) {\n        isFullscreen = !isFullscreen;\n\n        item.style.backgroundImage = isFullscreen ? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")' : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")';\n      }\n\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onWindowResize', data: false });\n\n      tapSkipped = true;\n    }\n\n    document.addEventListener('fullscreenchange', onFullScreenChange, false);\n    document.addEventListener('webkitfullscreenchange', onFullScreenChange, false);\n    document.addEventListener('mozfullscreenchange', onFullScreenChange, false);\n    document.addEventListener('MSFullscreenChange', onFullScreenChange, false);\n\n    item = this.createCustomItem({\n\n      style: {\n\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")'\n\n      },\n\n      onTap: onTap\n\n    });\n\n    if (!document.querySelector(stylesheetId)) {\n      var sheet = document.createElement('style');\n      sheet.id = stylesheetId;\n      sheet.innerHTML = ':-webkit-full-screen { width: 100% !important; height: 100% !important }';\n      document.body.appendChild(sheet);\n    }\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createVideoControl = function () {\n    var item;\n\n    item = document.createElement('span');\n    item.style.display = 'none';\n    item.show = function () {\n      item.style.display = '';\n    };\n\n    item.hide = function () {\n      item.style.display = 'none';\n      item.controlButton.paused = true;\n      item.controlButton.update();\n    };\n\n    item.controlButton = this.createVideoControlButton();\n    item.seekBar = this.createVideoControlSeekbar();\n\n    item.appendChild(item.controlButton);\n    item.appendChild(item.seekBar);\n\n    item.dispose = function () {\n      item.removeChild(item.controlButton);\n      item.removeChild(item.seekBar);\n\n      item.controlButton.dispose();\n      item.controlButton = null;\n\n      item.seekBar.dispose();\n      item.seekBar = null;\n    };\n\n    this.addEventListener('video-control-show', item.show);\n    this.addEventListener('video-control-hide', item.hide);\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createVideoControlButton = function () {\n    var scope = this,\n        item;\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'toggleVideoPlay', data: !this.paused });\n\n      this.paused = !this.paused;\n\n      item.update();\n    }\n\n    item = this.createCustomItem({\n\n      style: {\n\n        float: 'left',\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.VideoPlay + '\")'\n\n      },\n\n      onTap: onTap\n\n    });\n\n    item.paused = true;\n\n    item.update = function (paused) {\n      this.paused = paused !== undefined ? paused : this.paused;\n\n      this.style.backgroundImage = 'url(\"' + (this.paused ? PANOLENS.DataImage.VideoPlay : PANOLENS.DataImage.VideoPause) + '\")';\n    };\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createVideoControlSeekbar = function () {\n    var scope = this,\n        item,\n        progressElement,\n        progressElementControl,\n        isDragging = false,\n        mouseX,\n        percentageNow,\n        percentageNext;\n\n    progressElement = document.createElement('div');\n    progressElement.style.width = '0%';\n    progressElement.style.height = '100%';\n    progressElement.style.backgroundColor = '#fff';\n\n    progressElementControl = document.createElement('div');\n    progressElementControl.style.float = 'right';\n    progressElementControl.style.width = '14px';\n    progressElementControl.style.height = '14px';\n    progressElementControl.style.transform = 'translate(7px, -5px)';\n    progressElementControl.style.borderRadius = '50%';\n    progressElementControl.style.backgroundColor = '#ddd';\n\n    progressElementControl.addEventListener('mousedown', onMouseDown, false);\n    progressElementControl.addEventListener('touchstart', onMouseDown, false);\n\n    function onMouseDown(event) {\n      event.stopPropagation();\n\n      isDragging = true;\n\n      mouseX = event.clientX || event.changedTouches && event.changedTouches[0].clientX;\n\n      percentageNow = parseInt(progressElement.style.width) / 100;\n\n      addControlListeners();\n    }\n\n    function onVideoControlDrag(event) {\n      var clientX;\n\n      if (isDragging) {\n        clientX = event.clientX || event.changedTouches && event.changedTouches[0].clientX;\n\n        percentageNext = (clientX - mouseX) / item.clientWidth;\n\n        percentageNext = percentageNow + percentageNext;\n\n        percentageNext = percentageNext > 1 ? 1 : percentageNext < 0 ? 0 : percentageNext;\n\n        item.setProgress(percentageNext);\n\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentageNext });\n      }\n    }\n\n    function onVideoControlStop(event) {\n      event.stopPropagation();\n\n      isDragging = false;\n\n      removeControlListeners();\n    }\n\n    function addControlListeners() {\n      scope.container.addEventListener('mousemove', onVideoControlDrag, false);\n      scope.container.addEventListener('mouseup', onVideoControlStop, false);\n      scope.container.addEventListener('touchmove', onVideoControlDrag, false);\n      scope.container.addEventListener('touchend', onVideoControlStop, false);\n    }\n\n    function removeControlListeners() {\n      scope.container.removeEventListener('mousemove', onVideoControlDrag, false);\n      scope.container.removeEventListener('mouseup', onVideoControlStop, false);\n      scope.container.removeEventListener('touchmove', onVideoControlDrag, false);\n      scope.container.removeEventListener('touchend', onVideoControlStop, false);\n    }\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      var percentage;\n\n      if (event.target === progressElementControl) {\n        return;\n      }\n\n      percentage = event.changedTouches && event.changedTouches.length > 0 ? (event.changedTouches[0].pageX - event.target.getBoundingClientRect().left) / this.clientWidth : event.offsetX / this.clientWidth;\n\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentage });\n\n      item.setProgress(event.offsetX / this.clientWidth);\n    }\n\n    function onDispose() {\n      removeControlListeners();\n      progressElement = null;\n      progressElementControl = null;\n    }\n\n    progressElement.appendChild(progressElementControl);\n\n    item = this.createCustomItem({\n\n      style: {\n\n        float: 'left',\n        width: '30%',\n        height: '4px',\n        marginTop: '20px',\n        backgroundColor: 'rgba(188,188,188,0.8)'\n\n      },\n\n      onTap: onTap,\n      onDispose: onDispose\n\n    });\n\n    item.appendChild(progressElement);\n\n    item.setProgress = function (percentage) {\n      progressElement.style.width = percentage * 100 + '%';\n    };\n\n    this.addEventListener('video-update', function (event) {\n      item.setProgress(event.percentage);\n    });\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createMenuItem = function (title) {\n    var scope = this,\n        item = document.createElement('a');\n    item.textContent = title;\n    item.style.display = 'block';\n    item.style.padding = '10px';\n    item.style.textDecoration = 'none';\n    item.style.cursor = 'pointer';\n    item.style.pointerEvents = 'auto';\n    item.style.transition = this.DEFAULT_TRANSITION;\n\n    item.slide = function (right) {\n      this.style.transform = 'translateX(' + (right ? '' : '-') + '100%)';\n    };\n\n    item.unslide = function () {\n      this.style.transform = 'translateX(0)';\n    };\n\n    item.setIcon = function (url) {\n      if (this.icon) {\n        this.icon.style.backgroundImage = 'url(' + url + ')';\n      }\n    };\n\n    item.setSelectionTitle = function (title) {\n      if (this.selection) {\n        this.selection.textContent = title;\n      }\n    };\n\n    item.addSelection = function (name) {\n      var selection = document.createElement('span');\n      selection.style.fontSize = '13px';\n      selection.style.fontWeight = '300';\n      selection.style.float = 'right';\n\n      this.selection = selection;\n      this.setSelectionTitle(name);\n      this.appendChild(selection);\n\n      return this;\n    };\n\n    item.addIcon = function (url, left, flip) {\n      url = url || PANOLENS.DataImage.ChevronRight;\n      left = left || false;\n      flip = flip || false;\n\n      var element = document.createElement('span');\n      element.style.float = left ? 'left' : 'right';\n      element.style.width = '17px';\n      element.style.height = '17px';\n      element.style['margin' + (left ? 'Right' : 'Left')] = '12px';\n      element.style.backgroundSize = 'cover';\n\n      if (flip) {\n        element.style.transform = 'rotateZ(180deg)';\n      }\n\n      this.icon = element;\n      this.setIcon(url);\n      this.appendChild(element);\n\n      return this;\n    };\n\n    item.addSubMenu = function (title, items) {\n      this.subMenu = scope.createSubMenu(title, items);\n\n      return this;\n    };\n\n    item.addEventListener('mouseenter', function () {\n      this.style.backgroundColor = '#e0e0e0';\n    }, false);\n\n    item.addEventListener('mouseleave', function () {\n      this.style.backgroundColor = '#fafafa';\n    }, false);\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createMenuItemHeader = function (title) {\n    var header = this.createMenuItem(title);\n\n    header.style.borderBottom = '1px solid #333';\n    header.style.paddingBottom = '15px';\n\n    return header;\n  };\n\n  PANOLENS.Widget.prototype.createMainMenu = function (menus) {\n    var scope = this,\n        menu = this.createMenu(),\n        subMenu;\n\n    menu._width = 200;\n    menu.changeSize(menu._width);\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      var mainMenu = scope.mainMenu,\n          subMenu = this.subMenu;\n\n      function onNextTick() {\n        mainMenu.changeSize(subMenu.clientWidth);\n        subMenu.show();\n        subMenu.unslideAll();\n      }\n\n      mainMenu.hide();\n      mainMenu.slideAll();\n      mainMenu.parentElement.appendChild(subMenu);\n\n      scope.activeMainItem = this;\n      scope.activeSubMenu = subMenu;\n\n      window.requestAnimationFrame(onNextTick);\n    }\n\n    for (var i = 0; i < menus.length; i++) {\n      var item = menu.addItem(menus[i].title);\n\n      item.style.paddingLeft = '20px';\n\n      item.addIcon().addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false);\n\n      if (menus[i].subMenu && menus[i].subMenu.length > 0) {\n        var title = menus[i].subMenu[0].title;\n\n        item.addSelection(title).addSubMenu(menus[i].title, menus[i].subMenu);\n      }\n    }\n\n    return menu;\n  };\n\n  PANOLENS.Widget.prototype.createSubMenu = function (title, items) {\n    var scope = this,\n        menu,\n        subMenu = this.createMenu();\n\n    subMenu.items = items;\n    subMenu.activeItem;\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      menu = scope.mainMenu;\n      menu.changeSize(menu._width);\n      menu.unslideAll();\n      menu.show();\n      subMenu.slideAll(true);\n      subMenu.hide();\n\n      if (this.type !== 'header') {\n        subMenu.setActiveItem(this);\n        scope.activeMainItem.setSelectionTitle(this.textContent);\n\n        this.handler && this.handler();\n      }\n    }\n\n    subMenu.addHeader(title).addIcon(undefined, true, true).addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false);\n\n    for (var i = 0; i < items.length; i++) {\n      var item = subMenu.addItem(items[i].title);\n\n      item.style.fontWeight = 300;\n      item.handler = items[i].handler;\n      item.addIcon(' ', true);\n      item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false);\n\n      if (!subMenu.activeItem) {\n        subMenu.setActiveItem(item);\n      }\n    }\n\n    subMenu.slideAll(true);\n\n    return subMenu;\n  };\n\n  PANOLENS.Widget.prototype.createMenu = function () {\n    var scope = this,\n        menu = document.createElement('span'),\n        style;\n\n    style = menu.style;\n\n    style.padding = '5px 0';\n    style.position = 'fixed';\n    style.bottom = '100%';\n    style.right = '14px';\n    style.backgroundColor = '#fafafa';\n    style.fontFamily = 'Helvetica Neue';\n    style.fontSize = '14px';\n    style.visibility = 'hidden';\n    style.opacity = 0;\n    style.boxShadow = '0 0 12pt rgba(0,0,0,0.25)';\n    style.borderRadius = '2px';\n    style.overflow = 'hidden';\n    style.willChange = 'width, height, opacity';\n    style.pointerEvents = 'auto';\n    style.transition = this.DEFAULT_TRANSITION;\n\n    menu.visible = false;\n\n    menu.changeSize = function (width, height) {\n      if (width) {\n        this.style.width = width + 'px';\n      }\n\n      if (height) {\n        this.style.height = height + 'px';\n      }\n    };\n\n    menu.show = function () {\n      this.style.opacity = 1;\n      this.style.visibility = 'visible';\n      this.visible = true;\n    };\n\n    menu.hide = function () {\n      this.style.opacity = 0;\n      this.style.visibility = 'hidden';\n      this.visible = false;\n    };\n\n    menu.toggle = function () {\n      if (this.visible) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    };\n\n    menu.slideAll = function (right) {\n      for (var i = 0; i < menu.children.length; i++) {\n        if (menu.children[i].slide) {\n          menu.children[i].slide(right);\n        }\n      }\n    };\n\n    menu.unslideAll = function () {\n      for (var i = 0; i < menu.children.length; i++) {\n        if (menu.children[i].unslide) {\n          menu.children[i].unslide();\n        }\n      }\n    };\n\n    menu.addHeader = function (title) {\n      var header = scope.createMenuItemHeader(title);\n      header.type = 'header';\n\n      this.appendChild(header);\n\n      return header;\n    };\n\n    menu.addItem = function (title) {\n      var item = scope.createMenuItem(title);\n      item.type = 'item';\n\n      this.appendChild(item);\n\n      return item;\n    };\n\n    menu.setActiveItem = function (item) {\n      if (this.activeItem) {\n        this.activeItem.setIcon(' ');\n      }\n\n      item.setIcon(PANOLENS.DataImage.Check);\n\n      this.activeItem = item;\n    };\n\n    menu.addEventListener('mousemove', this.PREVENT_EVENT_HANDLER, true);\n    menu.addEventListener('mouseup', this.PREVENT_EVENT_HANDLER, true);\n    menu.addEventListener('mousedown', this.PREVENT_EVENT_HANDLER, true);\n\n    return menu;\n  };\n\n  PANOLENS.Widget.prototype.createCustomItem = function (options) {\n    options = options || {};\n\n    var scope = this,\n        item = options.element || document.createElement('span');\n\n    item.style.cursor = 'pointer';\n    item.style.float = 'right';\n    item.style.width = '44px';\n    item.style.height = '100%';\n    item.style.backgroundSize = '60%';\n    item.style.backgroundRepeat = 'no-repeat';\n    item.style.backgroundPosition = 'center';\n    item.style.webkitUserSelect = item.style.MozUserSelect = item.style.userSelect = 'none';\n    item.style.position = 'relative';\n    item.style.pointerEvents = 'auto';\n\n    item.addEventListener(scope.TOUCH_ENABLED ? 'touchstart' : 'mouseenter', function () {\n      item.style.filter = item.style.webkitFilter = 'drop-shadow(0 0 5px rgba(255,255,255,1))';\n    });\n    item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'mouseleave', function () {\n      item.style.filter = item.style.webkitFilter = '';\n    });\n\n    item = this.mergeStyleOptions(item, options.style);\n\n    if (options.onTap) {\n      item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false);\n    }\n\n    item.dispose = function () {\n      item.removeEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false);\n\n      options.onDispose && options.onDispose();\n    };\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.mergeStyleOptions = function (element, options) {\n    options = options || {};\n\n    for (var property in options) {\n      if (options.hasOwnProperty(property)) {\n        element.style[property] = options[property];\n      }\n    }\n\n    return element;\n  };\n\n  PANOLENS.Widget.prototype.dispose = function () {\n    if (this.barElement) {\n      this.container.removeChild(this.barElement);\n      this.barElement.dispose();\n      this.barElement = null;\n    }\n  };\n})();(function () {\n  PANOLENS.Infospot = function (scale, imageSrc, animated) {\n    var scope = this,\n        ratio,\n        startScale,\n        endScale,\n        duration;\n\n    scale = scale || 300;\n    imageSrc = imageSrc || PANOLENS.DataImage.Info;\n    duration = 500;\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].call(this);\n\n    this.type = 'infospot';\n\n    this.animated = animated !== undefined ? animated : true;\n    this.isHovering = false;\n    this.visible = false;\n\n    this.element;\n    this.toPanorama;\n    this.cursorStyle;\n\n    this.mode = PANOLENS.Modes.UNKNOWN;\n\n    this.scale.set(scale, scale, 1);\n    this.rotation.y = Math.PI;\n    this.scaleFactor = 1.3;\n\n    this.container;\n\n    this.HANDLER_FOCUS;\n\n    PANOLENS.Utils.TextureLoader.load(imageSrc, postLoad);\n\n    function postLoad(texture) {\n      texture.wrapS = __WEBPACK_IMPORTED_MODULE_8_three__[\"RepeatWrapping\"];\n      texture.repeat.x = -1;\n\n      texture.image.width = texture.image.naturalWidth || 64;\n      texture.image.height = texture.image.naturalHeight || 64;\n\n      ratio = texture.image.width / texture.image.height;\n      scope.scale.set(ratio * scale, scale, 1);\n\n      startScale = scope.scale.clone();\n\n      scope.scaleUpAnimation = new TWEEN.Tween(scope.scale).to({ x: startScale.x * scope.scaleFactor, y: startScale.y * scope.scaleFactor }, duration).easing(TWEEN.Easing.Elastic.Out);\n\n      scope.scaleDownAnimation = new TWEEN.Tween(scope.scale).to({ x: startScale.x, y: startScale.y }, duration).easing(TWEEN.Easing.Elastic.Out);\n\n      scope.material.side = __WEBPACK_IMPORTED_MODULE_8_three__[\"DoubleSide\"];\n      scope.material.map = texture;\n      scope.material.depthTest = false;\n      scope.material.needsUpdate = true;\n    }\n\n    function show() {\n      this.visible = true;\n    }\n\n    function hide() {\n      this.visible = false;\n    }\n\n    this.showAnimation = new TWEEN.Tween(this.material).to({ opacity: 1 }, duration).onStart(show.bind(this)).easing(TWEEN.Easing.Quartic.Out);\n\n    this.hideAnimation = new TWEEN.Tween(this.material).to({ opacity: 0 }, duration).onComplete(hide.bind(this)).easing(TWEEN.Easing.Quartic.Out);\n\n    this.addEventListener('click', this.onClick);\n    this.addEventListener('hover', this.onHover);\n    this.addEventListener('hoverenter', this.onHoverStart);\n    this.addEventListener('hoverleave', this.onHoverEnd);\n    this.addEventListener('panolens-dual-eye-effect', this.onDualEyeEffect);\n    this.addEventListener('panolens-container', this.setContainer.bind(this));\n    this.addEventListener('dismiss', this.onDismiss);\n    this.addEventListener('panolens-infospot-focus', this.setFocusMethod);\n  };\n\n  PANOLENS.Infospot.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].prototype);\n\n  PANOLENS.Infospot.prototype.setContainer = function (data) {\n    var container;\n\n    if (data instanceof HTMLElement) {\n      container = data;\n    } else if (data && data.container) {\n      container = data.container;\n    }\n\n    if (container && this.element) {\n      container.appendChild(this.element);\n    }\n\n    this.container = container;\n  };\n\n  PANOLENS.Infospot.prototype.getContainer = function () {\n    return this.container;\n  };\n\n  PANOLENS.Infospot.prototype.onClick = function (event) {\n    if (this.element && this.getContainer()) {\n      this.onHoverStart(event);\n\n      this.lockHoverElement();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.onDismiss = function (event) {\n    if (this.element) {\n      this.unlockHoverElement();\n      this.onHoverEnd();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.onHover = function (event) {};\n\n  PANOLENS.Infospot.prototype.onHoverStart = function (event) {\n    if (!this.getContainer()) {\n      return;\n    }\n\n    var cursorStyle = this.cursorStyle || (this.mode === PANOLENS.Modes.NORMAL ? 'pointer' : 'default');\n\n    this.isHovering = true;\n    this.container.style.cursor = cursorStyle;\n\n    if (this.animated) {\n      this.scaleDownAnimation && this.scaleDownAnimation.stop();\n      this.scaleUpAnimation && this.scaleUpAnimation.start();\n    }\n\n    if (this.element && event.mouseEvent.clientX >= 0 && event.mouseEvent.clientY >= 0) {\n      if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n        this.element.style.display = 'none';\n        this.element.left && (this.element.left.style.display = 'block');\n        this.element.right && (this.element.right.style.display = 'block');\n\n        this.element._width = this.element.left.clientWidth;\n        this.element._height = this.element.left.clientHeight;\n      } else {\n        this.element.style.display = 'block';\n        this.element.left && (this.element.left.style.display = 'none');\n        this.element.right && (this.element.right.style.display = 'none');\n\n        this.element._width = this.element.clientWidth;\n        this.element._height = this.element.clientHeight;\n      }\n    }\n  };\n\n  PANOLENS.Infospot.prototype.onHoverEnd = function () {\n    if (!this.getContainer()) {\n      return;\n    }\n\n    this.isHovering = false;\n    this.container.style.cursor = 'default';\n\n    if (this.animated) {\n      this.scaleUpAnimation && this.scaleUpAnimation.stop();\n      this.scaleDownAnimation && this.scaleDownAnimation.start();\n    }\n\n    if (this.element && !this.element.locked) {\n      this.element.style.display = 'none';\n      this.element.left && (this.element.left.style.display = 'none');\n      this.element.right && (this.element.right.style.display = 'none');\n\n      this.unlockHoverElement();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.onDualEyeEffect = function (event) {\n    if (!this.getContainer()) {\n      return;\n    }\n\n    var element, halfWidth, halfHeight;\n\n    this.mode = event.mode;\n\n    element = this.element;\n\n    halfWidth = this.container.clientWidth / 2;\n    halfHeight = this.container.clientHeight / 2;\n\n    if (!element) {\n      return;\n    }\n\n    if (!element.left || !element.right) {\n      element.left = element.cloneNode(true);\n      element.right = element.cloneNode(true);\n    }\n\n    if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n      element.left.style.display = element.style.display;\n      element.right.style.display = element.style.display;\n      element.style.display = 'none';\n    } else {\n      element.style.display = element.left.style.display;\n      element.left.style.display = 'none';\n      element.right.style.display = 'none';\n    }\n\n    this.translateElement(halfWidth, halfHeight);\n\n    this.container.appendChild(element.left);\n    this.container.appendChild(element.right);\n  };\n\n  PANOLENS.Infospot.prototype.translateElement = function (x, y) {\n    if (!this.element._width || !this.element._height || !this.getContainer()) {\n      return;\n    }\n\n    var left, top, element, width, height, delta, container;\n\n    container = this.container;\n    element = this.element;\n    width = element._width / 2;\n    height = element._height / 2;\n    delta = element.verticalDelta !== undefined ? element.verticalDelta : 40;\n\n    left = x - width;\n    top = y - height - delta;\n\n    if ((this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) && element.left && element.right && !(x === container.clientWidth / 2 && y === container.clientHeight / 2)) {\n      left = container.clientWidth / 4 - width + (x - container.clientWidth / 2);\n      top = container.clientHeight / 2 - height - delta + (y - container.clientHeight / 2);\n\n      this.setElementStyle('transform', element.left, 'translate(' + left + 'px, ' + top + 'px)');\n\n      left += container.clientWidth / 2;\n\n      this.setElementStyle('transform', element.right, 'translate(' + left + 'px, ' + top + 'px)');\n    } else {\n      this.setElementStyle('transform', element, 'translate(' + left + 'px, ' + top + 'px)');\n    }\n  };\n\n  PANOLENS.Infospot.prototype.setElementStyle = function (type, element, value) {\n    var style = element.style;\n\n    if (type === 'transform') {\n      style.webkitTransform = style.msTransform = style.transform = value;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.setText = function (text) {\n    if (this.element) {\n      this.element.textContent = text;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.setCursorHoverStyle = function (style) {\n    this.cursorStyle = style;\n  };\n\n  PANOLENS.Infospot.prototype.addHoverText = function (text, delta) {\n    if (!this.element) {\n      this.element = document.createElement('div');\n      this.element.style.display = 'none';\n      this.element.style.color = '#fff';\n      this.element.style.top = 0;\n      this.element.style.maxWidth = '50%';\n      this.element.style.maxHeight = '50%';\n      this.element.style.textShadow = '0 0 3px #000000';\n      this.element.style.fontFamily = '\"Trebuchet MS\", Helvetica, sans-serif';\n      this.element.style.position = 'absolute';\n      this.element.classList.add('panolens-infospot');\n      this.element.verticalDelta = delta !== undefined ? delta : 40;\n    }\n\n    this.setText(text);\n  };\n\n  PANOLENS.Infospot.prototype.addHoverElement = function (el, delta) {\n    if (!this.element) {\n      this.element = el.cloneNode(true);\n      this.element.style.display = 'none';\n      this.element.style.top = 0;\n      this.element.style.position = 'absolute';\n      this.element.classList.add('panolens-infospot');\n      this.element.verticalDelta = delta !== undefined ? delta : 40;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.removeHoverElement = function () {\n    if (this.element) {\n      if (this.element.left) {\n        this.container.removeChild(this.element.left);\n        this.element.left = null;\n      }\n\n      if (this.element.right) {\n        this.container.removeChild(this.element.right);\n        this.element.right = null;\n      }\n\n      this.container.removeChild(this.element);\n      this.element = null;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.lockHoverElement = function () {\n    if (this.element) {\n      this.element.locked = true;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.unlockHoverElement = function () {\n    if (this.element) {\n      this.element.locked = false;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.show = function (delay) {\n    delay = delay || 0;\n\n    if (this.animated) {\n      this.hideAnimation && this.hideAnimation.stop();\n      this.showAnimation && this.showAnimation.delay(delay).start();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.hide = function (delay) {\n    delay = delay || 0;\n\n    if (this.animated) {\n      this.showAnimation && this.showAnimation.stop();\n      this.hideAnimation && this.hideAnimation.delay(delay).start();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.setFocusMethod = function (event) {\n    if (event) {\n      this.HANDLER_FOCUS = event.method;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.focus = function (duration, easing) {\n    if (this.HANDLER_FOCUS) {\n      this.HANDLER_FOCUS(this.position, duration, easing);\n      this.onDismiss();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.dispose = function () {\n    this.removeHoverElement();\n    this.material.dispose();\n\n    if (this.parent) {\n      this.parent.remove(this);\n    }\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.Viewer = function (options) {\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].call(this);\n\n    if (!__WEBPACK_IMPORTED_MODULE_8_three__) {\n      console.error('Three.JS not found');\n\n      return;\n    }\n\n    var container;\n\n    options = options || {};\n    options.controlBar = options.controlBar !== undefined ? options.controlBar : true;\n    options.controlButtons = options.controlButtons || ['fullscreen', 'setting', 'video'];\n    options.autoHideControlBar = options.autoHideControlBar !== undefined ? options.autoHideControlBar : false;\n    options.autoHideInfospot = options.autoHideInfospot !== undefined ? options.autoHideInfospot : true;\n    options.horizontalView = options.horizontalView !== undefined ? options.horizontalView : false;\n    options.clickTolerance = options.clickTolerance || 10;\n    options.cameraFov = options.cameraFov || 60;\n    options.reverseDragging = options.reverseDragging || false;\n    options.enableReticle = options.enableReticle || false;\n    options.dwellTime = options.dwellTime || 1500;\n    options.autoReticleSelect = options.autoReticleSelect !== undefined ? options.autoReticleSelect : true;\n    options.viewIndicator = options.viewIndicator !== undefined ? options.viewIndicator : false;\n    options.indicatorSize = options.indicatorSize || 30;\n    options.output = options.output ? options.output : 'none';\n\n    this.options = options;\n\n    if (options.container) {\n      container = options.container;\n      container._width = container.clientWidth;\n      container._height = container.clientHeight;\n    } else {\n      container = document.createElement('div');\n      container.classList.add('panolens-container');\n      container.style.width = '100%';\n      container.style.height = '100%';\n      container._width = window.innerWidth;\n      container._height = window.innerHeight;\n      document.body.appendChild(container);\n    }\n\n    this.container = container;\n\n    this.camera = options.camera || new __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"](this.options.cameraFov, this.container.clientWidth / this.container.clientHeight, 1, 10000);\n    this.scene = options.scene || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Scene\"]();\n    this.renderer = options.renderer || new __WEBPACK_IMPORTED_MODULE_8_three__[\"WebGLRenderer\"]({ alpha: true, antialias: false });\n\n    this.viewIndicatorSize = options.indicatorSize;\n\n    this.reticle = {};\n    this.tempEnableReticle = this.options.enableReticle;\n\n    this.mode = PANOLENS.Modes.NORMAL;\n\n    this.OrbitControls;\n    this.DeviceOrientationControls;\n\n    this.CardboardEffect;\n    this.StereoEffect;\n\n    this.controls;\n    this.effect;\n    this.panorama;\n    this.widget;\n\n    this.hoverObject;\n    this.infospot;\n    this.pressEntityObject;\n    this.pressObject;\n\n    this.raycaster = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Raycaster\"]();\n    this.raycasterPoint = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n    this.userMouse = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n    this.updateCallbacks = [];\n    this.requestAnimationId;\n\n    this.cameraFrustum = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Frustum\"]();\n    this.cameraViewProjectionMatrix = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]();\n\n    this.outputDivElement;\n\n    this.HANDLER_MOUSE_DOWN = this.onMouseDown.bind(this);\n    this.HANDLER_MOUSE_UP = this.onMouseUp.bind(this);\n    this.HANDLER_MOUSE_MOVE = this.onMouseMove.bind(this);\n    this.HANDLER_WINDOW_RESIZE = this.onWindowResize.bind(this);\n    this.HANDLER_KEY_DOWN = this.onKeyDown.bind(this);\n    this.HANDLER_KEY_UP = this.onKeyUp.bind(this);\n    this.HANDLER_TAP = this.onTap.bind(this, {\n      clientX: this.container.clientWidth / 2,\n      clientY: this.container.clientHeight / 2\n    });\n\n    this.OUTPUT_INFOSPOT = false;\n\n    this.tweenLeftAnimation = new TWEEN.Tween();\n    this.tweenUpAnimation = new TWEEN.Tween();\n\n    this.renderer.setPixelRatio(window.devicePixelRatio);\n    this.renderer.setSize(this.container.clientWidth, this.container.clientHeight);\n    this.renderer.setClearColor(0x000000, 1);\n    this.renderer.sortObjects = false;\n\n    this.renderer.domElement.classList.add('panolens-canvas');\n    this.renderer.domElement.style.display = 'block';\n    this.container.style.backgroundColor = '#000';\n    this.container.appendChild(this.renderer.domElement);\n\n    this.OrbitControls = new __WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"](this.camera, this.container);\n    this.OrbitControls.name = 'orbit';\n    this.OrbitControls.minDistance = 1;\n    this.OrbitControls.noPan = true;\n    this.DeviceOrientationControls = new __WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"](this.camera, this.container);\n    this.DeviceOrientationControls.name = 'device-orientation';\n    this.DeviceOrientationControls.enabled = false;\n    this.camera.position.z = 1;\n\n    if (this.options.passiveRendering) {\n      console.warn('passiveRendering is now deprecated');\n    }\n\n    this.controls = [this.OrbitControls, this.DeviceOrientationControls];\n    this.control = this.OrbitControls;\n\n    this.CardboardEffect = new __WEBPACK_IMPORTED_MODULE_8_three__[\"CardboardEffect\"](this.renderer);\n    this.CardboardEffect.setSize(this.container.clientWidth, this.container.clientHeight);\n\n    this.StereoEffect = new __WEBPACK_IMPORTED_MODULE_8_three__[\"StereoEffect\"](this.renderer);\n    this.StereoEffect.setSize(this.container.clientWidth, this.container.clientHeight);\n\n    this.effect = this.CardboardEffect;\n\n    this.addReticle();\n\n    if (this.options.horizontalView) {\n      this.OrbitControls.minPolarAngle = Math.PI / 2;\n      this.OrbitControls.maxPolarAngle = Math.PI / 2;\n    }\n\n    if (this.options.controlBar !== false) {\n      this.addDefaultControlBar(this.options.controlButtons);\n    }\n\n    if (this.options.viewIndicator) {\n      this.addViewIndicator();\n    }\n\n    if (this.options.reverseDragging) {\n      this.reverseDraggingDirection();\n    }\n\n    if (this.options.enableReticle) {\n      this.enableReticleControl();\n    } else {\n      this.registerMouseAndTouchEvents();\n    }\n\n    if (this.options.output === 'overlay') {\n      this.addOutputElement();\n    }\n\n    this.registerEventListeners();\n\n    this.animate.call(this);\n  };\n\n  PANOLENS.Viewer.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n\n  PANOLENS.Viewer.prototype.constructor = PANOLENS.Viewer;\n\n  PANOLENS.Viewer.prototype.add = function (object) {\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[i]);\n      }\n\n      return this;\n    }\n\n    this.scene.add(object);\n\n    if (object.addEventListener) {\n      object.addEventListener('panolens-viewer-handler', this.eventHandler.bind(this));\n    }\n\n    if (object instanceof PANOLENS.Panorama && object.dispatchEvent) {\n      object.dispatchEvent({ type: 'panolens-container', container: this.container });\n    }\n\n    if (object.type === 'panorama') {\n      this.addPanoramaEventListener(object);\n\n      if (!this.panorama) {\n        this.setPanorama(object);\n      }\n    }\n  };\n\n  PANOLENS.Viewer.prototype.remove = function (object) {\n    if (object.removeEventListener) {\n      object.removeEventListener('panolens-viewer-handler', this.eventHandler.bind(this));\n    }\n\n    this.scene.remove(object);\n  };\n\n  PANOLENS.Viewer.prototype.addDefaultControlBar = function (array) {\n    var scope = this;\n\n    if (this.widget) {\n      console.warn('Default control bar exists');\n      return;\n    }\n\n    this.widget = new PANOLENS.Widget(this.container);\n    this.widget.addEventListener('panolens-viewer-handler', this.eventHandler.bind(this));\n    this.widget.addControlBar();\n    array.forEach(function (buttonName) {\n      scope.widget.addControlButton(buttonName);\n    });\n  };\n\n  PANOLENS.Viewer.prototype.setPanorama = function (pano) {\n    var scope = this,\n        leavingPanorama = this.panorama;\n\n    if (pano.type === 'panorama' && leavingPanorama !== pano) {\n      this.hideInfospot();\n\n      var afterEnterComplete = function afterEnterComplete() {\n        leavingPanorama && leavingPanorama.onLeave();\n        pano.removeEventListener('enter-fade-start', afterEnterComplete);\n      };\n\n      pano.addEventListener('enter-fade-start', afterEnterComplete);\n\n      (this.panorama = pano).onEnter();\n    }\n  };\n\n  PANOLENS.Viewer.prototype.eventHandler = function (event) {\n    if (event.method && this[event.method]) {\n      this[event.method](event.data);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.dispatchEventToChildren = function (event) {\n    this.scene.traverse(function (object) {\n      if (object.dispatchEvent) {\n        object.dispatchEvent(event);\n      }\n    });\n  };\n\n  PANOLENS.Viewer.prototype.activateWidgetItem = function (controlIndex, mode) {\n    var mainMenu = this.widget.mainMenu;\n    var ControlMenuItem = mainMenu.children[0];\n    var ModeMenuItem = mainMenu.children[1];\n\n    var item;\n\n    if (controlIndex !== undefined) {\n      switch (controlIndex) {\n        case 0:\n\n          item = ControlMenuItem.subMenu.children[1];\n\n          break;\n\n        case 1:\n\n          item = ControlMenuItem.subMenu.children[2];\n\n          break;\n\n        default:\n\n          item = ControlMenuItem.subMenu.children[1];\n\n          break;\n      }\n\n      ControlMenuItem.subMenu.setActiveItem(item);\n      ControlMenuItem.setSelectionTitle(item.textContent);\n    }\n\n    if (mode !== undefined) {\n      switch (mode) {\n        case PANOLENS.Modes.CARDBOARD:\n\n          item = ModeMenuItem.subMenu.children[2];\n\n          break;\n\n        case PANOLENS.Modes.STEREO:\n\n          item = ModeMenuItem.subMenu.children[3];\n\n          break;\n\n        default:\n\n          item = ModeMenuItem.subMenu.children[1];\n\n          break;\n      }\n\n      ModeMenuItem.subMenu.setActiveItem(item);\n      ModeMenuItem.setSelectionTitle(item.textContent);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.enableEffect = function (mode) {\n    if (this.mode === mode) {\n      return;\n    }\n    if (mode === PANOLENS.Modes.NORMAL) {\n      this.disableEffect();return;\n    } else {\n      this.mode = mode;\n    }\n\n    var fov = this.camera.fov;\n\n    switch (mode) {\n      case PANOLENS.Modes.CARDBOARD:\n\n        this.effect = this.CardboardEffect;\n        this.enableReticleControl();\n\n        break;\n\n      case PANOLENS.Modes.STEREO:\n\n        this.effect = this.StereoEffect;\n        this.enableReticleControl();\n\n        break;\n\n      default:\n\n        this.effect = null;\n        this.disableReticleControl();\n\n        break;\n    }\n\n    this.activateWidgetItem(undefined, this.mode);\n\n    this.dispatchEventToChildren({ type: 'panolens-dual-eye-effect', mode: this.mode });\n\n    this.camera.fov = fov + 10e-3;\n    this.effect.setSize(this.container.clientWidth, this.container.clientHeight);\n    this.render();\n    this.camera.fov = fov;\n  };\n\n  PANOLENS.Viewer.prototype.disableEffect = function () {\n    if (this.mode === PANOLENS.Modes.NORMAL) {\n      return;\n    }\n\n    this.mode = PANOLENS.Modes.NORMAL;\n    this.disableReticleControl();\n\n    this.activateWidgetItem(undefined, this.mode);\n\n    this.dispatchEventToChildren({ type: 'panolens-dual-eye-effect', mode: this.mode });\n\n    this.renderer.setSize(this.container.clientWidth, this.container.clientHeight);\n    this.render();\n  };\n\n  PANOLENS.Viewer.prototype.enableReticleControl = function () {\n    if (this.reticle.visible) {\n      return;\n    }\n    if (!this.reticle.textureLoaded) {\n      this.reticle.loadTextures();\n    }\n\n    this.tempEnableReticle = true;\n\n    this.unregisterMouseAndTouchEvents();\n    this.reticle.show();\n    this.registerReticleEvent();\n    this.updateReticleEvent();\n  };\n\n  PANOLENS.Viewer.prototype.disableReticleControl = function () {\n    this.tempEnableReticle = false;\n\n    if (!this.options.enableReticle) {\n      this.reticle.hide();\n      this.unregisterReticleEvent();\n      this.registerMouseAndTouchEvents();\n    } else {\n      this.updateReticleEvent();\n    }\n  };\n\n  PANOLENS.Viewer.prototype.toggleVideoPlay = function (pause) {\n    if (this.panorama instanceof PANOLENS.VideoPanorama) {\n      this.panorama.dispatchEvent({ type: 'video-toggle', pause: pause });\n    }\n  };\n\n  PANOLENS.Viewer.prototype.setVideoCurrentTime = function (percentage) {\n    if (this.panorama instanceof PANOLENS.VideoPanorama) {\n      this.panorama.dispatchEvent({ type: 'video-time', percentage: percentage });\n    }\n  };\n\n  PANOLENS.Viewer.prototype.onVideoUpdate = function (percentage) {\n    this.widget && this.widget.dispatchEvent({ type: 'video-update', percentage: percentage });\n  };\n\n  PANOLENS.Viewer.prototype.addUpdateCallback = function (fn) {\n    if (fn) {\n      this.updateCallbacks.push(fn);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.removeUpdateCallback = function (fn) {\n    var index = this.updateCallbacks.indexOf(fn);\n\n    if (fn && index >= 0) {\n      this.updateCallbacks.splice(index, 1);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.showVideoWidget = function () {\n    this.widget && this.widget.dispatchEvent({ type: 'video-control-show' });\n  };\n\n  PANOLENS.Viewer.prototype.hideVideoWidget = function () {\n    this.widget && this.widget.dispatchEvent({ type: 'video-control-hide' });\n  };\n\n  PANOLENS.Viewer.prototype.updateVideoPlayButton = function (paused) {\n    if (this.widget && this.widget.videoElement && this.widget.videoElement.controlButton) {\n      this.widget.videoElement.controlButton.update(paused);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.addPanoramaEventListener = function (pano) {\n    var scope = this;\n\n    pano.addEventListener('enter-fade-start', this.setCameraControl.bind(this));\n\n    if (pano instanceof PANOLENS.VideoPanorama) {\n      pano.addEventListener('enter-fade-start', this.showVideoWidget.bind(this));\n      pano.addEventListener('leave', function () {\n        if (!(this.panorama instanceof PANOLENS.VideoPanorama)) {\n          this.hideVideoWidget.call(this);\n        }\n      }.bind(this));\n    }\n  };\n\n  PANOLENS.Viewer.prototype.setCameraControl = function () {\n    this.OrbitControls.target.copy(this.panorama.position);\n  };\n\n  PANOLENS.Viewer.prototype.getControl = function () {\n    return this.control;\n  }, PANOLENS.Viewer.prototype.getScene = function () {\n    return this.scene;\n  };\n\n  PANOLENS.Viewer.prototype.getCamera = function () {\n    return this.camera;\n  }, PANOLENS.Viewer.prototype.getRenderer = function () {\n    return this.renderer;\n  };\n\n  PANOLENS.Viewer.prototype.getContainer = function () {\n    return this.container;\n  };\n\n  PANOLENS.Viewer.prototype.getControlName = function () {\n    return this.control.name;\n  };\n\n  PANOLENS.Viewer.prototype.getNextControlName = function () {\n    return this.controls[this.getNextControlIndex()].name;\n  };\n\n  PANOLENS.Viewer.prototype.getNextControlIndex = function () {\n    var controls, control, nextIndex;\n\n    controls = this.controls;\n    control = this.control;\n    nextIndex = controls.indexOf(control) + 1;\n\n    return nextIndex >= controls.length ? 0 : nextIndex;\n  };\n\n  PANOLENS.Viewer.prototype.setCameraFov = function (fov) {\n    this.camera.fov = fov;\n    this.camera.updateProjectionMatrix();\n  };\n\n  PANOLENS.Viewer.prototype.enableControl = function (index) {\n    index = index >= 0 && index < this.controls.length ? index : 0;\n\n    this.control.enabled = false;\n\n    this.control = this.controls[index];\n\n    this.control.enabled = true;\n\n    switch (index) {\n      case PANOLENS.Controls.ORBIT:\n\n        this.camera.position.copy(this.panorama.position);\n        this.camera.position.z += 1;\n\n        break;\n\n      case PANOLENS.Controls.DEVICEORIENTATION:\n\n        this.camera.position.copy(this.panorama.position);\n\n        break;\n\n      default:\n\n        break;\n    }\n\n    this.control.update();\n\n    this.activateWidgetItem(index, undefined);\n  };\n\n  PANOLENS.Viewer.prototype.disableControl = function () {\n    this.control.enabled = false;\n  };\n\n  PANOLENS.Viewer.prototype.toggleNextControl = function () {\n    this.enableControl(this.getNextControlIndex());\n  };\n\n  PANOLENS.Viewer.prototype.getScreenVector = function (worldVector) {\n    var vector = worldVector.clone();\n    var widthHalf = this.container.clientWidth / 2;\n    var heightHalf = this.container.clientHeight / 2;\n\n    vector.project(this.camera);\n\n    vector.x = vector.x * widthHalf + widthHalf;\n    vector.y = -(vector.y * heightHalf) + heightHalf;\n    vector.z = 0;\n\n    return vector;\n  };\n\n  PANOLENS.Viewer.prototype.checkSpriteInViewport = function (sprite) {\n    this.camera.matrixWorldInverse.getInverse(this.camera.matrixWorld);\n    this.cameraViewProjectionMatrix.multiplyMatrices(this.camera.projectionMatrix, this.camera.matrixWorldInverse);\n    this.cameraFrustum.setFromMatrix(this.cameraViewProjectionMatrix);\n\n    return sprite.visible && this.cameraFrustum.intersectsSprite(sprite);\n  };\n\n  PANOLENS.Viewer.prototype.reverseDraggingDirection = function () {\n    this.OrbitControls.rotateSpeed *= -1;\n    this.OrbitControls.momentumScalingFactor *= -1;\n  };\n\n  PANOLENS.Viewer.prototype.addReticle = function () {\n    this.reticle = new PANOLENS.Reticle(0xffffff, this.options.autoReticleSelect, PANOLENS.DataImage.ReticleIdle, PANOLENS.DataImage.ReticleDwell, this.options.dwellTime, 45);\n    this.reticle.position.z = -10;\n    this.camera.add(this.reticle);\n    this.scene.add(this.camera);\n  };\n\n  PANOLENS.Viewer.prototype.tweenControlCenter = function (vector, duration, easing) {\n    if (this.control !== this.OrbitControls) {\n      return;\n    }\n\n    if (vector instanceof Array) {\n      duration = vector[1];\n      easing = vector[2];\n      vector = vector[0];\n    }\n\n    duration = duration !== undefined ? duration : 1000;\n    easing = easing || TWEEN.Easing.Exponential.Out;\n\n    var scope, ha, va, chv, cvv, hv, vv, vptc, ov, nv;\n\n    scope = this;\n\n    chv = this.camera.getWorldDirection();\n    cvv = chv.clone();\n\n    vptc = this.panorama.getWorldPosition().sub(this.camera.getWorldPosition());\n\n    hv = vector.clone();\n\n    hv.x *= -1;\n    hv.add(vptc).normalize();\n    vv = hv.clone();\n\n    chv.y = 0;\n    hv.y = 0;\n\n    ha = Math.atan2(hv.z, hv.x) - Math.atan2(chv.z, chv.x);\n    ha = ha > Math.PI ? ha - 2 * Math.PI : ha;\n    ha = ha < -Math.PI ? ha + 2 * Math.PI : ha;\n    va = Math.abs(cvv.angleTo(chv) + (cvv.y * vv.y <= 0 ? vv.angleTo(hv) : -vv.angleTo(hv)));\n    va *= vv.y < cvv.y ? 1 : -1;\n\n    ov = { left: 0, up: 0 };\n    nv = { left: 0, up: 0 };\n\n    this.tweenLeftAnimation.stop();\n    this.tweenUpAnimation.stop();\n\n    this.tweenLeftAnimation = new TWEEN.Tween(ov).to({ left: ha }, duration).easing(easing).onUpdate(function () {\n      scope.control.rotateLeft(this.left - nv.left);\n      nv.left = this.left;\n    }).start();\n\n    this.tweenUpAnimation = new TWEEN.Tween(ov).to({ up: va }, duration).easing(easing).onUpdate(function () {\n      scope.control.rotateUp(this.up - nv.up);\n      nv.up = this.up;\n    }).start();\n  };\n\n  PANOLENS.Viewer.prototype.tweenControlCenterByObject = function (object, duration, easing) {\n    var isUnderScalePlaceHolder = false;\n\n    object.traverseAncestors(function (ancestor) {\n      if (ancestor.scalePlaceHolder) {\n        isUnderScalePlaceHolder = true;\n      }\n    });\n\n    if (isUnderScalePlaceHolder) {\n      var invertXVector = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](-1, 1, 1);\n\n      this.tweenControlCenter(object.getWorldPosition().multiply(invertXVector), duration, easing);\n    } else {\n      this.tweenControlCenter(object.getWorldPosition(), duration, easing);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.onWindowResize = function (windowWidth, windowHeight) {\n    var width, height, expand;\n\n    expand = this.container.classList.contains('panolens-container') || this.container.isFullscreen;\n\n    if (windowWidth !== undefined && windowHeight !== undefined) {\n      width = windowWidth;\n      height = windowHeight;\n      this.container._width = windowWidth;\n      this.container._height = windowHeight;\n    } else {\n      width = expand ? Math.max(document.documentElement.clientWidth, window.innerWidth || 0) : this.container.clientWidth;\n      height = expand ? Math.max(document.documentElement.clientHeight, window.innerHeight || 0) : this.container.clientHeight;\n      this.container._width = width;\n      this.container._height = height;\n    }\n\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n\n    this.renderer.setSize(width, height);\n\n    if (this.options.enableReticle || this.tempEnableReticle) {\n      this.updateReticleEvent();\n    }\n\n    this.dispatchEvent({ type: 'window-resize', width: width, height: height });\n    this.scene.traverse(function (object) {\n      if (object.dispatchEvent) {\n        object.dispatchEvent({ type: 'window-resize', width: width, height: height });\n      }\n    });\n  };\n\n  PANOLENS.Viewer.prototype.addOutputElement = function () {\n    var element = document.createElement('div');\n    element.style.position = 'absolute';\n    element.style.right = '10px';\n    element.style.top = '10px';\n    element.style.color = '#fff';\n    this.container.appendChild(element);\n    this.outputDivElement = element;\n  };\n\n  PANOLENS.Viewer.prototype.outputInfospotPosition = function () {\n    var intersects, point, panoramaWorldPosition, outputPosition;\n\n    intersects = this.raycaster.intersectObject(this.panorama, true);\n\n    if (intersects.length > 0) {\n      point = intersects[0].point;\n      panoramaWorldPosition = this.panorama.getWorldPosition();\n\n      outputPosition = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](-(point.x - panoramaWorldPosition.x).toFixed(2), (point.y - panoramaWorldPosition.y).toFixed(2), (point.z - panoramaWorldPosition.z).toFixed(2));\n\n      switch (this.options.output) {\n        case 'console':\n          console.info(outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z);\n          break;\n\n        case 'overlay':\n          this.outputDivElement.textContent = outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z;\n          break;\n\n        default:\n          break;\n      }\n    }\n  };\n\n  PANOLENS.Viewer.prototype.onMouseDown = function (event) {\n    event.preventDefault();\n\n    this.userMouse.x = event.clientX >= 0 ? event.clientX : event.touches[0].clientX;\n    this.userMouse.y = event.clientY >= 0 ? event.clientY : event.touches[0].clientY;\n    this.userMouse.type = 'mousedown';\n    this.onTap(event);\n  };\n\n  PANOLENS.Viewer.prototype.onMouseMove = function (event) {\n    event.preventDefault();\n    this.userMouse.type = 'mousemove';\n    this.onTap(event);\n  };\n\n  PANOLENS.Viewer.prototype.onMouseUp = function (event) {\n    var onTarget = false,\n        type;\n\n    this.userMouse.type = 'mouseup';\n\n    type = this.userMouse.x >= event.clientX - this.options.clickTolerance && this.userMouse.x <= event.clientX + this.options.clickTolerance && this.userMouse.y >= event.clientY - this.options.clickTolerance && this.userMouse.y <= event.clientY + this.options.clickTolerance || event.changedTouches && this.userMouse.x >= event.changedTouches[0].clientX - this.options.clickTolerance && this.userMouse.x <= event.changedTouches[0].clientX + this.options.clickTolerance && this.userMouse.y >= event.changedTouches[0].clientY - this.options.clickTolerance && this.userMouse.y <= event.changedTouches[0].clientY + this.options.clickTolerance ? 'click' : undefined;\n\n    if (event && event.target && !event.target.classList.contains('panolens-canvas')) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (event.changedTouches && event.changedTouches.length === 1) {\n      onTarget = this.onTap({ clientX: event.changedTouches[0].clientX, clientY: event.changedTouches[0].clientY }, type);\n    } else {\n      onTarget = this.onTap(event, type);\n    }\n\n    this.userMouse.type = 'none';\n\n    if (onTarget) {\n      return;\n    }\n\n    if (type === 'click') {\n      this.options.autoHideInfospot && this.panorama && this.panorama.toggleInfospotVisibility();\n      this.options.autoHideControlBar && this.toggleControlBar();\n    }\n  };\n\n  PANOLENS.Viewer.prototype.onTap = function (event, type) {\n    var intersects, intersect_entity, intersect;\n\n    this.raycasterPoint.x = (event.clientX - this.container.offsetLeft) / this.container.clientWidth * 2 - 1;\n    this.raycasterPoint.y = -((event.clientY - this.container.offsetTop) / this.container.clientHeight) * 2 + 1;\n\n    this.raycaster.setFromCamera(this.raycasterPoint, this.camera);\n\n    if (!this.panorama) {\n      return;\n    }\n\n    if (event.type !== 'mousedown' && PANOLENS.Utils.checkTouchSupported() || this.OUTPUT_INFOSPOT) {\n      this.outputInfospotPosition();\n    }\n\n    intersects = this.raycaster.intersectObjects(this.panorama.children, true);\n\n    intersect_entity = this.getConvertedIntersect(intersects);\n\n    intersect = intersects.length > 0 ? intersects[0].object : intersect;\n\n    if (this.userMouse.type === 'mouseup') {\n      if (intersect_entity && this.pressEntityObject === intersect_entity && this.pressEntityObject.dispatchEvent) {\n        this.pressEntityObject.dispatchEvent({ type: 'pressstop-entity', mouseEvent: event });\n      }\n\n      this.pressEntityObject = undefined;\n    }\n\n    if (this.userMouse.type === 'mouseup') {\n      if (intersect && this.pressObject === intersect && this.pressObject.dispatchEvent) {\n        this.pressObject.dispatchEvent({ type: 'pressstop', mouseEvent: event });\n      }\n\n      this.pressObject = undefined;\n    }\n\n    if (type === 'click') {\n      this.panorama.dispatchEvent({ type: 'click', intersects: intersects, mouseEvent: event });\n\n      if (intersect_entity && intersect_entity.dispatchEvent) {\n        intersect_entity.dispatchEvent({ type: 'click-entity', mouseEvent: event });\n      }\n\n      if (intersect && intersect.dispatchEvent) {\n        intersect.dispatchEvent({ type: 'click', mouseEvent: event });\n      }\n    } else {\n      this.panorama.dispatchEvent({ type: 'hover', intersects: intersects, mouseEvent: event });\n\n      if (this.hoverObject && intersects.length > 0 && this.hoverObject !== intersect_entity || this.hoverObject && intersects.length === 0) {\n        if (this.hoverObject.dispatchEvent) {\n          this.hoverObject.dispatchEvent({ type: 'hoverleave', mouseEvent: event });\n\n          this.reticle.cancelDwelling();\n        }\n\n        this.hoverObject = undefined;\n      }\n\n      if (intersect_entity && intersects.length > 0) {\n        if (this.hoverObject !== intersect_entity) {\n          this.hoverObject = intersect_entity;\n\n          if (this.hoverObject.dispatchEvent) {\n            this.hoverObject.dispatchEvent({ type: 'hoverenter', mouseEvent: event });\n\n            if (this.options.autoReticleSelect && this.options.enableReticle || this.tempEnableReticle) {\n              this.reticle.startDwelling(this.onTap.bind(this, event, 'click'));\n            }\n          }\n        }\n\n        if (this.userMouse.type === 'mousedown' && this.pressEntityObject != intersect_entity) {\n          this.pressEntityObject = intersect_entity;\n\n          if (this.pressEntityObject.dispatchEvent) {\n            this.pressEntityObject.dispatchEvent({ type: 'pressstart-entity', mouseEvent: event });\n          }\n        }\n\n        if (this.userMouse.type === 'mousedown' && this.pressObject != intersect) {\n          this.pressObject = intersect;\n\n          if (this.pressObject.dispatchEvent) {\n            this.pressObject.dispatchEvent({ type: 'pressstart', mouseEvent: event });\n          }\n        }\n\n        if (this.userMouse.type === 'mousemove' || this.options.enableReticle) {\n          if (intersect && intersect.dispatchEvent) {\n            intersect.dispatchEvent({ type: 'hover', mouseEvent: event });\n          }\n\n          if (this.pressEntityObject && this.pressEntityObject.dispatchEvent) {\n            this.pressEntityObject.dispatchEvent({ type: 'pressmove-entity', mouseEvent: event });\n          }\n\n          if (this.pressObject && this.pressObject.dispatchEvent) {\n            this.pressObject.dispatchEvent({ type: 'pressmove', mouseEvent: event });\n          }\n        }\n      }\n\n      if (!intersect_entity && this.pressEntityObject && this.pressEntityObject.dispatchEvent) {\n        this.pressEntityObject.dispatchEvent({ type: 'pressstop-entity', mouseEvent: event });\n\n        this.pressEntityObject = undefined;\n      }\n\n      if (!intersect && this.pressObject && this.pressObject.dispatchEvent) {\n        this.pressObject.dispatchEvent({ type: 'pressstop', mouseEvent: event });\n\n        this.pressObject = undefined;\n      }\n    }\n\n    if (intersect && intersect instanceof PANOLENS.Infospot) {\n      this.infospot = intersect;\n\n      if (type === 'click') {\n        return true;\n      }\n    } else if (this.infospot) {\n      this.hideInfospot();\n    }\n  };\n\n  PANOLENS.Viewer.prototype.getConvertedIntersect = function (intersects) {\n    var intersect;\n\n    for (var i = 0; i < intersects.length; i++) {\n      if (intersects[i].distance >= 0 && intersects[i].object && !intersects[i].object.passThrough) {\n        if (intersects[i].object.entity && intersects[i].object.entity.passThrough) {\n          continue;\n        } else if (intersects[i].object.entity && !intersects[i].object.entity.passThrough) {\n          intersect = intersects[i].object.entity;\n          break;\n        } else {\n          intersect = intersects[i].object;\n          break;\n        }\n      }\n    }\n\n    return intersect;\n  };\n\n  PANOLENS.Viewer.prototype.hideInfospot = function (intersects) {\n    if (this.infospot) {\n      this.infospot.onHoverEnd();\n\n      this.infospot = undefined;\n    }\n  };\n\n  PANOLENS.Viewer.prototype.toggleControlBar = function () {\n    this.widget && this.widget.dispatchEvent({ type: 'control-bar-toggle' });\n  };\n\n  PANOLENS.Viewer.prototype.onKeyDown = function (event) {\n    if (this.options.output && this.options.output !== 'none' && event.key === 'Control') {\n      this.OUTPUT_INFOSPOT = true;\n    }\n  };\n\n  PANOLENS.Viewer.prototype.onKeyUp = function (event) {\n    this.OUTPUT_INFOSPOT = false;\n  };\n\n  PANOLENS.Viewer.prototype.update = function () {\n    TWEEN.update();\n\n    this.updateCallbacks.forEach(function (callback) {\n      callback();\n    });\n\n    this.control.update();\n\n    this.scene.traverse(function (child) {\n      if (child instanceof PANOLENS.Infospot && child.element && (this.hoverObject === child || child.element.style.display !== 'none' || child.element.left && child.element.left.style.display !== 'none' || child.element.right && child.element.right.style.display !== 'none')) {\n        if (this.checkSpriteInViewport(child)) {\n          var vector = this.getScreenVector(child.getWorldPosition());\n          child.translateElement(vector.x, vector.y);\n        } else {\n          child.onDismiss();\n        }\n      }\n    }.bind(this));\n  };\n\n  PANOLENS.Viewer.prototype.render = function () {\n    if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n      this.effect.render(this.scene, this.camera);\n    } else {\n      this.renderer.render(this.scene, this.camera);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.animate = function () {\n    this.requestAnimationId = window.requestAnimationFrame(this.animate.bind(this));\n\n    this.onChange();\n  };\n\n  PANOLENS.Viewer.prototype.onChange = function () {\n    this.update();\n    this.render();\n  };\n\n  PANOLENS.Viewer.prototype.registerMouseAndTouchEvents = function () {\n    this.container.addEventListener('mousedown', this.HANDLER_MOUSE_DOWN, false);\n    this.container.addEventListener('mousemove', this.HANDLER_MOUSE_MOVE, false);\n    this.container.addEventListener('mouseup', this.HANDLER_MOUSE_UP, false);\n    this.container.addEventListener('touchstart', this.HANDLER_MOUSE_DOWN, false);\n    this.container.addEventListener('touchend', this.HANDLER_MOUSE_UP, false);\n  };\n\n  PANOLENS.Viewer.prototype.unregisterMouseAndTouchEvents = function () {\n    this.container.removeEventListener('mousedown', this.HANDLER_MOUSE_DOWN, false);\n    this.container.removeEventListener('mousemove', this.HANDLER_MOUSE_MOVE, false);\n    this.container.removeEventListener('mouseup', this.HANDLER_MOUSE_UP, false);\n    this.container.removeEventListener('touchstart', this.HANDLER_MOUSE_DOWN, false);\n    this.container.removeEventListener('touchend', this.HANDLER_MOUSE_UP, false);\n  };\n\n  PANOLENS.Viewer.prototype.registerReticleEvent = function () {\n    this.addUpdateCallback(this.HANDLER_TAP);\n  };\n\n  PANOLENS.Viewer.prototype.unregisterReticleEvent = function () {\n    this.removeUpdateCallback(this.HANDLER_TAP);\n  };\n\n  PANOLENS.Viewer.prototype.updateReticleEvent = function () {\n    var centerX, centerY;\n\n    centerX = this.container.clientWidth / 2 + this.container.offsetLeft;\n    centerY = this.container.clientHeight / 2;\n\n    this.removeUpdateCallback(this.HANDLER_TAP);\n    this.HANDLER_TAP = this.onTap.bind(this, { clientX: centerX, clientY: centerY });\n    this.addUpdateCallback(this.HANDLER_TAP);\n  };\n\n  PANOLENS.Viewer.prototype.registerEventListeners = function () {\n    window.addEventListener('resize', this.HANDLER_WINDOW_RESIZE, true);\n\n    window.addEventListener('keydown', this.HANDLER_KEY_DOWN, true);\n    window.addEventListener('keyup', this.HANDLER_KEY_UP, true);\n  };\n\n  PANOLENS.Viewer.prototype.unregisterEventListeners = function () {\n    window.removeEventListener('resize', this.HANDLER_WINDOW_RESIZE, true);\n\n    window.removeEventListener('keydown', this.HANDLER_KEY_DOWN, true);\n    window.removeEventListener('keyup', this.HANDLER_KEY_UP, true);\n  };\n\n  PANOLENS.Viewer.prototype.dispose = function () {\n    this.unregisterEventListeners();\n\n    function recursiveDispose(object) {\n      for (var i = object.children.length - 1; i >= 0; i--) {\n        recursiveDispose(object.children[i]);\n        object.remove(object.children[i]);\n      }\n\n      if (object instanceof PANOLENS.Infospot) {\n        object.dispose();\n      }\n\n      object.geometry && object.geometry.dispose();\n      object.material && object.material.dispose();\n    }\n\n    recursiveDispose(this.scene);\n\n    if (this.widget) {\n      this.widget.dispose();\n      this.widget = null;\n    }\n\n    if (__WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"] && __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].enabled) {\n      __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].clear();\n    }\n  };\n\n  PANOLENS.Viewer.prototype.destory = function () {\n    this.dispose();\n    this.render();\n    window.cancelAnimationFrame(this.requestAnimationId);\n  };\n\n  PANOLENS.Viewer.prototype.onPanoramaDispose = function (panorama) {\n    if (panorama instanceof PANOLENS.VideoPanorama) {\n      this.hideVideoWidget();\n    }\n\n    if (panorama === this.panorama) {\n      this.panorama = null;\n    }\n  };\n\n  PANOLENS.Viewer.prototype.loadAsyncRequest = function (url, callback) {\n    var request = new XMLHttpRequest();\n    request.onloadend = function (event) {\n      callback && callback(event);\n    };\n    request.open('GET', url, true);\n    request.send(null);\n  };\n\n  PANOLENS.Viewer.prototype.addViewIndicator = function () {\n    var scope = this;\n\n    function loadViewIndicator(asyncEvent) {\n      if (asyncEvent.loaded === 0) return;\n\n      var viewIndicatorDiv = asyncEvent.target.responseXML.documentElement;\n      viewIndicatorDiv.style.width = scope.viewIndicatorSize + 'px';\n      viewIndicatorDiv.style.height = scope.viewIndicatorSize + 'px';\n      viewIndicatorDiv.style.position = 'absolute';\n      viewIndicatorDiv.style.top = '10px';\n      viewIndicatorDiv.style.left = '10px';\n      viewIndicatorDiv.style.opacity = '0.5';\n      viewIndicatorDiv.style.cursor = 'pointer';\n      viewIndicatorDiv.id = 'panolens-view-indicator-container';\n\n      scope.container.appendChild(viewIndicatorDiv);\n\n      var indicator = viewIndicatorDiv.querySelector('#indicator');\n      var setIndicatorD = function setIndicatorD() {\n        scope.radius = scope.viewIndicatorSize * 0.225;\n        scope.currentPanoAngle = scope.camera.rotation.y - __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(90);\n        scope.fovAngle = __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.camera.fov);\n        scope.leftAngle = -scope.currentPanoAngle - scope.fovAngle / 2;\n        scope.rightAngle = -scope.currentPanoAngle + scope.fovAngle / 2;\n        scope.leftX = scope.radius * Math.cos(scope.leftAngle);\n        scope.leftY = scope.radius * Math.sin(scope.leftAngle);\n        scope.rightX = scope.radius * Math.cos(scope.rightAngle);\n        scope.rightY = scope.radius * Math.sin(scope.rightAngle);\n        scope.indicatorD = 'M ' + scope.leftX + ' ' + scope.leftY + ' A ' + scope.radius + ' ' + scope.radius + ' 0 0 1 ' + scope.rightX + ' ' + scope.rightY;\n\n        if (scope.leftX && scope.leftY && scope.rightX && scope.rightY && scope.radius) {\n          indicator.setAttribute('d', scope.indicatorD);\n        }\n      };\n\n      scope.addUpdateCallback(setIndicatorD);\n\n      var indicatorOnMouseEnter = function indicatorOnMouseEnter() {\n        this.style.opacity = '1';\n      };\n\n      var indicatorOnMouseLeave = function indicatorOnMouseLeave() {\n        this.style.opacity = '0.5';\n      };\n\n      viewIndicatorDiv.addEventListener('mouseenter', indicatorOnMouseEnter);\n      viewIndicatorDiv.addEventListener('mouseleave', indicatorOnMouseLeave);\n    }\n\n    this.loadAsyncRequest(PANOLENS.DataImage.ViewIndicator, loadViewIndicator);\n  };\n\n  PANOLENS.Viewer.prototype.appendControlItem = function (option) {\n    var item = this.widget.createCustomItem(option);\n\n    if (option.group === 'video') {\n      this.widget.videoElement.appendChild(item);\n    } else {\n      this.widget.barElement.appendChild(item);\n    }\n\n    return item;\n  };\n})();(function e(t, n, r) {\n  function s(o, u) {\n    if (!n[o]) {\n      if (!t[o]) {\n        var a = typeof require === 'function' && require;if (!u && a) return require(o, !0);if (i) return i(o, !0);var f = new Error(\"Cannot find module '\" + o + \"'\");throw f.code = 'MODULE_NOT_FOUND', f;\n      }var l = n[o] = { exports: {} };t[o][0].call(l.exports, function (e) {\n        var n = t[o][1][e];return s(n || e);\n      }, l, l.exports, e, t, n, r);\n    }return n[o].exports;\n  }var i = typeof require === 'function' && require;for (var o = 0; o < r.length; o++) {\n    s(r[o]);\n  }return s;\n})({ 1: [function (require, module, exports) {\n    var createLayout = require('layout-bmfont-text');\n    var inherits = require('inherits');\n    var createIndices = require('quad-indices');\n    var buffer = require('three-buffer-vertex-data');\n    var assign = require('object-assign');\n\n    var vertices = require('./lib/vertices');\n    var utils = require('./lib/utils');\n\n    var Base = __WEBPACK_IMPORTED_MODULE_8_three__[\"BufferGeometry\"];\n\n    module.exports = function createTextGeometry(opt) {\n      return new TextGeometry(opt);\n    };\n\n    function TextGeometry(opt) {\n      Base.call(this);\n\n      if (typeof opt === 'string') {\n        opt = { text: opt };\n      }\n\n      this._opt = assign({}, opt);\n\n      if (opt) this.update(opt);\n    }\n\n    inherits(TextGeometry, Base);\n\n    TextGeometry.prototype.update = function (opt) {\n      if (typeof opt === 'string') {\n        opt = { text: opt };\n      }\n\n      opt = assign({}, this._opt, opt);\n\n      if (!opt.font) {\n        throw new TypeError('must specify a { font } in options');\n      }\n\n      this.layout = createLayout(opt);\n\n      var flipY = opt.flipY !== false;\n\n      var font = opt.font;\n\n      var texWidth = font.common.scaleW;\n      var texHeight = font.common.scaleH;\n\n      var glyphs = this.layout.glyphs.filter(function (glyph) {\n        var bitmap = glyph.data;\n        return bitmap.width * bitmap.height > 0;\n      });\n\n      this.visibleGlyphs = glyphs;\n\n      var positions = vertices.positions(glyphs);\n      var uvs = vertices.uvs(glyphs, texWidth, texHeight, flipY);\n      var indices = createIndices({\n        clockwise: true,\n        type: 'uint16',\n        count: glyphs.length\n      });\n\n      buffer.index(this, indices, 1, 'uint16');\n      buffer.attr(this, 'position', positions, 2);\n      buffer.attr(this, 'uv', uvs, 2);\n\n      if (!opt.multipage && 'page' in this.attributes) {\n        this.removeAttribute('page');\n      } else if (opt.multipage) {\n        var pages = vertices.pages(glyphs);\n\n        buffer.attr(this, 'page', pages, 1);\n      }\n    };\n\n    TextGeometry.prototype.computeBoundingSphere = function () {\n      if (this.boundingSphere === null) {\n        this.boundingSphere = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Sphere\"]();\n      }\n\n      var positions = this.attributes.position.array;\n      var itemSize = this.attributes.position.itemSize;\n      if (!positions || !itemSize || positions.length < 2) {\n        this.boundingSphere.radius = 0;\n        this.boundingSphere.center.set(0, 0, 0);\n        return;\n      }\n      utils.computeSphere(positions, this.boundingSphere);\n      if (isNaN(this.boundingSphere.radius)) {\n        console.error('THREE.BufferGeometry.computeBoundingSphere(): ' + 'Computed radius is NaN. The ' + '\"position\" attribute is likely to have NaN values.');\n      }\n    };\n\n    TextGeometry.prototype.computeBoundingBox = function () {\n      if (this.boundingBox === null) {\n        this.boundingBox = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Box3\"]();\n      }\n\n      var bbox = this.boundingBox;\n      var positions = this.attributes.position.array;\n      var itemSize = this.attributes.position.itemSize;\n      if (!positions || !itemSize || positions.length < 2) {\n        bbox.makeEmpty();\n        return;\n      }\n      utils.computeBox(positions, bbox);\n    };\n  }, { './lib/utils': 2, './lib/vertices': 3, 'inherits': 4, 'layout-bmfont-text': 5, 'object-assign': 26, 'quad-indices': 27, 'three-buffer-vertex-data': 31 }],\n  2: [function (require, module, exports) {\n    var itemSize = 2;\n    var box = { min: [0, 0], max: [0, 0] };\n\n    function bounds(positions) {\n      var count = positions.length / itemSize;\n      box.min[0] = positions[0];\n      box.min[1] = positions[1];\n      box.max[0] = positions[0];\n      box.max[1] = positions[1];\n\n      for (var i = 0; i < count; i++) {\n        var x = positions[i * itemSize + 0];\n        var y = positions[i * itemSize + 1];\n        box.min[0] = Math.min(x, box.min[0]);\n        box.min[1] = Math.min(y, box.min[1]);\n        box.max[0] = Math.max(x, box.max[0]);\n        box.max[1] = Math.max(y, box.max[1]);\n      }\n    }\n\n    module.exports.computeBox = function (positions, output) {\n      bounds(positions);\n      output.min.set(box.min[0], box.min[1], 0);\n      output.max.set(box.max[0], box.max[1], 0);\n    };\n\n    module.exports.computeSphere = function (positions, output) {\n      bounds(positions);\n      var minX = box.min[0];\n      var minY = box.min[1];\n      var maxX = box.max[0];\n      var maxY = box.max[1];\n      var width = maxX - minX;\n      var height = maxY - minY;\n      var length = Math.sqrt(width * width + height * height);\n      output.center.set(minX + width / 2, minY + height / 2, 0);\n      output.radius = length / 2;\n    };\n  }, {}],\n  3: [function (require, module, exports) {\n    module.exports.pages = function pages(glyphs) {\n      var pages = new Float32Array(glyphs.length * 4 * 1);\n      var i = 0;\n      glyphs.forEach(function (glyph) {\n        var id = glyph.data.page || 0;\n        pages[i++] = id;\n        pages[i++] = id;\n        pages[i++] = id;\n        pages[i++] = id;\n      });\n      return pages;\n    };\n\n    module.exports.uvs = function uvs(glyphs, texWidth, texHeight, flipY) {\n      var uvs = new Float32Array(glyphs.length * 4 * 2);\n      var i = 0;\n      glyphs.forEach(function (glyph) {\n        var bitmap = glyph.data;\n        var bw = bitmap.x + bitmap.width;\n        var bh = bitmap.y + bitmap.height;\n\n        var u0 = bitmap.x / texWidth;\n        var v1 = bitmap.y / texHeight;\n        var u1 = bw / texWidth;\n        var v0 = bh / texHeight;\n\n        if (flipY) {\n          v1 = (texHeight - bitmap.y) / texHeight;\n          v0 = (texHeight - bh) / texHeight;\n        }\n\n        uvs[i++] = u0;\n        uvs[i++] = v1;\n\n        uvs[i++] = u0;\n        uvs[i++] = v0;\n\n        uvs[i++] = u1;\n        uvs[i++] = v0;\n\n        uvs[i++] = u1;\n        uvs[i++] = v1;\n      });\n      return uvs;\n    };\n\n    module.exports.positions = function positions(glyphs) {\n      var positions = new Float32Array(glyphs.length * 4 * 2);\n      var i = 0;\n      glyphs.forEach(function (glyph) {\n        var bitmap = glyph.data;\n\n        var x = glyph.position[0] + bitmap.xoffset;\n        var y = glyph.position[1] + bitmap.yoffset;\n\n        var w = bitmap.width;\n        var h = bitmap.height;\n\n        positions[i++] = x;\n        positions[i++] = y;\n\n        positions[i++] = x;\n        positions[i++] = y + h;\n\n        positions[i++] = x + w;\n        positions[i++] = y + h;\n\n        positions[i++] = x + w;\n        positions[i++] = y;\n      });\n      return positions;\n    };\n  }, {}],\n  4: [function (require, module, exports) {\n    if (typeof __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default.a === 'function') {\n      module.exports = function inherits(ctor, superCtor) {\n        ctor.super_ = superCtor;\n        ctor.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(superCtor.prototype, {\n          constructor: {\n            value: ctor,\n            enumerable: false,\n            writable: true,\n            configurable: true\n          }\n        });\n      };\n    } else {\n      module.exports = function inherits(ctor, superCtor) {\n        ctor.super_ = superCtor;\n        var TempCtor = function TempCtor() {};\n        TempCtor.prototype = superCtor.prototype;\n        ctor.prototype = new TempCtor();\n        ctor.prototype.constructor = ctor;\n      };\n    }\n  }, {}],\n  5: [function (require, module, exports) {\n    var wordWrap = require('word-wrapper');\n    var xtend = require('xtend');\n    var findChar = require('indexof-property')('id');\n    var number = require('as-number');\n\n    var X_HEIGHTS = ['x', 'e', 'a', 'o', 'n', 's', 'r', 'c', 'u', 'm', 'v', 'w', 'z'];\n    var M_WIDTHS = ['m', 'w'];\n    var CAP_HEIGHTS = ['H', 'I', 'N', 'E', 'F', 'K', 'L', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\n\n    var TAB_ID = '\\t'.charCodeAt(0);\n    var SPACE_ID = ' '.charCodeAt(0);\n    var ALIGN_LEFT = 0,\n        ALIGN_CENTER = 1,\n        ALIGN_RIGHT = 2;\n\n    module.exports = function createLayout(opt) {\n      return new TextLayout(opt);\n    };\n\n    function TextLayout(opt) {\n      this.glyphs = [];\n      this._measure = this.computeMetrics.bind(this);\n      this.update(opt);\n    }\n\n    TextLayout.prototype.update = function (opt) {\n      opt = xtend({\n        measure: this._measure\n      }, opt);\n      this._opt = opt;\n      this._opt.tabSize = number(this._opt.tabSize, 4);\n\n      if (!opt.font) {\n        throw new Error('must provide a valid bitmap font');\n      }\n\n      var glyphs = this.glyphs;\n      var text = opt.text || '';\n      var font = opt.font;\n      this._setupSpaceGlyphs(font);\n\n      var lines = wordWrap.lines(text, opt);\n      var minWidth = opt.width || 0;\n\n      glyphs.length = 0;\n\n      var maxLineWidth = lines.reduce(function (prev, line) {\n        return Math.max(prev, line.width, minWidth);\n      }, 0);\n\n      var x = 0;\n      var y = 0;\n      var lineHeight = number(opt.lineHeight, font.common.lineHeight);\n      var baseline = font.common.base;\n      var descender = lineHeight - baseline;\n      var letterSpacing = opt.letterSpacing || 0;\n      var height = lineHeight * lines.length - descender;\n      var align = getAlignType(this._opt.align);\n\n      y -= height;\n\n      this._width = maxLineWidth;\n      this._height = height;\n      this._descender = lineHeight - baseline;\n      this._baseline = baseline;\n      this._xHeight = getXHeight(font);\n      this._capHeight = getCapHeight(font);\n      this._lineHeight = lineHeight;\n      this._ascender = lineHeight - descender - this._xHeight;\n\n      var self = this;\n      lines.forEach(function (line, lineIndex) {\n        var start = line.start;\n        var end = line.end;\n        var lineWidth = line.width;\n        var lastGlyph;\n\n        for (var i = start; i < end; i++) {\n          var id = text.charCodeAt(i);\n          var glyph = self.getGlyph(font, id);\n          if (glyph) {\n            if (lastGlyph) {\n              x += getKerning(font, lastGlyph.id, glyph.id);\n            }\n\n            var tx = x;\n            if (align === ALIGN_CENTER) {\n              tx += (maxLineWidth - lineWidth) / 2;\n            } else if (align === ALIGN_RIGHT) {\n              tx += maxLineWidth - lineWidth;\n            }\n\n            glyphs.push({\n              position: [tx, y],\n              data: glyph,\n              index: i,\n              line: lineIndex\n            });\n\n            x += glyph.xadvance + letterSpacing;\n            lastGlyph = glyph;\n          }\n        }\n\n        y += lineHeight;\n        x = 0;\n      });\n      this._linesTotal = lines.length;\n    };\n\n    TextLayout.prototype._setupSpaceGlyphs = function (font) {\n      this._fallbackSpaceGlyph = null;\n      this._fallbackTabGlyph = null;\n\n      if (!font.chars || font.chars.length === 0) {\n        return;\n      }\n\n      var space = getGlyphById(font, SPACE_ID) || getMGlyph(font) || font.chars[0];\n\n      var tabWidth = this._opt.tabSize * space.xadvance;\n      this._fallbackSpaceGlyph = space;\n      this._fallbackTabGlyph = xtend(space, {\n        x: 0,\n        y: 0,\n        xadvance: tabWidth,\n        id: TAB_ID,\n        xoffset: 0,\n        yoffset: 0,\n        width: 0,\n        height: 0\n      });\n    };\n\n    TextLayout.prototype.getGlyph = function (font, id) {\n      var glyph = getGlyphById(font, id);\n      if (glyph) {\n        return glyph;\n      } else if (id === TAB_ID) {\n        return this._fallbackTabGlyph;\n      } else if (id === SPACE_ID) {\n        return this._fallbackSpaceGlyph;\n      }\n      return null;\n    };\n\n    TextLayout.prototype.computeMetrics = function (text, start, end, width) {\n      var letterSpacing = this._opt.letterSpacing || 0;\n      var font = this._opt.font;\n      var curPen = 0;\n      var curWidth = 0;\n      var count = 0;\n      var glyph;\n      var lastGlyph;\n\n      if (!font.chars || font.chars.length === 0) {\n        return {\n          start: start,\n          end: start,\n          width: 0\n        };\n      }\n\n      end = Math.min(text.length, end);\n      for (var i = start; i < end; i++) {\n        var id = text.charCodeAt(i);\n        var glyph = this.getGlyph(font, id);\n\n        if (glyph) {\n          var xoff = glyph.xoffset;\n          var kern = lastGlyph ? getKerning(font, lastGlyph.id, glyph.id) : 0;\n          curPen += kern;\n\n          var nextPen = curPen + glyph.xadvance + letterSpacing;\n          var nextWidth = curPen + glyph.width;\n\n          if (nextWidth >= width || nextPen >= width) {\n            break;\n          }\n\n          curPen = nextPen;\n          curWidth = nextWidth;\n          lastGlyph = glyph;\n        }\n        count++;\n      }\n\n      if (lastGlyph) {\n        curWidth += lastGlyph.xoffset;\n      }\n\n      return {\n        start: start,\n        end: start + count,\n        width: curWidth\n      };\n    };['width', 'height', 'descender', 'ascender', 'xHeight', 'baseline', 'capHeight', 'lineHeight'].forEach(addGetter);\n\n    function addGetter(name) {\n      __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default()(TextLayout.prototype, name, {\n        get: wrapper(name),\n        configurable: true\n      });\n    }\n\n    function wrapper(name) {\n      return new Function(['return function ' + name + '() {', '  return this._' + name, '}'].join('\\n'))();\n    }\n\n    function getGlyphById(font, id) {\n      if (!font.chars || font.chars.length === 0) {\n        return null;\n      }\n\n      var glyphIdx = findChar(font.chars, id);\n      if (glyphIdx >= 0) {\n        return font.chars[glyphIdx];\n      }\n      return null;\n    }\n\n    function getXHeight(font) {\n      for (var i = 0; i < X_HEIGHTS.length; i++) {\n        var id = X_HEIGHTS[i].charCodeAt(0);\n        var idx = findChar(font.chars, id);\n        if (idx >= 0) {\n          return font.chars[idx].height;\n        }\n      }\n      return 0;\n    }\n\n    function getMGlyph(font) {\n      for (var i = 0; i < M_WIDTHS.length; i++) {\n        var id = M_WIDTHS[i].charCodeAt(0);\n        var idx = findChar(font.chars, id);\n        if (idx >= 0) {\n          return font.chars[idx];\n        }\n      }\n      return 0;\n    }\n\n    function getCapHeight(font) {\n      for (var i = 0; i < CAP_HEIGHTS.length; i++) {\n        var id = CAP_HEIGHTS[i].charCodeAt(0);\n        var idx = findChar(font.chars, id);\n        if (idx >= 0) {\n          return font.chars[idx].height;\n        }\n      }\n      return 0;\n    }\n\n    function getKerning(font, left, right) {\n      if (!font.kernings || font.kernings.length === 0) {\n        return 0;\n      }\n\n      var table = font.kernings;\n      for (var i = 0; i < table.length; i++) {\n        var kern = table[i];\n        if (kern.first === left && kern.second === right) {\n          return kern.amount;\n        }\n      }\n      return 0;\n    }\n\n    function getAlignType(align) {\n      if (align === 'center') {\n        return ALIGN_CENTER;\n      } else if (align === 'right') {\n        return ALIGN_RIGHT;\n      }\n      return ALIGN_LEFT;\n    }\n  }, { 'as-number': 6, 'indexof-property': 7, 'word-wrapper': 8, 'xtend': 9 }],\n  6: [function (require, module, exports) {\n    module.exports = function numtype(num, def) {\n      return typeof num === 'number' ? num : typeof def === 'number' ? def : 0;\n    };\n  }, {}],\n  7: [function (require, module, exports) {\n    module.exports = function compile(property) {\n      if (!property || typeof property !== 'string') {\n        throw new Error('must specify property for indexof search');\n      }\n\n      return new Function('array', 'value', 'start', ['start = start || 0', 'for (var i=start; i<array.length; i++)', '  if (array[i][\"' + property + '\"] === value)', '      return i', 'return -1'].join('\\n'));\n    };\n  }, {}],\n  8: [function (require, module, exports) {\n    var newline = /\\n/;\n    var newlineChar = '\\n';\n    var whitespace = /\\s/;\n\n    module.exports = function (text, opt) {\n      var lines = module.exports.lines(text, opt);\n      return lines.map(function (line) {\n        return text.substring(line.start, line.end);\n      }).join('\\n');\n    };\n\n    module.exports.lines = function wordwrap(text, opt) {\n      opt = opt || {};\n\n      if (opt.width === 0 && opt.mode !== 'nowrap') {\n        return [];\n      }\n\n      text = text || '';\n      var width = typeof opt.width === 'number' ? opt.width : Number.MAX_VALUE;\n      var start = Math.max(0, opt.start || 0);\n      var end = typeof opt.end === 'number' ? opt.end : text.length;\n      var mode = opt.mode;\n\n      var measure = opt.measure || monospace;\n      if (mode === 'pre') {\n        return pre(measure, text, start, end, width);\n      } else {\n        return greedy(measure, text, start, end, width, mode);\n      }\n    };\n\n    function idxOf(text, chr, start, end) {\n      var idx = text.indexOf(chr, start);\n      if (idx === -1 || idx > end) {\n        return end;\n      }\n      return idx;\n    }\n\n    function isWhitespace(chr) {\n      return whitespace.test(chr);\n    }\n\n    function pre(measure, text, start, end, width) {\n      var lines = [];\n      var lineStart = start;\n      for (var i = start; i < end && i < text.length; i++) {\n        var chr = text.charAt(i);\n        var isNewline = newline.test(chr);\n\n        if (isNewline || i === end - 1) {\n          var lineEnd = isNewline ? i : i + 1;\n          var measured = measure(text, lineStart, lineEnd, width);\n          lines.push(measured);\n\n          lineStart = i + 1;\n        }\n      }\n      return lines;\n    }\n\n    function greedy(measure, text, start, end, width, mode) {\n      var lines = [];\n\n      var testWidth = width;\n\n      if (mode === 'nowrap') {\n        testWidth = Number.MAX_VALUE;\n      }\n\n      while (start < end && start < text.length) {\n        var newLine = idxOf(text, newlineChar, start, end);\n\n        while (start < newLine) {\n          if (!isWhitespace(text.charAt(start))) {\n            break;\n          }\n          start++;\n        }\n\n        var measured = measure(text, start, newLine, testWidth);\n\n        var lineEnd = start + (measured.end - measured.start);\n        var nextStart = lineEnd + newlineChar.length;\n\n        if (lineEnd < newLine) {\n          while (lineEnd > start) {\n            if (isWhitespace(text.charAt(lineEnd))) {\n              break;\n            }\n            lineEnd--;\n          }\n          if (lineEnd === start) {\n            if (nextStart > start + newlineChar.length) nextStart--;\n            lineEnd = nextStart;\n          } else {\n            nextStart = lineEnd;\n\n            while (lineEnd > start) {\n              if (!isWhitespace(text.charAt(lineEnd - newlineChar.length))) {\n                break;\n              }\n              lineEnd--;\n            }\n          }\n        }\n        if (lineEnd >= start) {\n          var result = measure(text, start, lineEnd, testWidth);\n          lines.push(result);\n        }\n        start = nextStart;\n      }\n      return lines;\n    }\n\n    function monospace(text, start, end, width) {\n      var glyphs = Math.min(width, end - start);\n      return {\n        start: start,\n        end: start + glyphs\n      };\n    }\n  }, {}],\n  9: [function (require, module, exports) {\n    module.exports = extend;\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n    function extend() {\n      var target = {};\n\n      for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i];\n\n        for (var key in source) {\n          if (hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n\n      return target;\n    }\n  }, {}],\n  10: [function (require, module, exports) {\n    (function (Buffer) {\n      var xhr = require('xhr');\n      var noop = function noop() {};\n      var parseASCII = require('parse-bmfont-ascii');\n      var parseXML = require('parse-bmfont-xml');\n      var readBinary = require('parse-bmfont-binary');\n      var isBinaryFormat = require('./lib/is-binary');\n      var xtend = require('xtend');\n\n      var xml2 = function hasXML2() {\n        return window.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest();\n      }();\n\n      module.exports = function (opt, cb) {\n        cb = typeof cb === 'function' ? cb : noop;\n\n        if (typeof opt === 'string') {\n          opt = { uri: opt };\n        } else if (!opt) {\n          opt = {};\n        }\n\n        var expectBinary = opt.binary;\n        if (expectBinary) {\n          opt = getBinaryOpts(opt);\n        }\n\n        xhr(opt, function (err, res, body) {\n          if (err) {\n            return cb(err);\n          }\n          if (!/^2/.test(res.statusCode)) {\n            return cb(new Error('http status code: ' + res.statusCode));\n          }\n          if (!body) {\n            return cb(new Error('no body result'));\n          }\n\n          var binary = false;\n\n          if (isArrayBuffer(body)) {\n            var array = new Uint8Array(body);\n            body = new Buffer(array, 'binary');\n          }\n\n          if (isBinaryFormat(body)) {\n            binary = true;\n\n            if (typeof body === 'string') {\n              body = new Buffer(body, 'binary');\n            }\n          }\n\n          if (!binary) {\n            if (Buffer.isBuffer(body)) {\n              body = body.toString(opt.encoding);\n            }\n            body = body.trim();\n          }\n\n          var result;\n          try {\n            var type = res.headers['content-type'];\n            if (binary) {\n              result = readBinary(body);\n            } else if (/json/.test(type) || body.charAt(0) === '{') {\n              result = JSON.parse(body);\n            } else if (/xml/.test(type) || body.charAt(0) === '<') {\n              result = parseXML(body);\n            } else {\n              result = parseASCII(body);\n            }\n          } catch (e) {\n            cb(new Error('error parsing font ' + e.message));\n            cb = noop;\n          }\n          cb(null, result);\n        });\n      };\n\n      function isArrayBuffer(arr) {\n        var str = Object.prototype.toString;\n        return str.call(arr) === '[object ArrayBuffer]';\n      }\n\n      function getBinaryOpts(opt) {\n        if (xml2) {\n          return xtend(opt, { responseType: 'arraybuffer' });\n        }\n\n        if (typeof window.XMLHttpRequest === 'undefined') {\n          throw new Error('your browser does not support XHR loading');\n        }\n\n        var req = new window.XMLHttpRequest();\n        req.overrideMimeType('text/plain; charset=x-user-defined');\n        return xtend({\n          xhr: req\n        }, opt);\n      }\n    }).call(this, require('buffer').Buffer);\n  }, { './lib/is-binary': 11, 'buffer': 37, 'parse-bmfont-ascii': 13, 'parse-bmfont-binary': 14, 'parse-bmfont-xml': 15, 'xhr': 18, 'xtend': 25 }],\n  11: [function (require, module, exports) {\n    (function (Buffer) {\n      var equal = require('buffer-equal');\n      var HEADER = new Buffer([66, 77, 70, 3]);\n\n      module.exports = function (buf) {\n        if (typeof buf === 'string') {\n          return buf.substring(0, 3) === 'BMF';\n        }\n        return buf.length > 4 && equal(buf.slice(0, 4), HEADER);\n      };\n    }).call(this, require('buffer').Buffer);\n  }, { 'buffer': 37, 'buffer-equal': 12 }],\n  12: [function (require, module, exports) {\n    var Buffer = require('buffer').Buffer;\n\n    module.exports = function (a, b) {\n      if (!Buffer.isBuffer(a)) return undefined;\n      if (!Buffer.isBuffer(b)) return undefined;\n      if (typeof a.equals === 'function') return a.equals(b);\n      if (a.length !== b.length) return false;\n\n      for (var i = 0; i < a.length; i++) {\n        if (a[i] !== b[i]) return false;\n      }\n\n      return true;\n    };\n  }, { 'buffer': 37 }],\n  13: [function (require, module, exports) {\n    module.exports = function parseBMFontAscii(data) {\n      if (!data) {\n        throw new Error('no data provided');\n      }\n      data = data.toString().trim();\n\n      var output = {\n        pages: [],\n        chars: [],\n        kernings: []\n      };\n\n      var lines = data.split(/\\r\\n?|\\n/g);\n\n      if (lines.length === 0) {\n        throw new Error('no data in BMFont file');\n      }\n\n      for (var i = 0; i < lines.length; i++) {\n        var lineData = splitLine(lines[i], i);\n        if (!lineData) {\n            continue;\n          }\n\n        if (lineData.key === 'page') {\n          if (typeof lineData.data.id !== 'number') {\n            throw new Error('malformed file at line ' + i + ' -- needs page id=N');\n          }\n          if (typeof lineData.data.file !== 'string') {\n            throw new Error('malformed file at line ' + i + ' -- needs page file=\"path\"');\n          }\n          output.pages[lineData.data.id] = lineData.data.file;\n        } else if (lineData.key === 'chars' || lineData.key === 'kernings') {} else if (lineData.key === 'char') {\n          output.chars.push(lineData.data);\n        } else if (lineData.key === 'kerning') {\n          output.kernings.push(lineData.data);\n        } else {\n          output[lineData.key] = lineData.data;\n        }\n      }\n\n      return output;\n    };\n\n    function splitLine(line, idx) {\n      line = line.replace(/\\t+/g, ' ').trim();\n      if (!line) {\n        return null;\n      }\n\n      var space = line.indexOf(' ');\n      if (space === -1) {\n        throw new Error('no named row at line ' + idx);\n      }\n\n      var key = line.substring(0, space);\n\n      line = line.substring(space + 1);\n\n      line = line.replace(/letter=[\\'\\\"]\\S+[\\'\\\"]/gi, '');\n      line = line.split('=');\n      line = line.map(function (str) {\n        return str.trim().match(/(\".*?\"|[^\"\\s]+)+(?=\\s*|\\s*$)/g);\n      });\n\n      var data = [];\n      for (var i = 0; i < line.length; i++) {\n        var dt = line[i];\n        if (i === 0) {\n          data.push({\n            key: dt[0],\n            data: ''\n          });\n        } else if (i === line.length - 1) {\n          data[data.length - 1].data = parseData(dt[0]);\n        } else {\n          data[data.length - 1].data = parseData(dt[0]);\n          data.push({\n            key: dt[1],\n            data: ''\n          });\n        }\n      }\n\n      var out = {\n        key: key,\n        data: {}\n      };\n\n      data.forEach(function (v) {\n        out.data[v.key] = v.data;\n      });\n\n      return out;\n    }\n\n    function parseData(data) {\n      if (!data || data.length === 0) {\n        return '';\n      }\n\n      if (data.indexOf('\"') === 0 || data.indexOf(\"'\") === 0) {\n        return data.substring(1, data.length - 1);\n      }\n      if (data.indexOf(',') !== -1) {\n        return parseIntList(data);\n      }\n      return parseInt(data, 10);\n    }\n\n    function parseIntList(data) {\n      return data.split(',').map(function (val) {\n        return parseInt(val, 10);\n      });\n    }\n  }, {}],\n  14: [function (require, module, exports) {\n    var HEADER = [66, 77, 70];\n\n    module.exports = function readBMFontBinary(buf) {\n      if (buf.length < 6) {\n        throw new Error('invalid buffer length for BMFont');\n      }\n\n      var header = HEADER.every(function (byte, i) {\n        return buf.readUInt8(i) === byte;\n      });\n\n      if (!header) {\n        throw new Error('BMFont missing BMF byte header');\n      }\n\n      var i = 3;\n      var vers = buf.readUInt8(i++);\n      if (vers > 3) {\n        throw new Error('Only supports BMFont Binary v3 (BMFont App v1.10)');\n      }\n\n      var target = { kernings: [], chars: [] };\n      for (var b = 0; b < 5; b++) {\n        i += readBlock(target, buf, i);\n      }\n      return target;\n    };\n\n    function readBlock(target, buf, i) {\n      if (i > buf.length - 1) {\n        return 0;\n      }\n\n      var blockID = buf.readUInt8(i++);\n      var blockSize = buf.readInt32LE(i);\n      i += 4;\n\n      switch (blockID) {\n        case 1:\n          target.info = readInfo(buf, i);\n          break;\n        case 2:\n          target.common = readCommon(buf, i);\n          break;\n        case 3:\n          target.pages = readPages(buf, i, blockSize);\n          break;\n        case 4:\n          target.chars = readChars(buf, i, blockSize);\n          break;\n        case 5:\n          target.kernings = readKernings(buf, i, blockSize);\n          break;\n      }\n      return 5 + blockSize;\n    }\n\n    function readInfo(buf, i) {\n      var info = {};\n      info.size = buf.readInt16LE(i);\n\n      var bitField = buf.readUInt8(i + 2);\n      info.smooth = bitField >> 7 & 1;\n      info.unicode = bitField >> 6 & 1;\n      info.italic = bitField >> 5 & 1;\n      info.bold = bitField >> 4 & 1;\n\n      if (bitField >> 3 & 1) {\n        info.fixedHeight = 1;\n      }\n\n      info.charset = buf.readUInt8(i + 3) || '';\n      info.stretchH = buf.readUInt16LE(i + 4);\n      info.aa = buf.readUInt8(i + 6);\n      info.padding = [buf.readInt8(i + 7), buf.readInt8(i + 8), buf.readInt8(i + 9), buf.readInt8(i + 10)];\n      info.spacing = [buf.readInt8(i + 11), buf.readInt8(i + 12)];\n      info.outline = buf.readUInt8(i + 13);\n      info.face = readStringNT(buf, i + 14);\n      return info;\n    }\n\n    function readCommon(buf, i) {\n      var common = {};\n      common.lineHeight = buf.readUInt16LE(i);\n      common.base = buf.readUInt16LE(i + 2);\n      common.scaleW = buf.readUInt16LE(i + 4);\n      common.scaleH = buf.readUInt16LE(i + 6);\n      common.pages = buf.readUInt16LE(i + 8);\n      var bitField = buf.readUInt8(i + 10);\n      common.packed = 0;\n      common.alphaChnl = buf.readUInt8(i + 11);\n      common.redChnl = buf.readUInt8(i + 12);\n      common.greenChnl = buf.readUInt8(i + 13);\n      common.blueChnl = buf.readUInt8(i + 14);\n      return common;\n    }\n\n    function readPages(buf, i, size) {\n      var pages = [];\n      var text = readNameNT(buf, i);\n      var len = text.length + 1;\n      var count = size / len;\n      for (var c = 0; c < count; c++) {\n        pages[c] = buf.slice(i, i + text.length).toString('utf8');\n        i += len;\n      }\n      return pages;\n    }\n\n    function readChars(buf, i, blockSize) {\n      var chars = [];\n\n      var count = blockSize / 20;\n      for (var c = 0; c < count; c++) {\n        var char = {};\n        var off = c * 20;\n        char.id = buf.readUInt32LE(i + 0 + off);\n        char.x = buf.readUInt16LE(i + 4 + off);\n        char.y = buf.readUInt16LE(i + 6 + off);\n        char.width = buf.readUInt16LE(i + 8 + off);\n        char.height = buf.readUInt16LE(i + 10 + off);\n        char.xoffset = buf.readInt16LE(i + 12 + off);\n        char.yoffset = buf.readInt16LE(i + 14 + off);\n        char.xadvance = buf.readInt16LE(i + 16 + off);\n        char.page = buf.readUInt8(i + 18 + off);\n        char.chnl = buf.readUInt8(i + 19 + off);\n        chars[c] = char;\n      }\n      return chars;\n    }\n\n    function readKernings(buf, i, blockSize) {\n      var kernings = [];\n      var count = blockSize / 10;\n      for (var c = 0; c < count; c++) {\n        var kern = {};\n        var off = c * 10;\n        kern.first = buf.readUInt32LE(i + 0 + off);\n        kern.second = buf.readUInt32LE(i + 4 + off);\n        kern.amount = buf.readInt16LE(i + 8 + off);\n        kernings[c] = kern;\n      }\n      return kernings;\n    }\n\n    function readNameNT(buf, offset) {\n      var pos = offset;\n      for (; pos < buf.length; pos++) {\n        if (buf[pos] === 0x00) {\n          break;\n        }\n      }\n      return buf.slice(offset, pos);\n    }\n\n    function readStringNT(buf, offset) {\n      return readNameNT(buf, offset).toString('utf8');\n    }\n  }, {}],\n  15: [function (require, module, exports) {\n    var parseAttributes = require('./parse-attribs');\n    var parseFromString = require('xml-parse-from-string');\n\n    var NAME_MAP = {\n      scaleh: 'scaleH',\n      scalew: 'scaleW',\n      stretchh: 'stretchH',\n      lineheight: 'lineHeight',\n      alphachnl: 'alphaChnl',\n      redchnl: 'redChnl',\n      greenchnl: 'greenChnl',\n      bluechnl: 'blueChnl'\n    };\n\n    module.exports = function parse(data) {\n      data = data.toString();\n\n      var xmlRoot = parseFromString(data);\n      var output = {\n        pages: [],\n        chars: [],\n        kernings: []\n      };['info', 'common'].forEach(function (key) {\n        var element = xmlRoot.getElementsByTagName(key)[0];\n        if (element) {\n          output[key] = parseAttributes(getAttribs(element));\n        }\n      });\n\n      var pageRoot = xmlRoot.getElementsByTagName('pages')[0];\n      if (!pageRoot) {\n        throw new Error('malformed file -- no <pages> element');\n      }\n      var pages = pageRoot.getElementsByTagName('page');\n      for (var i = 0; i < pages.length; i++) {\n        var p = pages[i];\n        var id = parseInt(p.getAttribute('id'), 10);\n        var file = p.getAttribute('file');\n        if (isNaN(id)) {\n          throw new Error('malformed file -- page \"id\" attribute is NaN');\n        }\n        if (!file) {\n          throw new Error('malformed file -- needs page \"file\" attribute');\n        }\n        output.pages[parseInt(id, 10)] = file;\n      }\n\n      ['chars', 'kernings'].forEach(function (key) {\n        var element = xmlRoot.getElementsByTagName(key)[0];\n        if (!element) {\n          return;\n        }\n        var childTag = key.substring(0, key.length - 1);\n        var children = element.getElementsByTagName(childTag);\n        for (var i = 0; i < children.length; i++) {\n          var child = children[i];\n          output[key].push(parseAttributes(getAttribs(child)));\n        }\n      });\n      return output;\n    };\n\n    function getAttribs(element) {\n      var attribs = getAttribList(element);\n      return attribs.reduce(function (dict, attrib) {\n        var key = mapName(attrib.nodeName);\n        dict[key] = attrib.nodeValue;\n        return dict;\n      }, {});\n    }\n\n    function getAttribList(element) {\n      var attribs = [];\n      for (var i = 0; i < element.attributes.length; i++) {\n        attribs.push(element.attributes[i]);\n      }\n      return attribs;\n    }\n\n    function mapName(nodeName) {\n      return NAME_MAP[nodeName.toLowerCase()] || nodeName;\n    }\n  }, { './parse-attribs': 16, 'xml-parse-from-string': 17 }],\n  16: [function (require, module, exports) {\n    var GLYPH_DESIGNER_ERROR = 'chasrset';\n\n    module.exports = function parseAttributes(obj) {\n      if (GLYPH_DESIGNER_ERROR in obj) {\n        obj['charset'] = obj[GLYPH_DESIGNER_ERROR];\n        delete obj[GLYPH_DESIGNER_ERROR];\n      }\n\n      for (var k in obj) {\n        if (k === 'face' || k === 'charset') {\n          continue;\n        } else if (k === 'padding' || k === 'spacing') {\n          obj[k] = parseIntList(obj[k]);\n        } else {\n          obj[k] = parseInt(obj[k], 10);\n        }\n      }\n      return obj;\n    };\n\n    function parseIntList(data) {\n      return data.split(',').map(function (val) {\n        return parseInt(val, 10);\n      });\n    }\n  }, {}],\n  17: [function (require, module, exports) {\n    module.exports = function xmlparser() {\n      if (typeof window.DOMParser !== 'undefined') {\n        return function (str) {\n          var parser = new window.DOMParser();\n          return parser.parseFromString(str, 'application/xml');\n        };\n      }\n\n      if (typeof window.ActiveXObject !== 'undefined' && new window.ActiveXObject('Microsoft.XMLDOM')) {\n        return function (str) {\n          var xmlDoc = new window.ActiveXObject('Microsoft.XMLDOM');\n          xmlDoc.async = 'false';\n          xmlDoc.loadXML(str);\n          return xmlDoc;\n        };\n      }\n\n      return function (str) {\n        var div = document.createElement('div');\n        div.innerHTML = str;\n        return div;\n      };\n    }();\n  }, {}],\n  18: [function (require, module, exports) {\n    'use strict';\n\n    var window = require('global/window');\n    var once = require('once');\n    var isFunction = require('is-function');\n    var parseHeaders = require('parse-headers');\n    var xtend = require('xtend');\n\n    module.exports = createXHR;\n    createXHR.XMLHttpRequest = window.XMLHttpRequest || noop;\n    createXHR.XDomainRequest = 'withCredentials' in new createXHR.XMLHttpRequest() ? createXHR.XMLHttpRequest : window.XDomainRequest;\n\n    forEachArray(['get', 'put', 'post', 'patch', 'head', 'delete'], function (method) {\n      createXHR[method === 'delete' ? 'del' : method] = function (uri, options, callback) {\n        options = initParams(uri, options, callback);\n        options.method = method.toUpperCase();\n        return _createXHR(options);\n      };\n    });\n\n    function forEachArray(array, iterator) {\n      for (var i = 0; i < array.length; i++) {\n        iterator(array[i]);\n      }\n    }\n\n    function isEmpty(obj) {\n      for (var i in obj) {\n        if (obj.hasOwnProperty(i)) return false;\n      }\n      return true;\n    }\n\n    function initParams(uri, options, callback) {\n      var params = uri;\n\n      if (isFunction(options)) {\n        callback = options;\n        if (typeof uri === 'string') {\n          params = { uri: uri };\n        }\n      } else {\n        params = xtend(options, { uri: uri });\n      }\n\n      params.callback = callback;\n      return params;\n    }\n\n    function createXHR(uri, options, callback) {\n      options = initParams(uri, options, callback);\n      return _createXHR(options);\n    }\n\n    function _createXHR(options) {\n      var callback = options.callback;\n      if (typeof callback === 'undefined') {\n        throw new Error('callback argument missing');\n      }\n      callback = once(callback);\n\n      function readystatechange() {\n        if (xhr.readyState === 4) {\n          loadFunc();\n        }\n      }\n\n      function getBody() {\n        var body = undefined;\n\n        if (xhr.response) {\n          body = xhr.response;\n        } else if (xhr.responseType === 'text' || !xhr.responseType) {\n          body = xhr.responseText || xhr.responseXML;\n        }\n\n        if (isJson) {\n          try {\n            body = JSON.parse(body);\n          } catch (e) {}\n        }\n\n        return body;\n      }\n\n      var failureResponse = {\n        body: undefined,\n        headers: {},\n        statusCode: 0,\n        method: method,\n        url: uri,\n        rawRequest: xhr\n      };\n\n      function errorFunc(evt) {\n        clearTimeout(timeoutTimer);\n        if (!(evt instanceof Error)) {\n          evt = new Error('' + (evt || 'Unknown XMLHttpRequest Error'));\n        }\n        evt.statusCode = 0;\n        callback(evt, failureResponse);\n      }\n\n      function loadFunc() {\n        if (aborted) return;\n        var status;\n        clearTimeout(timeoutTimer);\n        if (options.useXDR && xhr.status === undefined) {\n          status = 200;\n        } else {\n          status = xhr.status === 1223 ? 204 : xhr.status;\n        }\n        var response = failureResponse;\n        var err = null;\n\n        if (status !== 0) {\n          response = {\n            body: getBody(),\n            statusCode: status,\n            method: method,\n            headers: {},\n            url: uri,\n            rawRequest: xhr\n          };\n          if (xhr.getAllResponseHeaders) {\n            response.headers = parseHeaders(xhr.getAllResponseHeaders());\n          }\n        } else {\n          err = new Error('Internal XMLHttpRequest Error');\n        }\n        callback(err, response, response.body);\n      }\n\n      var xhr = options.xhr || null;\n\n      if (!xhr) {\n        if (options.cors || options.useXDR) {\n          xhr = new createXHR.XDomainRequest();\n        } else {\n          xhr = new createXHR.XMLHttpRequest();\n        }\n      }\n\n      var key;\n      var aborted;\n      var uri = xhr.url = options.uri || options.url;\n      var method = xhr.method = options.method || 'GET';\n      var body = options.body || options.data || null;\n      var headers = xhr.headers = options.headers || {};\n      var sync = !!options.sync;\n      var isJson = false;\n      var timeoutTimer;\n\n      if ('json' in options) {\n        isJson = true;\n        headers['accept'] || headers['Accept'] || (headers['Accept'] = 'application/json');\n        if (method !== 'GET' && method !== 'HEAD') {\n          headers['content-type'] || headers['Content-Type'] || (headers['Content-Type'] = 'application/json');\n          body = __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(options.json);\n        }\n      }\n\n      xhr.onreadystatechange = readystatechange;\n      xhr.onload = loadFunc;\n      xhr.onerror = errorFunc;\n\n      xhr.onprogress = function () {};\n      xhr.ontimeout = errorFunc;\n      xhr.open(method, uri, !sync, options.username, options.password);\n\n      if (!sync) {\n        xhr.withCredentials = !!options.withCredentials;\n      }\n\n      if (!sync && options.timeout > 0) {\n        timeoutTimer = setTimeout(function () {\n          aborted = true;\n          xhr.abort('timeout');\n          var e = new Error('XMLHttpRequest timeout');\n          e.code = 'ETIMEDOUT';\n          errorFunc(e);\n        }, options.timeout);\n      }\n\n      if (xhr.setRequestHeader) {\n        for (key in headers) {\n          if (headers.hasOwnProperty(key)) {\n            xhr.setRequestHeader(key, headers[key]);\n          }\n        }\n      } else if (options.headers && !isEmpty(options.headers)) {\n        throw new Error('Headers cannot be set on an XDomainRequest object');\n      }\n\n      if ('responseType' in options) {\n        xhr.responseType = options.responseType;\n      }\n\n      if ('beforeSend' in options && typeof options.beforeSend === 'function') {\n        options.beforeSend(xhr);\n      }\n\n      xhr.send(body);\n\n      return xhr;\n    }\n\n    function noop() {}\n  }, { 'global/window': 19, 'is-function': 20, 'once': 21, 'parse-headers': 24, 'xtend': 25 }],\n  19: [function (require, module, exports) {\n    (function (global) {\n      if (typeof window !== 'undefined') {\n        module.exports = window;\n      } else if (typeof global !== 'undefined') {\n        module.exports = global;\n      } else if (typeof self !== 'undefined') {\n        module.exports = self;\n      } else {\n        module.exports = {};\n      }\n    }).call(this, typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {});\n  }, {}],\n  20: [function (require, module, exports) {\n    module.exports = isFunction;\n\n    var toString = Object.prototype.toString;\n\n    function isFunction(fn) {\n      var string = toString.call(fn);\n      return string === '[object Function]' || typeof fn === 'function' && string !== '[object RegExp]' || typeof window !== 'undefined' && (fn === window.setTimeout || fn === window.alert || fn === window.confirm || fn === window.prompt);\n    }\n  }, {}],\n  21: [function (require, module, exports) {\n    module.exports = once;\n\n    once.proto = once(function () {\n      Object.defineProperty(Function.prototype, 'once', {\n        value: function value() {\n          return once(this);\n        },\n        configurable: true\n      });\n    });\n\n    function once(fn) {\n      var called = false;\n      return function () {\n        if (called) return;\n        called = true;\n        return fn.apply(this, arguments);\n      };\n    }\n  }, {}],\n  22: [function (require, module, exports) {\n    var isFunction = require('is-function');\n\n    module.exports = forEach;\n\n    var toString = Object.prototype.toString;\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n    function forEach(list, iterator, context) {\n      if (!isFunction(iterator)) {\n        throw new TypeError('iterator must be a function');\n      }\n\n      if (arguments.length < 3) {\n        context = this;\n      }\n\n      if (toString.call(list) === '[object Array]') {\n        forEachArray(list, iterator, context);\n      } else if (typeof list === 'string') {\n        forEachString(list, iterator, context);\n      } else {\n        forEachObject(list, iterator, context);\n      }\n    }\n\n    function forEachArray(array, iterator, context) {\n      for (var i = 0, len = array.length; i < len; i++) {\n        if (hasOwnProperty.call(array, i)) {\n          iterator.call(context, array[i], i, array);\n        }\n      }\n    }\n\n    function forEachString(string, iterator, context) {\n      for (var i = 0, len = string.length; i < len; i++) {\n        iterator.call(context, string.charAt(i), i, string);\n      }\n    }\n\n    function forEachObject(object, iterator, context) {\n      for (var k in object) {\n        if (hasOwnProperty.call(object, k)) {\n          iterator.call(context, object[k], k, object);\n        }\n      }\n    }\n  }, { 'is-function': 20 }],\n  23: [function (require, module, exports) {\n    exports = module.exports = trim;\n\n    function trim(str) {\n      return str.replace(/^\\s*|\\s*$/g, '');\n    }\n\n    exports.left = function (str) {\n      return str.replace(/^\\s*/, '');\n    };\n\n    exports.right = function (str) {\n      return str.replace(/\\s*$/, '');\n    };\n  }, {}],\n  24: [function (require, module, exports) {\n    var trim = require('trim'),\n        forEach = require('for-each'),\n        isArray = function isArray(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    };\n\n    module.exports = function (headers) {\n      if (!headers) {\n        return {};\n      }\n\n      var result = {};\n\n      forEach(trim(headers).split('\\n'), function (row) {\n        var index = row.indexOf(':'),\n            key = trim(row.slice(0, index)).toLowerCase(),\n            value = trim(row.slice(index + 1));\n\n        if (typeof result[key] === 'undefined') {\n          result[key] = value;\n        } else if (isArray(result[key])) {\n          result[key].push(value);\n        } else {\n          result[key] = [result[key], value];\n        }\n      });\n\n      return result;\n    };\n  }, { 'for-each': 22, 'trim': 23 }],\n  25: [function (require, module, exports) {\n    arguments[4][9][0].apply(exports, arguments);\n  }, { 'dup': 9 }],\n  26: [function (require, module, exports) {\n    'use strict';\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\n    function toObject(val) {\n      if (val === null || val === undefined) {\n        throw new TypeError('Object.assign cannot be called with null or undefined');\n      }\n\n      return Object(val);\n    }\n\n    module.exports = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default.a || function (target, source) {\n      var from;\n      var to = toObject(target);\n      var symbols;\n\n      for (var s = 1; s < arguments.length; s++) {\n        from = Object(arguments[s]);\n\n        for (var key in from) {\n          if (hasOwnProperty.call(from, key)) {\n            to[key] = from[key];\n          }\n        }\n\n        if (__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default.a) {\n          symbols = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default()(from);\n          for (var i = 0; i < symbols.length; i++) {\n            if (propIsEnumerable.call(from, symbols[i])) {\n              to[symbols[i]] = from[symbols[i]];\n            }\n          }\n        }\n      }\n\n      return to;\n    };\n  }, {}],\n  27: [function (require, module, exports) {\n    var dtype = require('dtype');\n    var anArray = require('an-array');\n    var isBuffer = require('is-buffer');\n\n    var CW = [0, 2, 3];\n    var CCW = [2, 1, 3];\n\n    module.exports = function createQuadElements(array, opt) {\n      if (!array || !(anArray(array) || isBuffer(array))) {\n        opt = array || {};\n        array = null;\n      }\n\n      if (typeof opt === 'number') {\n          opt = { count: opt };\n        } else {\n        opt = opt || {};\n      }\n\n      var type = typeof opt.type === 'string' ? opt.type : 'uint16';\n      var count = typeof opt.count === 'number' ? opt.count : 1;\n      var start = opt.start || 0;\n\n      var dir = opt.clockwise !== false ? CW : CCW,\n          a = dir[0],\n          b = dir[1],\n          c = dir[2];\n\n      var numIndices = count * 6;\n\n      var indices = array || new (dtype(type))(numIndices);\n      for (var i = 0, j = 0; i < numIndices; i += 6, j += 4) {\n        var x = i + start;\n        indices[x + 0] = j + 0;\n        indices[x + 1] = j + 1;\n        indices[x + 2] = j + 2;\n        indices[x + 3] = j + a;\n        indices[x + 4] = j + b;\n        indices[x + 5] = j + c;\n      }\n      return indices;\n    };\n  }, { 'an-array': 28, 'dtype': 29, 'is-buffer': 30 }],\n  28: [function (require, module, exports) {\n    var str = Object.prototype.toString;\n\n    module.exports = anArray;\n\n    function anArray(arr) {\n      return arr.BYTES_PER_ELEMENT && str.call(arr.buffer) === '[object ArrayBuffer]' || Array.isArray(arr);\n    }\n  }, {}],\n  29: [function (require, module, exports) {\n    module.exports = function (dtype) {\n      switch (dtype) {\n        case 'int8':\n          return Int8Array;\n        case 'int16':\n          return Int16Array;\n        case 'int32':\n          return Int32Array;\n        case 'uint8':\n          return Uint8Array;\n        case 'uint16':\n          return Uint16Array;\n        case 'uint32':\n          return Uint32Array;\n        case 'float32':\n          return Float32Array;\n        case 'float64':\n          return Float64Array;\n        case 'array':\n          return Array;\n        case 'uint8_clamped':\n          return Uint8ClampedArray;\n      }\n    };\n  }, {}],\n  30: [function (require, module, exports) {\n\n    module.exports = function (obj) {\n      return !!(obj != null && (obj._isBuffer || obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)));\n    };\n  }, {}],\n  31: [function (require, module, exports) {\n    var flatten = require('flatten-vertex-data');\n\n    module.exports.attr = setAttribute;\n    module.exports.index = setIndex;\n\n    function setIndex(geometry, data, itemSize, dtype) {\n      if (typeof itemSize !== 'number') itemSize = 1;\n      if (typeof dtype !== 'number') dtype = 'uint16';\n\n      var isR69 = !geometry.index && typeof geometry.setIndex !== 'function';\n      var attrib = isR69 ? geometry.getAttribute('index') : geometry.index;\n      var newAttrib = updateAttribute(attrib, data, itemSize, dtype);\n      if (newAttrib) {\n        if (isR69) geometry.addAttribute('index', newAttrib);else geometry.index = newAttrib;\n      }\n    }\n\n    function setAttribute(geometry, key, data, itemSize, dtype) {\n      if (typeof itemSize !== 'number') itemSize = 3;\n      if (typeof dtype !== 'number') dtype = 'float32';\n      if (Array.isArray(data) && Array.isArray(data[0]) && data[0].length !== itemSize) {\n        throw new Error('Nested vertex array has unexpected size; expected ' + itemSize + ' but found ' + data[0].length);\n      }\n\n      var attrib = geometry.getAttribute(key);\n      var newAttrib = updateAttribute(attrib, data, itemSize, dtype);\n      if (newAttrib) {\n        geometry.addAttribute(key, newAttrib);\n      }\n    }\n\n    function updateAttribute(attrib, data, itemSize, dtype) {\n      data = data || [];\n      if (!attrib || rebuildAttribute(attrib, data, itemSize)) {\n        data = flatten(data, dtype);\n        attrib = new __WEBPACK_IMPORTED_MODULE_8_three__[\"BufferAttribute\"](data, itemSize);\n        attrib.needsUpdate = true;\n        return attrib;\n      } else {\n        flatten(data, attrib.array);\n        attrib.needsUpdate = true;\n        return null;\n      }\n    }\n\n    function rebuildAttribute(attrib, data, itemSize) {\n      if (attrib.itemSize !== itemSize) return true;\n      if (!attrib.array) return true;\n      var attribLength = attrib.array.length;\n      if (Array.isArray(data) && Array.isArray(data[0])) {\n        return attribLength !== data.length * itemSize;\n      } else {\n        return attribLength !== data.length;\n      }\n    }\n  }, { 'flatten-vertex-data': 32 }],\n  32: [function (require, module, exports) {\n    var dtype = require('dtype');\n    module.exports = flattenVertexData;\n    function flattenVertexData(data, output, offset) {\n      if (!data) throw new TypeError('must specify data as first parameter');\n      offset = +(offset || 0) | 0;\n\n      if (Array.isArray(data) && Array.isArray(data[0])) {\n        var dim = data[0].length;\n        var length = data.length * dim;\n\n        if (!output || typeof output === 'string') {\n          output = new (dtype(output || 'float32'))(length + offset);\n        }\n\n        var dstLength = output.length - offset;\n        if (length !== dstLength) {\n          throw new Error('source length ' + length + ' (' + dim + 'x' + data.length + ')' + ' does not match destination length ' + dstLength);\n        }\n\n        for (var i = 0, k = offset; i < data.length; i++) {\n          for (var j = 0; j < dim; j++) {\n            output[k++] = data[i][j];\n          }\n        }\n      } else {\n        if (!output || typeof output === 'string') {\n          var Ctor = dtype(output || 'float32');\n          if (offset === 0) {\n            output = new Ctor(data);\n          } else {\n            output = new Ctor(data.length + offset);\n            output.set(data, offset);\n          }\n        } else {\n          output.set(data, offset);\n        }\n      }\n\n      return output;\n    }\n  }, { 'dtype': 33 }],\n  33: [function (require, module, exports) {\n    arguments[4][29][0].apply(exports, arguments);\n  }, { 'dup': 29 }],\n  34: [function (require, module, exports) {\n    var assign = require('object-assign');\n\n    module.exports = function createSDFShader(opt) {\n      opt = opt || {};\n      var opacity = typeof opt.opacity === 'number' ? opt.opacity : 1;\n      var alphaTest = typeof opt.alphaTest === 'number' ? opt.alphaTest : 0.0001;\n      var precision = opt.precision || 'highp';\n      var color = opt.color;\n      var map = opt.map;\n\n      delete opt.map;\n      delete opt.color;\n      delete opt.precision;\n      delete opt.opacity;\n\n      return assign({\n        uniforms: {\n          opacity: { type: 'f', value: opacity },\n          map: { type: 't', value: map || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]() },\n          color: { type: 'c', value: new __WEBPACK_IMPORTED_MODULE_8_three__[\"Color\"](color) }\n        },\n        vertexShader: ['attribute vec2 uv;', 'attribute vec4 position;', 'uniform mat4 projectionMatrix;', 'uniform mat4 modelViewMatrix;', 'varying vec2 vUv;', 'void main() {', 'vUv = uv;', 'gl_Position = projectionMatrix * modelViewMatrix * position;', '}'].join('\\n'),\n        fragmentShader: ['#ifdef GL_OES_standard_derivatives', '#extension GL_OES_standard_derivatives : enable', '#endif', 'precision ' + precision + ' float;', 'uniform float opacity;', 'uniform vec3 color;', 'uniform sampler2D map;', 'varying vec2 vUv;', 'float aastep(float value) {', '  #ifdef GL_OES_standard_derivatives', '    float afwidth = length(vec2(dFdx(value), dFdy(value))) * 0.70710678118654757;', '  #else', '    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));', '  #endif', '  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);', '}', 'void main() {', '  vec4 texColor = texture2D(map, vUv);', '  float alpha = aastep(texColor.a);', '  gl_FragColor = vec4(color, opacity * alpha);', alphaTest === 0 ? '' : '  if (gl_FragColor.a < ' + alphaTest + ') discard;', '}'].join('\\n')\n      }, opt);\n    };\n  }, { 'object-assign': 26 }],\n  35: [function (require, module, exports) {\n    var loadFont = require('load-bmfont');\n\n    module.exports = function (opt, cb) {\n      loadFont(opt.font, function (err, font) {\n        if (err) throw err;\n        PANOLENS.Utils.TextureLoader.load(opt.image, function (tex) {\n          cb(font, tex);\n        });\n      });\n    };\n  }, { 'load-bmfont': 10 }],\n  36: [function (require, module, exports) {\n    var createText = require('../');\n    var SDFShader = require('../shaders/sdf');\n\n    if (PANOLENS && PANOLENS.Utils && PANOLENS.SpriteText) {\n      PANOLENS.Utils.loadBMFont = function (fontObject, callback) {\n        require('./load')(fontObject, PANOLENS.SpriteText.prototype.setBMFont.bind(PANOLENS.SpriteText.prototype, callback));\n      };\n      PANOLENS.SpriteText.prototype.generateTextGeometry = createText;\n      PANOLENS.SpriteText.prototype.generateSDFShader = SDFShader;\n    }\n  }, { '../': 1, '../shaders/sdf': 34, './load': 35 }],\n  37: [function (require, module, exports) {\n    (function (global) {\n      /*!\n      * The buffer module from node.js, for the browser.\n      *\n      * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n      * @license  MIT\n      */\n      'use strict';\n\n      var base64 = require('base64-js');\n      var ieee754 = require('ieee754');\n      var isArray = require('isarray');\n\n      exports.Buffer = Buffer;\n      exports.SlowBuffer = SlowBuffer;\n      exports.INSPECT_MAX_BYTES = 50;\n      Buffer.poolSize = 8192;\n\n      var rootParent = {};\n\n      Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : typedArraySupport();\n\n      function typedArraySupport() {\n        try {\n          var arr = new Uint8Array(1);\n          arr.foo = function () {\n            return 42;\n          };\n          return arr.foo() === 42 && typeof arr.subarray === 'function' && arr.subarray(1, 1).byteLength === 0;\n        } catch (e) {\n          return false;\n        }\n      }\n\n      function kMaxLength() {\n        return Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff;\n      }\n\n      function Buffer(arg) {\n        if (!(this instanceof Buffer)) {\n          if (arguments.length > 1) return new Buffer(arg, arguments[1]);\n          return new Buffer(arg);\n        }\n\n        if (!Buffer.TYPED_ARRAY_SUPPORT) {\n          this.length = 0;\n          this.parent = undefined;\n        }\n\n        if (typeof arg === 'number') {\n          return fromNumber(this, arg);\n        }\n\n        if (typeof arg === 'string') {\n          return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8');\n        }\n\n        return fromObject(this, arg);\n      }\n\n      function fromNumber(that, length) {\n        that = allocate(that, length < 0 ? 0 : checked(length) | 0);\n        if (!Buffer.TYPED_ARRAY_SUPPORT) {\n          for (var i = 0; i < length; i++) {\n            that[i] = 0;\n          }\n        }\n        return that;\n      }\n\n      function fromString(that, string, encoding) {\n        if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8';\n\n        var length = byteLength(string, encoding) | 0;\n        that = allocate(that, length);\n\n        that.write(string, encoding);\n        return that;\n      }\n\n      function fromObject(that, object) {\n        if (Buffer.isBuffer(object)) return fromBuffer(that, object);\n\n        if (isArray(object)) return fromArray(that, object);\n\n        if (object == null) {\n          throw new TypeError('must start with number, buffer, array or string');\n        }\n\n        if (typeof ArrayBuffer !== 'undefined') {\n          if (object.buffer instanceof ArrayBuffer) {\n            return fromTypedArray(that, object);\n          }\n          if (object instanceof ArrayBuffer) {\n            return fromArrayBuffer(that, object);\n          }\n        }\n\n        if (object.length) return fromArrayLike(that, object);\n\n        return fromJsonObject(that, object);\n      }\n\n      function fromBuffer(that, buffer) {\n        var length = checked(buffer.length) | 0;\n        that = allocate(that, length);\n        buffer.copy(that, 0, 0, length);\n        return that;\n      }\n\n      function fromArray(that, array) {\n        var length = checked(array.length) | 0;\n        that = allocate(that, length);\n        for (var i = 0; i < length; i += 1) {\n          that[i] = array[i] & 255;\n        }\n        return that;\n      }\n\n      function fromTypedArray(that, array) {\n        var length = checked(array.length) | 0;\n        that = allocate(that, length);\n\n        for (var i = 0; i < length; i += 1) {\n          that[i] = array[i] & 255;\n        }\n        return that;\n      }\n\n      function fromArrayBuffer(that, array) {\n\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          that = new Uint8Array(array);\n          that.__proto__ = Buffer.prototype;\n        } else {\n          that = fromTypedArray(that, new Uint8Array(array));\n        }\n        return that;\n      }\n\n      function fromArrayLike(that, array) {\n        var length = checked(array.length) | 0;\n        that = allocate(that, length);\n        for (var i = 0; i < length; i += 1) {\n          that[i] = array[i] & 255;\n        }\n        return that;\n      }\n\n      function fromJsonObject(that, object) {\n        var array;\n        var length = 0;\n\n        if (object.type === 'Buffer' && isArray(object.data)) {\n          array = object.data;\n          length = checked(array.length) | 0;\n        }\n        that = allocate(that, length);\n\n        for (var i = 0; i < length; i += 1) {\n          that[i] = array[i] & 255;\n        }\n        return that;\n      }\n\n      if (Buffer.TYPED_ARRAY_SUPPORT) {\n        Buffer.prototype.__proto__ = Uint8Array.prototype;\n        Buffer.__proto__ = Uint8Array;\n      } else {\n        Buffer.prototype.length = undefined;\n        Buffer.prototype.parent = undefined;\n      }\n\n      function allocate(that, length) {\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          that = new Uint8Array(length);\n          that.__proto__ = Buffer.prototype;\n        } else {\n          that.length = length;\n        }\n\n        var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1;\n        if (fromPool) that.parent = rootParent;\n\n        return that;\n      }\n\n      function checked(length) {\n        if (length >= kMaxLength()) {\n          throw new RangeError('Attempt to allocate Buffer larger than maximum ' + 'size: 0x' + kMaxLength().toString(16) + ' bytes');\n        }\n        return length | 0;\n      }\n\n      function SlowBuffer(subject, encoding) {\n        if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding);\n\n        var buf = new Buffer(subject, encoding);\n        delete buf.parent;\n        return buf;\n      }\n\n      Buffer.isBuffer = function isBuffer(b) {\n        return !!(b != null && b._isBuffer);\n      };\n\n      Buffer.compare = function compare(a, b) {\n        if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n          throw new TypeError('Arguments must be Buffers');\n        }\n\n        if (a === b) return 0;\n\n        var x = a.length;\n        var y = b.length;\n\n        var i = 0;\n        var len = Math.min(x, y);\n        while (i < len) {\n          if (a[i] !== b[i]) break;\n\n          ++i;\n        }\n\n        if (i !== len) {\n          x = a[i];\n          y = b[i];\n        }\n\n        if (x < y) return -1;\n        if (y < x) return 1;\n        return 0;\n      };\n\n      Buffer.isEncoding = function isEncoding(encoding) {\n        switch (String(encoding).toLowerCase()) {\n          case 'hex':\n          case 'utf8':\n          case 'utf-8':\n          case 'ascii':\n          case 'binary':\n          case 'base64':\n          case 'raw':\n          case 'ucs2':\n          case 'ucs-2':\n          case 'utf16le':\n          case 'utf-16le':\n            return true;\n          default:\n            return false;\n        }\n      };\n\n      Buffer.concat = function concat(list, length) {\n        if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.');\n\n        if (list.length === 0) {\n          return new Buffer(0);\n        }\n\n        var i;\n        if (length === undefined) {\n          length = 0;\n          for (i = 0; i < list.length; i++) {\n            length += list[i].length;\n          }\n        }\n\n        var buf = new Buffer(length);\n        var pos = 0;\n        for (i = 0; i < list.length; i++) {\n          var item = list[i];\n          item.copy(buf, pos);\n          pos += item.length;\n        }\n        return buf;\n      };\n\n      function byteLength(string, encoding) {\n        if (typeof string !== 'string') string = '' + string;\n\n        var len = string.length;\n        if (len === 0) return 0;\n\n        var loweredCase = false;\n        for (;;) {\n          switch (encoding) {\n            case 'ascii':\n            case 'binary':\n            case 'raw':\n            case 'raws':\n              return len;\n            case 'utf8':\n            case 'utf-8':\n              return utf8ToBytes(string).length;\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n              return len * 2;\n            case 'hex':\n              return len >>> 1;\n            case 'base64':\n              return base64ToBytes(string).length;\n            default:\n              if (loweredCase) return utf8ToBytes(string).length;\n              encoding = ('' + encoding).toLowerCase();\n              loweredCase = true;\n          }\n        }\n      }\n      Buffer.byteLength = byteLength;\n\n      function slowToString(encoding, start, end) {\n        var loweredCase = false;\n\n        start = start | 0;\n        end = end === undefined || end === Infinity ? this.length : end | 0;\n\n        if (!encoding) encoding = 'utf8';\n        if (start < 0) start = 0;\n        if (end > this.length) end = this.length;\n        if (end <= start) return '';\n\n        while (true) {\n          switch (encoding) {\n            case 'hex':\n              return hexSlice(this, start, end);\n\n            case 'utf8':\n            case 'utf-8':\n              return utf8Slice(this, start, end);\n\n            case 'ascii':\n              return asciiSlice(this, start, end);\n\n            case 'binary':\n              return binarySlice(this, start, end);\n\n            case 'base64':\n              return base64Slice(this, start, end);\n\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n              return utf16leSlice(this, start, end);\n\n            default:\n              if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n              encoding = (encoding + '').toLowerCase();\n              loweredCase = true;\n          }\n        }\n      }\n\n      Buffer.prototype._isBuffer = true;\n\n      Buffer.prototype.toString = function toString() {\n        var length = this.length | 0;\n        if (length === 0) return '';\n        if (arguments.length === 0) return utf8Slice(this, 0, length);\n        return slowToString.apply(this, arguments);\n      };\n\n      Buffer.prototype.equals = function equals(b) {\n        if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n        if (this === b) return true;\n        return Buffer.compare(this, b) === 0;\n      };\n\n      Buffer.prototype.inspect = function inspect() {\n        var str = '';\n        var max = exports.INSPECT_MAX_BYTES;\n        if (this.length > 0) {\n          str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n          if (this.length > max) str += ' ... ';\n        }\n        return '<Buffer ' + str + '>';\n      };\n\n      Buffer.prototype.compare = function compare(b) {\n        if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n        if (this === b) return 0;\n        return Buffer.compare(this, b);\n      };\n\n      Buffer.prototype.indexOf = function indexOf(val, byteOffset) {\n        if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff;else if (byteOffset < -0x80000000) byteOffset = -0x80000000;\n        byteOffset >>= 0;\n\n        if (this.length === 0) return -1;\n        if (byteOffset >= this.length) return -1;\n\n        if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0);\n\n        if (typeof val === 'string') {\n          if (val.length === 0) return -1;\n          return String.prototype.indexOf.call(this, val, byteOffset);\n        }\n        if (Buffer.isBuffer(val)) {\n          return arrayIndexOf(this, val, byteOffset);\n        }\n        if (typeof val === 'number') {\n          if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n            return Uint8Array.prototype.indexOf.call(this, val, byteOffset);\n          }\n          return arrayIndexOf(this, [val], byteOffset);\n        }\n\n        function arrayIndexOf(arr, val, byteOffset) {\n          var foundIndex = -1;\n          for (var i = 0; byteOffset + i < arr.length; i++) {\n            if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n              if (foundIndex === -1) foundIndex = i;\n              if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex;\n            } else {\n              foundIndex = -1;\n            }\n          }\n          return -1;\n        }\n\n        throw new TypeError('val must be string, number or Buffer');\n      };\n\n      function hexWrite(buf, string, offset, length) {\n        offset = Number(offset) || 0;\n        var remaining = buf.length - offset;\n        if (!length) {\n          length = remaining;\n        } else {\n          length = Number(length);\n          if (length > remaining) {\n            length = remaining;\n          }\n        }\n\n        var strLen = string.length;\n        if (strLen % 2 !== 0) throw new Error('Invalid hex string');\n\n        if (length > strLen / 2) {\n          length = strLen / 2;\n        }\n        for (var i = 0; i < length; i++) {\n          var parsed = parseInt(string.substr(i * 2, 2), 16);\n          if (isNaN(parsed)) throw new Error('Invalid hex string');\n          buf[offset + i] = parsed;\n        }\n        return i;\n      }\n\n      function utf8Write(buf, string, offset, length) {\n        return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\n      }\n\n      function asciiWrite(buf, string, offset, length) {\n        return blitBuffer(asciiToBytes(string), buf, offset, length);\n      }\n\n      function binaryWrite(buf, string, offset, length) {\n        return asciiWrite(buf, string, offset, length);\n      }\n\n      function base64Write(buf, string, offset, length) {\n        return blitBuffer(base64ToBytes(string), buf, offset, length);\n      }\n\n      function ucs2Write(buf, string, offset, length) {\n        return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\n      }\n\n      Buffer.prototype.write = function write(string, offset, length, encoding) {\n        if (offset === undefined) {\n          encoding = 'utf8';\n          length = this.length;\n          offset = 0;\n        } else if (length === undefined && typeof offset === 'string') {\n          encoding = offset;\n          length = this.length;\n          offset = 0;\n        } else if (isFinite(offset)) {\n          offset = offset | 0;\n          if (isFinite(length)) {\n            length = length | 0;\n            if (encoding === undefined) encoding = 'utf8';\n          } else {\n            encoding = length;\n            length = undefined;\n          }\n        } else {\n          var swap = encoding;\n          encoding = offset;\n          offset = length | 0;\n          length = swap;\n        }\n\n        var remaining = this.length - offset;\n        if (length === undefined || length > remaining) length = remaining;\n\n        if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {\n          throw new RangeError('attempt to write outside buffer bounds');\n        }\n\n        if (!encoding) encoding = 'utf8';\n\n        var loweredCase = false;\n        for (;;) {\n          switch (encoding) {\n            case 'hex':\n              return hexWrite(this, string, offset, length);\n\n            case 'utf8':\n            case 'utf-8':\n              return utf8Write(this, string, offset, length);\n\n            case 'ascii':\n              return asciiWrite(this, string, offset, length);\n\n            case 'binary':\n              return binaryWrite(this, string, offset, length);\n\n            case 'base64':\n              return base64Write(this, string, offset, length);\n\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n              return ucs2Write(this, string, offset, length);\n\n            default:\n              if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n              encoding = ('' + encoding).toLowerCase();\n              loweredCase = true;\n          }\n        }\n      };\n\n      Buffer.prototype.toJSON = function toJSON() {\n        return {\n          type: 'Buffer',\n          data: Array.prototype.slice.call(this._arr || this, 0)\n        };\n      };\n\n      function base64Slice(buf, start, end) {\n        if (start === 0 && end === buf.length) {\n          return base64.fromByteArray(buf);\n        } else {\n          return base64.fromByteArray(buf.slice(start, end));\n        }\n      }\n\n      function utf8Slice(buf, start, end) {\n        end = Math.min(buf.length, end);\n        var res = [];\n\n        var i = start;\n        while (i < end) {\n          var firstByte = buf[i];\n          var codePoint = null;\n          var bytesPerSequence = firstByte > 0xEF ? 4 : firstByte > 0xDF ? 3 : firstByte > 0xBF ? 2 : 1;\n\n          if (i + bytesPerSequence <= end) {\n            var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n            switch (bytesPerSequence) {\n              case 1:\n                if (firstByte < 0x80) {\n                  codePoint = firstByte;\n                }\n                break;\n              case 2:\n                secondByte = buf[i + 1];\n                if ((secondByte & 0xC0) === 0x80) {\n                  tempCodePoint = (firstByte & 0x1F) << 0x6 | secondByte & 0x3F;\n                  if (tempCodePoint > 0x7F) {\n                    codePoint = tempCodePoint;\n                  }\n                }\n                break;\n              case 3:\n                secondByte = buf[i + 1];\n                thirdByte = buf[i + 2];\n                if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n                  tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | thirdByte & 0x3F;\n                  if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n                    codePoint = tempCodePoint;\n                  }\n                }\n                break;\n              case 4:\n                secondByte = buf[i + 1];\n                thirdByte = buf[i + 2];\n                fourthByte = buf[i + 3];\n                if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n                  tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | fourthByte & 0x3F;\n                  if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n                    codePoint = tempCodePoint;\n                  }\n                }\n            }\n          }\n\n          if (codePoint === null) {\n            codePoint = 0xFFFD;\n            bytesPerSequence = 1;\n          } else if (codePoint > 0xFFFF) {\n            codePoint -= 0x10000;\n            res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n            codePoint = 0xDC00 | codePoint & 0x3FF;\n          }\n\n          res.push(codePoint);\n          i += bytesPerSequence;\n        }\n\n        return decodeCodePointsArray(res);\n      }\n\n      var MAX_ARGUMENTS_LENGTH = 0x1000;\n\n      function decodeCodePointsArray(codePoints) {\n        var len = codePoints.length;\n        if (len <= MAX_ARGUMENTS_LENGTH) {\n          return String.fromCharCode.apply(String, codePoints);\n        }\n\n        var res = '';\n        var i = 0;\n        while (i < len) {\n          res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\n        }\n        return res;\n      }\n\n      function asciiSlice(buf, start, end) {\n        var ret = '';\n        end = Math.min(buf.length, end);\n\n        for (var i = start; i < end; i++) {\n          ret += String.fromCharCode(buf[i] & 0x7F);\n        }\n        return ret;\n      }\n\n      function binarySlice(buf, start, end) {\n        var ret = '';\n        end = Math.min(buf.length, end);\n\n        for (var i = start; i < end; i++) {\n          ret += String.fromCharCode(buf[i]);\n        }\n        return ret;\n      }\n\n      function hexSlice(buf, start, end) {\n        var len = buf.length;\n\n        if (!start || start < 0) start = 0;\n        if (!end || end < 0 || end > len) end = len;\n\n        var out = '';\n        for (var i = start; i < end; i++) {\n          out += toHex(buf[i]);\n        }\n        return out;\n      }\n\n      function utf16leSlice(buf, start, end) {\n        var bytes = buf.slice(start, end);\n        var res = '';\n        for (var i = 0; i < bytes.length; i += 2) {\n          res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n        }\n        return res;\n      }\n\n      Buffer.prototype.slice = function slice(start, end) {\n        var len = this.length;\n        start = ~~start;\n        end = end === undefined ? len : ~~end;\n\n        if (start < 0) {\n          start += len;\n          if (start < 0) start = 0;\n        } else if (start > len) {\n          start = len;\n        }\n\n        if (end < 0) {\n          end += len;\n          if (end < 0) end = 0;\n        } else if (end > len) {\n          end = len;\n        }\n\n        if (end < start) end = start;\n\n        var newBuf;\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          newBuf = this.subarray(start, end);\n          newBuf.__proto__ = Buffer.prototype;\n        } else {\n          var sliceLen = end - start;\n          newBuf = new Buffer(sliceLen, undefined);\n          for (var i = 0; i < sliceLen; i++) {\n            newBuf[i] = this[i + start];\n          }\n        }\n\n        if (newBuf.length) newBuf.parent = this.parent || this;\n\n        return newBuf;\n      };\n\n      function checkOffset(offset, ext, length) {\n        if (offset % 1 !== 0 || offset < 0) throw new RangeError('offset is not uint');\n        if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length');\n      }\n\n      Buffer.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n        var val = this[offset];\n        var mul = 1;\n        var i = 0;\n        while (++i < byteLength && (mul *= 0x100)) {\n          val += this[offset + i] * mul;\n        }\n\n        return val;\n      };\n\n      Buffer.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) {\n          checkOffset(offset, byteLength, this.length);\n        }\n\n        var val = this[offset + --byteLength];\n        var mul = 1;\n        while (byteLength > 0 && (mul *= 0x100)) {\n          val += this[offset + --byteLength] * mul;\n        }\n\n        return val;\n      };\n\n      Buffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 1, this.length);\n        return this[offset];\n      };\n\n      Buffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 2, this.length);\n        return this[offset] | this[offset + 1] << 8;\n      };\n\n      Buffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 2, this.length);\n        return this[offset] << 8 | this[offset + 1];\n      };\n\n      Buffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n\n        return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 0x1000000;\n      };\n\n      Buffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n\n        return this[offset] * 0x1000000 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);\n      };\n\n      Buffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n        var val = this[offset];\n        var mul = 1;\n        var i = 0;\n        while (++i < byteLength && (mul *= 0x100)) {\n          val += this[offset + i] * mul;\n        }\n        mul *= 0x80;\n\n        if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n        return val;\n      };\n\n      Buffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n        var i = byteLength;\n        var mul = 1;\n        var val = this[offset + --i];\n        while (i > 0 && (mul *= 0x100)) {\n          val += this[offset + --i] * mul;\n        }\n        mul *= 0x80;\n\n        if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n        return val;\n      };\n\n      Buffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 1, this.length);\n        if (!(this[offset] & 0x80)) return this[offset];\n        return (0xff - this[offset] + 1) * -1;\n      };\n\n      Buffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 2, this.length);\n        var val = this[offset] | this[offset + 1] << 8;\n        return val & 0x8000 ? val | 0xFFFF0000 : val;\n      };\n\n      Buffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 2, this.length);\n        var val = this[offset + 1] | this[offset] << 8;\n        return val & 0x8000 ? val | 0xFFFF0000 : val;\n      };\n\n      Buffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n\n        return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;\n      };\n\n      Buffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n\n        return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];\n      };\n\n      Buffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n        return ieee754.read(this, offset, true, 23, 4);\n      };\n\n      Buffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n        return ieee754.read(this, offset, false, 23, 4);\n      };\n\n      Buffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 8, this.length);\n        return ieee754.read(this, offset, true, 52, 8);\n      };\n\n      Buffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 8, this.length);\n        return ieee754.read(this, offset, false, 52, 8);\n      };\n\n      function checkInt(buf, value, offset, ext, max, min) {\n        if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance');\n        if (value > max || value < min) throw new RangeError('value is out of bounds');\n        if (offset + ext > buf.length) throw new RangeError('index out of range');\n      }\n\n      Buffer.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0);\n\n        var mul = 1;\n        var i = 0;\n        this[offset] = value & 0xFF;\n        while (++i < byteLength && (mul *= 0x100)) {\n          this[offset + i] = value / mul & 0xFF;\n        }\n\n        return offset + byteLength;\n      };\n\n      Buffer.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0);\n\n        var i = byteLength - 1;\n        var mul = 1;\n        this[offset + i] = value & 0xFF;\n        while (--i >= 0 && (mul *= 0x100)) {\n          this[offset + i] = value / mul & 0xFF;\n        }\n\n        return offset + byteLength;\n      };\n\n      Buffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n        if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n        this[offset] = value & 0xff;\n        return offset + 1;\n      };\n\n      function objectWriteUInt16(buf, value, offset, littleEndian) {\n        if (value < 0) value = 0xffff + value + 1;\n        for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n          buf[offset + i] = (value & 0xff << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;\n        }\n      }\n\n      Buffer.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value & 0xff;\n          this[offset + 1] = value >>> 8;\n        } else {\n          objectWriteUInt16(this, value, offset, true);\n        }\n        return offset + 2;\n      };\n\n      Buffer.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value >>> 8;\n          this[offset + 1] = value & 0xff;\n        } else {\n          objectWriteUInt16(this, value, offset, false);\n        }\n        return offset + 2;\n      };\n\n      function objectWriteUInt32(buf, value, offset, littleEndian) {\n        if (value < 0) value = 0xffffffff + value + 1;\n        for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n          buf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 0xff;\n        }\n      }\n\n      Buffer.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset + 3] = value >>> 24;\n          this[offset + 2] = value >>> 16;\n          this[offset + 1] = value >>> 8;\n          this[offset] = value & 0xff;\n        } else {\n          objectWriteUInt32(this, value, offset, true);\n        }\n        return offset + 4;\n      };\n\n      Buffer.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value >>> 24;\n          this[offset + 1] = value >>> 16;\n          this[offset + 2] = value >>> 8;\n          this[offset + 3] = value & 0xff;\n        } else {\n          objectWriteUInt32(this, value, offset, false);\n        }\n        return offset + 4;\n      };\n\n      Buffer.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) {\n          var limit = Math.pow(2, 8 * byteLength - 1);\n\n          checkInt(this, value, offset, byteLength, limit - 1, -limit);\n        }\n\n        var i = 0;\n        var mul = 1;\n        var sub = value < 0 ? 1 : 0;\n        this[offset] = value & 0xFF;\n        while (++i < byteLength && (mul *= 0x100)) {\n          this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n        }\n\n        return offset + byteLength;\n      };\n\n      Buffer.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) {\n          var limit = Math.pow(2, 8 * byteLength - 1);\n\n          checkInt(this, value, offset, byteLength, limit - 1, -limit);\n        }\n\n        var i = byteLength - 1;\n        var mul = 1;\n        var sub = value < 0 ? 1 : 0;\n        this[offset + i] = value & 0xFF;\n        while (--i >= 0 && (mul *= 0x100)) {\n          this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n        }\n\n        return offset + byteLength;\n      };\n\n      Buffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n        if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n        if (value < 0) value = 0xff + value + 1;\n        this[offset] = value & 0xff;\n        return offset + 1;\n      };\n\n      Buffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value & 0xff;\n          this[offset + 1] = value >>> 8;\n        } else {\n          objectWriteUInt16(this, value, offset, true);\n        }\n        return offset + 2;\n      };\n\n      Buffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value >>> 8;\n          this[offset + 1] = value & 0xff;\n        } else {\n          objectWriteUInt16(this, value, offset, false);\n        }\n        return offset + 2;\n      };\n\n      Buffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value & 0xff;\n          this[offset + 1] = value >>> 8;\n          this[offset + 2] = value >>> 16;\n          this[offset + 3] = value >>> 24;\n        } else {\n          objectWriteUInt32(this, value, offset, true);\n        }\n        return offset + 4;\n      };\n\n      Buffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n        if (value < 0) value = 0xffffffff + value + 1;\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value >>> 24;\n          this[offset + 1] = value >>> 16;\n          this[offset + 2] = value >>> 8;\n          this[offset + 3] = value & 0xff;\n        } else {\n          objectWriteUInt32(this, value, offset, false);\n        }\n        return offset + 4;\n      };\n\n      function checkIEEE754(buf, value, offset, ext, max, min) {\n        if (value > max || value < min) throw new RangeError('value is out of bounds');\n        if (offset + ext > buf.length) throw new RangeError('index out of range');\n        if (offset < 0) throw new RangeError('index out of range');\n      }\n\n      function writeFloat(buf, value, offset, littleEndian, noAssert) {\n        if (!noAssert) {\n          checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38);\n        }\n        ieee754.write(buf, value, offset, littleEndian, 23, 4);\n        return offset + 4;\n      }\n\n      Buffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n        return writeFloat(this, value, offset, true, noAssert);\n      };\n\n      Buffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n        return writeFloat(this, value, offset, false, noAssert);\n      };\n\n      function writeDouble(buf, value, offset, littleEndian, noAssert) {\n        if (!noAssert) {\n          checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308);\n        }\n        ieee754.write(buf, value, offset, littleEndian, 52, 8);\n        return offset + 8;\n      }\n\n      Buffer.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\n        return writeDouble(this, value, offset, true, noAssert);\n      };\n\n      Buffer.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\n        return writeDouble(this, value, offset, false, noAssert);\n      };\n\n      Buffer.prototype.copy = function copy(target, targetStart, start, end) {\n        if (!start) start = 0;\n        if (!end && end !== 0) end = this.length;\n        if (targetStart >= target.length) targetStart = target.length;\n        if (!targetStart) targetStart = 0;\n        if (end > 0 && end < start) end = start;\n\n        if (end === start) return 0;\n        if (target.length === 0 || this.length === 0) return 0;\n\n        if (targetStart < 0) {\n          throw new RangeError('targetStart out of bounds');\n        }\n        if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds');\n        if (end < 0) throw new RangeError('sourceEnd out of bounds');\n\n        if (end > this.length) end = this.length;\n        if (target.length - targetStart < end - start) {\n          end = target.length - targetStart + start;\n        }\n\n        var len = end - start;\n        var i;\n\n        if (this === target && start < targetStart && targetStart < end) {\n          for (i = len - 1; i >= 0; i--) {\n            target[i + targetStart] = this[i + start];\n          }\n        } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n          for (i = 0; i < len; i++) {\n            target[i + targetStart] = this[i + start];\n          }\n        } else {\n          Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);\n        }\n\n        return len;\n      };\n\n      Buffer.prototype.fill = function fill(value, start, end) {\n        if (!value) value = 0;\n        if (!start) start = 0;\n        if (!end) end = this.length;\n\n        if (end < start) throw new RangeError('end < start');\n\n        if (end === start) return;\n        if (this.length === 0) return;\n\n        if (start < 0 || start >= this.length) throw new RangeError('start out of bounds');\n        if (end < 0 || end > this.length) throw new RangeError('end out of bounds');\n\n        var i;\n        if (typeof value === 'number') {\n          for (i = start; i < end; i++) {\n            this[i] = value;\n          }\n        } else {\n          var bytes = utf8ToBytes(value.toString());\n          var len = bytes.length;\n          for (i = start; i < end; i++) {\n            this[i] = bytes[i % len];\n          }\n        }\n\n        return this;\n      };\n\n      var INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\n      function base64clean(str) {\n        str = stringtrim(str).replace(INVALID_BASE64_RE, '');\n\n        if (str.length < 2) return '';\n\n        while (str.length % 4 !== 0) {\n          str = str + '=';\n        }\n        return str;\n      }\n\n      function stringtrim(str) {\n        if (str.trim) return str.trim();\n        return str.replace(/^\\s+|\\s+$/g, '');\n      }\n\n      function toHex(n) {\n        if (n < 16) return '0' + n.toString(16);\n        return n.toString(16);\n      }\n\n      function utf8ToBytes(string, units) {\n        units = units || Infinity;\n        var codePoint;\n        var length = string.length;\n        var leadSurrogate = null;\n        var bytes = [];\n\n        for (var i = 0; i < length; i++) {\n          codePoint = string.charCodeAt(i);\n\n          if (codePoint > 0xD7FF && codePoint < 0xE000) {\n            if (!leadSurrogate) {\n              if (codePoint > 0xDBFF) {\n                if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n                continue;\n              } else if (i + 1 === length) {\n                if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n                continue;\n              }\n\n              leadSurrogate = codePoint;\n\n              continue;\n            }\n\n            if (codePoint < 0xDC00) {\n              if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n              leadSurrogate = codePoint;\n              continue;\n            }\n\n            codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n          } else if (leadSurrogate) {\n            if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          }\n\n          leadSurrogate = null;\n\n          if (codePoint < 0x80) {\n            if ((units -= 1) < 0) break;\n            bytes.push(codePoint);\n          } else if (codePoint < 0x800) {\n            if ((units -= 2) < 0) break;\n            bytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);\n          } else if (codePoint < 0x10000) {\n            if ((units -= 3) < 0) break;\n            bytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n          } else if (codePoint < 0x110000) {\n            if ((units -= 4) < 0) break;\n            bytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n          } else {\n            throw new Error('Invalid code point');\n          }\n        }\n\n        return bytes;\n      }\n\n      function asciiToBytes(str) {\n        var byteArray = [];\n        for (var i = 0; i < str.length; i++) {\n          byteArray.push(str.charCodeAt(i) & 0xFF);\n        }\n        return byteArray;\n      }\n\n      function utf16leToBytes(str, units) {\n        var c, hi, lo;\n        var byteArray = [];\n        for (var i = 0; i < str.length; i++) {\n          if ((units -= 2) < 0) break;\n\n          c = str.charCodeAt(i);\n          hi = c >> 8;\n          lo = c % 256;\n          byteArray.push(lo);\n          byteArray.push(hi);\n        }\n\n        return byteArray;\n      }\n\n      function base64ToBytes(str) {\n        return base64.toByteArray(base64clean(str));\n      }\n\n      function blitBuffer(src, dst, offset, length) {\n        for (var i = 0; i < length; i++) {\n          if (i + offset >= dst.length || i >= src.length) break;\n          dst[i + offset] = src[i];\n        }\n        return i;\n      }\n    }).call(this, typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {});\n  }, { 'base64-js': 38, 'ieee754': 39, 'isarray': 40 }],\n  38: [function (require, module, exports) {\n    (function (exports) {\n      'use strict';\n\n      var lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n      var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\n\n      var PLUS = '+'.charCodeAt(0);\n      var SLASH = '/'.charCodeAt(0);\n      var NUMBER = '0'.charCodeAt(0);\n      var LOWER = 'a'.charCodeAt(0);\n      var UPPER = 'A'.charCodeAt(0);\n      var PLUS_URL_SAFE = '-'.charCodeAt(0);\n      var SLASH_URL_SAFE = '_'.charCodeAt(0);\n\n      function decode(elt) {\n        var code = elt.charCodeAt(0);\n        if (code === PLUS || code === PLUS_URL_SAFE) return 62;\n        if (code === SLASH || code === SLASH_URL_SAFE) return 63;\n        if (code < NUMBER) return -1;\n        if (code < NUMBER + 10) return code - NUMBER + 26 + 26;\n        if (code < UPPER + 26) return code - UPPER;\n        if (code < LOWER + 26) return code - LOWER + 26;\n      }\n\n      function b64ToByteArray(b64) {\n        var i, j, l, tmp, placeHolders, arr;\n\n        if (b64.length % 4 > 0) {\n          throw new Error('Invalid string. Length must be a multiple of 4');\n        }\n\n        var len = b64.length;\n        placeHolders = b64.charAt(len - 2) === '=' ? 2 : b64.charAt(len - 1) === '=' ? 1 : 0;\n\n        arr = new Arr(b64.length * 3 / 4 - placeHolders);\n\n        l = placeHolders > 0 ? b64.length - 4 : b64.length;\n\n        var L = 0;\n\n        function push(v) {\n          arr[L++] = v;\n        }\n\n        for (i = 0, j = 0; i < l; i += 4, j += 3) {\n          tmp = decode(b64.charAt(i)) << 18 | decode(b64.charAt(i + 1)) << 12 | decode(b64.charAt(i + 2)) << 6 | decode(b64.charAt(i + 3));\n          push((tmp & 0xFF0000) >> 16);\n          push((tmp & 0xFF00) >> 8);\n          push(tmp & 0xFF);\n        }\n\n        if (placeHolders === 2) {\n          tmp = decode(b64.charAt(i)) << 2 | decode(b64.charAt(i + 1)) >> 4;\n          push(tmp & 0xFF);\n        } else if (placeHolders === 1) {\n          tmp = decode(b64.charAt(i)) << 10 | decode(b64.charAt(i + 1)) << 4 | decode(b64.charAt(i + 2)) >> 2;\n          push(tmp >> 8 & 0xFF);\n          push(tmp & 0xFF);\n        }\n\n        return arr;\n      }\n\n      function uint8ToBase64(uint8) {\n        var i;\n        var extraBytes = uint8.length % 3;\n        var output = '';\n        var temp, length;\n\n        function encode(num) {\n          return lookup.charAt(num);\n        }\n\n        function tripletToBase64(num) {\n          return encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F);\n        }\n\n        for (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {\n          temp = (uint8[i] << 16) + (uint8[i + 1] << 8) + uint8[i + 2];\n          output += tripletToBase64(temp);\n        }\n\n        switch (extraBytes) {\n          case 1:\n            temp = uint8[uint8.length - 1];\n            output += encode(temp >> 2);\n            output += encode(temp << 4 & 0x3F);\n            output += '==';\n            break;\n          case 2:\n            temp = (uint8[uint8.length - 2] << 8) + uint8[uint8.length - 1];\n            output += encode(temp >> 10);\n            output += encode(temp >> 4 & 0x3F);\n            output += encode(temp << 2 & 0x3F);\n            output += '=';\n            break;\n          default:\n            break;\n        }\n\n        return output;\n      }\n\n      exports.toByteArray = b64ToByteArray;\n      exports.fromByteArray = uint8ToBase64;\n    })(typeof exports === 'undefined' ? this.base64js = {} : exports);\n  }, {}],\n  39: [function (require, module, exports) {\n    exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n      var e, m;\n      var eLen = nBytes * 8 - mLen - 1;\n      var eMax = (1 << eLen) - 1;\n      var eBias = eMax >> 1;\n      var nBits = -7;\n      var i = isLE ? nBytes - 1 : 0;\n      var d = isLE ? -1 : 1;\n      var s = buffer[offset + i];\n\n      i += d;\n\n      e = s & (1 << -nBits) - 1;\n      s >>= -nBits;\n      nBits += eLen;\n      for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n      m = e & (1 << -nBits) - 1;\n      e >>= -nBits;\n      nBits += mLen;\n      for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n      if (e === 0) {\n        e = 1 - eBias;\n      } else if (e === eMax) {\n        return m ? NaN : (s ? -1 : 1) * Infinity;\n      } else {\n        m = m + Math.pow(2, mLen);\n        e = e - eBias;\n      }\n      return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n    };\n\n    exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n      var e, m, c;\n      var eLen = nBytes * 8 - mLen - 1;\n      var eMax = (1 << eLen) - 1;\n      var eBias = eMax >> 1;\n      var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n      var i = isLE ? 0 : nBytes - 1;\n      var d = isLE ? 1 : -1;\n      var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n\n      value = Math.abs(value);\n\n      if (isNaN(value) || value === Infinity) {\n        m = isNaN(value) ? 1 : 0;\n        e = eMax;\n      } else {\n        e = Math.floor(Math.log(value) / Math.LN2);\n        if (value * (c = Math.pow(2, -e)) < 1) {\n          e--;\n          c *= 2;\n        }\n        if (e + eBias >= 1) {\n          value += rt / c;\n        } else {\n          value += rt * Math.pow(2, 1 - eBias);\n        }\n        if (value * c >= 2) {\n          e++;\n          c /= 2;\n        }\n\n        if (e + eBias >= eMax) {\n          m = 0;\n          e = eMax;\n        } else if (e + eBias >= 1) {\n          m = (value * c - 1) * Math.pow(2, mLen);\n          e = e + eBias;\n        } else {\n          m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n          e = 0;\n        }\n      }\n\n      for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n      e = e << mLen | m;\n      eLen += mLen;\n      for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n      buffer[offset + i - d] |= s * 128;\n    };\n  }, {}],\n  40: [function (require, module, exports) {\n    var toString = {}.toString;\n\n    module.exports = Array.isArray || function (arr) {\n      return toString.call(arr) == '[object Array]';\n    };\n  }, {}] }, {}, [36]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PANOLENS);\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(61), __webpack_require__(352)(module), __webpack_require__(26)))\n\n/***/ }),\n\n/***/ 326:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(3)(\n  /* script */\n  __webpack_require__(68),\n  /* template */\n  __webpack_require__(336),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 327:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(347)\n\nvar Component = __webpack_require__(3)(\n  /* script */\n  __webpack_require__(69),\n  /* template */\n  __webpack_require__(337),\n  /* scopeId */\n  \"data-v-2a5bfa54\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 328:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(3)(\n  /* script */\n  __webpack_require__(70),\n  /* template */\n  __webpack_require__(339),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 329:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(3)(\n  /* script */\n  __webpack_require__(71),\n  /* template */\n  __webpack_require__(342),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 330:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(3)(\n  /* script */\n  __webpack_require__(72),\n  /* template */\n  __webpack_require__(338),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 331:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(348)\n\nvar Component = __webpack_require__(3)(\n  /* script */\n  __webpack_require__(74),\n  /* template */\n  __webpack_require__(340),\n  /* scopeId */\n  \"data-v-66d382e3\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 332:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(344)\n\nvar Component = __webpack_require__(3)(\n  /* script */\n  __webpack_require__(75),\n  /* template */\n  __webpack_require__(333),\n  /* scopeId */\n  \"data-v-09ad1f51\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 333:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  })\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 334:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demo-block\"\n  }, [_c('div', {\n    staticClass: \"demo-block-preview\"\n  }, [_vm._t(\"preview\")], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code\"\n  }, [_c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"Vue Component & Webpack\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"             \"), _c('code', {\n    ref: \"vueCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.vueCode)))]), _vm._v(\"\\n        \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"HTML & JS\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"          \"), _c('code', {\n    ref: \"htmlCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.htmlCode)) + \"\\n          \")]), _vm._v(\"\\n        \")])])])])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 335:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demos\"\n  }, [_c('div', {\n    staticClass: \"demos-content\"\n  }, [_c('ul', {\n    staticClass: \"demos-menu\"\n  }, [_c('li', {\n    staticClass: \"demos-menu-title\"\n  }, [_vm._v(\"demos\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-pano\"\n    }\n  }, [_vm._v(\"basic panorama\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-cube-pano\"\n    }\n  }, [_vm._v(\"Cube Faces\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-video-pano\"\n    }\n  }, [_vm._v(\"Video Pano\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-scene\"\n    }\n  }, [_vm._v(\"Scene with hotspot\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-tour\"\n    }\n  }, [_vm._v(\"VR Tour\")])], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demos-pages\"\n  }, [_c('router-view')], 1)])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 336:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"type\": \"cube\",\n      \"source\": \"assets/faces/pano_%s.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 337:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('div', {\n    staticClass: \"info\"\n  }, [_vm._v(\"\\n      Pano index:\" + _vm._s(_vm.index) + \"\\n      \"), _c('button', {\n    on: {\n      \"click\": _vm.change\n    }\n  }, [_vm._v(\"Toggle\")])]), _vm._v(\" \"), _c('Pano', {\n    attrs: {\n      \"source\": _vm.urls[_vm.index]\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 338:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"type\": \"video\",\n      \"source\": \"assets/ClashofClans.mp4\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 339:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Scene', {\n    attrs: {\n      \"pano\": _vm.scene.pano,\n      \"position\": _vm.scene.position,\n      \"rotation\": _vm.scene.rotation,\n      \"links\": _vm.scene.links\n    },\n    on: {\n      \"on-load-start\": _vm.onLoadStart,\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 340:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  })\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 341:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"v-pano\"\n  })\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 342:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Tour', {\n    attrs: {\n      \"scenes\": _vm.scenes\n    },\n    on: {\n      \"on-load-start\": _vm.onLoadStart,\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 344:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(130);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(13)(\"4136a65b\", content, true);\n\n/***/ }),\n\n/***/ 345:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(131);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(13)(\"56304fc1\", content, true);\n\n/***/ }),\n\n/***/ 346:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(132);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(13)(\"48e2ad6a\", content, true);\n\n/***/ }),\n\n/***/ 347:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(133);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(13)(\"740377fa\", content, true);\n\n/***/ }),\n\n/***/ 348:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(134);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(13)(\"356c544a\", content, true);\n\n/***/ }),\n\n/***/ 349:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(135);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(13)(\"49e91b24\", content, true);\n\n/***/ }),\n\n/***/ 42:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(349)\n\nvar Component = __webpack_require__(3)(\n  /* script */\n  __webpack_require__(73),\n  /* template */\n  __webpack_require__(341),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 62:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(43);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(343);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pages__ = __webpack_require__(65);\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\nvar routes = __WEBPACK_IMPORTED_MODULE_2__pages__[\"a\" /* pages */].map(function (page) {\n  var name = page.name;\n  return {\n    path: '/' + name.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase(),\n    name: name,\n    component: page\n  };\n});\n\nconsole.log(routes);\n\nroutes.push({\n  path: '*',\n  redirect: '/demo-pano'\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({ routes: routes }));\n\n/***/ }),\n\n/***/ 63:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(346)\n\nvar Component = __webpack_require__(3)(\n  /* script */\n  __webpack_require__(66),\n  /* template */\n  __webpack_require__(335),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 64:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(43);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_vue__ = __webpack_require__(63);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(62);\n\n\n\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  render: function render(h) {\n    return h(__WEBPACK_IMPORTED_MODULE_1__App_vue___default.a);\n  }\n});\n\n/***/ }),\n\n/***/ 65:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return pages; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__demo_pano__ = __webpack_require__(327);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__demo_pano___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__demo_pano__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__demo_cube_pano__ = __webpack_require__(326);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__demo_cube_pano___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__demo_cube_pano__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__demo_video_pano__ = __webpack_require__(330);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__demo_video_pano___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__demo_video_pano__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__demo_scene__ = __webpack_require__(328);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__demo_scene___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__demo_scene__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__demo_tour__ = __webpack_require__(329);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__demo_tour___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__demo_tour__);\n\n\n\n\n\n\nvar pages = [__WEBPACK_IMPORTED_MODULE_0__demo_pano___default.a, __WEBPACK_IMPORTED_MODULE_1__demo_cube_pano___default.a, __WEBPACK_IMPORTED_MODULE_2__demo_video_pano___default.a, __WEBPACK_IMPORTED_MODULE_3__demo_scene___default.a, __WEBPACK_IMPORTED_MODULE_4__demo_tour___default.a];\n\n\n\n/***/ }),\n\n/***/ 66:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'App'\n});\n\n/***/ }),\n\n/***/ 67:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__ = __webpack_require__(136);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_highlight_js__ = __webpack_require__(138);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_highlight_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_highlight_js__);\n\n\n\n\n\nvar codeHandler = function codeHandler(code) {\n  var scripts = '\\n  <script src=\"vue.js\"></script> \\n  <script src=\"vue-vr.min.js\"></script>';\n  return code.replace(/#scripts#/ig, scripts);\n};\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'App',\n  props: {\n    vueCode: {\n      type: String,\n      default: ''\n    },\n    htmlCode: {\n      type: String,\n      default: '// TODO'\n    }\n  },\n  mounted: function mounted() {\n    __WEBPACK_IMPORTED_MODULE_1_highlight_js___default.a.highlightBlock(this.$refs.vueCode);\n    __WEBPACK_IMPORTED_MODULE_1_highlight_js___default.a.highlightBlock(this.$refs.htmlCode);\n  },\n  data: function data() {\n    return {};\n  },\n\n  filters: {\n    code: function code(val) {\n      return codeHandler(val);\n    }\n  },\n  components: {}\n});\n\n/***/ }),\n\n/***/ 68:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Pano\\n        @on-load=\"onLoad\"\\n        type=\\'cube\\'\\n        source=\"assets/faces/pano_%s.jpg\"></Pano>\\n</template>\\n<script>\\n    import { Pano } from \\'vuejs-vr\\'\\n\\n    export default {\\n        components: {\\n            Pano\\n        }\\n    }\\n </script>';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Pano\\n            @on-load=\"onLoad\"\\n            type=\\'cube\\'\\n            source=\"assets/faces/pano_%s.jpg\">\\n        </Pano>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'DemoCubePano',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano: __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 69:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_Pano_vue__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_Pano_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__src_Pano_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_demo_block_vue__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_demo_block_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__components_demo_block_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Pano\\n        @on-load=\"onLoad\"\\n        :source=\"urls[index]\">\\n    </Pano>\\n</template>\\n\\n<script>\\n    import { Pano } from \\'vue-vr\\'\\n\\n    export default {\\n        components: {\\n            Pano\\n        },\\n        data () {\\n          return {\\n            urls: [\\n              \\'../assets/equirectangular.jpg\\',\\n              \\'../assets/pano.png\\'\\n            ],\\n            index: 0\\n          }\\n        },\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Pano\\n            @on-load=\"onLoad\"\\n            :source=\"urls[index]\">\\n        </Pano>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>';\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'DemoPano',\n  data: function data() {\n    return {\n      code: code,\n      htmlCode: htmlCode,\n      loading: true,\n      urls: ['assets/equirectangular.jpg', 'assets/pano.png'],\n      index: 0\n    };\n  },\n\n  methods: {\n    onLoad: function onLoad() {\n      this.loading = false;\n    },\n    change: function change() {\n      this.index = 1 - this.index;\n    }\n  },\n  components: {\n    Pano: __WEBPACK_IMPORTED_MODULE_0__src_Pano_vue___default.a,\n    DemoBlock: __WEBPACK_IMPORTED_MODULE_1__components_demo_block_vue___default.a\n  }\n});\n\n/***/ }),\n\n/***/ 70:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Scene_vue__ = __webpack_require__(331);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Scene_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Scene_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Scene\\n        @on-load=\"onLoad\"\\n        :scene=\\'scene\\'>\\n\\n    </Scene>\\n    <div\\n      class=\"demo-loading\"\\n      v-show=\"loading\"></div>\\n      \\n</template>\\n\\n<script>\\n    import { Scene } from \\'vue-vr\\'\\n\\n    export default {\\n        components: {\\n            Scene\\n        },\\n        data(){\\n          return {\\n            scene: {\\n              key: \\'M4wOy2s\\',\\n              panorama: {\\n                source: \\'assets/equirectangular.jpg\\',\\n                type: \\'image\\'\\n              },\\n              x: 0,\\n              y: 0,\\n              z: 0,\\n              rotation:90\\n            }\\n          }\\n        }\\n    }\\n</script>';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Scene\\n          @on-load=\"onLoad\"\\n          :scene=\\'scene\\'>\\n      </Scene>\\n      <div\\n        class=\"demo-loading\"\\n        v-show=\"loading\"></div>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>';\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'DemoScene',\n  data: function data() {\n    return {\n      code: code,\n      htmlCode: htmlCode,\n      loading: true,\n      scene: {\n        pano: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        position: {\n          x: 0,\n          y: 0,\n          z: 0\n        },\n        rotation: {\n          x: 0,\n          y: 135.0 * Math.PI / 180.0,\n          z: 0\n        },\n        links: [{\n          sceneId: 'scene1',\n          position: {\n            x: 100,\n            y: 0,\n            z: -100\n          }\n        }, {\n          sceneId: 'scene2',\n          position: {\n            x: 200,\n            y: 0,\n            z: -20\n          }\n        }]\n      }\n    };\n  },\n\n  methods: {\n    onLoad: function onLoad() {\n      console.log('onLoad');\n      this.loading = false;\n    },\n    onLoadStart: function onLoadStart() {\n      console.log('onLoadStart');\n      this.loading = true;\n    }\n  },\n  components: {\n    Scene: __WEBPACK_IMPORTED_MODULE_1__src_Scene_vue___default.a,\n    DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n  }\n});\n\n/***/ }),\n\n/***/ 71:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Tour_vue__ = __webpack_require__(332);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Tour_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Tour_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Tour\\n        @on-load=\"onLoad\"\\n        :scenes=\\'scenes\\'>\\n\\n    </Tour>\\n    <div\\n      class=\"demo-loading\"\\n      v-show=\"loading\"></div>\\n      \\n</template>\\n\\n<script>\\n    import { Tour } from \\'vue-vr\\'\\n\\n    export default {\\n        components: {\\n            Tour\\n        },\\n        data(){\\n          return {\\n            scenes: [{\\n              key: \\'M4wOy2s\\',\\n              panorama: {\\n                source: \\'assets/equirectangular.jpg\\',\\n                type: \\'image\\'\\n              },\\n              x: 0,\\n              y: 0,\\n              z: 0,\\n              rx: 0,\\n              rz: 0,\\n              ry: 90,\\n              connections: [\\n                \\'eIm7la\\',\\n                \\'eId9l0\\',\\n                \\'fK2dL7l\\'\\n              ]\\n            },\\n            {\\n              key: \\'eIm7la\\',\\n              panorama: {\\n                source: \\'assets/faces/pano_%s.jpg\\',\\n                type: \\'cube\\'\\n              },\\n              x: 100,\\n              y: 0,\\n              z: 200,\\n              rx: 0,\\n              rz: 0,\\n              ry: 0,\\n              connections: [\\n                \\'M4wOy2s\\'\\n              ]\\n            },\\n            {\\n              key: \\'eId9l0\\',\\n              panorama: {\\n                source: \\'assets/faces/pano_%s.jpg\\',\\n                type: \\'cube\\'\\n              },\\n              x: 150,\\n              y: 0,\\n              z: -300,\\n              rx: 0,\\n              rz: 0,\\n              ry: 0,\\n              connections: [\\n                \\'M4wOy2s\\'\\n              ]\\n            },\\n            {\\n              key: \\'fK2dL7l\\',\\n              panorama: {\\n                source: \\'assets/faces/pano_%s.jpg\\',\\n                type: \\'cube\\'\\n              },\\n              x: -150,\\n              y: 0,\\n              z: -300,\\n              rx: 0,\\n              rz: 0,\\n              ry: 0,\\n              connections: [\\n                \\'M4wOy2s\\'\\n              ]\\n            }]\\n          }\\n        }\\n    }\\n</script>';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Tour\\n          @on-load=\"onLoad\"\\n          :scenes=\\'scenes\\'>\\n      </Tour>\\n      <div\\n        class=\"demo-loading\"\\n        v-show=\"loading\"></div>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>';\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'DemoTour',\n  data: function data() {\n    return {\n      code: code,\n      htmlCode: htmlCode,\n      loading: true,\n      scenes: [{\n        key: 'M4wOy2s',\n        panorama: {\n          source: 'assets/equirectangular.jpg',\n          type: 'image'\n        },\n        x: 0,\n        y: 0,\n        z: 0,\n        rx: 0,\n        rz: 0,\n        ry: 90,\n        connections: ['eIm7la', 'eId9l0', 'fK2dL7l']\n      }, {\n        key: 'eIm7la',\n        panorama: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        x: 100,\n        y: 0,\n        z: 200,\n        rx: 0,\n        rz: 0,\n        ry: 0,\n        connections: ['M4wOy2s']\n      }, {\n        key: 'eId9l0',\n        panorama: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        x: 150,\n        y: 0,\n        z: -300,\n        rx: 0,\n        rz: 0,\n        ry: 0,\n        connections: ['M4wOy2s']\n      }, {\n        key: 'fK2dL7l',\n        panorama: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        x: -150,\n        y: 0,\n        z: -300,\n        rx: 0,\n        rz: 0,\n        ry: 0,\n        connections: ['M4wOy2s']\n      }]\n    };\n  },\n\n  methods: {\n    onLoad: function onLoad() {\n      console.log('onLoad');\n      this.loading = false;\n    },\n    onLoadStart: function onLoadStart() {\n      console.log('onLoadStart');\n      this.loading = true;\n    }\n  },\n  components: {\n    Tour: __WEBPACK_IMPORTED_MODULE_1__src_Tour_vue___default.a,\n    DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n  },\n  mounted: function mounted() {\n    this.initialScene = this.scenes[0].key;\n  }\n});\n\n/***/ }),\n\n/***/ 72:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Pano\\n        @on-load=\"onLoad\"\\n        type=\\'video\\'\\n        source=\"assets/ClashofClans.mp4\">\\n    </Pano>\\n</template>\\n\\n<script>\\n    import { Pano } from \\'vue-vr\\'\\n\\n    export default {\\n        components: {\\n            Pano\\n        }\\n    }\\n</script>';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Pano\\n            @on-load=\"onLoad\"\\n            type=\\'video\\'\\n            source=\"assets/ClashofClans.mp4\">\\n        </Pano>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>';\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'DemoVideoPano',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano: __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 73:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__lib_panolens__ = __webpack_require__(27);\n\n\n\nvar _log = console.log.bind(console);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'Pano',\n\n  props: {\n    source: {\n      type: String,\n      default: ''\n    },\n    type: {\n      type: String,\n      default: 'image'\n    },\n    width: {\n      type: Number,\n      default: 100\n    },\n    height: {\n      type: Number,\n      default: 100\n    }\n  },\n\n  data: function data() {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      viewer: null,\n      panorama: null\n    };\n  },\n  created: function created() {\n    window.addEventListener('resize', this.onResize, false);\n  },\n  destroyed: function destroyed() {\n    if (this.panorama && this.panorama.dispose) {\n      this.panorama.dispose();\n    }\n  },\n  mounted: function mounted() {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      };\n    }\n\n    this.viewer = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].Viewer({\n      container: this.$el,\n      cameraFov: 100\n    });\n\n    this.loadPano();\n  },\n\n  watch: {\n    source: function source() {\n      if (!this.viewer) return;\n      if (!this.panorama) return;\n      this.loadPano();\n    }\n  },\n\n  methods: {\n    onResize: function onResize() {\n      var _this = this;\n\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(function () {\n          _this.size = {\n            width: _this.$el.offsetWidth,\n            height: _this.$el.offsetHeight\n          };\n        });\n      }\n    },\n    loadPano: function loadPano() {\n      _log('this.source = ' + this.source);\n      if (!this.source) return;\n\n      var pano = void 0;\n      switch (this.type) {\n        case 'cube':\n          var l = this.source.replace('%s', 'l');\n          var f = this.source.replace('%s', 'f');\n          var r = this.source.replace('%s', 'r');\n          var b = this.source.replace('%s', 'b');\n          var u = this.source.replace('%s', 'u');\n          var d = this.source.replace('%s', 'd');\n          pano = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].CubePanorama([r, l, u, d, f, b]);\n          break;\n        case 'video':\n          pano = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].VideoPanorama(this.source, { autoplay: true });\n          break;\n        default:\n          pano = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].ImagePanorama(this.source);\n          break;\n      }\n      this.setPano(pano);\n    },\n    setPano: function setPano(pano) {\n      if (!pano) return;\n      if (this.panorama) {\n        this.viewer.remove(this.panorama);\n      }\n      this.panorama = pano;\n      this.viewer.add(this.panorama);\n      this.viewer.setPanorama(this.panorama);\n\n      var that = this;\n      this.panorama.addEventListener('load', function () {\n        that.$emit('on-load');\n      });\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 74:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__lib_panolens__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_three__ = __webpack_require__(41);\n\n\n\n\nvar _log = console.log.bind(console);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'Scene',\n  props: {\n    pano: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    position: {\n      type: Object,\n      default: function _default() {\n        return {\n          x: 0,\n          y: 0,\n          z: 0\n        };\n      }\n    },\n    rotation: {\n      type: Object,\n      default: function _default() {\n        return {\n          x: 0,\n          y: 0,\n          z: 0\n        };\n      }\n    },\n    links: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    width: {\n      type: Number,\n      default: undefined\n    },\n    height: {\n      type: Number,\n      default: undefined\n    }\n  },\n  data: function data() {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      scene_index: -1,\n      viewer: null,\n      panorama: null,\n      hotspots: []\n    };\n  },\n  created: function created() {\n    window.addEventListener('resize', this.onResize, false);\n  },\n  mounted: function mounted() {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      };\n    }\n\n    this.viewer = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].Viewer({\n      container: this.$el,\n      cameraFov: 100\n    });\n\n    this.loadScene();\n  },\n\n  methods: {\n    onResize: function onResize() {\n      var _this = this;\n\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(function () {\n          _this.size = {\n            width: _this.$el.offsetWidth,\n            height: _this.$el.offsetHeight\n          };\n        });\n      }\n    },\n    loadScene: function loadScene() {\n      var _this2 = this;\n\n      _log('this.pano = ' + this.pano);\n      if (!this.pano) return;\n\n      var source = this.pano.source;\n\n      switch (this.pano.type) {\n        case 'cube':\n          var l = source.replace('%s', 'l');\n          var f = source.replace('%s', 'f');\n          var r = source.replace('%s', 'r');\n          var b = source.replace('%s', 'b');\n          var u = source.replace('%s', 'u');\n          var d = source.replace('%s', 'd');\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].CubePanorama([r, l, u, d, f, b]);\n          break;\n        case 'video':\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].VideoPanorama(source, { autoplay: true });\n          break;\n        default:\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].ImagePanorama(source);\n          break;\n      }\n\n      this.initViewer();\n\n      var group = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Object3D\"]();\n\n      this.links.forEach(function (link, index) {\n        _log(index);\n\n        var hotspot = addHotspot(link);\n        _this2.viewer.add(hotspot);\n\n        _this2.hotspots.push(hotspot);\n\n        var arrow = addArrow(_this2.position, link);\n\n        arrow.addEventListener('mouseover', function () {\n          _log('hoverred');\n        });\n\n        group.add(arrow);\n      });\n\n      var that = this;\n\n      var raycaster = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Raycaster\"]();\n\n      var INTERSECTED = null;\n\n      this.viewer.container.addEventListener('click', function (event) {\n        if (INTERSECTED) {\n          _log(INTERSECTED.targetScene);\n          that.scene_index = that.getSceneIndexByKey(INTERSECTED.targetScene.key);\n\n          that.viewer.remove(that.panorama);\n          that.loadScene();\n          INTERSECTED = null;\n        }\n      });\n\n      this.viewer.container.addEventListener('mousemove', function (event) {\n\n        var mouse = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Vector2\"]();\n        var camera = that.viewer.camera;\n        mouse.x = (event.clientX - that.$el.parentElement.offsetLeft) / that.viewer.container.offsetWidth * 2 - 1;\n        mouse.y = -((event.clientY - that.$el.parentElement.offsetTop) / that.viewer.container.offsetHeight) * 2 + 1;\n\n        raycaster.setFromCamera(mouse, camera);\n\n        var intersects = raycaster.intersectObjects(that.viewer.scene.children, true);\n\n        var intersectedObject = null;\n\n        if (intersects.length >= 0) {\n          intersects.forEach(function (intersect, index) {\n            if (intersect.object.type === 'hotspot' || intersect.object.type === 'arrow') {\n              intersectedObject = intersect.object;\n            }\n          });\n        }\n\n        if (intersectedObject) {\n          if (INTERSECTED) {\n            if (INTERSECTED.material.color) {\n              INTERSECTED.material.color.setHex(INTERSECTED.currentHex);\n            }\n\n            INTERSECTED.scale.set(1, 1, 1);\n          }\n\n          INTERSECTED = intersects[0].object;\n\n          if (INTERSECTED.material.color) {\n            INTERSECTED.currentHex = INTERSECTED.material.color.getHex();\n          }\n\n          if (INTERSECTED.material.color) {\n            INTERSECTED.material.color.setHex(0xffff00);\n          }\n          INTERSECTED.scale.set(1.2, 1.2, 1.2);\n        } else {\n          if (INTERSECTED) {\n            if (INTERSECTED.material.color) {\n              INTERSECTED.material.color.setHex(INTERSECTED.currentHex);\n            }\n            INTERSECTED.scale.set(1, 1, 1);\n          }\n\n          INTERSECTED = null;\n        }\n      });\n\n      this.viewer.addUpdateCallback(function () {\n\n        this.position.copy(that.viewer.control.target);\n\n        this.rotation.z = that.viewer.camera.rotation.z;\n\n        this.translateZ(0);\n        this.translateX(0);\n        this.translateY(-1);\n        this.translateZ(0);\n      }.bind(group));\n\n      this.viewer.add(group);\n\n\n      this.panorama.addEventListener('load', function () {\n        that.$emit('on-load');\n      });\n    },\n    initViewer: function initViewer() {\n      this.viewer.add(this.panorama);\n\n      this.viewer.camera.near = 0.001;\n      this.viewer.camera.target = this.panorama.position;\n\n      this.viewer.panorama.rotation.set(0, Math.PI, 0);\n\n      this.viewer.panorama.position.copy(this.position);\n    }\n  }\n});\n\nfunction addHotspot(hotspotData) {\n  var geometry = new __WEBPACK_IMPORTED_MODULE_1_three__[\"RingGeometry\"](8, 13, 100, 100);\n  var material = new __WEBPACK_IMPORTED_MODULE_1_three__[\"MeshPhongMaterial\"]({\n    color: 1668818,\n    emissive: 0xffffff,\n    transparent: true,\n    opacity: 1,\n    side: __WEBPACK_IMPORTED_MODULE_1_three__[\"DoubleSide\"],\n    polygonOffset: !0,\n    polygonOffsetFactor: -4,\n    polygonOffsetUnits: -4\n  });\n\n  var geometryBorder = new __WEBPACK_IMPORTED_MODULE_1_three__[\"CircleGeometry\"](9, 32, 32);\n  var materialBorder = new __WEBPACK_IMPORTED_MODULE_1_three__[\"MeshPhongMaterial\"]();\n  materialBorder.copy(material);\n\n  materialBorder.opacity = 0.5;\n\n  var circle = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Mesh\"](geometryBorder);\n\n  var hotspot = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Mesh\"](geometry);\n\n  var merged = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Geometry\"]();\n\n  circle.updateMatrix();\n  merged.merge(circle.geometry, circle.matrix, 0);\n  hotspot.updateMatrix();\n\n  merged.merge(hotspot.geometry, hotspot.matrix, 1);\n\n  var group = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Mesh\"](merged, new __WEBPACK_IMPORTED_MODULE_1_three__[\"MeshFaceMaterial\"]([material, materialBorder]));\n\n  group.rotation.set(toRadian(90), 0, 0);\n  group.position.set(hotspotData.position.x, hotspotData.position.y - 100, hotspotData.position.z);\n\n  group.type = 'hotspot';\n\n  group.targetScene = hotspotData;\n\n  return group;\n}\n\nfunction addArrow(currentPosition, targetScene) {\n  var arrowGeometry = makeArrowGeometry();\n  var arrowMaterial = new __WEBPACK_IMPORTED_MODULE_1_three__[\"MeshBasicMaterial\"]({\n    transparent: true,\n    opacity: 0.8,\n    color: 1668818,\n    emissive: 0xffffff,\n    side: __WEBPACK_IMPORTED_MODULE_1_three__[\"DoubleSide\"],\n    polygonOffset: !0,\n    polygonOffsetFactor: -4,\n    polygonOffsetUnits: -4\n  });\n\n  var arrow = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Mesh\"](arrowGeometry, arrowMaterial);\n\n  var x1 = targetScene.x;\n  var z1 = targetScene.z;\n  var x2 = currentPosition.x;\n  var z2 = currentPosition.z;\n\n  var ath = toDegree(Math.atan2(z1 - z2, x1 - x2));\n\n  arrow.rotation.set(toRadian(90), 0, toRadian(ath));\n\n  var arrowPos = sphereToWorld(ath, 0);\n\n  arrow.position.set(arrowPos.x, arrowPos.y, arrowPos.z);\n  arrow.type = 'arrow';\n  arrow.targetScene = targetScene;\n  return arrow;\n}\n\nfunction makeArrowGeometry() {\n  var t = 1 / 10.0;\n  var i = 2 * t / 3;\n  var n = t * Math.cos(60 * __WEBPACK_IMPORTED_MODULE_1_three__[\"Math\"].DEG2RAD);\n  var r = t * Math.sin(60 * __WEBPACK_IMPORTED_MODULE_1_three__[\"Math\"].DEG2RAD);\n  var o = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Shape\"]();\n\n  o.moveTo(i, 0);\n  o.lineTo(i - n, r);\n  o.lineTo(-n, r);\n  o.lineTo(0, 0);\n  o.lineTo(-n, -r);\n  o.lineTo(i - n, -r);\n  o.lineTo(i, 0);\n\n  return new __WEBPACK_IMPORTED_MODULE_1_three__[\"ShapeGeometry\"](o);\n}\n\nfunction sphereToWorld(ath, atv) {\n  var d = 1 / 2.0;\n  ath += 90;\n  var mY = -d * Math.sin(toRadian(atv));\n  var r = -d * Math.cos(toRadian(atv));\n  var mX = r * Math.sin(toRadian(-ath));\n  var mZ = r * Math.cos(toRadian(-ath));\n\n  return new __WEBPACK_IMPORTED_MODULE_1_three__[\"Vector3\"](mX, mY, mZ);\n}\nfunction toRadian(a) {\n  return a * Math.PI / 180.0;\n}\n\nfunction toDegree(a) {\n  return a * 180.0 / Math.PI;\n}\n\n/***/ }),\n\n/***/ 75:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__lib_panolens__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_three__ = __webpack_require__(41);\n\n\n\n\nvar _log = console.log.bind(console);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'Tour',\n  props: {\n    scenes: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    sceneIndex: {\n      type: Number,\n      default: 0\n    },\n    width: {\n      type: Number,\n      default: undefined\n    },\n    height: {\n      type: Number,\n      default: undefined\n    }\n  },\n  data: function data() {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      scene_index: -1,\n      viewer: null,\n      panorama: null,\n      hotspots: [],\n      arrowGroup: null\n    };\n  },\n  created: function created() {\n    window.addEventListener('resize', this.onResize, false);\n  },\n  mounted: function mounted() {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      };\n    }\n\n    this.viewer = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].Viewer({\n      container: this.$el,\n      cameraFov: 100\n    });\n    if (this.scene_index === -1) {\n      this.loadScene(this.sceneIndex);\n    }\n  },\n\n  methods: {\n    onResize: function onResize() {\n      var _this = this;\n\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(function () {\n          _this.size = {\n            width: _this.$el.offsetWidth,\n            height: _this.$el.offsetHeight\n          };\n        });\n      }\n    },\n    getSceneIndexByKey: function getSceneIndexByKey(key) {\n      for (var i = 0; i < this.scenes.length; i++) {\n        if (this.scenes[i].key === key) {\n          return i;\n        }\n      }\n      return -1;\n    },\n    loadScene: function loadScene(index) {\n      var _this2 = this;\n\n      this.$emit('on-load-start');\n      _log('this.scenes = ' + this.scenes);\n      if (!this.scenes || this.scenes.length === 0) return;\n\n      if (this.scene_index === index) return;\n\n      this.scene_index = index;\n\n      var scene = this.scenes[index];\n\n      var pano = scene.panorama;\n      var source = pano.source;\n\n      switch (pano.type) {\n        case 'cube':\n          var l = source.replace('%s', 'l');\n          var f = source.replace('%s', 'f');\n          var r = source.replace('%s', 'r');\n          var b = source.replace('%s', 'b');\n          var u = source.replace('%s', 'u');\n          var d = source.replace('%s', 'd');\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].CubePanorama([r, l, u, d, f, b]);\n          break;\n        case 'video':\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].VideoPanorama(source, { autoplay: true });\n          _log('this is video');\n          break;\n        default:\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].ImagePanorama(source);\n          break;\n      }\n\n      this.viewer.camera.near = 0.001;\n      this.viewer.camera.position.set(scene.x, scene.y, scene.z);\n\n      this.viewer.camera.translateZ(1);\n\n      this.viewer.add(this.panorama);\n\n      this.viewer.panorama.rotation.set(0, Math.PI, 0);\n      this.panorama.parent.rotation.set(0, Math.PI, 0);\n      this.viewer.panorama.position.set(scene.x, scene.y, scene.z);\n\n      this.viewer.control.target = this.viewer.panorama.position;\n\n      _log(this.viewer);\n      _log('panorama = ', this.panorama);\n\n      if (this.arrowGroup) {\n        this.viewer.remove(this.arrowGroup);\n      }\n\n      if (this.hotspots) {\n        this.hotspots.forEach(function (hotspot) {\n          _this2.viewer.remove(hotspot);\n        });\n      }\n\n      this.arrowGroup = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Object3D\"]();\n\n      scene.connections.forEach(function (key) {\n        _log('connections key = ', key);\n        var index = _this2.getSceneIndexByKey(key);\n        _log('connections index = ', index);\n        if (index === -1) return;\n\n        var hotspot = addHotspot(scene, _this2.scenes[index]);\n        _this2.viewer.add(hotspot);\n\n        _this2.hotspots.push(hotspot);\n\n        var arrow = addArrow(scene, _this2.scenes[index]);\n\n        arrow.addEventListener('mouseover', function () {\n          _log('hoverred');\n        });\n\n        _this2.arrowGroup.add(arrow);\n      });\n\n      var that = this;\n\n      var raycaster = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Raycaster\"]();\n\n      var INTERSECTED = null;\n\n      this.viewer.container.addEventListener('click', function (event) {\n        if (Date.now() - timeStamp < rate) return;\n\n        if (INTERSECTED) {\n          _log(INTERSECTED.targetScene);\n\n\n          alert('TODO: move to next scene ' + INTERSECTED.targetScene.key);\n        }\n      });\n\n      this.viewer.add(this.arrowGroup);\n\n\n      this.panorama.addEventListener('load', function () {\n        that.$emit('on-load');\n      });\n    }\n  }\n});\n\nvar rate = 1000;\nvar timeStamp = Date.now() - rate;\n\nfunction addHotspot(scene, targetScene) {\n  var pos = {\n    x: targetScene.x,\n    y: targetScene.y,\n    z: targetScene.z\n  };\n\n  var geometry = new __WEBPACK_IMPORTED_MODULE_1_three__[\"RingGeometry\"](8, 13, 100, 100);\n  var material = new __WEBPACK_IMPORTED_MODULE_1_three__[\"MeshPhongMaterial\"]({\n    color: 1668818,\n    emissive: 0xffffff,\n    transparent: true,\n    opacity: 1,\n    side: __WEBPACK_IMPORTED_MODULE_1_three__[\"DoubleSide\"],\n    polygonOffset: !0,\n    polygonOffsetFactor: -4,\n    polygonOffsetUnits: -4\n  });\n\n  var geometryBorder = new __WEBPACK_IMPORTED_MODULE_1_three__[\"CircleGeometry\"](9, 32, 32);\n  var materialBorder = new __WEBPACK_IMPORTED_MODULE_1_three__[\"MeshPhongMaterial\"]();\n  materialBorder.copy(material);\n\n  materialBorder.opacity = 0.5;\n\n  var circle = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Mesh\"](geometryBorder);\n\n  var hotspot = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Mesh\"](geometry);\n\n  var merged = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Geometry\"]();\n\n  circle.updateMatrix();\n  merged.merge(circle.geometry, circle.matrix, 0);\n  hotspot.updateMatrix();\n\n  merged.merge(hotspot.geometry, hotspot.matrix, 1);\n\n  var group = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Mesh\"](merged, new __WEBPACK_IMPORTED_MODULE_1_three__[\"MeshFaceMaterial\"]([material, materialBorder]));\n\n  group.rotation.set(toRadian(90), 0, 0);\n  group.position.set(pos.x, pos.y - 100, pos.z);\n\n  group.type = 'hotspot';\n\n  group.targetScene = targetScene;\n\n  return group;\n}\n\nfunction addArrow(scene, targetScene) {\n  var arrowGeometry = makeArrowGeometry();\n  var arrowMaterial = new __WEBPACK_IMPORTED_MODULE_1_three__[\"MeshBasicMaterial\"]({\n    transparent: true,\n    opacity: 0.8,\n    color: 1668818,\n    emissive: 0xffffff,\n    side: __WEBPACK_IMPORTED_MODULE_1_three__[\"DoubleSide\"],\n    polygonOffset: !0,\n    polygonOffsetFactor: -4,\n    polygonOffsetUnits: -4\n  });\n\n  var arrow = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Mesh\"](arrowGeometry, arrowMaterial);\n\n  var x1 = targetScene.x;\n  var z1 = targetScene.z;\n  var x2 = scene.x;\n  var z2 = scene.z;\n\n  var ath = toDegree(Math.atan2(z1 - z2, x1 - x2));\n\n  arrow.rotation.set(toRadian(90), 0, toRadian(ath));\n\n  var arrowPos = sphereToWorld(ath, 0);\n\n  arrow.position.set(arrowPos.x, arrowPos.y, arrowPos.z);\n  arrow.type = 'arrow';\n  arrow.targetScene = targetScene;\n  return arrow;\n}\n\nfunction makeArrowGeometry() {\n  var t = 1 / 10.0;\n  var i = 2 * t / 3;\n  var n = t * Math.cos(60 * __WEBPACK_IMPORTED_MODULE_1_three__[\"Math\"].DEG2RAD);\n  var r = t * Math.sin(60 * __WEBPACK_IMPORTED_MODULE_1_three__[\"Math\"].DEG2RAD);\n  var o = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Shape\"]();\n  o.moveTo(i, 0);\n  o.lineTo(i - n, r);\n  o.lineTo(-n, r);\n  o.lineTo(0, 0);\n  o.lineTo(-n, -r);\n  o.lineTo(i - n, -r);\n  o.lineTo(i, 0);\n  return new __WEBPACK_IMPORTED_MODULE_1_three__[\"ShapeGeometry\"](o);\n}\n\nfunction sphereToWorld(ath, atv) {\n  var d = 1 / 2.0;\n  ath += 90;\n  var mY = -d * Math.sin(toRadian(atv));\n  var r = -d * Math.cos(toRadian(atv));\n  var mX = r * Math.sin(toRadian(-ath));\n  var mZ = r * Math.cos(toRadian(-ath));\n\n  return new __WEBPACK_IMPORTED_MODULE_1_three__[\"Vector3\"](mX, mY, mZ);\n}\nfunction toRadian(a) {\n  return a * Math.PI / 180.0;\n}\n\nfunction toDegree(a) {\n  return a * 180.0 / Math.PI;\n}\n\n/***/ })\n\n},[64]);\n\n\n// WEBPACK FOOTER //\n// assets/js/app.cfded10c814f18849710.js","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"div[data-v-09ad1f51]{cursor:pointer}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-09ad1f51\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/Tour.vue\n// module id = 130\n// module chunks = 1","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".demo-block{width:100%;height:100%;background-color:#fff;border-radius:3px}.demo-block .demo-block-preview{width:70%;height:100%;float:left;position:relative}.demo-block .demo-block-code{width:30%;height:100%;background:#f9fafc;border-left:1px solid #dfe2e7;font-size:13px;float:left}.demo-block .demo-block-code pre code{font:normal 10pt Consolas,Monaco,monospace}.demo-block .demo-block-code .demo-block-code-box{width:100%;height:50%;position:relative;overflow:hidden}.demo-block .demo-block-code-box:after{content:\\\"\\\";display:block;position:absolute;bottom:0;left:0;width:90%;height:1px;background:-webkit-linear-gradient(left,#dfe2e7 80%,rgba(223,226,231,0))}.demo-block .demo-block-code-box h3{width:100%;padding:10px 20px;font-size:16px;font-weight:700;position:absolute}.demo-block .demo-block-code-box-content{position:absolute;top:40px;bottom:10px;left:20px;right:20px;overflow:auto}.demo-block .hljs{background:transparent}.demo-block .demo-block-code code{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-213df8bf\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/components/demo-block.vue\n// module id = 131\n// module chunks = 1","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"*{margin:0;border:0;padding:0;box-sizing:border-box}li,ol,ul{list-style:none}a{color:#657180;text-decoration:none}.demos,body,html{width:100%;height:100%;color:#657180}body{background:#eee;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background:#fff}.demos-header{position:absolute;top:0;width:100%;background:#f3f6fb;text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-bottom:1px solid #dfe2e7;padding:15px 15px 15px 30px;line-height:20px}.demos-header .title{font-weight:700;font-size:18px;display:inline-block}.demos-header .github{color:#39f;display:inline-block;font-size:12px;float:right}.demos-content{width:100%;height:100%;padding-top:52px;overflow:hidden}.demos-menu{float:left;width:230px;height:100%;border-right:1px solid #dfe2e7;padding:10px 30px}.demos-menu .demos-menu-item{display:block;width:100%;height:30px;line-height:30px;font-size:14px;cursor:pointer}.demos-menu .demos-menu-item>a{display:block;width:100%;height:100%}.demos-menu .demos-menu-title{display:block;width:100%;padding:6px 0;margin-top:10px;font-size:14px;font-weight:700}.demos-menu .demos-menu-item:hover>a{color:#39f}.demos-pages{height:100%;overflow:hidden}.demo-loading{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center}.demo-loading:before{border-radius:100%;margin:2px;border:3px solid #20a0ff;border-bottom-color:transparent;height:36px;width:36px;animation:loading-rotate .75s 0s linear infinite}.demo-loading:after,.demo-loading:before{content:\\\"\\\";display:inline-block;vertical-align:middle}.demo-loading:after{height:100%;width:0}@keyframes loading-rotate{0%{transform:rotate(0) scale(1)}50%{transform:rotate(180deg) scale(.6)}to{transform:rotate(1turn) scale(1)}}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-223dbf78\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/App.vue\n// module id = 132\n// module chunks = 1","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".info[data-v-2a5bfa54]{position:absolute;top:30px;left:10%}.info button[data-v-2a5bfa54]{padding:10px;cursor:pointer}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-2a5bfa54\",\"scoped\":true,\"hasInlineConfig\":false}!./~/less-loader/dist/cjs.js?{}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/pages/demo-pano.vue\n// module id = 133\n// module chunks = 1","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"div[data-v-66d382e3]{cursor:pointer}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-66d382e3\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/Scene.vue\n// module id = 134\n// module chunks = 1","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".v-pano{width:100%;height:100%;margin:0;padding:0;border:0}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-7974fb6b\",\"scoped\":false,\"hasInlineConfig\":false}!./~/less-loader/dist/cjs.js?{}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/Pano.vue\n// module id = 135\n// module chunks = 1","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-213df8bf\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./demo-block.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-block.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-213df8bf\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-block.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/components/demo-block.vue\n// module id = 18\n// module chunks = 1","import * as THREE from 'three'\n\n/**\n * Panolens.js\n * @author pchen66\n * @namespace PANOLENS\n */\n\nvar PANOLENS = { REVISION: '9' }\n/*! npm.im/iphone-inline-video 2.2.2 */\nvar enableInlineVideo = (function () {\n  'use strict'/*! npm.im/intervalometer */\n  function e (e, i, n, r) { function t (n) { d = i(t, r), e(n - (a || n)), a = n } var d, a; return {start: function () { d || t(0) }, stop: function () { n(d), d = null, a = 0 }} } function i (i) { return e(i, requestAnimationFrame, cancelAnimationFrame) } function n (e, i, n) { function r (r) { n && !n(e, i) || r.stopImmediatePropagation() } return e.addEventListener(i, r), r } function r (e, i, n, r) { function t () { return n[i] } function d (e) { n[i] = e }r && d(e[i]), Object.defineProperty(e, i, {get: t, set: d}) } function t (e, i, n) { n.addEventListener(i, function () { return e.dispatchEvent(new Event(i)) }) } function d (e, i) { Promise.resolve().then(function () { e.dispatchEvent(new Event(i)) }) } function a (e) { var i = new Audio(); return t(e, 'play', i), t(e, 'playing', i), t(e, 'pause', i), i.crossOrigin = e.crossOrigin, i.src = e.src || e.currentSrc || 'data:', i } function u (e, i, n) { (m || 0) + 200 < Date.now() && (e[h] = !0, m = Date.now()), n || (e.currentTime = i), k[++T % 3] = 100 * i | 0 } function o (e) { return e.driver.currentTime >= e.video.duration } function s (e) { var i = this; i.video.readyState >= i.video.HAVE_FUTURE_DATA ? (i.hasAudio || (i.driver.currentTime = i.video.currentTime + e * i.video.playbackRate / 1e3, i.video.loop && o(i) && (i.driver.currentTime = 0)), u(i.video, i.driver.currentTime)) : i.video.networkState === i.video.NETWORK_IDLE && i.video.buffered.length === 0 && i.video.load(), i.video.ended && (delete i.video[h], i.video.pause(!0)) } function c () { var e = this, i = e[g]; if (e.webkitDisplayingFullscreen) return void e[E](); i.driver.src !== 'data:' && i.driver.src !== e.src && (u(e, 0, !0), i.driver.src = e.src), e.paused && (i.paused = !1, e.buffered.length === 0 && e.load(), i.driver.play(), i.updater.start(), i.hasAudio || (d(e, 'play'), i.video.readyState >= i.video.HAVE_ENOUGH_DATA && d(e, 'playing'))) } function v (e) { var i = this, n = i[g]; n.driver.pause(), n.updater.stop(), i.webkitDisplayingFullscreen && i[w](), n.paused && !e || (n.paused = !0, n.hasAudio || d(i, 'pause'), i.ended && !i.webkitDisplayingFullscreen && (i[h] = !0, d(i, 'ended'))) } function p (e, n) { var r = {}; e[g] = r, r.paused = !0, r.hasAudio = n, r.video = e, r.updater = i(s.bind(r)), n ? r.driver = a(e) : (e.addEventListener('canplay', function () { e.paused || d(e, 'playing') }), r.driver = {src: e.src || e.currentSrc || 'data:', muted: !0, paused: !0, pause: function () { r.driver.paused = !0 }, play: function () { r.driver.paused = !1, o(r) && u(e, 0) }, get ended () { return o(r) }}), e.addEventListener('emptied', function () { var i = !r.driver.src || r.driver.src === 'data:'; r.driver.src && r.driver.src !== e.src && (u(e, 0, !0), r.driver.src = e.src, i || !n && e.autoplay ? r.driver.play() : r.updater.stop()) }, !1), e.addEventListener('webkitbeginfullscreen', function () { e.paused ? n && r.driver.buffered.length === 0 && r.driver.load() : (e.pause(), e[E]()) }), n && (e.addEventListener('webkitendfullscreen', function () { r.driver.currentTime = e.currentTime }), e.addEventListener('seeking', function () { k.indexOf(100 * e.currentTime | 0) < 0 && (r.driver.currentTime = e.currentTime) })) } function l (e) { var i = e[h]; return delete e[h], !e.webkitDisplayingFullscreen && !i } function f (e) { var i = e[g]; e[E] = e.play, e[w] = e.pause, e.play = c, e.pause = v, r(e, 'paused', i.driver), r(e, 'muted', i.driver, !0), r(e, 'playbackRate', i.driver, !0), r(e, 'ended', i.driver), r(e, 'loop', i.driver, !0), n(e, 'seeking', function (e) { return !e.webkitDisplayingFullscreen }), n(e, 'seeked', function (e) { return !e.webkitDisplayingFullscreen }), n(e, 'timeupdate', l), n(e, 'ended', l) } function y (e, i) { if (void 0 === i && (i = {}), !e[g]) { if (!i.everywhere) { if (!b) return; if (!(i.iPad || i.ipad ? /iPhone|iPod|iPad/ : /iPhone|iPod/).test(navigator.userAgent)) return }e.pause(); var n = e.autoplay; e.autoplay = !1, p(e, !e.muted), f(e), e.classList.add('IIV'), e.muted && n && (e.play(), e.addEventListener('playing', function i () { e.autoplay = !0, e.removeEventListener('playing', i) })), /iPhone|iPod|iPad/.test(navigator.platform) || console.warn('iphone-inline-video is not guaranteed to work in emulated environments') } } var m, b = typeof document === 'object' && 'object-fit' in document.head.style && !matchMedia('(-webkit-video-playable-inline)').matches, g = 'bfred-it:iphone-inline-video', h = 'bfred-it:iphone-inline-video:event', E = 'bfred-it:iphone-inline-video:nativeplay', w = 'bfred-it:iphone-inline-video:nativepause', k = [], T = 0; return y\n}())\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\n\nvar TWEEN = TWEEN || (function () {\n  var _tweens = []\n\n  return {\n\n    getAll: function () {\n      return _tweens\n    },\n\n    removeAll: function () {\n      _tweens = []\n    },\n\n    add: function (tween) {\n      _tweens.push(tween)\n    },\n\n    remove: function (tween) {\n      var i = _tweens.indexOf(tween)\n\n      if (i !== -1) {\n        _tweens.splice(i, 1)\n      }\n    },\n\n    update: function (time, preserve) {\n      if (_tweens.length === 0) {\n        return false\n      }\n\n      var i = 0\n\n      time = time !== undefined ? time : TWEEN.now()\n\n      while (i < _tweens.length) {\n        if (_tweens[i].update(time) || preserve) {\n          i++\n        } else {\n          _tweens.splice(i, 1)\n        }\n      }\n\n      return true\n    }\n  }\n})()\n\n// Include a performance.now polyfill.\n// In node.js, use process.hrtime.\nif (typeof (window) === 'undefined' && typeof (process) !== 'undefined') {\n  TWEEN.now = function () {\n    var time = process.hrtime()\n\n    // Convert [seconds, nanoseconds] to milliseconds.\n    return time[0] * 1000 + time[1] / 1000000\n  }\n}\n// In a browser, use window.performance.now if it is available.\nelse if (typeof (window) !== 'undefined' &&\n         window.performance !== undefined &&\n\t\t window.performance.now !== undefined) {\n  // This must be bound, because directly assigning this function\n  // leads to an invocation exception in Chrome.\n  TWEEN.now = window.performance.now.bind(window.performance)\n}\n// Use Date.now if it is available.\nelse if (Date.now !== undefined) {\n  TWEEN.now = Date.now\n}\n// Otherwise, use 'new Date().getTime()'.\nelse {\n  TWEEN.now = function () {\n    return new Date().getTime()\n  }\n}\n\nTWEEN.Tween = function (object) {\n  var _object = object\n  var _valuesStart = {}\n  var _valuesEnd = {}\n  var _valuesStartRepeat = {}\n  var _duration = 1000\n  var _repeat = 0\n  var _repeatDelayTime\n  var _yoyo = false\n  var _isPlaying = false\n  var _reversed = false\n  var _delayTime = 0\n  var _startTime = null\n  var _easingFunction = TWEEN.Easing.Linear.None\n  var _interpolationFunction = TWEEN.Interpolation.Linear\n  var _chainedTweens = []\n  var _onStartCallback = null\n  var _onStartCallbackFired = false\n  var _onUpdateCallback = null\n  var _onCompleteCallback = null\n  var _onStopCallback = null\n\n  this.to = function (properties, duration) {\n    _valuesEnd = properties\n\n    if (duration !== undefined) {\n      _duration = duration\n    }\n\n    return this\n  }\n\n  this.start = function (time) {\n    TWEEN.add(this)\n\n    _isPlaying = true\n\n    _onStartCallbackFired = false\n\n    _startTime = time !== undefined ? time : TWEEN.now()\n    _startTime += _delayTime\n\n    for (var property in _valuesEnd) {\n      // Check if an Array was provided as property value\n      if (_valuesEnd[property] instanceof Array) {\n        if (_valuesEnd[property].length === 0) {\n          continue\n        }\n\n        // Create a local copy of the Array with the start value at the front\n        _valuesEnd[property] = [_object[property]].concat(_valuesEnd[property])\n      }\n\n      // If `to()` specifies a property that doesn't exist in the source object,\n      // we should not set that property in the object\n      if (_object[property] === undefined) {\n        continue\n      }\n\n      // Save the starting value.\n      _valuesStart[property] = _object[property]\n\n      if ((_valuesStart[property] instanceof Array) === false) {\n        _valuesStart[property] *= 1.0 // Ensures we're using numbers, not strings\n      }\n\n      _valuesStartRepeat[property] = _valuesStart[property] || 0\n    }\n\n    return this\n  }\n\n  this.stop = function () {\n    if (!_isPlaying) {\n      return this\n    }\n\n    TWEEN.remove(this)\n    _isPlaying = false\n\n    if (_onStopCallback !== null) {\n      _onStopCallback.call(_object, _object)\n    }\n\n    this.stopChainedTweens()\n    return this\n  }\n\n  this.end = function () {\n    this.update(_startTime + _duration)\n    return this\n  }\n\n  this.stopChainedTweens = function () {\n    for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n      _chainedTweens[i].stop()\n    }\n  }\n\n  this.delay = function (amount) {\n    _delayTime = amount\n    return this\n  }\n\n  this.repeat = function (times) {\n    _repeat = times\n    return this\n  }\n\n  this.repeatDelay = function (amount) {\n    _repeatDelayTime = amount\n    return this\n  }\n\n  this.yoyo = function (yoyo) {\n    _yoyo = yoyo\n    return this\n  }\n\n  this.easing = function (easing) {\n    _easingFunction = easing\n    return this\n  }\n\n  this.interpolation = function (interpolation) {\n    _interpolationFunction = interpolation\n    return this\n  }\n\n  this.chain = function () {\n    _chainedTweens = arguments\n    return this\n  }\n\n  this.onStart = function (callback) {\n    _onStartCallback = callback\n    return this\n  }\n\n  this.onUpdate = function (callback) {\n    _onUpdateCallback = callback\n    return this\n  }\n\n  this.onComplete = function (callback) {\n    _onCompleteCallback = callback\n    return this\n  }\n\n  this.onStop = function (callback) {\n    _onStopCallback = callback\n    return this\n  }\n\n  this.update = function (time) {\n    var property\n    var elapsed\n    var value\n\n    if (time < _startTime) {\n      return true\n    }\n\n    if (_onStartCallbackFired === false) {\n      if (_onStartCallback !== null) {\n        _onStartCallback.call(_object, _object)\n      }\n\n      _onStartCallbackFired = true\n    }\n\n    elapsed = (time - _startTime) / _duration\n    elapsed = elapsed > 1 ? 1 : elapsed\n\n    value = _easingFunction(elapsed)\n\n    for (property in _valuesEnd) {\n      // Don't update properties that do not exist in the source object\n      if (_valuesStart[property] === undefined) {\n        continue\n      }\n\n      var start = _valuesStart[property] || 0\n      var end = _valuesEnd[property]\n\n      if (end instanceof Array) {\n        _object[property] = _interpolationFunction(end, value)\n      } else {\n        // Parses relative end values with start as base (e.g.: +10, -3)\n        if (typeof (end) === 'string') {\n          if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n            end = start + parseFloat(end)\n          } else {\n            end = parseFloat(end)\n          }\n        }\n\n        // Protect against non numeric properties.\n        if (typeof (end) === 'number') {\n          _object[property] = start + (end - start) * value\n        }\n      }\n    }\n\n    if (_onUpdateCallback !== null) {\n      _onUpdateCallback.call(_object, value)\n    }\n\n    if (elapsed === 1) {\n      if (_repeat > 0) {\n        if (isFinite(_repeat)) {\n          _repeat--\n        }\n\n        // Reassign starting values, restart by making startTime = now\n        for (property in _valuesStartRepeat) {\n          if (typeof (_valuesEnd[property]) === 'string') {\n            _valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property])\n          }\n\n          if (_yoyo) {\n            var tmp = _valuesStartRepeat[property]\n\n            _valuesStartRepeat[property] = _valuesEnd[property]\n            _valuesEnd[property] = tmp\n          }\n\n          _valuesStart[property] = _valuesStartRepeat[property]\n        }\n\n        if (_yoyo) {\n          _reversed = !_reversed\n        }\n\n        if (_repeatDelayTime !== undefined) {\n          _startTime = time + _repeatDelayTime\n        } else {\n          _startTime = time + _delayTime\n        }\n\n        return true\n      } else {\n        if (_onCompleteCallback !== null) {\n          _onCompleteCallback.call(_object, _object)\n        }\n\n        for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n          // Make the chained tweens start exactly at the time they should,\n          // even if the `update()` method was called way past the duration of the tween\n          _chainedTweens[i].start(_startTime + _duration)\n        }\n\n        return false\n      }\n    }\n\n    return true\n  }\n}\n\nTWEEN.Easing = {\n\n  Linear: {\n\n    None: function (k) {\n      return k\n    }\n\n  },\n\n  Quadratic: {\n\n    In: function (k) {\n      return k * k\n    },\n\n    Out: function (k) {\n      return k * (2 - k)\n    },\n\n    InOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k\n      }\n\n      return -0.5 * (--k * (k - 2) - 1)\n    }\n\n  },\n\n  Cubic: {\n\n    In: function (k) {\n      return k * k * k\n    },\n\n    Out: function (k) {\n      return --k * k * k + 1\n    },\n\n    InOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k\n      }\n\n      return 0.5 * ((k -= 2) * k * k + 2)\n    }\n\n  },\n\n  Quartic: {\n\n    In: function (k) {\n      return k * k * k * k\n    },\n\n    Out: function (k) {\n      return 1 - (--k * k * k * k)\n    },\n\n    InOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k\n      }\n\n      return -0.5 * ((k -= 2) * k * k * k - 2)\n    }\n\n  },\n\n  Quintic: {\n\n    In: function (k) {\n      return k * k * k * k * k\n    },\n\n    Out: function (k) {\n      return --k * k * k * k * k + 1\n    },\n\n    InOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k * k\n      }\n\n      return 0.5 * ((k -= 2) * k * k * k * k + 2)\n    }\n\n  },\n\n  Sinusoidal: {\n\n    In: function (k) {\n      return 1 - Math.cos(k * Math.PI / 2)\n    },\n\n    Out: function (k) {\n      return Math.sin(k * Math.PI / 2)\n    },\n\n    InOut: function (k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k))\n    }\n\n  },\n\n  Exponential: {\n\n    In: function (k) {\n      return k === 0 ? 0 : Math.pow(1024, k - 1)\n    },\n\n    Out: function (k) {\n      return k === 1 ? 1 : 1 - Math.pow(2, -10 * k)\n    },\n\n    InOut: function (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      if ((k *= 2) < 1) {\n        return 0.5 * Math.pow(1024, k - 1)\n      }\n\n      return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2)\n    }\n\n  },\n\n  Circular: {\n\n    In: function (k) {\n      return 1 - Math.sqrt(1 - k * k)\n    },\n\n    Out: function (k) {\n      return Math.sqrt(1 - (--k * k))\n    },\n\n    InOut: function (k) {\n      if ((k *= 2) < 1) {\n        return -0.5 * (Math.sqrt(1 - k * k) - 1)\n      }\n\n      return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1)\n    }\n\n  },\n\n  Elastic: {\n\n    In: function (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      return -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI)\n    },\n\n    Out: function (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      return Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1\n    },\n\n    InOut: function (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      k *= 2\n\n      if (k < 1) {\n        return -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI)\n      }\n\n      return 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1\n    }\n\n  },\n\n  Back: {\n\n    In: function (k) {\n      var s = 1.70158\n\n      return k * k * ((s + 1) * k - s)\n    },\n\n    Out: function (k) {\n      var s = 1.70158\n\n      return --k * k * ((s + 1) * k + s) + 1\n    },\n\n    InOut: function (k) {\n      var s = 1.70158 * 1.525\n\n      if ((k *= 2) < 1) {\n        return 0.5 * (k * k * ((s + 1) * k - s))\n      }\n\n      return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2)\n    }\n\n  },\n\n  Bounce: {\n\n    In: function (k) {\n      return 1 - TWEEN.Easing.Bounce.Out(1 - k)\n    },\n\n    Out: function (k) {\n      if (k < (1 / 2.75)) {\n        return 7.5625 * k * k\n      } else if (k < (2 / 2.75)) {\n        return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75\n      } else if (k < (2.5 / 2.75)) {\n        return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375\n      } else {\n        return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375\n      }\n    },\n\n    InOut: function (k) {\n      if (k < 0.5) {\n        return TWEEN.Easing.Bounce.In(k * 2) * 0.5\n      }\n\n      return TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5\n    }\n\n  }\n\n}\n\nTWEEN.Interpolation = {\n\n  Linear: function (v, k) {\n    var m = v.length - 1\n    var f = m * k\n    var i = Math.floor(f)\n    var fn = TWEEN.Interpolation.Utils.Linear\n\n    if (k < 0) {\n      return fn(v[0], v[1], f)\n    }\n\n    if (k > 1) {\n      return fn(v[m], v[m - 1], m - f)\n    }\n\n    return fn(v[i], v[i + 1 > m ? m : i + 1], f - i)\n  },\n\n  Bezier: function (v, k) {\n    var b = 0\n    var n = v.length - 1\n    var pw = Math.pow\n    var bn = TWEEN.Interpolation.Utils.Bernstein\n\n    for (var i = 0; i <= n; i++) {\n      b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i)\n    }\n\n    return b\n  },\n\n  CatmullRom: function (v, k) {\n    var m = v.length - 1\n    var f = m * k\n    var i = Math.floor(f)\n    var fn = TWEEN.Interpolation.Utils.CatmullRom\n\n    if (v[0] === v[m]) {\n      if (k < 0) {\n        i = Math.floor(f = m * (1 + k))\n      }\n\n      return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i)\n    } else {\n      if (k < 0) {\n        return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0])\n      }\n\n      if (k > 1) {\n        return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m])\n      }\n\n      return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i)\n    }\n  },\n\n  Utils: {\n\n    Linear: function (p0, p1, t) {\n      return (p1 - p0) * t + p0\n    },\n\n    Bernstein: function (n, i) {\n      var fc = TWEEN.Interpolation.Utils.Factorial\n\n      return fc(n) / fc(i) / fc(n - i)\n    },\n\n    Factorial: (function () {\n      var a = [1]\n\n      return function (n) {\n        var s = 1\n\n        if (a[n]) {\n          return a[n]\n        }\n\n        for (var i = n; i > 1; i--) {\n          s *= i\n        }\n\n        a[n] = s\n        return s\n      }\n    })(),\n\n    CatmullRom: function (p0, p1, p2, p3, t) {\n      var v0 = (p2 - p0) * 0.5\n      var v1 = (p3 - p1) * 0.5\n      var t2 = t * t\n      var t3 = t * t2\n\n      return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1\n    }\n\n  }\n\n};\n\n// UMD (Universal Module Definition)\n(function (root) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define([], function () {\n      return TWEEN\n    })\n  } else if (typeof module !== 'undefined' && typeof exports === 'object') {\n    // Node.js\n    module.exports = TWEEN\n  } else if (root !== undefined) {\n    // Global variable\n    root.TWEEN = TWEEN\n  }\n})(this)\n/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\n/* global THREE, console */\n\n// This set of controls performs orbiting, dollying (zooming), and panning. It maintains\n// the \"up\" direction as +Y, unlike the TrackballControls. Touch on tablet and phones is\n// supported.\n//\n//    Orbit - left mouse / touch: one finger move\n//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n//    Pan - right mouse, or arrow keys / touch: three finter swipe\n\nTHREE.OrbitControls = function (object, domElement) {\n  this.object = object\n  this.domElement = (domElement !== undefined) ? domElement : document\n  this.frameId\n\n  // API\n\n  // Set to false to disable this control\n  this.enabled = true\n\n  // \"target\" sets the location of focus, where the control orbits around\n  // and where it pans with respect to.\n  this.target = new THREE.Vector3()\n\n  // center is old, deprecated; use \"target\" instead\n  this.center = this.target\n\n  // This option actually enables dollying in and out; left as \"zoom\" for\n  // backwards compatibility\n  this.noZoom = false\n  this.zoomSpeed = 1.0\n\n  // Limits to how far you can dolly in and out ( PerspectiveCamera only )\n  this.minDistance = 0\n  this.maxDistance = Infinity\n\n  // Limits to how far you can zoom in and out ( OrthographicCamera only )\n  this.minZoom = 0\n  this.maxZoom = Infinity\n\n  // Set to true to disable this control\n  this.noRotate = false\n  this.rotateSpeed = -0.15\n\n  // Set to true to disable this control\n  this.noPan = true\n  this.keyPanSpeed = 7.0\t// pixels moved per arrow key push\n\n  // Set to true to automatically rotate around the target\n  this.autoRotate = false\n  this.autoRotateSpeed = 2.0 // 30 seconds per round when fps is 60\n\n  // How far you can orbit vertically, upper and lower limits.\n  // Range is 0 to Math.PI radians.\n  this.minPolarAngle = 0 // radians\n  this.maxPolarAngle = Math.PI // radians\n\n  // Momentum\n  \tthis.momentumDampingFactor = 0.90\n  \tthis.momentumScalingFactor = -0.005\n  \tthis.momentumKeydownFactor = 20\n\n  \t// Fov\n  \tthis.minFov = 30\n  \tthis.maxFov = 120\n\n  // How far you can orbit horizontally, upper and lower limits.\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n  this.minAzimuthAngle = -Infinity // radians\n  this.maxAzimuthAngle = Infinity // radians\n\n  // Set to true to disable use of the keys\n  this.noKeys = false\n\n  // The four arrow keys\n  this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 }\n\n  // Mouse buttons\n  this.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT }\n\n  /// /////////\n  // internals\n\n  var scope = this\n\n  var EPS = 10e-8\n  var MEPS = 10e-5\n\n  var rotateStart = new THREE.Vector2()\n  var rotateEnd = new THREE.Vector2()\n  var rotateDelta = new THREE.Vector2()\n\n  var panStart = new THREE.Vector2()\n  var panEnd = new THREE.Vector2()\n  var panDelta = new THREE.Vector2()\n  var panOffset = new THREE.Vector3()\n\n  var offset = new THREE.Vector3()\n\n  var dollyStart = new THREE.Vector2()\n  var dollyEnd = new THREE.Vector2()\n  var dollyDelta = new THREE.Vector2()\n\n  var theta\n  var phi\n  var phiDelta = 0\n  var thetaDelta = 0\n  var scale = 1\n  var pan = new THREE.Vector3()\n\n  var lastPosition = new THREE.Vector3()\n  var lastQuaternion = new THREE.Quaternion()\n\n  var momentumLeft = 0, momentumUp = 0\n  var eventCurrent, eventPrevious\n  var momentumOn = false\n\n  var keyUp, keyBottom, keyLeft, keyRight\n\n  var STATE = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 }\n\n  var state = STATE.NONE\n\n  // for reset\n\n  this.target0 = this.target.clone()\n  this.position0 = this.object.position.clone()\n  this.zoom0 = this.object.zoom\n\n  // so camera.up is the orbit axis\n\n  var quat = new THREE.Quaternion().setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0))\n  var quatInverse = quat.clone().inverse()\n\n  // events\n\n  var changeEvent = { type: 'change' }\n  var startEvent = { type: 'start' }\n  var endEvent = { type: 'end' }\n\n  this.setLastQuaternion = function (quaternion) {\n    lastQuaternion.copy(quaternion)\n    scope.object.quaternion.copy(quaternion)\n  }\n\n  this.getLastPosition = function () {\n    return lastPosition\n  }\n\n  this.rotateLeft = function (angle) {\n    if (angle === undefined) {\n      angle = getAutoRotationAngle()\n    }\n\n    thetaDelta -= angle\n  }\n\n  this.rotateUp = function (angle) {\n    if (angle === undefined) {\n      angle = getAutoRotationAngle()\n    }\n\n    phiDelta -= angle\n  }\n\n  // pass in distance in world space to move left\n  this.panLeft = function (distance) {\n    var te = this.object.matrix.elements\n\n    // get X column of matrix\n    panOffset.set(te[ 0 ], te[ 1 ], te[ 2 ])\n    panOffset.multiplyScalar(-distance)\n\n    pan.add(panOffset)\n  }\n\n  // pass in distance in world space to move up\n  this.panUp = function (distance) {\n    var te = this.object.matrix.elements\n\n    // get Y column of matrix\n    panOffset.set(te[ 4 ], te[ 5 ], te[ 6 ])\n    panOffset.multiplyScalar(distance)\n\n    pan.add(panOffset)\n  }\n\n  // pass in x,y of change desired in pixel space,\n  // right and down are positive\n  this.pan = function (deltaX, deltaY) {\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement\n\n    if (scope.object instanceof THREE.PerspectiveCamera) {\n      // perspective\n      var position = scope.object.position\n      var offset = position.clone().sub(scope.target)\n      var targetDistance = offset.length()\n\n      // half of the fov is center to top of screen\n      targetDistance *= Math.tan((scope.object.fov / 2) * Math.PI / 180.0)\n\n      // we actually don't use screenWidth, since perspective camera is fixed to screen height\n      scope.panLeft(2 * deltaX * targetDistance / element.clientHeight)\n      scope.panUp(2 * deltaY * targetDistance / element.clientHeight)\n    } else if (scope.object instanceof THREE.OrthographicCamera) {\n      // orthographic\n      scope.panLeft(deltaX * (scope.object.right - scope.object.left) / element.clientWidth)\n      scope.panUp(deltaY * (scope.object.top - scope.object.bottom) / element.clientHeight)\n    } else {\n      // camera neither orthographic or perspective\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.')\n    }\n  }\n\n  this.momentum = function () {\n    if (!momentumOn) return\n\n    if (Math.abs(momentumLeft) < MEPS && Math.abs(momentumUp) < MEPS) {\n      momentumOn = false\n      return\n    }\n\n    momentumUp *= this.momentumDampingFactor\n    momentumLeft *= this.momentumDampingFactor\n\n    thetaDelta -= this.momentumScalingFactor * momentumLeft\n    phiDelta -= this.momentumScalingFactor * momentumUp\n  }\n\n  this.dollyIn = function (dollyScale) {\n    if (dollyScale === undefined) {\n      dollyScale = getZoomScale()\n    }\n\n    if (scope.object instanceof THREE.PerspectiveCamera) {\n      scale /= dollyScale\n    } else if (scope.object instanceof THREE.OrthographicCamera) {\n      scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom * dollyScale))\n      scope.object.updateProjectionMatrix()\n      scope.dispatchEvent(changeEvent)\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.')\n    }\n  }\n\n  this.dollyOut = function (dollyScale) {\n    if (dollyScale === undefined) {\n      dollyScale = getZoomScale()\n    }\n\n    if (scope.object instanceof THREE.PerspectiveCamera) {\n      scale *= dollyScale\n    } else if (scope.object instanceof THREE.OrthographicCamera) {\n      scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom / dollyScale))\n      scope.object.updateProjectionMatrix()\n      scope.dispatchEvent(changeEvent)\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.')\n    }\n  }\n\n  this.update = function (ignoreUpdate) {\n    var position = this.object.position\n\n    offset.copy(position).sub(this.target)\n\n    // rotate offset to \"y-axis-is-up\" space\n    offset.applyQuaternion(quat)\n\n    // angle from z-axis around y-axis\n\n    theta = Math.atan2(offset.x, offset.z)\n\n    // angle from y-axis\n\n    phi = Math.atan2(Math.sqrt(offset.x * offset.x + offset.z * offset.z), offset.y)\n\n    if (this.autoRotate && state === STATE.NONE) {\n      this.rotateLeft(getAutoRotationAngle())\n    }\n\n    this.momentum()\n\n    theta += thetaDelta\n    phi += phiDelta\n\n    // restrict theta to be between desired limits\n    theta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, theta))\n\n    // restrict phi to be between desired limits\n    phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, phi))\n\n    // restrict phi to be betwee EPS and PI-EPS\n    phi = Math.max(EPS, Math.min(Math.PI - EPS, phi))\n\n    var radius = offset.length() * scale\n\n    // restrict radius to be between desired limits\n    radius = Math.max(this.minDistance, Math.min(this.maxDistance, radius))\n\n    // move target to panned location\n    this.target.add(pan)\n\n    offset.x = radius * Math.sin(phi) * Math.sin(theta)\n    offset.y = radius * Math.cos(phi)\n    offset.z = radius * Math.sin(phi) * Math.cos(theta)\n\n    // rotate offset back to \"camera-up-vector-is-up\" space\n    offset.applyQuaternion(quatInverse)\n\n    position.copy(this.target).add(offset)\n\n    this.object.lookAt(this.target)\n\n    thetaDelta = 0\n    phiDelta = 0\n    scale = 1\n    pan.set(0, 0, 0)\n\n    // update condition is:\n    // min(camera displacement, camera rotation in radians)^2 > EPS\n    // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n    if (lastPosition.distanceToSquared(this.object.position) > EPS ||\n\t\t    8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS) {\n      ignoreUpdate !== true && this.dispatchEvent(changeEvent)\n\n      lastPosition.copy(this.object.position)\n      lastQuaternion.copy(this.object.quaternion)\n    }\n  }\n\n  this.reset = function () {\n    state = STATE.NONE\n\n    this.target.copy(this.target0)\n    this.object.position.copy(this.position0)\n    this.object.zoom = this.zoom0\n\n    this.object.updateProjectionMatrix()\n    this.dispatchEvent(changeEvent)\n\n    this.update()\n  }\n\n  this.getPolarAngle = function () {\n    return phi\n  }\n\n  this.getAzimuthalAngle = function () {\n    return theta\n  }\n\n  function getAutoRotationAngle () {\n    return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed\n  }\n\n  function getZoomScale () {\n    return Math.pow(0.95, scope.zoomSpeed)\n  }\n\n  function onMouseDown (event) {\n    momentumOn = false\n\n   \t\tmomentumLeft = momentumUp = 0\n\n    if (scope.enabled === false) return\n    event.preventDefault()\n\n    if (event.button === scope.mouseButtons.ORBIT) {\n      if (scope.noRotate === true) return\n\n      state = STATE.ROTATE\n\n      rotateStart.set(event.clientX, event.clientY)\n    } else if (event.button === scope.mouseButtons.ZOOM) {\n      if (scope.noZoom === true) return\n\n      state = STATE.DOLLY\n\n      dollyStart.set(event.clientX, event.clientY)\n    } else if (event.button === scope.mouseButtons.PAN) {\n      if (scope.noPan === true) return\n\n      state = STATE.PAN\n\n      panStart.set(event.clientX, event.clientY)\n    }\n\n    if (state !== STATE.NONE) {\n      document.addEventListener('mousemove', onMouseMove, false)\n      document.addEventListener('mouseup', onMouseUp, false)\n      scope.dispatchEvent(startEvent)\n    }\n\n    scope.update()\n  }\n\n  function onMouseMove (event) {\n    if (scope.enabled === false) return\n\n    event.preventDefault()\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement\n\n    if (state === STATE.ROTATE) {\n      if (scope.noRotate === true) return\n\n      rotateEnd.set(event.clientX, event.clientY)\n      rotateDelta.subVectors(rotateEnd, rotateStart)\n\n      // rotating across whole screen goes 360 degrees around\n      scope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed)\n\n      // rotating up and down along whole screen attempts to go 360, but limited to 180\n      scope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed)\n\n      rotateStart.copy(rotateEnd)\n\n      if (eventPrevious) {\n        momentumLeft = event.clientX - eventPrevious.clientX\n        momentumUp = event.clientY - eventPrevious.clientY\n      }\n\n      eventPrevious = event\n    } else if (state === STATE.DOLLY) {\n      if (scope.noZoom === true) return\n\n      dollyEnd.set(event.clientX, event.clientY)\n      dollyDelta.subVectors(dollyEnd, dollyStart)\n\n      if (dollyDelta.y > 0) {\n        scope.dollyIn()\n      } else if (dollyDelta.y < 0) {\n        scope.dollyOut()\n      }\n\n      dollyStart.copy(dollyEnd)\n    } else if (state === STATE.PAN) {\n      if (scope.noPan === true) return\n\n      panEnd.set(event.clientX, event.clientY)\n      panDelta.subVectors(panEnd, panStart)\n\n      scope.pan(panDelta.x, panDelta.y)\n\n      panStart.copy(panEnd)\n    }\n\n    if (state !== STATE.NONE) scope.update()\n  }\n\n  function onMouseUp (/* event */) {\n    momentumOn = true\n\n    eventPrevious = undefined\n\n    if (scope.enabled === false) return\n\n    document.removeEventListener('mousemove', onMouseMove, false)\n    document.removeEventListener('mouseup', onMouseUp, false)\n    scope.dispatchEvent(endEvent)\n    state = STATE.NONE\n  }\n\n  function onMouseWheel (event) {\n    if (scope.enabled === false || scope.noZoom === true || state !== STATE.NONE) return\n\n    event.preventDefault()\n    event.stopPropagation()\n\n    var delta = 0\n\n    if (event.wheelDelta !== undefined) { // WebKit / Opera / Explorer 9\n      delta = event.wheelDelta\n    } else if (event.detail !== undefined) { // Firefox\n      delta = -event.detail\n    }\n\n    if (delta > 0) {\n      // scope.dollyOut();\n      scope.object.fov = (scope.object.fov < scope.maxFov)\n        ? scope.object.fov + 1\n        : scope.maxFov\n      scope.object.updateProjectionMatrix()\n    } else if (delta < 0) {\n      // scope.dollyIn();\n      scope.object.fov = (scope.object.fov > scope.minFov)\n        ? scope.object.fov - 1\n        : scope.minFov\n      scope.object.updateProjectionMatrix()\n    }\n\n    scope.update()\n    scope.dispatchEvent(changeEvent)\n    scope.dispatchEvent(startEvent)\n    scope.dispatchEvent(endEvent)\n  }\n\n  function onKeyUp (event) {\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        keyUp = false\n        break\n\n      case scope.keys.BOTTOM:\n        keyBottom = false\n        break\n\n      case scope.keys.LEFT:\n        keyLeft = false\n        break\n\n      case scope.keys.RIGHT:\n        keyRight = false\n        break\n    }\n  }\n\n  function onKeyDown (event) {\n    if (scope.enabled === false || scope.noKeys === true || scope.noRotate === true) return\n\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        keyUp = true\n        break\n\n      case scope.keys.BOTTOM:\n        keyBottom = true\n        break\n\n      case scope.keys.LEFT:\n        keyLeft = true\n        break\n\n      case scope.keys.RIGHT:\n        keyRight = true\n        break\n    }\n\n    if (keyUp || keyBottom || keyLeft || keyRight) {\n      momentumOn = true\n\n      if (keyUp) momentumUp = -scope.rotateSpeed * scope.momentumKeydownFactor\n      if (keyBottom) momentumUp = scope.rotateSpeed * scope.momentumKeydownFactor\n      if (keyLeft) momentumLeft = -scope.rotateSpeed * scope.momentumKeydownFactor\n      if (keyRight) momentumLeft = scope.rotateSpeed * scope.momentumKeydownFactor\n    }\n  }\n\n  function touchstart (event) {\n    momentumOn = false\n\n    momentumLeft = momentumUp = 0\n\n    if (scope.enabled === false) return\n\n    switch (event.touches.length) {\n      case 1:\t// one-fingered touch: rotate\n\n        if (scope.noRotate === true) return\n\n        state = STATE.TOUCH_ROTATE\n\n        rotateStart.set(event.touches[ 0 ].pageX, event.touches[ 0 ].pageY)\n        break\n\n      case 2:\t// two-fingered touch: dolly\n\n        if (scope.noZoom === true) return\n\n        state = STATE.TOUCH_DOLLY\n\n        var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX\n        var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY\n        var distance = Math.sqrt(dx * dx + dy * dy)\n\n        break\n\n      case 3: // three-fingered touch: pan\n\n        if (scope.noPan === true) return\n\n        state = STATE.TOUCH_PAN\n\n        panStart.set(event.touches[ 0 ].pageX, event.touches[ 0 ].pageY)\n        break\n\n      default:\n\n        state = STATE.NONE\n    }\n\n    if (state !== STATE.NONE) scope.dispatchEvent(startEvent)\n  }\n\n  function touchmove (event) {\n    if (scope.enabled === false) return\n\n    event.preventDefault()\n    event.stopPropagation()\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement\n\n    switch (event.touches.length) {\n      case 1: // one-fingered touch: rotate\n\n        if (scope.noRotate === true) return\n        if (state !== STATE.TOUCH_ROTATE) return\n\n        rotateEnd.set(event.touches[ 0 ].pageX, event.touches[ 0 ].pageY)\n        rotateDelta.subVectors(rotateEnd, rotateStart)\n\n        // rotating across whole screen goes 360 degrees around\n        scope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed)\n        // rotating up and down along whole screen attempts to go 360, but limited to 180\n        scope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed)\n\n        rotateStart.copy(rotateEnd)\n\n        if (eventPrevious) {\n          momentumLeft = event.touches[ 0 ].pageX - eventPrevious.pageX\n          momentumUp = event.touches[ 0 ].pageY - eventPrevious.pageY\n        }\n\n        eventPrevious = {\n          pageX: event.touches[ 0 ].pageX,\n          pageY: event.touches[ 0 ].pageY\n        }\n\n        scope.update()\n        break\n\n      case 2: // two-fingered touch: dolly\n\n        if (scope.noZoom === true) return\n        if (state !== STATE.TOUCH_DOLLY) return\n\n        var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX\n        var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY\n        var distance = Math.sqrt(dx * dx + dy * dy)\n\n        if (event.scale < 1) {\n          scope.object.fov = (scope.object.fov < scope.maxFov)\n            ? scope.object.fov + 1\n            : scope.maxFov\n          scope.object.updateProjectionMatrix()\n        } else if (event.scale > 1) {\n          scope.object.fov = (scope.object.fov > scope.minFov)\n            ? scope.object.fov - 1\n            : scope.minFov\n          scope.object.updateProjectionMatrix()\n        }\n\n        scope.update()\n        scope.dispatchEvent(changeEvent)\n        break\n\n      case 3: // three-fingered touch: pan\n\n        if (scope.noPan === true) return\n        if (state !== STATE.TOUCH_PAN) return\n\n        panEnd.set(event.touches[ 0 ].pageX, event.touches[ 0 ].pageY)\n        panDelta.subVectors(panEnd, panStart)\n\n        scope.pan(panDelta.x, panDelta.y)\n\n        panStart.copy(panEnd)\n\n        scope.update()\n        break\n\n      default:\n\n        state = STATE.NONE\n    }\n  }\n\n  function touchend (/* event */) {\n    momentumOn = true\n\n    eventPrevious = undefined\n\n    if (scope.enabled === false) return\n\n    scope.dispatchEvent(endEvent)\n    state = STATE.NONE\n  }\n\n  // this.domElement.addEventListener( 'contextmenu', function ( event ) { event.preventDefault(); }, false );\n  this.domElement.addEventListener('mousedown', onMouseDown, false)\n  this.domElement.addEventListener('mousewheel', onMouseWheel, false)\n  this.domElement.addEventListener('DOMMouseScroll', onMouseWheel, false) // firefox\n\n  this.domElement.addEventListener('touchstart', touchstart, false)\n  this.domElement.addEventListener('touchend', touchend, false)\n  this.domElement.addEventListener('touchmove', touchmove, false)\n\n  window.addEventListener('keyup', onKeyUp, false)\n  window.addEventListener('keydown', onKeyDown, false)\n\n  // force an update at start\n  this.update()\n}\n\nTHREE.OrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype)\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls/**\n * @author richt / http://richt.me\n * @author WestLangley / http://github.com/WestLangley\n *\n * W3C Device Orientation control (http://w3c.github.io/deviceorientation/spec-source-orientation.html)\n */\n\nTHREE.DeviceOrientationControls = function (camera, domElement) {\n  var scope = this\n  var changeEvent = { type: 'change' }\n\n  var rotY = 0\n  var rotX = 0\n  var tempX = 0\n  var tempY = 0\n\n  this.camera = camera\n  this.camera.rotation.reorder('YXZ')\n  this.domElement = (domElement !== undefined) ? domElement : document\n\n  this.enabled = true\n\n  this.deviceOrientation = {}\n  this.screenOrientation = 0\n\n  this.alpha = 0\n  this.alphaOffsetAngle = 0\n\n  var onDeviceOrientationChangeEvent = function (event) {\n    scope.deviceOrientation = event\n  }\n\n  var onScreenOrientationChangeEvent = function () {\n    scope.screenOrientation = window.orientation || 0\n  }\n\n  var onTouchStartEvent = function (event) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    tempX = event.touches[ 0 ].pageX\n    tempY = event.touches[ 0 ].pageY\n  }\n\n  var onTouchMoveEvent = function (event) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    rotY += THREE.Math.degToRad((event.touches[ 0 ].pageX - tempX) / 4)\n    rotX += THREE.Math.degToRad((tempY - event.touches[ 0 ].pageY) / 4)\n\n    scope.updateAlphaOffsetAngle(rotY)\n\n    tempX = event.touches[ 0 ].pageX\n    tempY = event.touches[ 0 ].pageY\n  }\n\n  // The angles alpha, beta and gamma form a set of intrinsic Tait-Bryan angles of type Z-X'-Y''\n\n  var setCameraQuaternion = function (quaternion, alpha, beta, gamma, orient) {\n    var zee = new THREE.Vector3(0, 0, 1)\n\n    var euler = new THREE.Euler()\n\n    var q0 = new THREE.Quaternion()\n\n    var q1 = new THREE.Quaternion(-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5)) // - PI/2 around the x-axis\n\n    var vectorFingerY\n    var fingerQY = new THREE.Quaternion()\n    var fingerQX = new THREE.Quaternion()\n\n    if (scope.screenOrientation == 0) {\n      vectorFingerY = new THREE.Vector3(1, 0, 0)\n      fingerQY.setFromAxisAngle(vectorFingerY, -rotX)\n    } else if (scope.screenOrientation == 180) {\n      vectorFingerY = new THREE.Vector3(1, 0, 0)\n      fingerQY.setFromAxisAngle(vectorFingerY, rotX)\n    } else if (scope.screenOrientation == 90) {\n      vectorFingerY = new THREE.Vector3(0, 1, 0)\n      fingerQY.setFromAxisAngle(vectorFingerY, rotX)\n    } else if (scope.screenOrientation == -90) {\n      vectorFingerY = new THREE.Vector3(0, 1, 0)\n      fingerQY.setFromAxisAngle(vectorFingerY, -rotX)\n    }\n\n    q1.multiply(fingerQY)\n    q1.multiply(fingerQX)\n\n    euler.set(beta, alpha, -gamma, 'YXZ') // 'ZXY' for the device, but 'YXZ' for us\n\n    quaternion.setFromEuler(euler) // orient the device\n\n    quaternion.multiply(q1) // camera looks out the back of the device, not the top\n\n    quaternion.multiply(q0.setFromAxisAngle(zee, -orient)) // adjust for screen orientation\n  }\n\n  this.connect = function () {\n    onScreenOrientationChangeEvent() // run once on load\n\n    window.addEventListener('orientationchange', onScreenOrientationChangeEvent, false)\n    window.addEventListener('deviceorientation', onDeviceOrientationChangeEvent, false)\n    window.addEventListener('deviceorientation', this.update.bind(this), false)\n\n    scope.domElement.addEventListener('touchstart', onTouchStartEvent, false)\n    scope.domElement.addEventListener('touchmove', onTouchMoveEvent, false)\n\n    scope.enabled = true\n  }\n\n  this.disconnect = function () {\n    window.removeEventListener('orientationchange', onScreenOrientationChangeEvent, false)\n    window.removeEventListener('deviceorientation', onDeviceOrientationChangeEvent, false)\n    window.removeEventListener('deviceorientation', this.update.bind(this), false)\n\n    scope.domElement.removeEventListener('touchstart', onTouchStartEvent, false)\n    scope.domElement.removeEventListener('touchmove', onTouchMoveEvent, false)\n\n    scope.enabled = false\n  }\n\n  this.update = function (ignoreUpdate) {\n    if (scope.enabled === false) return\n\n    var alpha = scope.deviceOrientation.alpha ? THREE.Math.degToRad(scope.deviceOrientation.alpha) + this.alphaOffsetAngle : 0 // Z\n    var beta = scope.deviceOrientation.beta ? THREE.Math.degToRad(scope.deviceOrientation.beta) : 0 // X'\n    var gamma = scope.deviceOrientation.gamma ? THREE.Math.degToRad(scope.deviceOrientation.gamma) : 0 // Y''\n    var orient = scope.screenOrientation ? THREE.Math.degToRad(scope.screenOrientation) : 0 // O\n\n    setCameraQuaternion(scope.camera.quaternion, alpha, beta, gamma, orient)\n    this.alpha = alpha\n\n    ignoreUpdate !== true && this.dispatchEvent(changeEvent)\n  }\n\n  this.updateAlphaOffsetAngle = function (angle) {\n    this.alphaOffsetAngle = angle\n    this.update()\n  }\n\n  this.dispose = function () {\n    this.disconnect()\n  }\n\n  this.connect()\n}\n\nTHREE.DeviceOrientationControls.prototype = Object.create(THREE.EventDispatcher.prototype)\nTHREE.DeviceOrientationControls.prototype.constructor = THREE.DeviceOrientationControls /** The Bend modifier lets you bend the current selection up to 90 degrees about a single axis,\n * producing a uniform bend in an object's geometry.\n * You can control the angle and direction of the bend on any of three axes.\n * The geometry has to have rather large number of polygons!\n * options:\n * \t direction - deformation direction (in local coordinates!).\n * \t axis - deformation axis (in local coordinates!). Vector of direction and axis are perpendicular.\n * \t angle - deformation angle.\n * @author Vildanov Almaz / alvild@gmail.com\n * The algorithm of a bend is based on the chain line cosh: y = 1/b * cosh(b*x) - 1/b. It can be used only in three.js.\n */\n\nTHREE.BendModifier = function () {\n\n}\n\nTHREE.BendModifier.prototype = {\n\n  constructor: THREE.BendModifier,\n\n  set: function (direction, axis, angle) {\n    this.direction = new THREE.Vector3(); this.direction.copy(direction)\n    this.axis = new THREE.Vector3(); this.axis.copy(axis)\n    this.angle = angle\n    return this\n  },\n\n  _sign: function (a) {\n    return a < 0 ? -1 : a > 0 ? 1 : 0\n  },\n\n  _cosh: function (x) {\n    return (Math.exp(x) + Math.exp(-x)) / 2\n  },\n\n  _sinhInverse: function (x) {\n    return Math.log(Math.abs(x) + Math.sqrt(x * x + 1))\n  },\n\n  modify: function (geometry) {\n    var thirdAxis = new THREE.Vector3(); thirdAxis.crossVectors(this.direction, this.axis)\n\n    // P - matrices of the change-of-coordinates\n    var P = new THREE.Matrix4()\n    P.set(thirdAxis.x, thirdAxis.y, thirdAxis.z, 0,\n      this.direction.x, this.direction.y, this.direction.z, 0,\n      this.axis.x, this.axis.y, this.axis.z, 0,\n      0, 0, 0, 1).transpose()\n\n    var InverseP = new THREE.Matrix4().getInverse(P)\n    var newVertices = []; var oldVertices = []; var anglesBetweenOldandNewVertices = []\n\n    var meshGeometryBoundingBoxMaxx = 0; var meshGeometryBoundingBoxMinx = 0\n    var meshGeometryBoundingBoxMaxy = 0; var meshGeometryBoundingBoxMiny = 0\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      newVertices[i] = new THREE.Vector3(); newVertices[i].copy(geometry.vertices[i]).applyMatrix4(InverseP)\n      if (newVertices[i].x > meshGeometryBoundingBoxMaxx) { meshGeometryBoundingBoxMaxx = newVertices[i].x }\n      if (newVertices[i].x < meshGeometryBoundingBoxMinx) { meshGeometryBoundingBoxMinx = newVertices[i].x }\n      if (newVertices[i].y > meshGeometryBoundingBoxMaxy) { meshGeometryBoundingBoxMaxy = newVertices[i].y }\n      if (newVertices[i].y < meshGeometryBoundingBoxMiny) { meshGeometryBoundingBoxMiny = newVertices[i].y }\n    }\n\n    var meshWidthold = meshGeometryBoundingBoxMaxx - meshGeometryBoundingBoxMinx\n    var meshDepth = meshGeometryBoundingBoxMaxy - meshGeometryBoundingBoxMiny\n    var ParamB = 2 * this._sinhInverse(Math.tan(this.angle)) / meshWidthold\n    var oldMiddlex = (meshGeometryBoundingBoxMaxx + meshGeometryBoundingBoxMinx) / 2\n    var oldMiddley = (meshGeometryBoundingBoxMaxy + meshGeometryBoundingBoxMiny) / 2\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      oldVertices[i] = new THREE.Vector3(); oldVertices[i].copy(newVertices[i])\n      newVertices[i].x = this._sign(newVertices[i].x - oldMiddlex) * 1 / ParamB * this._sinhInverse((newVertices[i].x - oldMiddlex) * ParamB)\n    }\n\n    var meshWidth = 2 / ParamB * this._sinhInverse(meshWidthold / 2 * ParamB)\n\n    var NewParamB = 2 * this._sinhInverse(Math.tan(this.angle)) / meshWidth\n\n    var rightEdgePos = new THREE.Vector3(meshWidth / 2, -meshDepth / 2, 0)\n    rightEdgePos.y = 1 / NewParamB * this._cosh(NewParamB * rightEdgePos.x) - 1 / NewParamB - meshDepth / 2\n\n    var bendCenter = new THREE.Vector3(0, rightEdgePos.y + rightEdgePos.x / Math.tan(this.angle), 0)\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      var x0 = this._sign(oldVertices[i].x - oldMiddlex) * 1 / ParamB * this._sinhInverse((oldVertices[i].x - oldMiddlex) * ParamB)\n      var y0 = 1 / NewParamB * this._cosh(NewParamB * x0) - 1 / NewParamB\n\n      var k = new THREE.Vector3(bendCenter.x - x0, bendCenter.y - (y0 - meshDepth / 2), bendCenter.z).normalize()\n\n      var Q = new THREE.Vector3()\n      Q.addVectors(new THREE.Vector3(x0, y0 - meshDepth / 2, oldVertices[i].z), k.multiplyScalar(oldVertices[i].y + meshDepth / 2))\n      newVertices[i].x = Q.x; newVertices[i].y = Q.y\n    }\n\n    var middle = oldMiddlex * meshWidth / meshWidthold\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      var O = new THREE.Vector3(oldMiddlex, oldMiddley, oldVertices[i].z)\n      var p = new THREE.Vector3(); p.subVectors(oldVertices[i], O)\n      var q = new THREE.Vector3(); q.subVectors(newVertices[i], O)\n\n      anglesBetweenOldandNewVertices[i] = Math.acos(1 / this._cosh(ParamB * newVertices[i].x)) * this._sign(newVertices[i].x)\n\n      newVertices[i].x = newVertices[i].x + middle\n      geometry.vertices[i].copy(newVertices[i].applyMatrix4(P))\n    }\n\n    geometry.computeFaceNormals()\n    geometry.verticesNeedUpdate = true\n    geometry.normalsNeedUpdate = true\n\n    // compute Vertex Normals\n    var fvNames = [ 'a', 'b', 'c', 'd' ]\n\n    for (var f = 0, fl = geometry.faces.length; f < fl; f++) {\n      var face = geometry.faces[ f ]\n      if (face.vertexNormals === undefined) {\n        continue\n      }\n      for (var v = 0, vl = face.vertexNormals.length; v < vl; v++) {\n        var angle = anglesBetweenOldandNewVertices[ face[ fvNames[ v ] ] ]\n        var x = this.axis.x,\n          y = this.axis.y,\n          z = this.axis.z\n\n        var rotateMatrix = new THREE.Matrix3()\n        rotateMatrix.set(Math.cos(angle) + (1 - Math.cos(angle)) * x * x, (1 - Math.cos(angle)) * x * y - Math.sin(angle) * z, (1 - Math.cos(angle)) * x * z + Math.sin(angle) * y,\n          (1 - Math.cos(angle)) * y * x + Math.sin(angle) * z, Math.cos(angle) + (1 - Math.cos(angle)) * y * y, (1 - Math.cos(angle)) * y * z - Math.sin(angle) * x,\n          (1 - Math.cos(angle)) * z * x - Math.sin(angle) * y, (1 - Math.cos(angle)) * z * y + Math.sin(angle) * x, Math.cos(angle) + (1 - Math.cos(angle)) * z * z)\n\n        face.vertexNormals[ v ].applyMatrix3(rotateMatrix)\n      }\n    }\n    // end compute Vertex Normals\n\n    return this\n  }\n}/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.CardboardEffect = function (renderer) {\n  var _camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1)\n\n  var _scene = new THREE.Scene()\n\n  var _stereo = new THREE.StereoCamera()\n  _stereo.aspect = 0.5\n\n  var _params = { minFilter: THREE.LinearFilter, magFilter: THREE.NearestFilter, format: THREE.RGBAFormat }\n\n  var _renderTarget = new THREE.WebGLRenderTarget(512, 512, _params)\n  _renderTarget.scissorTest = true\n  _renderTarget.texture.generateMipmaps = false\n\n  // Distortion Mesh ported from:\n  // https://github.com/borismus/webvr-boilerplate/blob/master/src/distortion/barrel-distortion-fragment.js\n\n  var distortion = new THREE.Vector2(0.441, 0.156)\n\n  var geometry = new THREE.PlaneBufferGeometry(1, 1, 10, 20).removeAttribute('normal').toNonIndexed()\n\n  var positions = geometry.attributes.position.array\n  var uvs = geometry.attributes.uv.array\n\n  // duplicate\n  geometry.attributes.position.count *= 2\n  geometry.attributes.uv.count *= 2\n\n  var positions2 = new Float32Array(positions.length * 2)\n  positions2.set(positions)\n  positions2.set(positions, positions.length)\n\n  var uvs2 = new Float32Array(uvs.length * 2)\n  uvs2.set(uvs)\n  uvs2.set(uvs, uvs.length)\n\n  var vector = new THREE.Vector2()\n  var length = positions.length / 3\n\n  for (var i = 0, l = positions2.length / 3; i < l; i++) {\n    vector.x = positions2[ i * 3 + 0 ]\n    vector.y = positions2[ i * 3 + 1 ]\n\n    var dot = vector.dot(vector)\n    var scalar = 1.5 + (distortion.x + distortion.y * dot) * dot\n\n    var offset = i < length ? 0 : 1\n\n    positions2[ i * 3 + 0 ] = (vector.x / scalar) * 1.5 - 0.5 + offset\n    positions2[ i * 3 + 1 ] = (vector.y / scalar) * 3.0\n\n    uvs2[ i * 2 ] = (uvs2[ i * 2 ] + offset) * 0.5\n  }\n\n  geometry.attributes.position.array = positions2\n  geometry.attributes.uv.array = uvs2\n\n  //\n\n  // var material = new THREE.MeshBasicMaterial( { wireframe: true } );\n  var material = new THREE.MeshBasicMaterial({ map: _renderTarget.texture })\n  var mesh = new THREE.Mesh(geometry, material)\n  _scene.add(mesh)\n\n  //\n\n  this.setSize = function (width, height) {\n    renderer.setSize(width, height)\n\n    var pixelRatio = renderer.getPixelRatio()\n\n    _renderTarget.setSize(width * pixelRatio, height * pixelRatio)\n  }\n\n  this.render = function (scene, camera) {\n    scene.updateMatrixWorld()\n\n    if (camera.parent === null) camera.updateMatrixWorld()\n\n    _stereo.update(camera)\n\n    var width = _renderTarget.width / 2\n    var height = _renderTarget.height\n\n    _renderTarget.scissor.set(0, 0, width, height)\n    _renderTarget.viewport.set(0, 0, width, height)\n    renderer.render(scene, _stereo.cameraL, _renderTarget)\n\n    _renderTarget.scissor.set(width, 0, width, height)\n    _renderTarget.viewport.set(width, 0, width, height)\n    renderer.render(scene, _stereo.cameraR, _renderTarget)\n\n    renderer.render(_scene, _camera)\n  }\n}/**\n * @author alteredq / http://alteredqualia.com/\n * @authod mrdoob / http://mrdoob.com/\n * @authod arodic / http://aleksandarrodic.com/\n * @authod fonserbc / http://fonserbc.github.io/\n*/\n\nTHREE.StereoEffect = function (renderer) {\n  var _stereo = new THREE.StereoCamera()\n  _stereo.aspect = 0.5\n\n  this.setEyeSeparation = function (eyeSep) {\n    _stereo.eyeSep = eyeSep\n  }\n\n  this.setSize = function (width, height) {\n    renderer.setSize(width, height)\n  }\n\n  this.render = function (scene, camera) {\n    scene.updateMatrixWorld()\n\n    if (camera.parent === null) camera.updateMatrixWorld()\n\n    _stereo.update(camera)\n\n    var size = renderer.getSize()\n\n    if (renderer.autoClear) renderer.clear()\n    renderer.setScissorTest(true)\n\n    renderer.setScissor(0, 0, size.width / 2, size.height)\n    renderer.setViewport(0, 0, size.width / 2, size.height)\n    renderer.render(scene, _stereo.cameraL)\n\n    renderer.setScissor(size.width / 2, 0, size.width / 2, size.height)\n    renderer.setViewport(size.width / 2, 0, size.width / 2, size.height)\n    renderer.render(scene, _stereo.cameraR)\n\n    renderer.setScissorTest(false)\n  }\n}\nvar GSVPANO = GSVPANO || {}\nGSVPANO.PanoLoader = function (parameters) {\n  'use strict'\n\n  var _parameters = parameters || {},\n    _location,\n    _zoom,\n    _panoId,\n    _panoClient = new google.maps.StreetViewService(),\n    _count = 0,\n    _total = 0,\n    _canvas = [],\n    _ctx = [],\n    _wc = 0,\n    _hc = 0,\n    result = null,\n    rotation = 0,\n    copyright = '',\n    onSizeChange = null,\n    onPanoramaLoad = null\n\n  var levelsW = [ 1, 2, 4, 7, 13, 26 ],\n    levelsH = [ 1, 1, 2, 4, 7, 13 ]\n\n  var widths = [ 416, 832, 1664, 3328, 6656, 13312 ],\n    heights = [ 416, 416, 832, 1664, 3328, 6656 ]\n\n  var gl = null\n  try {\n    var canvas = document.createElement('canvas')\n\t    gl = canvas.getContext('experimental-webgl')\n\t    if (gl == null) {\n\t        gl = canvas.getContext('webgl')\n\t    }\n  } catch (error) {}\n\n  var maxW = 1024,\n    maxH = 1024\n\n  if (gl) {\n    var maxTexSize = Math.max(gl.getParameter(gl.MAX_TEXTURE_SIZE), 6656)\n    // alert( 'MAX_TEXTURE_SIZE ' + maxTexSize );\n    maxW = maxH = maxTexSize\n  }\n\n  this.setProgress = function (loaded, total) {\n    if (this.onProgress) {\n      this.onProgress({loaded: loaded, total: total})\n    }\n  }\n\n  this.throwError = function (message) {\n    if (this.onError) {\n      this.onError(message)\n    } else {\n      console.error(message)\n    }\n  }\n\n  this.adaptTextureToZoom = function () {\n    var w = levelsW[ _zoom ] * 416,\n      h = levelsH[ _zoom ] * 416\n\n    w = widths[ _zoom ]\n    h = heights[ _zoom ]\n\n    _wc = Math.ceil(w / maxW)\n    _hc = Math.ceil(h / maxH)\n\n    _canvas = []; _ctx = []\n\n    var ptr = 0\n    for (var y = 0; y < _hc; y++) {\n      for (var x = 0; x < _wc; x++) {\n        var c = document.createElement('canvas')\n        if (x < (_wc - 1)) c.width = maxW; else c.width = w - (maxW * x)\n        if (y < (_hc - 1)) c.height = maxH; else c.height = h - (maxH * y)\n        _canvas.push(c)\n        _ctx.push(c.getContext('2d'))\n        ptr++\n      }\n    }\n  }\n\n  this.composeFromTile = function (x, y, texture) {\n    x *= 512\n    y *= 512\n    var px = Math.floor(x / maxW), py = Math.floor(y / maxH)\n\n    x -= px * maxW\n    y -= py * maxH\n\n    _ctx[ py * _wc + px ].drawImage(texture, 0, 0, texture.width, texture.height, x, y, 512, 512)\n    this.progress()\n  }\n\n  this.progress = function () {\n    _count++\n\n    var p = Math.round(_count * 100 / _total)\n    this.setProgress(_count, _total)\n\n    if (_count === _total) {\n      this.canvas = _canvas\n      this.panoId = _panoId\n      this.zoom = _zoom\n      if (this.onPanoramaLoad) {\n        this.onPanoramaLoad(_canvas[0])\n      }\n    }\n  }\n\n  this.loadFromId = function (id) {\n    _panoId = id\n    this.composePanorama()\n  }\n\n  this.composePanorama = function () {\n    this.setProgress(0, 1)\n\n    var w = levelsW[ _zoom ],\n      h = levelsH[ _zoom ],\n      self = this,\n      url,\n      x,\n      y\n\n    _count = 0\n    _total = w * h\n\n    var self = this\n    for (var y = 0; y < h; y++) {\n      for (var x = 0; x < w; x++) {\n        var url = 'https://geo0.ggpht.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=tile&zoom=' + _zoom + '&x=' + x + '&y=' + y + '&panoid=' + _panoId + '&nbt&fover=2';\n        (function (x, y) {\n          if (_parameters.useWebGL) {\n            var texture = THREE.ImageUtils.loadTexture(url, null, function () {\n              self.composeFromTile(x, y, texture)\n            })\n          } else {\n            var img = new Image()\n            img.addEventListener('load', function () {\n              self.composeFromTile(x, y, this)\n            })\n            img.crossOrigin = ''\n            img.src = url\n          }\n        })(x, y)\n      }\n    }\n  }\n\n  this.load = function (panoid) {\n    this.loadPano(panoid)\n  }\n\n  this.loadPano = function (id) {\n    var self = this\n    _panoClient.getPanoramaById(id, function (result, status) {\n      if (status === google.maps.StreetViewStatus.OK) {\n        self.result = result\n        if (self.onPanoramaData) self.onPanoramaData(result)\n        // var h = google.maps.geometry.spherical.computeHeading(location, result.location.latLng);\n        // rotation = (result.tiles.centerHeading - h) * Math.PI / 180.0;\n        copyright = result.copyright\n        self.copyright = result.copyright\n        _panoId = result.location.pano\n        self.location = location\n        self.composePanorama()\n      } else {\n        if (self.onNoPanoramaData) self.onNoPanoramaData(status)\n        self.throwError('Could not retrieve panorama for the following reason: ' + status)\n      }\n    })\n  }\n\n  this.setZoom = function (z) {\n    _zoom = z\n    this.adaptTextureToZoom()\n  }\n\n  this.setZoom(_parameters.zoom || 1)\n}; (function () {\n  'use strict'\n\n  /**\n     * Data Image Source\n     * @type {String}\n     */\n  PANOLENS.DataImageSource = 'https://pchen66.github.io/Panolens/asset/icon/'\n\n  /**\n     * Data Image\n     * @memberOf PANOLENS\n     * @enum {string}\n     */\n  PANOLENS.DataImage = {\n    Info: PANOLENS.DataImageSource + 'information.png',\n    Arrow: PANOLENS.DataImageSource + 'arrow-up.png',\n    FullscreenEnter: PANOLENS.DataImageSource + 'fullscreen.png',\n    FullscreenLeave: PANOLENS.DataImageSource + 'fullscreen-exit.png',\n    VideoPlay: PANOLENS.DataImageSource + 'video-play.png',\n    VideoPause: PANOLENS.DataImageSource + 'pause.png',\n    WhiteTile: PANOLENS.DataImageSource + 'tiles.png',\n    ReticleIdle: PANOLENS.DataImageSource + 'reticle-idle.png',\n    Setting: PANOLENS.DataImageSource + 'setting.png',\n    ChevronRight: PANOLENS.DataImageSource + 'chevron-right.png',\n    Check: PANOLENS.DataImageSource + 'check.png',\n    ViewIndicator: PANOLENS.DataImageSource + 'view-indicator.svg',\n    ReticleDwell: PANOLENS.DataImageSource + 'reticle-animation.png'\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Control Index Enum\n\t * @memberOf PANOLENS\n\t * @enum {number}\n\t */\n\n  PANOLENS.Controls = {\n\n    ORBIT: 0,\n\n    DEVICEORIENTATION: 1\n\n  }\n\n  /**\n\t * Effect Mode Enum\n\t * @memberOf PANOLENS\n\t * @enum {number}\n\t */\n  PANOLENS.Modes = {\n\n    /** Unknown */\n    UNKNOWN: 0,\n\n    /** Normal */\n    NORMAL: 1,\n\n    /** Google Cardboard */\n    CARDBOARD: 2,\n\n    /** Stereoscopic **/\n    STEREO: 3\n\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Utility\n\t * @namespace PANOLENS.Utils\n\t * @memberOf PANOLENS\n\t * @type {object}\n\t */\n  PANOLENS.Utils = {}\n\n  PANOLENS.Utils.checkTouchSupported = function () {\n    return window ? 'ontouchstart' in window || window.navigator.msMaxTouchPoints : false\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Image loader with progress based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/ImageLoader.js}\n\t * @memberOf PANOLENS.Utils\n\t * @namespace\n\t */\n  PANOLENS.Utils.ImageLoader = {}\n\n  /**\n\t * Load an image with XMLHttpRequest to provide progress checking\n\t * @param  {string}   url        - An image url\n\t * @param  {function} onLoad     - On load callback\n\t * @param  {function} onProgress - In progress callback\n\t * @param  {function} onError    - On error callback\n\t * @return {HTMLImageElement}    - DOM image element\n\t */\n\n  PANOLENS.Utils.ImageLoader.load = function (url, onLoad, onProgress, onError) {\n    var cached, request, arrayBufferView, blob, urlCreator, image, reference\n\n    // Reference key\n    for (var iconName in PANOLENS.DataImage) {\n      if (PANOLENS.DataImage.hasOwnProperty(iconName) &&\n\t\t\t\turl === PANOLENS.DataImage[ iconName ]) {\n        reference = iconName\n      }\n    }\n\n    // Cached\n    cached = THREE.Cache.get(reference || url)\n\n    if (cached !== undefined) {\n      if (onLoad) {\n        setTimeout(function () {\n          if (onProgress) {\n            onProgress({ loaded: 1, total: 1 })\n          }\n\n          onLoad(cached)\n        }, 0)\n      }\n\n      return cached\n    }\n\n    // Construct a new XMLHttpRequest\n    urlCreator = window.URL || window.webkitURL\n    image = document.createElementNS('http://www.w3.org/1999/xhtml', 'img')\n\n    // Add to cache\n    THREE.Cache.add(reference || url, image)\n\n    function onImageLoaded () {\n      urlCreator.revokeObjectURL(image.src)\n      onLoad && onLoad(image)\n    }\n\n    if (url.indexOf('data:') === 0) {\n      image.addEventListener('load', onImageLoaded, false)\n      image.src = url\n      return image\n    }\n\n    image.crossOrigin = this.crossOrigin !== undefined ? this.crossOrigin : ''\n\n    request = new XMLHttpRequest()\n    request.open('GET', url, true)\n    request.responseType = 'arraybuffer'\n    request.onprogress = function (event) {\n\t\t    if (event.lengthComputable) {\n\t\t      onProgress && onProgress({ loaded: event.loaded, total: event.total })\n\t\t    }\n    }\n    request.onloadend = function (event) {\n\t\t    arrayBufferView = new Uint8Array(this.response)\n\t\t    blob = new Blob([ arrayBufferView ])\n\n\t\t    image.addEventListener('load', onImageLoaded, false)\n      image.src = urlCreator.createObjectURL(blob)\n    }\n\n    request.send(null)\n  }\n\n  // Enable cache\n  THREE.Cache.enabled = true\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Texture loader based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/TextureLoader.js}\n\t * @memberOf PANOLENS.Utils\n\t * @namespace\n\t */\n  PANOLENS.Utils.TextureLoader = {}\n\n  /**\n\t * Load image texture\n\t * @param  {string}   url        - An image url\n\t * @param  {function} onLoad     - On load callback\n\t * @param  {function} onProgress - In progress callback\n\t * @param  {function} onError    - On error callback\n\t * @return {THREE.Texture}   \t - Image texture\n\t */\n  PANOLENS.Utils.TextureLoader.load = function (url, onLoad, onProgress, onError) {\n    var texture = new THREE.Texture()\n\n    PANOLENS.Utils.ImageLoader.load(url, function (image) {\n      texture.image = image\n      texture.needsUpdate = true\n\n      onLoad && onLoad(texture)\n    }, onProgress, onError)\n\n    return texture\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Cube Texture Loader based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/CubeTextureLoader.js}\n\t * @memberOf PANOLENS.Utils\n\t * @namespace\n\t */\n  PANOLENS.Utils.CubeTextureLoader = {}\n\n  /**\n\t * Load 6 images as a cube texture\n\t * @param  {array}   urls        - Array with 6 image urls\n\t * @param  {function} onLoad     - On load callback\n\t * @param  {function} onProgress - In progress callback\n\t * @param  {function} onError    - On error callback\n\t * @return {THREE.CubeTexture}   - Cube texture\n\t */\n  PANOLENS.Utils.CubeTextureLoader.load = function (urls, onLoad, onProgress, onError) {\n    var texture, loaded, progress, all, loadings\n\n    texture = new THREE.CubeTexture([])\n\n    loaded = 0\n    progress = {}\n    all = {}\n\n    urls.map(function (url, index) {\n      PANOLENS.Utils.ImageLoader.load(url, function (image) {\n        texture.images[ index ] = image\n\n        loaded++\n\n        if (loaded === 6) {\n          texture.needsUpdate = true\n\n          onLoad && onLoad(texture)\n        }\n      }, function (event) {\n        progress[ index ] = { loaded: event.loaded, total: event.total }\n\n        all.loaded = 0\n        all.total = 0\n        loadings = 0\n\n        for (var i in progress) {\n          loadings++\n          all.loaded += progress[ i ].loaded\n          all.total += progress[ i ].total\n        }\n\n        if (loadings < 6) {\n          all.total = all.total / loadings * 6\n        }\n\n        onProgress && onProgress(all)\n      }, onError)\n    })\n\n    return texture\n  }\n})()/**\n * Stereographic projection shader\n * based on http://notlion.github.io/streetview-stereographic\n * @author pchen66\n */\n\nPANOLENS.StereographicShader = {\n\n  uniforms: {\n\n    'tDiffuse': { value: new THREE.Texture() },\n    'resolution': { value: 1.0 },\n    'transform': { value: new THREE.Matrix4() },\n    'zoom': { value: 1.0 }\n\n  },\n\n  vertexShader: [\n\n    'varying vec2 vUv;',\n\n    'void main() {',\n\n    'vUv = uv;',\n    'gl_Position = vec4( position, 1.0 );',\n\n    '}'\n\n  ].join('\\n'),\n\n  fragmentShader: [\n\n    'uniform sampler2D tDiffuse;',\n    'uniform float resolution;',\n    'uniform mat4 transform;',\n    'uniform float zoom;',\n\n    'varying vec2 vUv;',\n\n    'const float PI = 3.141592653589793;',\n\n    'void main(){',\n\n    'vec2 position = -1.0 +  2.0 * vUv;',\n\n    'position *= vec2( zoom * resolution, zoom * 0.5 );',\n\n    'float x2y2 = position.x * position.x + position.y * position.y;',\n    'vec3 sphere_pnt = vec3( 2. * position, x2y2 - 1. ) / ( x2y2 + 1. );',\n\n    'sphere_pnt = vec3( transform * vec4( sphere_pnt, 1.0 ) );',\n\n    'vec2 sampleUV = vec2(',\n    '(atan(sphere_pnt.y, sphere_pnt.x) / PI + 1.0) * 0.5,',\n    '(asin(sphere_pnt.z) / PI + 0.5)',\n    ');',\n\n    'gl_FragColor = texture2D( tDiffuse, sampleUV );',\n\n    '}'\n\n  ].join('\\n')\n\n}; (function () {\n  'use strict'\n\n  /**\n\t * Skeleton panorama derived from THREE.Mesh\n\t * @constructor\n\t * @param {THREE.Geometry} geometry - The geometry for this panorama\n\t * @param {THREE.Material} material - The material for this panorama\n\t */\n  PANOLENS.Panorama = function (geometry, material) {\n    THREE.Mesh.call(this)\n\n    this.type = 'panorama'\n\n    this.ImageQualityLow = 1\n    this.ImageQualityFair = 2\n    this.ImageQualityMedium = 3\n    this.ImageQualityHigh = 4\n    this.ImageQualitySuperHigh = 5\n\n    this.animationDuration = 1000\n\n    this.defaultInfospotSize = 350\n\n    this.container = undefined\n\n    this.loaded = false\n\n    this.linkedSpots = []\n\n    this.isInfospotVisible = false\n\n    this.linkingImageURL = undefined\n    this.linkingImageScale = undefined\n\n    this.geometry = geometry\n\n    this.material = material\n    this.material.side = THREE.DoubleSide\n    this.material.visible = false\n\n    this.scale.x *= -1\n\n    this.infospotAnimation = new TWEEN.Tween(this).to({}, this.animationDuration / 2)\n\n    this.addEventListener('load', this.fadeIn.bind(this))\n    this.addEventListener('panolens-container', this.setContainer.bind(this))\n    this.addEventListener('click', this.onClick.bind(this))\n\n    this.setupTransitions()\n  }\n\n  PANOLENS.Panorama.prototype = Object.create(THREE.Mesh.prototype)\n\n  PANOLENS.Panorama.prototype.constructor = PANOLENS.Panorama\n\n  /**\n\t * Adding an object\n\t * To counter the scale.x = -1, it will automatically add an\n\t * empty object with inverted scale on x\n\t * @param {THREE.Object3D} object - The object to be added\n\t */\n  PANOLENS.Panorama.prototype.add = function (object) {\n    var scope, invertedObject\n\n    scope = this\n\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[ i ])\n      }\n\n      return this\n    }\n\n    // In case of infospots\n    if (object instanceof PANOLENS.Infospot) {\n      invertedObject = object\n\n      if (object.dispatchEvent) {\n        this.container && object.dispatchEvent({ type: 'panolens-container', container: this.container })\n\n        object.dispatchEvent({ type: 'panolens-infospot-focus',\n          method: function (vector, duration, easing) {\n            /**\n\t\t        \t * Infospot focus handler event\n\t\t        \t * @type {object}\n\t\t        \t * @event PANOLENS.Panorama#panolens-viewer-handler\n\t\t        \t * @property {string} method - Viewer function name\n\t\t        \t * @property {*} data - The argument to be passed into the method\n\t\t        \t */\n\t\t        \tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'tweenControlCenter', data: [ vector, duration, easing ] })\n          } })\n      }\n    } else {\n      // Counter scale.x = -1 effect\n      invertedObject = new THREE.Object3D()\n      invertedObject.scale.x = -1\n      invertedObject.scalePlaceHolder = true\n      invertedObject.add(object)\n    }\n\n    THREE.Object3D.prototype.add.call(this, invertedObject)\n  }\n\n  PANOLENS.Panorama.prototype.load = function () {\n    this.onLoad()\n  }\n\n  /**\n\t * Click event handler\n\t * @param  {object} event - Click event\n\t * @fires PANOLENS.Infospot#dismiss\n\t */\n  PANOLENS.Panorama.prototype.onClick = function (event) {\n    if (event.intersects && event.intersects.length === 0) {\n      this.traverse(function (object) {\n        /**\n\t\t\t\t * Dimiss event\n\t\t\t\t * @type {object}\n\t\t\t\t * @event PANOLENS.Infospot#dismiss\n\t\t\t\t */\n        object.dispatchEvent({ type: 'dismiss' })\n      })\n    }\n  }\n\n  /**\n\t * Set container of this panorama\n\t * @param {HTMLElement|object} data - Data with container information\n\t * @fires PANOLENS.Infospot#panolens-container\n\t */\n  PANOLENS.Panorama.prototype.setContainer = function (data) {\n    var container\n\n    if (data instanceof HTMLElement) {\n      container = data\n    } else if (data && data.container) {\n      container = data.container\n    }\n\n    if (container) {\n      this.children.forEach(function (child) {\n        if (child instanceof PANOLENS.Infospot && child.dispatchEvent) {\n          /**\n\t\t\t\t\t * Set container event\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @event PANOLENS.Infospot#panolens-container\n\t\t\t\t\t * @property {HTMLElement} container - The container of this panorama\n\t\t\t\t\t */\n          child.dispatchEvent({ type: 'panolens-container', container: container })\n        }\n      })\n\n      this.container = container\n    }\n  }\n\n  /**\n\t * This will be called when panorama is loaded\n\t * @fires PANOLENS.Panorama#load\n\t */\n  PANOLENS.Panorama.prototype.onLoad = function () {\n    this.loaded = true\n\n    /**\n\t\t * Load panorama event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Panorama#load\n\t\t */\n    this.dispatchEvent({ type: 'load' })\n  }\n\n  /**\n\t * This will be called when panorama is in progress\n\t * @fires PANOLENS.Panorama#progress\n\t */\n  PANOLENS.Panorama.prototype.onProgress = function (progress) {\n    /**\n\t\t * Loading panorama progress event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Panorama#progress\n\t \t * @property {object} progress - The progress object containing loaded and total amount\n\t\t */\n    this.dispatchEvent({ type: 'progress', progress: progress })\n  }\n\n  /**\n\t * This will be called when panorama loading has error\n\t * @fires PANOLENS.Panorama#error\n\t */\n  PANOLENS.Panorama.prototype.onError = function () {\n    /**\n\t\t * Loading panorama error event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Panorama#error\n\t\t */\n    this.dispatchEvent({ type: 'error' })\n  }\n\n  /**\n\t * Get zoom level based on window width\n\t * @return {number} zoom level indicating image quality\n\t */\n  PANOLENS.Panorama.prototype.getZoomLevel = function () {\n    var zoomLevel\n\n    if (window.innerWidth <= 800) {\n      zoomLevel = this.ImageQualityFair\n    } else if (window.innerWidth > 800 && window.innerWidth <= 1280) {\n      zoomLevel = this.ImageQualityMedium\n    } else if (window.innerWidth > 1280 && window.innerWidth <= 1920) {\n      zoomLevel = this.ImageQualityHigh\n    } else if (window.innerWidth > 1920) {\n      zoomLevel = this.ImageQualitySuperHigh\n    } else {\n      zoomLevel = this.ImageQualityLow\n    }\n\n    return zoomLevel\n  }\n\n  /**\n\t * Update texture of a panorama\n\t * @param {THREE.Texture} texture - Texture to be updated\n\t */\n  PANOLENS.Panorama.prototype.updateTexture = function (texture) {\n    this.material.map = texture\n\n    this.material.needsUpdate = true\n  }\n\n  /**\n\t * Toggle visibility of infospots in this panorama\n\t * @param  {boolean} isVisible - Visibility of infospots\n\t * @param  {number} delay - Delay in milliseconds to change visibility\n\t * @fires PANOLENS.Panorama#infospot-animation-complete\n\t */\n  PANOLENS.Panorama.prototype.toggleInfospotVisibility = function (isVisible, delay) {\n    delay = (delay !== undefined) ? delay : 0\n\n    var scope, visible\n\n    scope = this\n    visible = (isVisible !== undefined) ? isVisible : (!this.isInfospotVisible)\n\n    this.traverse(function (object) {\n      if (object instanceof PANOLENS.Infospot) {\n        visible ? object.show(delay) : object.hide(delay)\n      }\n    })\n\n    this.isInfospotVisible = visible\n\n    // Animation complete event\n    this.infospotAnimation.onComplete(function () {\n      /**\n\t\t\t * Complete toggling infospot visibility\n\t\t\t * @event PANOLENS.Panorama#infospot-animation-complete\n\t\t\t * @type {object}\n\t\t\t */\n      scope.dispatchEvent({ type: 'infospot-animation-complete', visible: visible })\n    }).delay(delay).start()\n  }\n\n  /**\n\t * Set image of this panorama's linking infospot\n\t * @param {string} url   - Url to the image asset\n\t * @param {number} scale - Scale factor of the infospot\n\t */\n  PANOLENS.Panorama.prototype.setLinkingImage = function (url, scale) {\n    this.linkingImageURL = url\n    this.linkingImageScale = scale\n  }\n\n  /**\n\t * Link one-way panorama\n\t * @param  {PANOLENS.Panorama} pano  - The panorama to be linked to\n\t * @param  {THREE.Vector3} position - The position of infospot which navigates to the pano\n\t * @param  {number} [imageScale=300] - Image scale of linked infospot\n\t * @param  {string} [imageSrc=PANOLENS.DataImage.Arrow] - The image source of linked infospot\n\t */\n  PANOLENS.Panorama.prototype.link = function (pano, position, imageScale, imageSrc) {\n    var scope = this, spot, scale, img\n\n    this.visible = true\n\n    if (!position) {\n      console.warn('Please specify infospot position for linking')\n\n      return\n    }\n\n    // Infospot scale\n    if (imageScale !== undefined) {\n      scale = imageScale\n    } else if (pano.linkingImageScale !== undefined) {\n      scale = pano.linkingImageScale\n    } else {\n      scale = 300\n    }\n\n    // Infospot image\n    if (imageSrc) {\n      img = imageSrc\n    } else if (pano.linkingImageURL) {\n      img = pano.linkingImageURL\n    } else {\n      img = PANOLENS.DataImage.Arrow\n    }\n\n    // Creates a new infospot\n    spot = new PANOLENS.Infospot(scale, img)\n    spot.position.copy(position)\n    spot.toPanorama = pano\n    spot.addEventListener('click', function () {\n        \t/**\n        \t * Viewer handler event\n        \t * @type {object}\n        \t * @event PANOLENS.Panorama#panolens-viewer-handler\n        \t * @property {string} method - Viewer function name\n        \t * @property {*} data - The argument to be passed into the method\n        \t */\n        \tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setPanorama', data: pano })\n    })\n\n    this.linkedSpots.push(spot)\n\n    this.add(spot)\n\n    this.visible = false\n  }\n\n  PANOLENS.Panorama.prototype.reset = function () {\n    this.children.length = 0\n  }\n\n  PANOLENS.Panorama.prototype.setupTransitions = function () {\n    this.fadeInAnimation = new TWEEN.Tween(this.material)\n      .easing(TWEEN.Easing.Quartic.Out)\n      .onStart(function () {\n        this.visible = true\n        this.material.visible = true\n\n        /**\n\t\t\t\t * Enter panorama fade in start event\n\t\t\t\t * @event PANOLENS.Panorama#enter-fade-start\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'enter-fade-start' })\n      }.bind(this))\n\n    this.fadeOutAnimation = new TWEEN.Tween(this.material)\n      .easing(TWEEN.Easing.Quartic.Out)\n      .onComplete(function () {\n        this.visible = false\n        this.material.visible = true\n\n        /**\n\t\t\t\t * Leave panorama complete event\n\t\t\t\t * @event PANOLENS.Panorama#leave-complete\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'leave-complete' })\n      }.bind(this))\n\n    this.enterTransition = new TWEEN.Tween(this)\n      .easing(TWEEN.Easing.Quartic.Out)\n      .onComplete(function () {\n        /**\n\t\t\t\t * Enter panorama and animation complete event\n\t\t\t\t * @event PANOLENS.Panorama#enter-animation-complete\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'enter-animation-complete' })\n      }.bind(this))\n      .start()\n\n    this.leaveTransition = new TWEEN.Tween(this)\n      .easing(TWEEN.Easing.Quartic.Out)\n  }\n\n  /**\n\t * Start fading in animation\n\t * @fires PANOLENS.Panorama#enter-fade-complete\n\t */\n  PANOLENS.Panorama.prototype.fadeIn = function (duration) {\n    duration = duration >= 0 ? duration : this.animationDuration\n\n    this.fadeOutAnimation.stop()\n    this.fadeInAnimation\n      .to({ opacity: 1 }, duration)\n      .onComplete(function () {\n        this.toggleInfospotVisibility(true, duration / 2)\n\n        /**\n\t\t\t\t * Enter panorama fade complete event\n\t\t\t\t * @event PANOLENS.Panorama#enter-fade-complete\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'enter-fade-complete' })\n      }.bind(this))\n      .start()\n  }\n\n  /**\n\t * Start fading out animation\n\t */\n  PANOLENS.Panorama.prototype.fadeOut = function (duration) {\n    duration = duration >= 0 ? duration : this.animationDuration\n\n    this.fadeInAnimation.stop()\n    this.fadeOutAnimation.to({ opacity: 0 }, duration).start()\n  }\n\n  /**\n\t * This will be called when entering a panorama\n\t * @fires PANOLENS.Panorama#enter\n\t * @fires PANOLENS.Panorama#enter-animation-start\n\t */\n  PANOLENS.Panorama.prototype.onEnter = function () {\n    var duration = this.animationDuration\n\n    this.leaveTransition.stop()\n    this.enterTransition\n      .to({}, duration)\n      .onStart(function () {\n        /**\n\t\t\t\t * Enter panorama and animation starting event\n\t\t\t\t * @event PANOLENS.Panorama#enter-animation-start\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'enter-animation-start' })\n\n        if (this.loaded) {\n          this.fadeIn(duration)\n        } else {\n          this.load()\n        }\n      }.bind(this))\n      .start()\n\n    /**\n\t\t * Enter panorama event\n\t\t * @event PANOLENS.Panorama#enter\n\t\t * @type {object}\n\t\t */\n    this.dispatchEvent({ type: 'enter' })\n  }\n\n  /**\n\t * This will be called when leaving a panorama\n\t * @fires PANOLENS.Panorama#leave\n\t */\n  PANOLENS.Panorama.prototype.onLeave = function () {\n    var duration = this.animationDuration\n\n    this.enterTransition.stop()\n    this.leaveTransition\n      .to({}, duration)\n      .onStart(function () {\n        /**\n\t\t\t\t * Leave panorama and animation starting event\n\t\t\t\t * @event PANOLENS.Panorama#leave-animation-start\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'leave-animation-start' })\n\n        this.fadeOut(duration)\n        this.toggleInfospotVisibility(false)\n      }.bind(this))\n      .start()\n\n    /**\n\t\t * Leave panorama event\n\t\t * @event PANOLENS.Panorama#leave\n\t\t * @type {object}\n\t\t */\n    this.dispatchEvent({ type: 'leave' })\n  }\n\n  /**\n\t * Dispose panorama\n\t */\n  PANOLENS.Panorama.prototype.dispose = function () {\n    /**\n    \t * On panorama dispose handler\n    \t * @type {object}\n    \t * @event PANOLENS.Panorama#panolens-viewer-handler\n    \t * @property {string} method - Viewer function name\n    \t * @property {*} data - The argument to be passed into the method\n    \t */\n    \tthis.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onPanoramaDispose', data: this })\n\n    // recursive disposal on 3d objects\n    function recursiveDispose (object) {\n      for (var i = object.children.length - 1; i >= 0; i--) {\n        recursiveDispose(object.children[i])\n        object.remove(object.children[i])\n      }\n\n      if (object instanceof PANOLENS.Infospot) {\n        object.dispose()\n      }\n\n      object.geometry && object.geometry.dispose()\n      object.material && object.material.dispose()\n    }\n\n    recursiveDispose(this)\n\n    if (this.parent) {\n      this.parent.remove(this)\n    }\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Equirectangular based image panorama\n\t * @constructor\n\t * @param {string} image - Image url or HTMLImageElement\n\t * @param {number} [radius=5000] - Radius of panorama\n\t */\n  PANOLENS.ImagePanorama = function (image, radius) {\n    radius = radius || 5000\n\n    var geometry = new THREE.SphereGeometry(radius, 60, 40),\n      material = new THREE.MeshBasicMaterial({ opacity: 0, transparent: true })\n\n    PANOLENS.Panorama.call(this, geometry, material)\n\n    this.src = image\n  }\n\n  PANOLENS.ImagePanorama.prototype = Object.create(PANOLENS.Panorama.prototype)\n\n  PANOLENS.ImagePanorama.prototype.constructor = PANOLENS.ImagePanorama\n\n  /**\n\t * Load image asset\n\t * @param  {*} src - Url or image element\n\t */\n  PANOLENS.ImagePanorama.prototype.load = function (src) {\n    src = src || this.src\n\n    if (!src) {\n      console.warn('Image source undefined')\n    } else if (typeof src === 'string') {\n      PANOLENS.Utils.TextureLoader.load(src, this.onLoad.bind(this), this.onProgress.bind(this), this.onError.bind(this))\n    } else if (src instanceof HTMLImageElement) {\n      this.onLoad(new THREE.Texture(src))\n    }\n  }\n\n  /**\n\t * This will be called when image is loaded\n\t * @param  {THREE.Texture} texture - Texture to be updated\n\t */\n  PANOLENS.ImagePanorama.prototype.onLoad = function (texture) {\n    texture.minFilter = texture.magFilter = THREE.LinearFilter\n\n    texture.needsUpdate = true\n\n    this.updateTexture(texture)\n\n    // Call onLoad after second frame being painted\n    window.requestAnimationFrame(function () {\n      window.requestAnimationFrame(function () {\n        PANOLENS.Panorama.prototype.onLoad.call(this)\n      }.bind(this))\n    }.bind(this))\n  }\n\n  PANOLENS.ImagePanorama.prototype.reset = function () {\n    PANOLENS.Panorama.prototype.reset.call(this)\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Google streetview panorama\n\t *\n\t * [How to get Panorama ID]{@link http://stackoverflow.com/questions/29916149/google-maps-streetview-how-to-get-panorama-id}\n\t * @constructor\n\t * @param {string} panoId - Panorama id from Google Streetview\n\t * @param {number} [radius=5000] - The minimum radius for this panoram\n\t */\n  PANOLENS.GoogleStreetviewPanorama = function (panoId, radius) {\n    PANOLENS.ImagePanorama.call(this, undefined, radius)\n\n    this.panoId = panoId\n\n    this.gsvLoader = undefined\n\n    this.loadRequested = false\n\n    this.setupGoogleMapAPI()\n  }\n\n  PANOLENS.GoogleStreetviewPanorama.prototype = Object.create(PANOLENS.ImagePanorama.prototype)\n\n  PANOLENS.GoogleStreetviewPanorama.constructor = PANOLENS.GoogleStreetviewPanorama\n\n  /**\n\t * Load Google Street View by panorama id\n\t * @param {string} panoId - Gogogle Street View panorama id\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.load = function (panoId) {\n    this.loadRequested = true\n\n    panoId = (panoId || this.panoId) || {}\n\n    if (panoId && this.gsvLoader) {\n      this.loadGSVLoader(panoId)\n    } else {\n      this.gsvLoader = {}\n    }\n  }\n\n  /**\n\t * Setup Google Map API\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.setupGoogleMapAPI = function () {\n    var script = document.createElement('script')\n    script.src = 'https://maps.googleapis.com/maps/api/js'\n    script.onreadystatechange = this.setGSVLoader.bind(this)\n    \tscript.onload = this.setGSVLoader.bind(this)\n\n    document.getElementsByTagName('head')[0].appendChild(script)\n  }\n\n  /**\n\t * Set GSV Loader\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.setGSVLoader = function () {\n    this.gsvLoader = new GSVPANO.PanoLoader()\n\n    if (this.gsvLoader === {} || this.loadRequested) {\n      this.load()\n    }\n  }\n\n  /**\n\t * Get GSV Loader\n\t * @return {object} GSV Loader instance\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.getGSVLoader = function () {\n    return this.gsvLoader\n  }\n\n  /**\n\t * Load GSV Loader\n\t * @param  {string} panoId - Gogogle Street View panorama id\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.loadGSVLoader = function (panoId) {\n    this.loadRequested = false\n\n    this.gsvLoader.onProgress = this.onProgress.bind(this)\n\n    this.gsvLoader.onPanoramaLoad = this.onLoad.bind(this)\n\n    this.gsvLoader.setZoom(this.getZoomLevel())\n\n    this.gsvLoader.load(panoId)\n\n    this.gsvLoader.loaded = true\n  }\n\n  /**\n\t * This will be called when panorama is loaded\n\t * @param  {HTMLCanvasElement} canvas - Canvas where the tiles have been drawn\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.onLoad = function (canvas) {\n    if (!this.gsvLoader) { return }\n\n    PANOLENS.ImagePanorama.prototype.onLoad.call(this, new THREE.Texture(canvas))\n  }\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.reset = function () {\n    this.gsvLoader = undefined\n\n    PANOLENS.ImagePanorama.prototype.reset.call(this)\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Cubemap-based panorama\n\t * @constructor\n\t * @param {array} images - An array of cubetexture containing six images\n\t * @param {number} [edgeLength=10000] - The length of cube's edge\n\t */\n  PANOLENS.CubePanorama = function (images, edgeLength) {\n    var shader, geometry, material\n\n    this.images = images || []\n\n    edgeLength = edgeLength || 10000\n    shader = JSON.parse(JSON.stringify(THREE.ShaderLib[ 'cube' ]))\n\n    geometry = new THREE.BoxGeometry(edgeLength, edgeLength, edgeLength)\n    material = new THREE.ShaderMaterial({\n\n      fragmentShader: shader.fragmentShader,\n      vertexShader: shader.vertexShader,\n      uniforms: shader.uniforms,\n      side: THREE.BackSide\n\n    })\n\n    PANOLENS.Panorama.call(this, geometry, material)\n  }\n\n  PANOLENS.CubePanorama.prototype = Object.create(PANOLENS.Panorama.prototype)\n\n  PANOLENS.CubePanorama.prototype.constructor = PANOLENS.CubePanorama\n\n  /**\n\t * Load 6 images and bind listeners\n\t */\n  PANOLENS.CubePanorama.prototype.load = function () {\n    PANOLENS.Utils.CubeTextureLoader.load(\n\n      this.images,\n\n      this.onLoad.bind(this),\n      this.onProgress.bind(this),\n      this.onError.bind(this)\n\n    )\n  }\n\n  /**\n\t * This will be called when 6 textures are ready\n\t * @param  {THREE.CubeTexture} texture - Cube texture\n\t */\n  PANOLENS.CubePanorama.prototype.onLoad = function (texture) {\n    this.material.uniforms[ 'tCube' ].value = texture\n\n    PANOLENS.Panorama.prototype.onLoad.call(this)\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Basic panorama with 6 faces tile images\n\t * @constructor\n\t * @param {number} [edgeLength=10000] - The length of cube's edge\n\t */\n  PANOLENS.BasicPanorama = function (edgeLength) {\n    var tile = PANOLENS.DataImage.WhiteTile\n\n    PANOLENS.CubePanorama.call(this, [ tile, tile, tile, tile, tile, tile ], edgeLength)\n  }\n\n  PANOLENS.BasicPanorama.prototype = Object.create(PANOLENS.CubePanorama.prototype)\n\n  PANOLENS.BasicPanorama.prototype.constructor = PANOLENS.BasicPanorama\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Video Panorama\n\t * @constructor\n\t * @param {string} src - Equirectangular video url\n\t * @param {object} [options] - Option for video settings\n\t * @param {HTMLElement} [options.videoElement] - HTML5 video element contains the video\n\t * @param {boolean} [options.loop=true] - Specify if the video should loop in the end\n\t * @param {boolean} [options.muted=false] - Mute the video or not\n\t * @param {boolean} [options.autoplay=false] - Specify if the video should auto play\n\t * @param {boolean} [options.playsinline=true] - Specify if video should play inline for iOS. If you want it to auto play inline, set both autoplay and muted options to true\n\t * @param {string} [options.crossOrigin=\"anonymous\"] - Sets the cross-origin attribute for the video, which allows for cross-origin videos in some browsers (Firefox, Chrome). Set to either \"anonymous\" or \"use-credentials\".\n\t * @param {number} [radius=5000] - The minimum radius for this panoram\n\t */\n  PANOLENS.VideoPanorama = function (src, options, radius) {\n    radius = radius || 5000\n\n    var geometry = new THREE.SphereGeometry(radius, 60, 40),\n      material = new THREE.MeshBasicMaterial({ opacity: 0, transparent: true })\n\n    PANOLENS.Panorama.call(this, geometry, material)\n\n    this.src = src\n    this.options = options || {}\n    this.options.playsinline = this.options.playsinline !== false\n\n    this.videoElement = undefined\n    this.videoRenderObject = undefined\n    this.videoProgress = 0\n\n    this.isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent)\n    this.isMobile = this.isIOS || /Android|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent)\n\n    this.addEventListener('leave', this.pauseVideo.bind(this))\n    this.addEventListener('enter-fade-start', this.resumeVideoProgress.bind(this))\n    this.addEventListener('video-toggle', this.toggleVideo.bind(this))\n    this.addEventListener('video-time', this.setVideoCurrentTime.bind(this))\n  }\n\n  PANOLENS.VideoPanorama.prototype = Object.create(PANOLENS.Panorama.prototype)\n\n  PANOLENS.VideoPanorama.constructor = PANOLENS.VideoPanorama\n\n  /**\n\t * Load video panorama\n\t * @param  {string} src     - The video url\n\t * @param  {object} options - Option object containing videoElement\n\t * @fires  PANOLENS.Panorama#panolens-viewer-handler\n\t */\n  PANOLENS.VideoPanorama.prototype.load = function (src, options) {\n    var scope = this\n\n    src = (src || this.src) || ''\n    options = (options || this.options) || {}\n\n    this.videoElement = options.videoElement || document.createElement('video')\n\n    this.videoElement.muted = options.muted || false\n    this.videoElement.loop = (options.loop !== undefined) ? options.loop : true\n    this.videoElement.autoplay = (options.autoplay !== undefined) ? options.autoplay : false\n    this.videoElement.crossOrigin = (options.crossOrigin !== undefined) ? options.crossOrigin : 'anonymous'\n\n    // iphone inline player\n    if (options.playsinline) {\n      this.videoElement.setAttribute('playsinline', '')\n      this.videoElement.setAttribute('webkit-playsinline', '')\n    }\n\n    var onloadeddata = function () {\n      scope.onProgress({ loaded: 1, total: 1 })\n      scope.setVideoTexture(scope.videoElement)\n\n      if (scope.videoElement.autoplay) {\n        /**\n\t\t\t\t * Viewer handler event\n\t\t\t\t * @type {object}\n\t\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t\t */\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false })\n      }\n\n      // For mobile silent autoplay\n      if (scope.isMobile) {\n        if (scope.videoElement.autoplay && scope.videoElement.muted) {\n          /**\n\t\t\t\t\t * Viewer handler event\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t\t\t */\n          scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false })\n        } else {\n          /**\n\t\t\t\t\t * Viewer handler event\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t\t\t */\n          scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true })\n        }\n      }\n\n      scope.onLoad()\n    }\n\n    /**\n\t\t * Ready state of the audio/video element\n\t\t * 0 = HAVE_NOTHING - no information whether or not the audio/video is ready\n\t\t * 1 = HAVE_METADATA - metadata for the audio/video is ready\n\t\t * 2 = HAVE_CURRENT_DATA - data for the current playback position is available, but not enough data to play next frame/millisecond\n\t\t * 3 = HAVE_FUTURE_DATA - data for the current and at least the next frame is available\n\t\t * 4 = HAVE_ENOUGH_DATA - enough data available to start playing\n\t\t */\n    if (this.videoElement.readyState > 2) {\n      onloadeddata()\n    } else {\n      if (!this.videoElement.querySelectorAll('source').length || !this.videoElement.src) {\n        this.videoElement.src = src\n      }\n\n      this.videoElement.load()\n    }\n\n    this.videoElement.onloadeddata = onloadeddata\n\n    this.videoElement.ontimeupdate = function (event) {\n      scope.videoProgress = this.duration >= 0 ? this.currentTime / this.duration : 0\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'onVideoUpdate'\n\t\t\t * @property {number} data - The percentage of video progress. Range from 0.0 to 1.0\n\t\t\t */\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: scope.videoProgress })\n    }\n\n    this.videoElement.addEventListener('ended', function () {\n      if (!scope.options.loop) {\n        scope.resetVideo()\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true })\n      }\n    }, false)\n  }\n\n  /**\n\t * Set video texture\n\t * @param {HTMLVideoElement} video  - The html5 video element\n\t * @fires PANOLENS.Panorama#panolens-viewer-handler\n\t */\n  PANOLENS.VideoPanorama.prototype.setVideoTexture = function (video) {\n    var videoTexture, videoRenderObject, scene\n\n    if (!video) return\n\n    videoTexture = new THREE.VideoTexture(video)\n    videoTexture.minFilter = THREE.LinearFilter\n    videoTexture.magFilter = THREE.LinearFilter\n    videoTexture.format = THREE.RGBFormat\n\n    videoRenderObject = {\n\n      video: video,\n      videoTexture: videoTexture\n\n    }\n\n    if (this.isIOS) {\n      enableInlineVideo(video)\n    }\n\n    this.updateTexture(videoTexture)\n\n    this.videoRenderObject = videoRenderObject\n  }\n\n  PANOLENS.VideoPanorama.prototype.reset = function () {\n    this.videoElement = undefined\n\n    PANOLENS.Panorama.prototype.reset.call(this)\n  }\n\n  /**\n\t * Check if video is paused\n\t * @return {boolean} - is video paused or not\n\t */\n  PANOLENS.VideoPanorama.prototype.isVideoPaused = function () {\n    return this.videoRenderObject.video.paused\n  }\n\n  /**\n\t * Toggle video to play or pause\n\t */\n  PANOLENS.VideoPanorama.prototype.toggleVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video) {\n      if (this.isVideoPaused()) {\n        this.videoRenderObject.video.play()\n      } else {\n        this.videoRenderObject.video.pause()\n      }\n    }\n  }\n\n  /**\n\t * Set video currentTime\n\t * @param {object} event - Event contains percentage. Range from 0.0 to 1.0\n\t */\n  PANOLENS.VideoPanorama.prototype.setVideoCurrentTime = function (event) {\n    if (this.videoRenderObject && this.videoRenderObject.video && !Number.isNaN(event.percentage) && event.percentage !== 1) {\n      this.videoRenderObject.video.currentTime = this.videoRenderObject.video.duration * event.percentage\n\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: event.percentage })\n    }\n  }\n\n  /**\n\t * Play video\n\t */\n  PANOLENS.VideoPanorama.prototype.playVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && this.isVideoPaused()) {\n      this.videoRenderObject.video.play()\n    }\n\n    /**\n\t\t * Play event\n\t\t * @type {object}\n\t\t * @event 'play'\n\t\t * */\n    this.dispatchEvent({ type: 'play' })\n  }\n\n  /**\n\t * Pause video\n\t */\n  PANOLENS.VideoPanorama.prototype.pauseVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && !this.isVideoPaused()) {\n      this.videoRenderObject.video.pause()\n    }\n\n    /**\n\t\t * Pause event\n\t\t * @type {object}\n\t\t * @event 'pause'\n\t\t * */\n    this.dispatchEvent({ type: 'pause' })\n  }\n\n  /**\n\t * Resume video\n\t */\n  PANOLENS.VideoPanorama.prototype.resumeVideoProgress = function () {\n    if (this.videoElement.autoplay && !this.isMobile) {\n      this.playVideo()\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t */\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false })\n    } else {\n      this.pauseVideo()\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t */\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true })\n    }\n\n    this.setVideoCurrentTime({ percentage: this.videoProgress })\n  }\n\n  /**\n\t * Reset video at stating point\n\t */\n  PANOLENS.VideoPanorama.prototype.resetVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video) {\n      this.setVideoCurrentTime({ percentage: 0 })\n    }\n  }\n\n  /**\n\t* Check if video is muted\n\t* @return {boolean} - is video muted or not\n\t*/\n  PANOLENS.VideoPanorama.prototype.isVideoMuted = function () {\n    return this.videoRenderObject.video.muted\n  }\n\n  /**\n\t * Mute video\n\t */\n  PANOLENS.VideoPanorama.prototype.muteVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && !this.isVideoMuted()) {\n      this.videoRenderObject.video.muted = true\n    }\n\n    this.dispatchEvent({ type: 'volumechange' })\n  }\n\n  /**\n\t * Unmute video\n\t */\n  PANOLENS.VideoPanorama.prototype.unmuteVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && this.isVideoMuted()) {\n      this.videoRenderObject.video.muted = false\n    }\n\n    this.dispatchEvent({ type: 'volumechange' })\n  }\n\n  /**\n\t * Returns the video element\n\t */\n  PANOLENS.VideoPanorama.prototype.getVideoElement = function () {\n    return this.videoRenderObject.video\n  }\n\n  /**\n\t * Dispose video panorama\n\t */\n  PANOLENS.VideoPanorama.prototype.dispose = function () {\n    this.resetVideo()\n    this.pauseVideo()\n\n    this.removeEventListener('leave', this.pauseVideo.bind(this))\n    this.removeEventListener('enter-fade-start', this.resumeVideoProgress.bind(this))\n    this.removeEventListener('video-toggle', this.toggleVideo.bind(this))\n    this.removeEventListener('video-time', this.setVideoCurrentTime.bind(this))\n\n    PANOLENS.Panorama.prototype.dispose.call(this)\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Empty panorama\n\t * @constructor\n\t * @param {number} [radius=5000] - Radius of panorama\n\t */\n  PANOLENS.EmptyPanorama = function (radius) {\n    radius = radius || 5000\n\n    var geometry = new THREE.Geometry(),\n      material = new THREE.MeshBasicMaterial({\n        color: 0x000000, opacity: 1, transparent: true\n      })\n\n    PANOLENS.Panorama.call(this, geometry, material)\n  }\n\n  PANOLENS.EmptyPanorama.prototype = Object.create(PANOLENS.Panorama.prototype)\n\n  PANOLENS.EmptyPanorama.prototype.constructor = PANOLENS.EmptyPanorama\n})(); (function () {\n  /**\n\t * Little Planet\n\t * @constructor\n\t * @param {string} type \t\t- Type of little planet basic class\n\t * @param {string} source \t\t- URL for the image source\n\t * @param {number} [size=10000] - Size of plane geometry\n\t * @param {number} [ratio=0.5]  - Ratio of plane geometry's height against width\n\t */\n  PANOLENS.LittlePlanet = function (type, source, size, ratio) {\n    type = type || 'image'\n\n    type === 'image' && PANOLENS.ImagePanorama.call(this, source, size)\n\n    this.size = size || 10000\n    this.ratio = ratio || 0.5\n    this.EPS = 0.000001\n    this.frameId\n\n    this.geometry = this.createGeometry()\n    this.material = this.createMaterial(this.size)\n\n    this.dragging = false\n    this.userMouse = new THREE.Vector2()\n\n    this.quatA = new THREE.Quaternion()\n    this.quatB = new THREE.Quaternion()\n    this.quatCur = new THREE.Quaternion()\n    this.quatSlerp = new THREE.Quaternion()\n\n    this.vectorX = new THREE.Vector3(1, 0, 0)\n    this.vectorY = new THREE.Vector3(0, 1, 0)\n\n    this.addEventListener('window-resize', this.onWindowResize)\n  }\n\n  PANOLENS.LittlePlanet.prototype = Object.create(PANOLENS.ImagePanorama.prototype)\n\n  PANOLENS.LittlePlanet.prototype.constructor = PANOLENS.LittlePlanet\n\n  PANOLENS.LittlePlanet.prototype.createGeometry = function () {\n    return new THREE.PlaneGeometry(this.size, this.size * this.ratio)\n  }\n\n  PANOLENS.LittlePlanet.prototype.createMaterial = function (size) {\n    var uniforms = PANOLENS.StereographicShader.uniforms\n    uniforms.zoom.value = size\n\n    return new THREE.ShaderMaterial({\n\n      uniforms: uniforms,\n      vertexShader: PANOLENS.StereographicShader.vertexShader,\n      fragmentShader: PANOLENS.StereographicShader.fragmentShader\n\n    })\n  }\n\n  PANOLENS.LittlePlanet.prototype.registerMouseEvents = function () {\n    this.container.addEventListener('mousedown', this.onMouseDown.bind(this), false)\n    this.container.addEventListener('mousemove', this.onMouseMove.bind(this), false)\n    this.container.addEventListener('mouseup', this.onMouseUp.bind(this), false)\n    this.container.addEventListener('touchstart', this.onMouseDown.bind(this), false)\n    this.container.addEventListener('touchmove', this.onMouseMove.bind(this), false)\n    this.container.addEventListener('touchend', this.onMouseUp.bind(this), false)\n    this.container.addEventListener('mousewheel', this.onMouseWheel.bind(this), false)\n    this.container.addEventListener('DOMMouseScroll', this.onMouseWheel.bind(this), false)\n    this.container.addEventListener('contextmenu', this.onContextMenu.bind(this), false)\n  }\n\n  PANOLENS.LittlePlanet.prototype.unregisterMouseEvents = function () {\n    this.container.removeEventListener('mousedown', this.onMouseDown.bind(this), false)\n    this.container.removeEventListener('mousemove', this.onMouseMove.bind(this), false)\n    this.container.removeEventListener('mouseup', this.onMouseUp.bind(this), false)\n    this.container.removeEventListener('touchstart', this.onMouseDown.bind(this), false)\n    this.container.removeEventListener('touchmove', this.onMouseMove.bind(this), false)\n    this.container.removeEventListener('touchend', this.onMouseUp.bind(this), false)\n    this.container.removeEventListener('mousewheel', this.onMouseWheel.bind(this), false)\n    this.container.removeEventListener('DOMMouseScroll', this.onMouseWheel.bind(this), false)\n    this.container.removeEventListener('contextmenu', this.onContextMenu.bind(this), false)\n  }\n\n  PANOLENS.LittlePlanet.prototype.onMouseDown = function (event) {\n    var x = (event.clientX >= 0) ? event.clientX : event.touches[ 0 ].clientX\n    var y = (event.clientY >= 0) ? event.clientY : event.touches[ 0 ].clientY\n\n    var inputCount = (event.touches && event.touches.length) || 1\n\n    switch (inputCount) {\n      case 1:\n\n        this.dragging = true\n        this.userMouse.set(x, y)\n\n        break\n\n      case 2:\n\n        var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX\n        var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY\n        var distance = Math.sqrt(dx * dx + dy * dy)\n        this.userMouse.pinchDistance = distance\n\n        break\n\n      default:\n\n        break\n    }\n\n    this.onUpdateCallback()\n  }\n\n  PANOLENS.LittlePlanet.prototype.onMouseMove = function (event) {\n    var x = (event.clientX >= 0) ? event.clientX : event.touches[ 0 ].clientX\n    var y = (event.clientY >= 0) ? event.clientY : event.touches[ 0 ].clientY\n\n    var inputCount = (event.touches && event.touches.length) || 1\n\n    switch (inputCount) {\n      case 1:\n\n        var angleX = THREE.Math.degToRad(x - this.userMouse.x) * 0.4\n        var angleY = THREE.Math.degToRad(y - this.userMouse.y) * 0.4\n\n        if (this.dragging) {\n          this.quatA.setFromAxisAngle(this.vectorY, angleX)\n          this.quatB.setFromAxisAngle(this.vectorX, angleY)\n          this.quatCur.multiply(this.quatA).multiply(this.quatB)\n          this.userMouse.set(x, y)\n        }\n\n        break\n\n      case 2:\n\n        var uniforms = this.material.uniforms\n        var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX\n        var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY\n        var distance = Math.sqrt(dx * dx + dy * dy)\n\n        this.addZoomDelta(this.userMouse.pinchDistance - distance)\n\n        break\n\n      default:\n\n        break\n    }\n  }\n\n  PANOLENS.LittlePlanet.prototype.onMouseUp = function (event) {\n    this.dragging = false\n  }\n\n  PANOLENS.LittlePlanet.prototype.onMouseWheel = function (event) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    var delta = 0\n\n    if (event.wheelDelta !== undefined) { // WebKit / Opera / Explorer 9\n      delta = event.wheelDelta\n    } else if (event.detail !== undefined) { // Firefox\n      delta = -event.detail\n    }\n\n    this.addZoomDelta(delta)\n    this.onUpdateCallback()\n  }\n\n  PANOLENS.LittlePlanet.prototype.addZoomDelta = function (delta) {\n    var uniforms = this.material.uniforms\n    var lowerBound = this.size * 0.1\n    var upperBound = this.size * 10\n\n    uniforms.zoom.value += delta\n\n    if (uniforms.zoom.value <= lowerBound) {\n      uniforms.zoom.value = lowerBound\n    } else if (uniforms.zoom.value >= upperBound) {\n      uniforms.zoom.value = upperBound\n    }\n  }\n\n  PANOLENS.LittlePlanet.prototype.onUpdateCallback = function () {\n    this.frameId = window.requestAnimationFrame(this.onUpdateCallback.bind(this))\n\n    this.quatSlerp.slerp(this.quatCur, 0.1)\n    this.material.uniforms.transform.value.makeRotationFromQuaternion(this.quatSlerp)\n\n    if (!this.dragging && 1.0 - this.quatSlerp.clone().dot(this.quatCur) < this.EPS) {\n      window.cancelAnimationFrame(this.frameId)\n    }\n  }\n\n  PANOLENS.LittlePlanet.prototype.reset = function () {\n    this.quatCur.set(0, 0, 0, 1)\n    this.quatSlerp.set(0, 0, 0, 1)\n    this.onUpdateCallback()\n  }\n\n  PANOLENS.LittlePlanet.prototype.onLoad = function () {\n    this.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight\n\n    this.registerMouseEvents()\n    this.onUpdateCallback()\n\n    this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'disableControl' })\n  }\n\n  PANOLENS.LittlePlanet.prototype.onLeave = function () {\n    this.unregisterMouseEvents()\n\n    this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'enableControl', data: PANOLENS.Controls.ORBIT })\n\n    window.cancelAnimationFrame(this.frameId)\n\n    PANOLENS.Panorama.prototype.onLeave.call(this)\n  }\n\n  PANOLENS.LittlePlanet.prototype.onWindowResize = function () {\n    this.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight\n  }\n\n  PANOLENS.LittlePlanet.prototype.onContextMenu = function () {\n    this.dragging = false\n  }\n})(); (function () {\n  /**\n\t * Image Little Planet\n\t * @constructor\n\t * @param {string} source \t\t- URL for the image source\n\t * @param {number} [size=10000] - Size of plane geometry\n\t * @param {number} [ratio=0.5]  - Ratio of plane geometry's height against width\n\t */\n  PANOLENS.ImageLittlePlanet = function (source, size, ratio) {\n    PANOLENS.LittlePlanet.call(this, 'image', source, size, ratio)\n  }\n\n  PANOLENS.ImageLittlePlanet.prototype = Object.create(PANOLENS.LittlePlanet.prototype)\n\n  PANOLENS.ImageLittlePlanet.prototype.constructor = PANOLENS.ImageLittlePlanet\n\n  PANOLENS.ImageLittlePlanet.prototype.onLoad = function (texture) {\n    this.updateTexture(texture)\n\n    PANOLENS.ImagePanorama.prototype.onLoad.call(this, texture)\n    PANOLENS.LittlePlanet.prototype.onLoad.call(this)\n  }\n\n  PANOLENS.ImageLittlePlanet.prototype.updateTexture = function (texture) {\n    texture.minFilter = texture.magFilter = THREE.LinearFilter\n\n    this.material.uniforms[ 'tDiffuse' ].value = texture\n  }\n})(); (function () {\n  /**\n\t * Reticle 3D Sprite\n\t * @constructor\n\t * @param {THREE.Color} [color=0xfffff] - Color of the reticle sprite\n\t * @param {boolean} [autoSelect=true] - Auto selection\n\t * @param {string} [idleImageUrl=PANOLENS.DataImage.ReticleIdle] - Image asset url\n\t * @param {string} [dwellImageUrl=PANOLENS.DataImage.ReticleDwell] - Image asset url\n\t * @param {number} [dwellTime=1500] - Duration for dwelling sequence to complete\n\t * @param {number} [dwellSpriteAmount=45] - Number of dwelling sprite sequence\n\t */\n  PANOLENS.Reticle = function (color, autoSelect, idleImageUrl, dwellImageUrl, dwellTime, dwellSpriteAmount) {\n    color = color || 0xffffff\n\n    this.autoSelect = autoSelect != undefined ? autoSelect : true\n\n    this.dwellTime = dwellTime || 1500\n    this.dwellSpriteAmount = dwellSpriteAmount || 45\n    this.dwellInterval = this.dwellTime / this.dwellSpriteAmount\n\n    this.IDLE = 0\n    this.DWELLING = 1\n    this.status\n\n    this.scaleIdle = new THREE.Vector3(0.2, 0.2, 1)\n    this.scaleDwell = new THREE.Vector3(1, 0.8, 1)\n\n    this.textureLoaded = false\n    this.idleImageUrl = idleImageUrl || PANOLENS.DataImage.ReticleIdle\n    this.dwellImageUrl = dwellImageUrl || PANOLENS.DataImage.ReticleDwell\n    this.idleTexture = new THREE.Texture()\n    this.dwellTexture = new THREE.Texture()\n\n    THREE.Sprite.call(this, new THREE.SpriteMaterial({ color: color, depthTest: false }))\n\n    this.currentTile = 0\n    this.startTime = 0\n\n    this.visible = false\n    this.renderOrder = 10\n    this.timerId\n\n    // initial update\n    this.updateStatus(this.IDLE)\n  }\n\n  PANOLENS.Reticle.prototype = Object.create(THREE.Sprite.prototype)\n\n  PANOLENS.Reticle.prototype.constructor = PANOLENS.Reticle\n\n  /**\n\t * Make reticle visible\n\t */\n  PANOLENS.Reticle.prototype.show = function () {\n    this.visible = true\n  }\n\n  /**\n\t * Make reticle invisible\n\t */\n  PANOLENS.Reticle.prototype.hide = function () {\n    this.visible = false\n  }\n\n  /**\n\t * Load reticle textures\n\t */\n  PANOLENS.Reticle.prototype.loadTextures = function () {\n    this.idleTexture = PANOLENS.Utils.TextureLoader.load(this.idleImageUrl)\n    this.dwellTexture = PANOLENS.Utils.TextureLoader.load(this.dwellImageUrl)\n\n    this.material.map = this.idleTexture\n    this.setupDwellSprite(this.dwellTexture)\n    this.textureLoaded = true\n  }\n\n  /**\n\t * Start reticle timer selection\n\t * @param  {function} completeCallback - Callback after dwell completes\n\t */\n  PANOLENS.Reticle.prototype.select = function (completeCallback) {\n    if (performance.now() - this.startTime >= this.dwellTime) {\n      this.completeDwelling()\n      completeCallback()\n    } else if (this.autoSelect) {\n      this.updateDwelling(performance.now())\n      this.timerId = window.requestAnimationFrame(this.select.bind(this, completeCallback))\n    }\n  }\n\n  /**\n\t * Clear and reset reticle timer\n\t */\n  PANOLENS.Reticle.prototype.clearTimer = function () {\n    window.cancelAnimationFrame(this.timerId)\n    this.timerId = null\n  }\n\n  /**\n\t * Setup dwell sprite animation\n\t */\n  PANOLENS.Reticle.prototype.setupDwellSprite = function (texture) {\n    texture.wrapS = THREE.RepeatWrapping\n    texture.repeat.set(1 / this.dwellSpriteAmount, 1)\n  }\n\n  /**\n\t * Update reticle status\n\t * @param {number} status - Reticle status\n\t */\n  PANOLENS.Reticle.prototype.updateStatus = function (status) {\n    this.status = status\n\n    if (status === this.IDLE) {\n      this.scale.copy(this.scaleIdle)\n      this.material.map = this.idleTexture\n    } else if (status === this.DWELLING) {\n      this.scale.copy(this.scaleDwell)\n      this.material.map = this.dwellTexture\n    }\n\n    this.currentTile = 0\n    this.material.map.offset.x = 0\n  }\n\n  /**\n\t * Start dwelling sequence\n\t */\n  PANOLENS.Reticle.prototype.startDwelling = function (completeCallback) {\n    if (!this.autoSelect) {\n      return\n    }\n\n    this.startTime = performance.now()\n    this.updateStatus(this.DWELLING)\n    this.select(completeCallback)\n  }\n\n  /**\n\t * Update dwelling sequence\n\t * @param  {number} time - Timestamp for elasped time\n\t */\n  PANOLENS.Reticle.prototype.updateDwelling = function (time) {\n    var elasped = time - this.startTime\n\n    if (this.currentTile <= this.dwellSpriteAmount) {\n      this.currentTile = Math.floor(elasped / this.dwellTime * this.dwellSpriteAmount)\n      this.material.map.offset.x = this.currentTile / this.dwellSpriteAmount\n    } else {\n      this.updateStatus(this.IDLE)\n    }\n  }\n\n  /**\n\t * Cancel dwelling\n\t */\n  PANOLENS.Reticle.prototype.cancelDwelling = function () {\n    this.clearTimer()\n    this.updateStatus(this.IDLE)\n  }\n\n  /**\n\t * Complete dwelling\n\t */\n  PANOLENS.Reticle.prototype.completeDwelling = function () {\n    this.clearTimer()\n    this.updateStatus(this.IDLE)\n  }\n})(); (function () {\n  /**\n\t * Creates a tile with bent capability\n\t * @constructor\n\t * @param {number}  [width=10]                      \t\t\t\t- Width along the X axis\n\t * @param {number}  [height=5]                      \t\t\t\t- Height along the Y axis\n\t * @param {number}  [widthSegments=20]              \t\t\t\t- Width segments\n\t * @param {number}  [heightSegments=20]             \t\t\t\t- Height segments\n\t * @param {THREE.Vector3} [forceDirection=THREE.Vector3( 0, 0, 1 )] - Force direction\n\t * @param {THREE.Vector3} [forceAxis=THREE.Vector3( 0, 1, 0 )] \t\t- Along this axis\n\t * @param {number} [forceAngle=Math.PI/12] \t\t\t\t\t\t\t- Angle to bend in radians\n\t */\n  PANOLENS.Tile = function (width, height, widthSegments, heightSegments, forceDirection, forceAxis, forceAngle) {\n    var scope = this\n\n    this.parameters = {\n      width: width,\n      height: height,\n      widthSegments: widthSegments,\n      heightSegments: heightSegments,\n      forceDirection: forceDirection,\n      forceAxis: forceAxis,\n      forceAngle: forceAngle\n    }\n\n    width = width || 10\n    height = height || 5\n    widthSegments = widthSegments || 1\n    heightSegments = heightSegments || 1\n    forceDirection = forceDirection || new THREE.Vector3(0, 0, 1)\n    forceAxis = forceAxis || new THREE.Vector3(0, 1, 0)\n    forceAngle = forceAngle !== undefined ? forceAngle : 0\n\n    THREE.Mesh.call(this,\n      new THREE.PlaneGeometry(width, height, widthSegments, heightSegments),\n      new THREE.MeshBasicMaterial({ color: 0xffffff, transparent: true })\n    )\n\n    this.bendModifier = new THREE.BendModifier()\n\n    this.entity = undefined\n\n    this.animationDuration = 500\n    this.animationFadeOut = undefined\n    this.animationFadeIn = undefined\n    this.animationTranslation = undefined\n    this.tweens = {}\n\n    if (forceAngle !== 0) {\n      this.bend(forceDirection, forceAxis, forceAngle)\n    }\n\n    this.originalGeometry = this.geometry.clone()\n  }\n\n  PANOLENS.Tile.prototype = Object.create(THREE.Mesh.prototype)\n\n  PANOLENS.Tile.prototype.constructor = PANOLENS.Tile\n\n  PANOLENS.Tile.prototype.clone = function () {\n    var parameters = this.parameters, tile\n\n    tile = new PANOLENS.Tile(\n      parameters.width,\n      parameters.height,\n      parameters.widthSegments,\n      parameters.heightSegments,\n      parameters.forceDirection,\n      parameters.forceAxis,\n      parameters.forceAngle\n    )\n\n    tile.setEntity(this.entity)\n    tile.material = this.material.clone()\n\n    return tile\n  }\n\n  /**\n\t * Bend panel with direction, axis, and angle\n\t * @param  {THREE.Vector3} direction - Force direction\n\t * @param  {THREE.Vector3} axis - Along this axis\n\t * @param  {number} angle - Angle to bend in radians\n\t */\n  PANOLENS.Tile.prototype.bend = function (direction, axis, angle) {\n    this.bendModifier.set(direction, axis, angle).modify(this.geometry)\n  }\n\n  /**\n\t * Restore geometry back to initial state\n\t */\n  PANOLENS.Tile.prototype.unbend = function () {\n    var geometry = this.geometry\n\n    this.geometry = this.originalGeometry\n    this.originalGeometry = this.geometry.clone()\n\n    geometry.dispose()\n    geometry = null\n  }\n\n  /**\n\t * Create a tween object for animation\n\t * based on - {@link https://github.com/tweenjs/tween.js}\n\t * @param  {string} name       - Name of the tween animation\n\t * @param  {object} object     - Object to be tweened\n\t * @param  {object} toState    - Final state of the object's properties\n\t * @param  {number} duration   - Tweening duration\n\t * @param  {TWEEN.Easing} easing     - Easing function\n\t * @param  {number} delay      - Animation delay time\n\t * @param  {Function} onStart    - On start function\n\t * @param  {Function} onUpdate   - On update function\n\t * @param  {Function} onComplete - On complete function\n\t * @return {TWEEN.Tween}         - Tween object\n\t */\n  PANOLENS.Tile.prototype.tween = function (name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete) {\n    object = object || this\n    \ttoState = toState || {}\n    \tduration = duration || this.animationDuration\n    \teasing = easing || TWEEN.Easing.Exponential.Out\n    \tdelay = delay !== undefined ? delay : 0\n    \tonStart = onStart || null\n    \tonUpdate = onUpdate || null\n    \tonComplete = onComplete || null\n\n    \tif (!this.tweens[name]) {\n    \t\tthis.tweens[name] = new TWEEN.Tween(object)\n    \t\t\t.to(toState, duration)\n\t        \t.easing(easing)\n\t        \t.delay(delay)\n\t        \t.onStart(onStart)\n\t        \t.onUpdate(onUpdate)\n\t        \t.onComplete(onComplete)\n    \t}\n\n    \treturn this.tweens[name]\n  }\n\n  /**\n     * Short-hand for displaying a single ripple effect\n     * by duplicating itself and fadeout\n     * @param  {number} scale    - The duplicated self fadeout scale\n     * @param  {number} duration - Effect duration\n     * @param  {TWEEN.Easing} easing   - Easing function\n     */\n  PANOLENS.Tile.prototype.ripple = function (scale, duration, easing) {\n    \tscale = scale || 2\n    \tduration = duration || 200\n    \teasing = easing || TWEEN.Easing.Cubic.Out\n\n    \tvar scope = this, ripple = this.clone()\n\n    new TWEEN.Tween(ripple.scale)\n      .to({x: scale, y: scale}, duration)\n      .easing(easing)\n      .start()\n\n    new TWEEN.Tween(ripple.material)\n      .to({opacity: 0}, duration)\n      .easing(easing)\n      .onComplete(function () {\n        scope.remove(ripple)\n        ripple.geometry.dispose()\n        ripple.material.dispose()\n      })\n      .start()\n\n    this.add(ripple)\n  }\n\n  /**\n\t * Set entity if multiple objects are considered as one entity\n\t * @param {object} entity - Entity represents whole group structure\n\t */\n  PANOLENS.Tile.prototype.setEntity = function (entity) {\n    this.entity = entity\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n     * Group consists of tile array\n     * @constructor\n     * @param {array}  tileArray         - Tile array of PANOLENS.Tile\n     * @param {number} verticalGap       - Vertical gap between each tile\n     * @param {number} depthGap          - Depth gap between each tile\n     * @param {number} animationDuration - Animation duration\n     * @param {number} offset            - Offset index\n     */\n  PANOLENS.TileGroup = function (tileArray, verticalGap, depthGap, animationDuration, offset) {\n    var scope = this, textureLoader\n\n    THREE.Object3D.call(this)\n\n    this.tileArray = tileArray || []\n    this.offset = offset !== undefined ? offset : 0\n    this.v_gap = verticalGap !== undefined ? verticalGap : 6\n    this.d_gap = depthGap !== undefined ? depthGap : 2\n    this.animationDuration = animationDuration !== undefined ? animationDuration : 200\n    this.animationEasing = TWEEN.Easing.Exponential.Out\n    this.visibleDelta = 2\n\n    this.tileArray.map(function (tile, index) {\n      if (tile.image) {\n        PANOLENS.Utils.TextureLoader.load(tile.image, scope.setTexture.bind(tile))\n      }\n\n      tile.position.set(0, index * -scope.v_gap, index * -scope.d_gap)\n      tile.originalPosition = tile.position.clone()\n      tile.setEntity(scope)\n      scope.add(tile)\n    })\n\n    this.updateVisbility()\n  }\n\n  PANOLENS.TileGroup.prototype = Object.create(THREE.Object3D.prototype)\n\n  PANOLENS.TileGroup.prototype.constructor = PANOLENS.TileGroup\n\n  /**\n     * Update corresponding tile textures\n     * @param  {array} imageArray - Image array with index to index image update\n     */\n  PANOLENS.TileGroup.prototype.updateTexture = function (imageArray) {\n    var scope = this\n\n    imageArray = imageArray || []\n    this.children.map(function (child, index) {\n      if (child instanceof PANOLENS.Tile && imageArray[index]) {\n        PANOLENS.Utils.TextureLoader.load(imageArray[index], scope.setTexture.bind(child))\n\t    \t\tif (child.outline) {\n\t    \t\t\tchild.outline.material.visible = true\n\t    \t\t}\n      }\n    })\n  }\n\n  /**\n     * Update all tile textures and hide the remaining ones\n     * @param  {array} imageArray - Image array with index to index image update\n     */\n  PANOLENS.TileGroup.prototype.updateAllTexture = function (imageArray) {\n    this.updateTexture(imageArray)\n\n    if (imageArray.length < this.children.length) {\n      for (var i = imageArray.length; i < this.children.length; i++) {\n        if (this.children[i] instanceof PANOLENS.Tile) {\n          this.children[i].material.visible = false\n          if (this.children[i].outline) {\n            this.children[i].outline.material.visible = false\n          }\n        }\n      }\n    }\n  }\n\n  /**\n     * Set individual texture\n     * @param {THREE.Texture} texture - Texture to be updated\n     */\n  PANOLENS.TileGroup.prototype.setTexture = function (texture) {\n    texture.minFilter = THREE.LinearFilter\n    texture.magFilter = THREE.LinearFilter\n    this.material.visible = true\n    this.material.map = texture\n    this.material.needsUpdate = true\n  }\n\n  /**\n     * Update visibility\n     */\n  PANOLENS.TileGroup.prototype.updateVisbility = function () {\n    \tthis.children[this.offset].visible = true\n    \tnew TWEEN.Tween(this.children[this.offset].material)\n      .to({ opacity: 1 }, this.animationDuration)\n      .easing(this.animationEasing)\n      .start()\n\n    \tif (this.children[this.offset].outline) {\n    \t\tthis.children[this.offset].outline.visible = true\n    \t}\n\n    \t// Backward\n    \tfor (var i = this.offset - 1; i >= 0; i--) {\n    \t\tif (this.tileArray.indexOf(this.children[i]) === -1) { continue }\n\n    \t\tif (this.offset - i <= this.visibleDelta) {\n    \t\t\tthis.children[i].visible = true\n    \t\t\tnew TWEEN.Tween(this.children[i].material)\n    \t\t\t.to({ opacity: 1 / (this.offset - i) * 0.5 }, this.animationDuration)\n    \t\t\t.easing(this.animationEasing)\n    \t\t\t.start()\n    \t\t} else {\n    \t\t\tthis.children[i].visible = false\n    \t\t}\n\n    \t\tthis.children[i].outline && (this.children[i].outline.visible = false)\n    \t}\n\n    \t// Forward\n    \tfor (var i = this.offset + 1; i < this.children.length; i++) {\n    \t\tif (this.tileArray.indexOf(this.children[i]) === -1) { continue }\n\n    \t\tif (i - this.offset <= this.visibleDelta) {\n    \t\t\tthis.children[i].visible = true\n    \t\t\tnew TWEEN.Tween(this.children[i].material)\n    \t\t\t.to({ opacity: 1 / (i - this.offset) * 0.5 }, this.animationDuration)\n    \t\t\t.easing(this.animationEasing)\n    \t\t\t.start()\n    \t\t} else {\n    \t\t\tthis.children[i].visible = false\n    \t\t}\n\n    \t\tthis.children[i].outline && (this.children[i].outline.visible = false)\n    \t}\n  }\n\n  /**\n     * Scroll up\n     * @param  {number} duration - Scroll up duration\n     */\n  PANOLENS.TileGroup.prototype.scrollUp = function (duration) {\n    \tvar tiles = this.tileArray, offset\n\n    \tduration = duration !== undefined ? duration : this.animationDuration\n\n    \toffset = this.offset + 1\n\n    \tif (this.offset < tiles.length - 1 && tiles[ this.offset + 1 ].material.visible) {\n    \t\tfor (var i = tiles.length - 1; i >= 0; i--) {\n    \t\t\tnew TWEEN.Tween(tiles[i].position)\n    \t\t\t.to({ y: (i - offset) * -this.v_gap,\n    \t\t\t\t  z: Math.abs(i - offset) * -this.d_gap }, duration)\n    \t\t\t.easing(this.animationEasing)\n    \t\t\t.start()\n\t    \t}\n\n\t    \tthis.offset++\n\t    \tthis.updateVisbility()\n\t    \tthis.dispatchEvent({ type: 'scroll', direction: 'up' })\n    \t}\n  }\n\n  /**\n     * Scroll down\n     * @param  {number} duration - Scroll up duration\n     */\n  PANOLENS.TileGroup.prototype.scrollDown = function (duration) {\n    \tvar tiles = this.tileArray, offset\n\n    \tduration = duration !== undefined ? duration : this.animationDuration\n\n    \toffset = this.offset - 1\n\n    \tif (this.offset > 0 && tiles[ this.offset - 1 ].material.visible) {\n    \t\tfor (var i = 0; i < tiles.length; i++) {\n\t    \t\tnew TWEEN.Tween(tiles[i].position)\n    \t\t\t.to({ y: (i - offset) * -this.v_gap,\n    \t\t\t\t  z: Math.abs(i - offset) * -this.d_gap }, duration)\n    \t\t\t.easing(this.animationEasing)\n    \t\t\t.start()\n\t    \t}\n\n\t    \tthis.offset--\n\t    \tthis.updateVisbility()\n\t    \tthis.dispatchEvent({ type: 'scroll', direction: 'down' })\n    \t}\n  }\n\n  PANOLENS.TileGroup.prototype.reset = function () {\n    \tthis.tileArray.map(function (child, index) {\n    \t\tchild.position.copy(child.originalPosition)\n    \t})\n\n    \tthis.offset = 0\n    \tthis.updateVisbility()\n  }\n\n  /**\n     * Get current index\n     * @return {number} Index of the group. Range from 0 to this.tileArray.length\n     */\n  PANOLENS.TileGroup.prototype.getIndex = function () {\n    \treturn this.offset\n  }\n\n  /**\n     * Get visible tile counts\n     * @return {number} Number of visible tiles\n     */\n  PANOLENS.TileGroup.prototype.getTileCount = function () {\n    \tvar count = 0\n\n    \tthis.tileArray.map(function (tile) {\n    \t\tif (tile.material.visible) {\n    \t\t\tcount++\n    \t\t}\n    \t})\n\n    \treturn count\n  }\n})(); (function () {\n  'use strict'\n\n  var sharedFont, sharedTexture\n  var pendingQueue = []\n\n  /**\n\t * Sprite text based on {@link https://github.com/Jam3/three-bmfont-text}\n\t * @constructor\n\t * @param {string} text     - Text to be displayed\n\t * @param {number} maxWidth\t- Max width\n\t * @param {number} color    - Color in hexadecimal\n\t * @param {number} opacity  - Text opacity\n\t * @param {object} options  - Options to create text geometry\n\t */\n  PANOLENS.SpriteText = function (text, maxWidth, color, opacity, options) {\n    THREE.Object3D.call(this)\n\n    this.text = text || ''\n    this.maxWidth = maxWidth || 2000\n    this.color = color || 0xffffff\n    this.opacity = opacity !== undefined ? opacity : 1\n    this.options = options || {}\n\n    this.animationDuration = 500\n    this.animationFadeOut = undefined\n    this.animationFadeIn = undefined\n    this.tweens = {}\n\n    this.addText(text)\n  }\n\n  PANOLENS.SpriteText.prototype = Object.create(THREE.Object3D.prototype)\n\n  PANOLENS.SpriteText.prototype.constructor = PANOLENS.SpriteText\n\n  // Reference function will be overwritten by Bmfont.js\n  PANOLENS.SpriteText.prototype.generateTextGeometry = function () {}\n  PANOLENS.SpriteText.prototype.generateSDFShader = function () {}\n\n  /**\n\t * Set BMFont\n\t * @param {Function} callback - Callback after font is loaded\n\t * @param {object}   font     - The font to be loaded\n\t * @param {THREE.Texture}   texture  - Font texture\n\t */\n  PANOLENS.SpriteText.prototype.setBMFont = function (callback, font, texture) {\n    texture.needsUpdate = true\n\t  \ttexture.minFilter = THREE.LinearMipMapLinearFilter\n    texture.magFilter = THREE.LinearFilter\n    texture.generateMipmaps = true\n    texture.anisotropy = 8\n\n    sharedFont = font\n    sharedTexture = texture\n\n    for (var i = pendingQueue.length - 1; i >= 0; i--) {\n      pendingQueue[ i ].target.addText(pendingQueue[ i ].text)\n    }\n\n    while (pendingQueue.length > 0) {\n      pendingQueue.pop()\n    }\n\n    callback && callback()\n  }\n\n  /**\n\t * Add text mesh\n\t * @param {string} text - Text to be displayed\n\t */\n  PANOLENS.SpriteText.prototype.addText = function (text) {\n    if (!sharedFont || !sharedTexture) {\n      pendingQueue.push({ target: this, text: text })\n      return\n    }\n\n    var textAnchor = new THREE.Object3D()\n\n    this.options.text = text\n    this.options.font = sharedFont\n    this.options.width = this.maxWidth\n\n    var geometry = this.generateTextGeometry(this.options)\n    geometry.computeBoundingBox()\n    geometry.computeBoundingSphere()\n\n    var material = new THREE.RawShaderMaterial(this.generateSDFShader({\n\t\t    map: sharedTexture,\n\t\t    side: THREE.DoubleSide,\n\t\t    transparent: true,\n\t\t    color: this.color,\n\t\t    opacity: this.opacity\n    }))\n\n    var layout = geometry.layout\n    var textMesh = new THREE.Mesh(geometry, material)\n\n    textMesh.entity = this\n    textMesh.position.x = -layout.width / 2\n    textMesh.position.y = layout.height * 1.035\n\n    textAnchor.scale.x = textAnchor.scale.y = -0.05\n    textAnchor.add(textMesh)\n\n    this.mesh = textMesh\n    this.add(textAnchor)\n  }\n\n  /**\n\t * Update text geometry\n\t * @param  {object} options - Geometry options based on\n\t *  https://github.com/Jam3/three-bmfont-text#geometry--createtextopt\n\t */\n  PANOLENS.SpriteText.prototype.update = function (options) {\n    var mesh\n\n    options = options || {}\n\n    mesh = this.mesh\n\n    mesh.geometry.update(options)\n    mesh.position.x = -mesh.geometry.layout.width / 2\n    mesh.position.y = mesh.geometry.layout.height * 1.035\n  }\n\n  /**\n\t * Create a tween object for animation\n\t * based on - {@link https://github.com/tweenjs/tween.js}\n\t * @param  {string} name       - Name of the tween animation\n\t * @param  {object} object     - Object to be tweened\n\t * @param  {object} toState    - Final state of the object's properties\n\t * @param  {number} duration   - Tweening duration\n\t * @param  {TWEEN.Easing} easing     - Easing function\n\t * @param  {number} delay      - Animation delay time\n\t * @param  {Function} onStart    - On start function\n\t * @param  {Function} onUpdate   - On update function\n\t * @param  {Function} onComplete - On complete function\n\t * @return {TWEEN.Tween}         - Tween object\n\t */\n  PANOLENS.SpriteText.prototype.tween = function (name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete) {\n    object = object || this\n    toState = toState || {}\n    duration = duration || this.animationDuration\n    easing = easing || TWEEN.Easing.Exponential.Out\n    delay = delay !== undefined ? delay : 0\n    onStart = onStart || null\n    onUpdate = onUpdate || null\n    onComplete = onComplete || null\n\n    if (!this.tweens[name]) {\n      this.tweens[name] = new TWEEN.Tween(object)\n        .to(toState, duration)\n\t        \t.easing(easing)\n\t        \t.delay(delay)\n\t        \t.onStart(onStart)\n\t        \t.onUpdate(onUpdate)\n\t        \t.onComplete(onComplete)\n    }\n\n    return this.tweens[name]\n  }\n\n  /**\n\t * Get geometry layout\n\t * @return {object} Text geometry layout\n\t */\n  PANOLENS.SpriteText.prototype.getLayout = function () {\n    return this.mesh && this.mesh.geometry && this.mesh.geometry.layout || {}\n  }\n\n  /**\n\t * Set entity if multiple objects are considered as one entity\n\t * @param {object} entity - Entity represents whole group structure\n\t */\n  PANOLENS.SpriteText.prototype.setEntity = function (entity) {\n    this.entity = entity\n  }\n})(); (function () {\n  /**\n\t * Widget for controls\n\t * @constructor\n\t * @param {HTMLElement} container - A domElement where default control widget will be attached to\n\t */\n  PANOLENS.Widget = function (container) {\n    THREE.EventDispatcher.call(this)\n\n    this.DEFAULT_TRANSITION = 'all 0.27s ease'\n    this.TOUCH_ENABLED = PANOLENS.Utils.checkTouchSupported()\n    this.PREVENT_EVENT_HANDLER = function (event) {\n      event.preventDefault()\n      event.stopPropagation()\n    }\n\n    this.container = container\n\n    this.barElement\n    this.fullscreenElement\n    this.videoElement\n    this.settingElement\n\n    this.mainMenu\n\n    this.activeMainItem\n    this.activeSubMenu\n    this.mask\n  }\n\n  PANOLENS.Widget.prototype = Object.create(THREE.EventDispatcher.prototype)\n\n  PANOLENS.Widget.prototype.constructor = PANOLENS.Widget\n\n  /**\n\t * Add control bar\n\t */\n  PANOLENS.Widget.prototype.addControlBar = function () {\n    if (!this.container) {\n      console.warn('Widget container not set')\n      return\n    }\n\n    var scope = this, bar, styleTranslate, styleOpacity, gradientStyle\n\n    gradientStyle = 'linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))'\n\n    bar = document.createElement('div')\n    bar.style.width = '100%'\n    bar.style.height = '44px'\n    bar.style.float = 'left'\n    bar.style.transform = bar.style.webkitTransform = bar.style.msTransform = 'translateY(-100%)'\n    bar.style.background = '-webkit-' + gradientStyle\n    bar.style.background = '-moz-' + gradientStyle\n    bar.style.background = '-o-' + gradientStyle\n    bar.style.background = '-ms-' + gradientStyle\n    bar.style.background = gradientStyle\n    bar.style.transition = this.DEFAULT_TRANSITION\n    bar.style.pointerEvents = 'none'\n    bar.isHidden = false\n    bar.toggle = function () {\n      bar.isHidden = !bar.isHidden\n      styleTranslate = bar.isHidden ? 'translateY(0)' : 'translateY(-100%)'\n      styleOpacity = bar.isHidden ? 0 : 1\n      bar.style.transform = bar.style.webkitTransform = bar.style.msTransform = styleTranslate\n      bar.style.opacity = styleOpacity\n    }\n\n    // Menu\n    var menu = this.createDefaultMenu()\n    this.mainMenu = this.createMainMenu(menu)\n    bar.appendChild(this.mainMenu)\n\n    // Mask\n    var mask = this.createMask()\n    this.mask = mask\n    this.container.appendChild(mask)\n\n    // Dispose\n    bar.dispose = function () {\n      if (scope.fullscreenElement) {\n        bar.removeChild(scope.fullscreenElement)\n        scope.fullscreenElement.dispose()\n        scope.fullscreenElement = null\n      }\n\n      if (scope.settingElement) {\n        bar.removeChild(scope.settingElement)\n        scope.settingElement.dispose()\n        scope.settingElement = null\n      }\n\n      if (scope.videoElement) {\n        bar.removeChild(scope.videoElement)\n        scope.videoElement.dispose()\n        scope.videoElement = null\n      }\n    }\n\n    this.container.appendChild(bar)\n\n    // Mask events\n    this.mask.addEventListener('mousemove', this.PREVENT_EVENT_HANDLER, true)\n    this.mask.addEventListener('mouseup', this.PREVENT_EVENT_HANDLER, true)\n    this.mask.addEventListener('mousedown', this.PREVENT_EVENT_HANDLER, true)\n    this.mask.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', function (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      scope.mask.hide()\n      scope.settingElement.deactivate()\n    }, false)\n\n    // Event listener\n    this.addEventListener('control-bar-toggle', bar.toggle)\n\n    this.barElement = bar\n  }\n\n  /**\n\t * Create default menu\n\t */\n  PANOLENS.Widget.prototype.createDefaultMenu = function () {\n    var scope = this, handler\n\n    handler = function (method, data) {\n      return function () {\n        scope.dispatchEvent({\n\n          type: 'panolens-viewer-handler',\n          method: method,\n          data: data\n\n        })\n      }\n    }\n\n    return [\n\n      {\n        title: 'Control',\n        subMenu: [\n          {\n            title: this.TOUCH_ENABLED ? 'Touch' : 'Mouse',\n            handler: handler('enableControl', PANOLENS.Controls.ORBIT)\n          },\n          {\n            title: 'Sensor',\n            handler: handler('enableControl', PANOLENS.Controls.DEVICEORIENTATION)\n          }\n        ]\n      },\n\n      {\n        title: 'Mode',\n        subMenu: [\n          {\n            title: 'Normal',\n            handler: handler('disableEffect')\n          },\n          {\n            title: 'Cardboard',\n            handler: handler('enableEffect', PANOLENS.Modes.CARDBOARD)\n          },\n          {\n            title: 'Stereoscopic',\n            handler: handler('enableEffect', PANOLENS.Modes.STEREO)\n          }\n        ]\n      }\n\n    ]\n  }\n\n  /**\n\t * Add buttons on top of control bar\n\t * @param {string} name - The control button name to be created\n\t */\n  PANOLENS.Widget.prototype.addControlButton = function (name) {\n    var element\n\n    switch (name) {\n      case 'fullscreen':\n\n        element = this.createFullscreenButton()\n        this.fullscreenElement = element\n\n        break\n\n      case 'setting':\n\n        element = this.createSettingButton()\n        this.settingElement = element\n\n        break\n\n      case 'video':\n\n        element = this.createVideoControl()\n        this.videoElement = element\n\n        break\n\n      default:\n\n        return\n    }\n\n    if (!element) {\n      return\n    }\n\n    this.barElement.appendChild(element)\n  }\n\n  PANOLENS.Widget.prototype.createMask = function () {\n    var element = document.createElement('div')\n    element.style.position = 'absolute'\n    element.style.top = 0\n    element.style.left = 0\n    element.style.width = '100%'\n    element.style.height = '100%'\n    element.style.background = 'transparent'\n    element.style.display = 'none'\n\n    element.show = function () {\n      this.style.display = 'block'\n    }\n\n    element.hide = function () {\n      this.style.display = 'none'\n    }\n\n    return element\n  }\n\n  /**\n\t * Create Setting button to toggle menu\n\t */\n  PANOLENS.Widget.prototype.createSettingButton = function () {\n    var scope = this, item\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      scope.mainMenu.toggle()\n\n      if (this.activated) {\n        this.deactivate()\n      } else {\n        this.activate()\n      }\n    }\n\n    item = this.createCustomItem({\n\n      style: {\n\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.Setting + '\")',\n        webkitTransition: this.DEFAULT_TRANSITION,\n        transition: this.DEFAULT_TRANSITION\n\n      },\n\n      onTap: onTap\n\n    })\n\n    item.activate = function () {\n      this.style.transform = 'rotate3d(0,0,1,90deg)'\n      this.activated = true\n      scope.mask.show()\n    }\n\n    item.deactivate = function () {\n      this.style.transform = 'rotate3d(0,0,0,0)'\n      this.activated = false\n      scope.mask.hide()\n\n      if (scope.mainMenu && scope.mainMenu.visible) {\n        scope.mainMenu.hide()\n      }\n\n      if (scope.activeSubMenu && scope.activeSubMenu.visible) {\n        scope.activeSubMenu.hide()\n      }\n\n      if (scope.mainMenu && scope.mainMenu._width) {\n        scope.mainMenu.changeSize(scope.mainMenu._width)\n        scope.mainMenu.unslideAll()\n      }\n    }\n\n    item.activated = false\n\n    return item\n  }\n\n  /**\n\t * Create Fullscreen button\n\t * @return {HTMLSpanElement} - The dom element icon for fullscreen\n\t * @fires PANOLENS.Widget#panolens-viewer-handler\n\t */\n  PANOLENS.Widget.prototype.createFullscreenButton = function () {\n    var scope = this, item, isFullscreen = false, tapSkipped = true, stylesheetId\n\n    stylesheetId = 'panolens-style-addon'\n\n    // Don't create button if no support\n    if (!document.fullscreenEnabled &&\n\t\t\t !document.webkitFullscreenEnabled &&\n\t\t\t !document.mozFullScreenEnabled &&\n\t\t\t !document.msFullscreenEnabled) {\n      return\n    }\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      tapSkipped = false\n\n      if (!isFullscreen) {\n\t\t\t    scope.container.requestFullscreen && scope.container.requestFullscreen()\n\t\t\t    scope.container.msRequestFullscreen && scope.container.msRequestFullscreen()\n\t\t\t    scope.container.mozRequestFullScreen && scope.container.mozRequestFullScreen()\n\t\t\t    scope.container.webkitRequestFullscreen && scope.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)\n        isFullscreen = true\n      } else {\n\t\t\t    document.exitFullscreen && document.exitFullscreen()\n\t\t\t    document.msExitFullscreen && document.msExitFullscreen()\n\t\t\t    document.mozCancelFullScreen && document.mozCancelFullScreen()\n\t\t\t    document.webkitExitFullscreen && document.webkitExitFullscreen()\n        isFullscreen = false\n      }\n\n      this.style.backgroundImage = (isFullscreen)\n        ? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")'\n        : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")'\n    }\n\n    function onFullScreenChange (e) {\n      if (tapSkipped) {\n        isFullscreen = !isFullscreen\n\n        item.style.backgroundImage = (isFullscreen)\n          ? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")'\n          : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")'\n      }\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'onWindowResize' function call on PANOLENS.Viewer\n\t\t\t */\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onWindowResize', data: false })\n\n      tapSkipped = true\n    }\n\n    document.addEventListener('fullscreenchange', onFullScreenChange, false)\n    document.addEventListener('webkitfullscreenchange', onFullScreenChange, false)\n    document.addEventListener('mozfullscreenchange', onFullScreenChange, false)\n    document.addEventListener('MSFullscreenChange', onFullScreenChange, false)\n\n    item = this.createCustomItem({\n\n      style: {\n\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")'\n\n      },\n\n      onTap: onTap\n\n    })\n\n    // Add fullscreen stlye if not exists\n    if (!document.querySelector(stylesheetId)) {\n      var sheet = document.createElement('style')\n      sheet.id = stylesheetId\n      sheet.innerHTML = ':-webkit-full-screen { width: 100% !important; height: 100% !important }'\n      document.body.appendChild(sheet)\n    }\n\n    return item\n  }\n\n  /**\n\t * Create video control container\n\t * @return {HTMLSpanElement} - The dom element icon for video control\n\t */\n  PANOLENS.Widget.prototype.createVideoControl = function () {\n    var item\n\n    item = document.createElement('span')\n    item.style.display = 'none'\n    item.show = function () {\n      item.style.display = ''\n    }\n\n    item.hide = function () {\n      item.style.display = 'none'\n      item.controlButton.paused = true\n      item.controlButton.update()\n    }\n\n    item.controlButton = this.createVideoControlButton()\n    item.seekBar = this.createVideoControlSeekbar()\n\n    item.appendChild(item.controlButton)\n    item.appendChild(item.seekBar)\n\n    item.dispose = function () {\n      item.removeChild(item.controlButton)\n      item.removeChild(item.seekBar)\n\n      item.controlButton.dispose()\n      item.controlButton = null\n\n      item.seekBar.dispose()\n      item.seekBar = null\n    }\n\n    this.addEventListener('video-control-show', item.show)\n    this.addEventListener('video-control-hide', item.hide)\n\n    return item\n  }\n\n  /**\n\t * Create video control button\n\t * @return {HTMLSpanElement} - The dom element icon for video control\n\t * @fires PANOLENS.Widget#panolens-viewer-handler\n\t */\n  PANOLENS.Widget.prototype.createVideoControlButton = function () {\n    var scope = this, item\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'toggleVideoPlay' function call on PANOLENS.Viewer\n\t\t\t */\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'toggleVideoPlay', data: !this.paused })\n\n      this.paused = !this.paused\n\n      item.update()\n    }\n\n    item = this.createCustomItem({\n\n      style: {\n\n        float: 'left',\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.VideoPlay + '\")'\n\n      },\n\n      onTap: onTap\n\n    })\n\n    item.paused = true\n\n    item.update = function (paused) {\n      this.paused = paused !== undefined ? paused : this.paused\n\n      this.style.backgroundImage = 'url(\"' + (this.paused\n        ? PANOLENS.DataImage.VideoPlay\n        : PANOLENS.DataImage.VideoPause) + '\")'\n    }\n\n    return item\n  }\n\n  /**\n\t * Create video seekbar\n\t * @return {HTMLSpanElement} - The dom element icon for video seekbar\n\t * @fires PANOLENS.Widget#panolens-viewer-handler\n\t */\n  PANOLENS.Widget.prototype.createVideoControlSeekbar = function () {\n    var scope = this, item, progressElement, progressElementControl,\n      isDragging = false, mouseX, percentageNow, percentageNext\n\n    progressElement = document.createElement('div')\n    progressElement.style.width = '0%'\n    progressElement.style.height = '100%'\n    progressElement.style.backgroundColor = '#fff'\n\n    progressElementControl = document.createElement('div')\n    progressElementControl.style.float = 'right'\n    progressElementControl.style.width = '14px'\n    progressElementControl.style.height = '14px'\n    progressElementControl.style.transform = 'translate(7px, -5px)'\n    progressElementControl.style.borderRadius = '50%'\n    progressElementControl.style.backgroundColor = '#ddd'\n\n    progressElementControl.addEventListener('mousedown', onMouseDown, false)\n    progressElementControl.addEventListener('touchstart', onMouseDown, false)\n\n    function onMouseDown (event) {\n      event.stopPropagation()\n\n      isDragging = true\n\n      mouseX = event.clientX || (event.changedTouches && event.changedTouches[0].clientX)\n\n      percentageNow = parseInt(progressElement.style.width) / 100\n\n      addControlListeners()\n    }\n\n    function onVideoControlDrag (event) {\n      var clientX\n\n      if (isDragging) {\n        clientX = event.clientX || (event.changedTouches && event.changedTouches[0].clientX)\n\n        percentageNext = (clientX - mouseX) / item.clientWidth\n\n        percentageNext = percentageNow + percentageNext\n\n        percentageNext = percentageNext > 1 ? 1 : ((percentageNext < 0) ? 0 : percentageNext)\n\n        item.setProgress(percentageNext)\n\n        /**\n\t\t\t\t * Viewer handler event\n\t\t\t\t * @type {object}\n\t\t\t\t * @property {string} method - 'setVideoCurrentTime' function call on PANOLENS.Viewer\n\t\t\t\t * @property {number} data - Percentage of current video. Range from 0.0 to 1.0\n\t\t\t\t */\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentageNext })\n      }\n    }\n\n    function onVideoControlStop (event) {\n      event.stopPropagation()\n\n      isDragging = false\n\n      removeControlListeners()\n    }\n\n    function addControlListeners () {\n      scope.container.addEventListener('mousemove', onVideoControlDrag, false)\n      scope.container.addEventListener('mouseup', onVideoControlStop, false)\n      scope.container.addEventListener('touchmove', onVideoControlDrag, false)\n      scope.container.addEventListener('touchend', onVideoControlStop, false)\n    }\n\n    function removeControlListeners () {\n      scope.container.removeEventListener('mousemove', onVideoControlDrag, false)\n      scope.container.removeEventListener('mouseup', onVideoControlStop, false)\n      scope.container.removeEventListener('touchmove', onVideoControlDrag, false)\n      scope.container.removeEventListener('touchend', onVideoControlStop, false)\n    }\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      var percentage\n\n      if (event.target === progressElementControl) { return }\n\n      percentage = (event.changedTouches && event.changedTouches.length > 0)\n        ? (event.changedTouches[0].pageX - event.target.getBoundingClientRect().left) / this.clientWidth\n        : event.offsetX / this.clientWidth\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'setVideoCurrentTime' function call on PANOLENS.Viewer\n\t\t\t * @property {number} data - Percentage of current video. Range from 0.0 to 1.0\n\t\t\t */\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentage })\n\n      item.setProgress(event.offsetX / this.clientWidth)\n    }\n\n    function onDispose () {\n      removeControlListeners()\n      progressElement = null\n      progressElementControl = null\n    }\n\n    progressElement.appendChild(progressElementControl)\n\n    item = this.createCustomItem({\n\n      style: {\n\n        float: 'left',\n        width: '30%',\n        height: '4px',\n        marginTop: '20px',\n        backgroundColor: 'rgba(188,188,188,0.8)'\n\n      },\n\n      onTap: onTap,\n      onDispose: onDispose\n\n    })\n\n    item.appendChild(progressElement)\n\n    item.setProgress = function (percentage) {\n      progressElement.style.width = percentage * 100 + '%'\n    }\n\n    this.addEventListener('video-update', function (event) {\n      item.setProgress(event.percentage)\n    })\n\n    return item\n  }\n\n  /**\n\t * Create menu item\n\t * @param  {string} title - Title to display\n\t * @return {HTMLDomElement} - An anchor tag element\n\t */\n  PANOLENS.Widget.prototype.createMenuItem = function (title) {\n    var scope = this, item = document.createElement('a')\n    item.textContent = title\n    item.style.display = 'block'\n    item.style.padding = '10px'\n    item.style.textDecoration = 'none'\n    item.style.cursor = 'pointer'\n    item.style.pointerEvents = 'auto'\n    item.style.transition = this.DEFAULT_TRANSITION\n\n    item.slide = function (right) {\n      this.style.transform = 'translateX(' + (right ? '' : '-') + '100%)'\n    }\n\n    item.unslide = function () {\n      this.style.transform = 'translateX(0)'\n    }\n\n    item.setIcon = function (url) {\n      if (this.icon) {\n        this.icon.style.backgroundImage = 'url(' + url + ')'\n      }\n    }\n\n    item.setSelectionTitle = function (title) {\n      if (this.selection) {\n        this.selection.textContent = title\n      }\n    }\n\n    item.addSelection = function (name) {\n      var selection = document.createElement('span')\n      selection.style.fontSize = '13px'\n      selection.style.fontWeight = '300'\n      selection.style.float = 'right'\n\n      this.selection = selection\n      this.setSelectionTitle(name)\n      this.appendChild(selection)\n\n      return this\n    }\n\n    item.addIcon = function (url, left, flip) {\n      url = url || PANOLENS.DataImage.ChevronRight\n      left = left || false\n      flip = flip || false\n\n      var element = document.createElement('span')\n      element.style.float = left ? 'left' : 'right'\n      element.style.width = '17px'\n      element.style.height = '17px'\n      element.style[ 'margin' + (left ? 'Right' : 'Left') ] = '12px'\n      element.style.backgroundSize = 'cover'\n\n      if (flip) {\n        element.style.transform = 'rotateZ(180deg)'\n      }\n\n      this.icon = element\n      this.setIcon(url)\n      this.appendChild(element)\n\n      return this\n    }\n\n    item.addSubMenu = function (title, items) {\n      this.subMenu = scope.createSubMenu(title, items)\n\n      return this\n    }\n\n    item.addEventListener('mouseenter', function () {\n      this.style.backgroundColor = '#e0e0e0'\n    }, false)\n\n    item.addEventListener('mouseleave', function () {\n      this.style.backgroundColor = '#fafafa'\n    }, false)\n\n    return item\n  }\n\n  /**\n\t * Create menu item header\n\t * @param  {string} title - Title to display\n\t * @return {HTMLDomElement} - An anchor tag element\n\t */\n  PANOLENS.Widget.prototype.createMenuItemHeader = function (title) {\n    var header = this.createMenuItem(title)\n\n    header.style.borderBottom = '1px solid #333'\n    header.style.paddingBottom = '15px'\n\n    return header\n  }\n\n  /**\n\t * Create main menu\n\t * @param  {array} menus - Menu array list\n\t * @return {HTMLDomElement} - A span element\n\t */\n  PANOLENS.Widget.prototype.createMainMenu = function (menus) {\n    var scope = this, menu = this.createMenu(), subMenu\n\n    menu._width = 200\n    menu.changeSize(menu._width)\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      var mainMenu = scope.mainMenu, subMenu = this.subMenu\n\n      function onNextTick () {\n        mainMenu.changeSize(subMenu.clientWidth)\n        subMenu.show()\n        subMenu.unslideAll()\n      }\n\n      mainMenu.hide()\n      mainMenu.slideAll()\n      mainMenu.parentElement.appendChild(subMenu)\n\n      scope.activeMainItem = this\n      scope.activeSubMenu = subMenu\n\n      window.requestAnimationFrame(onNextTick)\n    }\n\n    for (var i = 0; i < menus.length; i++) {\n      var item = menu.addItem(menus[ i ].title)\n\n      item.style.paddingLeft = '20px'\n\n      item.addIcon()\n        .addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false)\n\n      if (menus[ i ].subMenu && menus[ i ].subMenu.length > 0) {\n        var title = menus[ i ].subMenu[ 0 ].title\n\n        item.addSelection(title)\n          .addSubMenu(menus[ i ].title, menus[ i ].subMenu)\n      }\n    }\n\n    return menu\n  }\n\n  /**\n\t * Create sub menu\n\t * @param {string} title - Sub menu title\n\t * @param {array} items - Item array list\n\t * @return {HTMLDomElement} - A span element\n\t */\n  PANOLENS.Widget.prototype.createSubMenu = function (title, items) {\n    var scope = this, menu, subMenu = this.createMenu()\n\n    subMenu.items = items\n    subMenu.activeItem\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      menu = scope.mainMenu\n      menu.changeSize(menu._width)\n      menu.unslideAll()\n      menu.show()\n      subMenu.slideAll(true)\n      subMenu.hide()\n\n      if (this.type !== 'header') {\n        subMenu.setActiveItem(this)\n        scope.activeMainItem.setSelectionTitle(this.textContent)\n\n        this.handler && this.handler()\n      }\n    }\n\n    subMenu.addHeader(title).addIcon(undefined, true, true).addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false)\n\n    for (var i = 0; i < items.length; i++) {\n      var item = subMenu.addItem(items[ i ].title)\n\n      item.style.fontWeight = 300\n      item.handler = items[ i ].handler\n      item.addIcon(' ', true)\n      item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false)\n\n      if (!subMenu.activeItem) {\n        subMenu.setActiveItem(item)\n      }\n    }\n\n    subMenu.slideAll(true)\n\n    return subMenu\n  }\n\n  /**\n\t * Create general menu\n\t * @return {HTMLDomElement} - A span element\n\t */\n  PANOLENS.Widget.prototype.createMenu = function () {\n    var scope = this, menu = document.createElement('span'), style\n\n    style = menu.style\n\n    style.padding = '5px 0'\n    style.position = 'fixed'\n    style.bottom = '100%'\n    style.right = '14px'\n    style.backgroundColor = '#fafafa'\n    style.fontFamily = 'Helvetica Neue'\n    style.fontSize = '14px'\n    style.visibility = 'hidden'\n    style.opacity = 0\n    style.boxShadow = '0 0 12pt rgba(0,0,0,0.25)'\n  \t\tstyle.borderRadius = '2px'\n    style.overflow = 'hidden'\n    style.willChange = 'width, height, opacity'\n    style.pointerEvents = 'auto'\n    style.transition = this.DEFAULT_TRANSITION\n\n    menu.visible = false\n\n    menu.changeSize = function (width, height) {\n      if (width) {\n        this.style.width = width + 'px'\n      }\n\n      if (height) {\n        this.style.height = height + 'px'\n      }\n    }\n\n    menu.show = function () {\n      this.style.opacity = 1\n      this.style.visibility = 'visible'\n      this.visible = true\n    }\n\n    menu.hide = function () {\n      this.style.opacity = 0\n      this.style.visibility = 'hidden'\n      this.visible = false\n    }\n\n    menu.toggle = function () {\n      if (this.visible) {\n        this.hide()\n      } else {\n        this.show()\n      }\n    }\n\n    menu.slideAll = function (right) {\n      for (var i = 0; i < menu.children.length; i++) {\n        if (menu.children[ i ].slide) {\n          menu.children[ i ].slide(right)\n        }\n      }\n    }\n\n    menu.unslideAll = function () {\n      for (var i = 0; i < menu.children.length; i++) {\n        if (menu.children[ i ].unslide) {\n          menu.children[ i ].unslide()\n        }\n      }\n    }\n\n    menu.addHeader = function (title) {\n      var header = scope.createMenuItemHeader(title)\n      header.type = 'header'\n\n      this.appendChild(header)\n\n      return header\n    }\n\n    menu.addItem = function (title) {\n      var item = scope.createMenuItem(title)\n      item.type = 'item'\n\n      this.appendChild(item)\n\n      return item\n    }\n\n    menu.setActiveItem = function (item) {\n      if (this.activeItem) {\n        this.activeItem.setIcon(' ')\n      }\n\n      item.setIcon(PANOLENS.DataImage.Check)\n\n      this.activeItem = item\n    }\n\n    menu.addEventListener('mousemove', this.PREVENT_EVENT_HANDLER, true)\n    menu.addEventListener('mouseup', this.PREVENT_EVENT_HANDLER, true)\n    menu.addEventListener('mousedown', this.PREVENT_EVENT_HANDLER, true)\n\n    return menu\n  }\n\n  /**\n\t * Create custom item element\n\t * @return {HTMLSpanElement} - The dom element icon\n\t */\n  PANOLENS.Widget.prototype.createCustomItem = function (options) {\n    options = options || {}\n\n    var scope = this,\n      item = options.element || document.createElement('span')\n\n    item.style.cursor = 'pointer'\n    item.style.float = 'right'\n    item.style.width = '44px'\n    item.style.height = '100%'\n    item.style.backgroundSize = '60%'\n    item.style.backgroundRepeat = 'no-repeat'\n    item.style.backgroundPosition = 'center'\n    item.style.webkitUserSelect =\n\t\titem.style.MozUserSelect =\n\t\titem.style.userSelect = 'none'\n    item.style.position = 'relative'\n    item.style.pointerEvents = 'auto'\n\n    // White glow on icon\n    item.addEventListener(scope.TOUCH_ENABLED ? 'touchstart' : 'mouseenter', function () {\n      item.style.filter =\n\t\t\titem.style.webkitFilter = 'drop-shadow(0 0 5px rgba(255,255,255,1))'\n    })\n    item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'mouseleave', function () {\n      item.style.filter =\n\t\t\titem.style.webkitFilter = ''\n    })\n\n    item = this.mergeStyleOptions(item, options.style)\n\n    if (options.onTap) {\n      item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false)\n    }\n\n    item.dispose = function () {\n      item.removeEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false)\n\n      options.onDispose && options.onDispose()\n    }\n\n    return item\n  }\n\n  /**\n\t * Merge item css style\n\t * @param  {HTMLDOMElement} element - The element to be merged with style\n\t * @param  {object} options - The style options\n\t * @return {HTMLDOMElement} - The same element with merged styles\n\t */\n  PANOLENS.Widget.prototype.mergeStyleOptions = function (element, options) {\n    options = options || {}\n\n    for (var property in options) {\n      if (options.hasOwnProperty(property)) {\n        element.style[ property ] = options[ property ]\n      }\n    }\n\n    return element\n  }\n\n  /**\n\t * Dispose widgets by detaching dom elements from container\n\t */\n  PANOLENS.Widget.prototype.dispose = function () {\n    if (this.barElement) {\n      this.container.removeChild(this.barElement)\n      this.barElement.dispose()\n      this.barElement = null\n    }\n  }\n})(); (function () {\n  /**\n\t * Information spot attached to panorama\n\t * @constructor\n\t * @param {number} [scale=300] - Infospot scale\n\t * @param {imageSrc} [imageSrc=PANOLENS.DataImage.Info] - Image overlay info\n\t * @param {boolean} [animated=true] - Enable default hover animation\n\t */\n  PANOLENS.Infospot = function (scale, imageSrc, animated) {\n    var scope = this, ratio, startScale, endScale, duration\n\n    scale = scale || 300\n    imageSrc = imageSrc || PANOLENS.DataImage.Info\n    duration = 500\n\n    THREE.Sprite.call(this)\n\n    this.type = 'infospot'\n\n    this.animated = animated !== undefined ? animated : true\n    this.isHovering = false\n    this.visible = false\n\n    this.element\n    this.toPanorama\n    this.cursorStyle\n\n    this.mode = PANOLENS.Modes.UNKNOWN\n\n    this.scale.set(scale, scale, 1)\n    this.rotation.y = Math.PI\n    this.scaleFactor = 1.3\n\n    this.container\n\n    // Event Handler\n    this.HANDLER_FOCUS\n\n    PANOLENS.Utils.TextureLoader.load(imageSrc, postLoad)\n\n    function postLoad (texture) {\n      texture.wrapS = THREE.RepeatWrapping\n      texture.repeat.x = -1\n\n      texture.image.width = texture.image.naturalWidth || 64\n      texture.image.height = texture.image.naturalHeight || 64\n\n      ratio = texture.image.width / texture.image.height\n      scope.scale.set(ratio * scale, scale, 1)\n\n      startScale = scope.scale.clone()\n\n      scope.scaleUpAnimation = new TWEEN.Tween(scope.scale)\n        .to({ x: startScale.x * scope.scaleFactor, y: startScale.y * scope.scaleFactor }, duration)\n        .easing(TWEEN.Easing.Elastic.Out)\n\n      scope.scaleDownAnimation = new TWEEN.Tween(scope.scale)\n        .to({ x: startScale.x, y: startScale.y }, duration)\n        .easing(TWEEN.Easing.Elastic.Out)\n\n      scope.material.side = THREE.DoubleSide\n      scope.material.map = texture\n      scope.material.depthTest = false\n      scope.material.needsUpdate = true\n    }\n\n    function show () {\n      this.visible = true\n    }\n\n    function hide () {\n      this.visible = false\n    }\n\n    // Add show and hide animations\n    this.showAnimation = new TWEEN.Tween(this.material)\n      .to({ opacity: 1 }, duration)\n      .onStart(show.bind(this))\n      .easing(TWEEN.Easing.Quartic.Out)\n\n    this.hideAnimation = new TWEEN.Tween(this.material)\n      .to({ opacity: 0 }, duration)\n      .onComplete(hide.bind(this))\n      .easing(TWEEN.Easing.Quartic.Out)\n\n    // Attach event listeners\n    this.addEventListener('click', this.onClick)\n    this.addEventListener('hover', this.onHover)\n    this.addEventListener('hoverenter', this.onHoverStart)\n    this.addEventListener('hoverleave', this.onHoverEnd)\n    this.addEventListener('panolens-dual-eye-effect', this.onDualEyeEffect)\n    this.addEventListener('panolens-container', this.setContainer.bind(this))\n    this.addEventListener('dismiss', this.onDismiss)\n    this.addEventListener('panolens-infospot-focus', this.setFocusMethod)\n  }\n\n  PANOLENS.Infospot.prototype = Object.create(THREE.Sprite.prototype)\n\n  /**\n\t * Set infospot container\n\t * @param {HTMLElement|object} data - Data with container information\n\t */\n  PANOLENS.Infospot.prototype.setContainer = function (data) {\n    var container\n\n    if (data instanceof HTMLElement) {\n      container = data\n    } else if (data && data.container) {\n      container = data.container\n    }\n\n    // Append element if exists\n    if (container && this.element) {\n      container.appendChild(this.element)\n    }\n\n    this.container = container\n  }\n\n  /**\n\t * Get container\n\t * @return {HTMLElement} - The container of this infospot\n\t */\n  PANOLENS.Infospot.prototype.getContainer = function () {\n    return this.container\n  }\n\n  /**\n\t * This will be called by a click event\n\t * Translate and lock the hovering element if any\n\t * @param  {object} event - Event containing mouseEvent with clientX and clientY\n\t */\n  PANOLENS.Infospot.prototype.onClick = function (event) {\n    if (this.element && this.getContainer()) {\n      this.onHoverStart(event)\n\n      // Lock element\n      this.lockHoverElement()\n    }\n  }\n\n  /**\n\t * Dismiss current element if any\n\t * @param  {object} event - Dismiss event\n\t */\n  PANOLENS.Infospot.prototype.onDismiss = function (event) {\n    if (this.element) {\n      this.unlockHoverElement()\n      this.onHoverEnd()\n    }\n  }\n\n  /**\n\t * This will be called by a mouse hover event\n\t * Translate the hovering element if any\n\t * @param  {object} event - Event containing mouseEvent with clientX and clientY\n\t */\n  PANOLENS.Infospot.prototype.onHover = function (event) {\n\n  }\n\n  /**\n\t * This will be called on a mouse hover start\n\t * Sets cursor style to 'pointer', display the element and scale up the infospot\n\t */\n  PANOLENS.Infospot.prototype.onHoverStart = function (event) {\n    if (!this.getContainer()) { return }\n\n    var cursorStyle = this.cursorStyle || (this.mode === PANOLENS.Modes.NORMAL ? 'pointer' : 'default')\n\n    this.isHovering = true\n    this.container.style.cursor = cursorStyle\n\n    if (this.animated) {\n      this.scaleDownAnimation && this.scaleDownAnimation.stop()\n      this.scaleUpAnimation && this.scaleUpAnimation.start()\n    }\n\n    if (this.element && event.mouseEvent.clientX >= 0 && event.mouseEvent.clientY >= 0) {\n      if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n        this.element.style.display = 'none'\n        this.element.left && (this.element.left.style.display = 'block')\n        this.element.right && (this.element.right.style.display = 'block')\n\n        // Store element width for reference\n        this.element._width = this.element.left.clientWidth\n        this.element._height = this.element.left.clientHeight\n      } else {\n        this.element.style.display = 'block'\n        this.element.left && (this.element.left.style.display = 'none')\n        this.element.right && (this.element.right.style.display = 'none')\n\n        // Store element width for reference\n        this.element._width = this.element.clientWidth\n        this.element._height = this.element.clientHeight\n      }\n    }\n  }\n\n  /**\n\t * This will be called on a mouse hover end\n\t * Sets cursor style to 'default', hide the element and scale down the infospot\n\t */\n  PANOLENS.Infospot.prototype.onHoverEnd = function () {\n    if (!this.getContainer()) { return }\n\n    this.isHovering = false\n    this.container.style.cursor = 'default'\n\n    if (this.animated) {\n      this.scaleUpAnimation && this.scaleUpAnimation.stop()\n      this.scaleDownAnimation && this.scaleDownAnimation.start()\n    }\n\n    if (this.element && !this.element.locked) {\n      this.element.style.display = 'none'\n      this.element.left && (this.element.left.style.display = 'none')\n      this.element.right && (this.element.right.style.display = 'none')\n\n      this.unlockHoverElement()\n    }\n  }\n\n  /**\n\t * On dual eye effect handler\n\t * Creates duplicate left and right element\n\t * @param  {object} event - panolens-dual-eye-effect event\n\t */\n  PANOLENS.Infospot.prototype.onDualEyeEffect = function (event) {\n    if (!this.getContainer()) { return }\n\n    var element, halfWidth, halfHeight\n\n    this.mode = event.mode\n\n    element = this.element\n\n    halfWidth = this.container.clientWidth / 2\n    halfHeight = this.container.clientHeight / 2\n\n    if (!element) {\n      return\n    }\n\n    if (!element.left || !element.right) {\n      element.left = element.cloneNode(true)\n      element.right = element.cloneNode(true)\n    }\n\n    if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n      element.left.style.display = element.style.display\n      element.right.style.display = element.style.display\n      element.style.display = 'none'\n    } else {\n      element.style.display = element.left.style.display\n      element.left.style.display = 'none'\n      element.right.style.display = 'none'\n    }\n\n    // Update elements translation\n    this.translateElement(halfWidth, halfHeight)\n\n    this.container.appendChild(element.left)\n    this.container.appendChild(element.right)\n  }\n\n  /**\n\t * Translate the hovering element by css transform\n\t * @param  {number} x - X position on the window screen\n\t * @param  {number} y - Y position on the window screen\n\t */\n  PANOLENS.Infospot.prototype.translateElement = function (x, y) {\n    if (!this.element._width || !this.element._height || !this.getContainer()) {\n      return\n    }\n\n    var left, top, element, width, height, delta, container\n\n    container = this.container\n    element = this.element\n    width = element._width / 2\n    height = element._height / 2\n    delta = element.verticalDelta !== undefined ? element.verticalDelta : 40\n\n    left = x - width\n    top = y - height - delta\n\n    if ((this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) &&\n\t\t\t\telement.left && element.right &&\n\t\t\t\t!(x === container.clientWidth / 2 && y === container.clientHeight / 2)) {\n      left = container.clientWidth / 4 - width + (x - container.clientWidth / 2)\n      top = container.clientHeight / 2 - height - delta + (y - container.clientHeight / 2)\n\n      this.setElementStyle('transform', element.left, 'translate(' + left + 'px, ' + top + 'px)')\n\n      left += container.clientWidth / 2\n\n      this.setElementStyle('transform', element.right, 'translate(' + left + 'px, ' + top + 'px)')\n    } else {\n      this.setElementStyle('transform', element, 'translate(' + left + 'px, ' + top + 'px)')\n    }\n  }\n\n  /**\n\t * Set vendor specific css\n\t * @param {string} type - CSS style name\n\t * @param {HTMLElement} element - The element to be modified\n\t * @param {string} value - Style value\n\t */\n  PANOLENS.Infospot.prototype.setElementStyle = function (type, element, value) {\n    var style = element.style\n\n    if (type === 'transform') {\n      style.webkitTransform = style.msTransform = style.transform = value\n    }\n  }\n\n  /**\n\t * Set hovering text content\n\t * @param {string} text - Text to be displayed\n\t */\n  PANOLENS.Infospot.prototype.setText = function (text) {\n    if (this.element) {\n      this.element.textContent = text\n    }\n  }\n\n  /**\n\t * Set cursor css style on hover\n\t */\n  PANOLENS.Infospot.prototype.setCursorHoverStyle = function (style) {\n    this.cursorStyle = style\n  }\n\n  /**\n\t * Add hovering text element\n\t * @param {string} text - Text to be displayed\n\t * @param {number} [delta=40] - Vertical delta to the infospot\n\t */\n  PANOLENS.Infospot.prototype.addHoverText = function (text, delta) {\n    if (!this.element) {\n      this.element = document.createElement('div')\n      this.element.style.display = 'none'\n      this.element.style.color = '#fff'\n      this.element.style.top = 0\n      this.element.style.maxWidth = '50%'\n      this.element.style.maxHeight = '50%'\n      this.element.style.textShadow = '0 0 3px #000000'\n      this.element.style.fontFamily = '\"Trebuchet MS\", Helvetica, sans-serif'\n      this.element.style.position = 'absolute'\n      this.element.classList.add('panolens-infospot')\n      this.element.verticalDelta = delta !== undefined ? delta : 40\n    }\n\n    this.setText(text)\n  }\n\n  /**\n\t * Add hovering element by cloning an element\n\t * @param {HTMLDOMElement} el - Element to be cloned and displayed\n\t * @param {number} [delta=40] - Vertical delta to the infospot\n\t */\n  PANOLENS.Infospot.prototype.addHoverElement = function (el, delta) {\n    if (!this.element) {\n      this.element = el.cloneNode(true)\n      this.element.style.display = 'none'\n      this.element.style.top = 0\n      this.element.style.position = 'absolute'\n      this.element.classList.add('panolens-infospot')\n      this.element.verticalDelta = delta !== undefined ? delta : 40\n    }\n  }\n\n  /**\n\t * Remove hovering element\n\t */\n  PANOLENS.Infospot.prototype.removeHoverElement = function () {\n    if (this.element) {\n      if (this.element.left) {\n        this.container.removeChild(this.element.left)\n        this.element.left = null\n      }\n\n      if (this.element.right) {\n        this.container.removeChild(this.element.right)\n        this.element.right = null\n      }\n\n      this.container.removeChild(this.element)\n      this.element = null\n    }\n  }\n\n  /**\n\t * Lock hovering element\n\t */\n  PANOLENS.Infospot.prototype.lockHoverElement = function () {\n    if (this.element) {\n      this.element.locked = true\n    }\n  }\n\n  /**\n\t * Unlock hovering element\n\t */\n  PANOLENS.Infospot.prototype.unlockHoverElement = function () {\n    if (this.element) {\n      this.element.locked = false\n    }\n  }\n\n  /**\n\t * Show infospot\n\t * @param  {number} [delay=0] - Delay time to show\n\t */\n  PANOLENS.Infospot.prototype.show = function (delay) {\n    delay = delay || 0\n\n    if (this.animated) {\n      this.hideAnimation && this.hideAnimation.stop()\n      this.showAnimation && this.showAnimation.delay(delay).start()\n    }\n  }\n\n  /**\n\t * Hide infospot\n\t * @param  {number} [delay=0] - Delay time to hide\n\t */\n  PANOLENS.Infospot.prototype.hide = function (delay) {\n    delay = delay || 0\n\n    if (this.animated) {\n      this.showAnimation && this.showAnimation.stop()\n      this.hideAnimation && this.hideAnimation.delay(delay).start()\n    }\n  }\n\n  /**\n\t * Set focus event handler\n\t */\n  PANOLENS.Infospot.prototype.setFocusMethod = function (event) {\n    if (event) {\n      this.HANDLER_FOCUS = event.method\n    }\n  }\n\n  /**\n\t * Focus camera center to this infospot\n\t * @param {number} [duration=1000] - Duration to tween\n\t * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t */\n  PANOLENS.Infospot.prototype.focus = function (duration, easing) {\n    if (this.HANDLER_FOCUS) {\n      this.HANDLER_FOCUS(this.position, duration, easing)\n      this.onDismiss()\n    }\n  }\n\n  /**\n\t * Dispose infospot\n\t */\n  PANOLENS.Infospot.prototype.dispose = function () {\n    this.removeHoverElement()\n    this.material.dispose()\n\n    if (this.parent) {\n      this.parent.remove(this)\n    }\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Viewer contains pre-defined scene, camera and renderer\n\t * @constructor\n\t * @param {object} [options] - Use custom or default config options\n\t * @param {HTMLElement} [options.container] - A HTMLElement to host the canvas\n\t * @param {THREE.Scene} [options.scene=THREE.Scene] - A THREE.Scene which contains panorama and 3D objects\n\t * @param {THREE.Camera} [options.camera=THREE.PerspectiveCamera] - A THREE.Camera to view the scene\n\t * @param {THREE.WebGLRenderer} [options.renderer=THREE.WebGLRenderer] - A THREE.WebGLRenderer to render canvas\n\t * @param {boolean} [options.controlBar=true] - Show/hide control bar on the bottom of the container\n\t * @param {array}   [options.controlButtons=[]] - Button names to mount on controlBar if controlBar exists, Defaults to ['fullscreen', 'setting', 'video']\n\t * @param {boolean} [options.autoHideControlBar=false] - Auto hide control bar when click on non-active area\n\t * @param {boolean} [options.autoHideInfospot=true] - Auto hide infospots when click on non-active area\n\t * @param {boolean} [options.horizontalView=false] - Allow only horizontal camera control\n\t * @param {number}  [options.clickTolerance=10] - Distance tolerance to tigger click / tap event\n\t * @param {number}  [options.cameraFov=60] - Camera field of view value\n\t * @param {boolean} [options.reverseDragging=false] - Reverse dragging direction\n\t * @param {boolean} [options.enableReticle=false] - Enable reticle for mouseless interaction other than VR mode\n\t * @param {number}  [options.dwellTime=1500] - Dwell time for reticle selection\n\t * @param {boolean} [options.autoReticleSelect=true] - Auto select a clickable target after dwellTime\n\t * @param {boolean} [options.viewIndicator=false] - Adds an angle view indicator in upper left corner\n\t * @param {number}  [options.indicatorSize=30] - Size of View Indicator\n\t * @param {string}  [options.output='none'] - Whether and where to output raycast position. Could be 'console' or 'overlay'\n\t */\n  PANOLENS.Viewer = function (options) {\n    THREE.EventDispatcher.call(this)\n\n    if (!THREE) {\n      console.error('Three.JS not found')\n\n      return\n    }\n\n    var container\n\n    options = options || {}\n    options.controlBar = options.controlBar !== undefined ? options.controlBar : true\n    options.controlButtons = options.controlButtons || [ 'fullscreen', 'setting', 'video' ]\n    options.autoHideControlBar = options.autoHideControlBar !== undefined ? options.autoHideControlBar : false\n    options.autoHideInfospot = options.autoHideInfospot !== undefined ? options.autoHideInfospot : true\n    options.horizontalView = options.horizontalView !== undefined ? options.horizontalView : false\n    options.clickTolerance = options.clickTolerance || 10\n    options.cameraFov = options.cameraFov || 60\n    options.reverseDragging = options.reverseDragging || false\n    options.enableReticle = options.enableReticle || false\n    options.dwellTime = options.dwellTime || 1500\n    options.autoReticleSelect = options.autoReticleSelect !== undefined ? options.autoReticleSelect : true\n    options.viewIndicator = options.viewIndicator !== undefined ? options.viewIndicator : false\n    options.indicatorSize = options.indicatorSize || 30\n    options.output = options.output ? options.output : 'none'\n\n    this.options = options\n\n    // Container\n    if (options.container) {\n      container = options.container\n      container._width = container.clientWidth\n      container._height = container.clientHeight\n    } else {\n      container = document.createElement('div')\n      container.classList.add('panolens-container')\n      container.style.width = '100%'\n      container.style.height = '100%'\n      container._width = window.innerWidth\n      container._height = window.innerHeight\n      document.body.appendChild(container)\n    }\n\n    this.container = container\n\n    this.camera = options.camera || new THREE.PerspectiveCamera(this.options.cameraFov, this.container.clientWidth / this.container.clientHeight, 1, 10000)\n    this.scene = options.scene || new THREE.Scene()\n    this.renderer = options.renderer || new THREE.WebGLRenderer({ alpha: true, antialias: false })\n\n    this.viewIndicatorSize = options.indicatorSize\n\n    this.reticle = {}\n    this.tempEnableReticle = this.options.enableReticle\n\n    this.mode = PANOLENS.Modes.NORMAL\n\n    this.OrbitControls\n    this.DeviceOrientationControls\n\n    this.CardboardEffect\n    this.StereoEffect\n\n    this.controls\n    this.effect\n    this.panorama\n    this.widget\n\n    this.hoverObject\n    this.infospot\n    this.pressEntityObject\n    this.pressObject\n\n    this.raycaster = new THREE.Raycaster()\n    this.raycasterPoint = new THREE.Vector2()\n    this.userMouse = new THREE.Vector2()\n    this.updateCallbacks = []\n    this.requestAnimationId\n\n    this.cameraFrustum = new THREE.Frustum()\n    this.cameraViewProjectionMatrix = new THREE.Matrix4()\n\n    this.outputDivElement\n\n    // Handler references\n    this.HANDLER_MOUSE_DOWN = this.onMouseDown.bind(this)\n    this.HANDLER_MOUSE_UP = this.onMouseUp.bind(this)\n    this.HANDLER_MOUSE_MOVE = this.onMouseMove.bind(this)\n    this.HANDLER_WINDOW_RESIZE = this.onWindowResize.bind(this)\n    this.HANDLER_KEY_DOWN = this.onKeyDown.bind(this)\n    this.HANDLER_KEY_UP = this.onKeyUp.bind(this)\n    this.HANDLER_TAP = this.onTap.bind(this, {\n      clientX: this.container.clientWidth / 2,\n      clientY: this.container.clientHeight / 2\n    })\n\n    // Flag for infospot output\n    this.OUTPUT_INFOSPOT = false\n\n    // Animations\n    this.tweenLeftAnimation = new TWEEN.Tween()\n    this.tweenUpAnimation = new TWEEN.Tween()\n\n    // Renderer\n    this.renderer.setPixelRatio(window.devicePixelRatio)\n    this.renderer.setSize(this.container.clientWidth, this.container.clientHeight)\n    this.renderer.setClearColor(0x000000, 1)\n    this.renderer.sortObjects = false\n\n    // Append Renderer Element to container\n    this.renderer.domElement.classList.add('panolens-canvas')\n    this.renderer.domElement.style.display = 'block'\n    this.container.style.backgroundColor = '#000'\n    this.container.appendChild(this.renderer.domElement)\n\n    // Camera Controls\n    this.OrbitControls = new THREE.OrbitControls(this.camera, this.container)\n    this.OrbitControls.name = 'orbit'\n    this.OrbitControls.minDistance = 1\n    this.OrbitControls.noPan = true\n    this.DeviceOrientationControls = new THREE.DeviceOrientationControls(this.camera, this.container)\n    this.DeviceOrientationControls.name = 'device-orientation'\n    this.DeviceOrientationControls.enabled = false\n    this.camera.position.z = 1\n\n    // Register change event if passiveRenering\n    if (this.options.passiveRendering) {\n      console.warn('passiveRendering is now deprecated')\n    }\n\n    // Controls\n    this.controls = [ this.OrbitControls, this.DeviceOrientationControls ]\n    this.control = this.OrbitControls\n\n    // Cardboard effect\n    this.CardboardEffect = new THREE.CardboardEffect(this.renderer)\n    this.CardboardEffect.setSize(this.container.clientWidth, this.container.clientHeight)\n\n    // Stereo effect\n    this.StereoEffect = new THREE.StereoEffect(this.renderer)\n    this.StereoEffect.setSize(this.container.clientWidth, this.container.clientHeight)\n\n    this.effect = this.CardboardEffect\n\n    // Add default hidden reticle\n    this.addReticle()\n\n    // Lock horizontal view\n    if (this.options.horizontalView) {\n      this.OrbitControls.minPolarAngle = Math.PI / 2\n      this.OrbitControls.maxPolarAngle = Math.PI / 2\n    }\n\n    // Add Control UI\n    if (this.options.controlBar !== false) {\n      this.addDefaultControlBar(this.options.controlButtons)\n    }\n\n    // Add View Indicator\n    if (this.options.viewIndicator) {\n      this.addViewIndicator()\n    }\n\n    // Reverse dragging direction\n    if (this.options.reverseDragging) {\n      this.reverseDraggingDirection()\n    }\n\n    // Register event if reticle is enabled, otherwise defaults to mouse\n    if (this.options.enableReticle) {\n      this.enableReticleControl()\n    } else {\n      this.registerMouseAndTouchEvents()\n    }\n\n    if (this.options.output === 'overlay') {\n      this.addOutputElement()\n    }\n\n    // Register dom event listeners\n    this.registerEventListeners()\n\n    // Animate\n    this.animate.call(this)\n  }\n\n  PANOLENS.Viewer.prototype = Object.create(THREE.EventDispatcher.prototype)\n\n  PANOLENS.Viewer.prototype.constructor = PANOLENS.Viewer\n\n  /**\n\t * Add an object to the scene\n\t * Automatically hookup with panolens-viewer-handler listener\n\t * to communicate with viewer method\n\t * @param {THREE.Object3D} object - The object to be added\n\t */\n  PANOLENS.Viewer.prototype.add = function (object) {\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[ i ])\n      }\n\n      return this\n    }\n\n    this.scene.add(object)\n\n    // All object added to scene has 'panolens-viewer-handler' event to handle viewer communication\n    if (object.addEventListener) {\n      object.addEventListener('panolens-viewer-handler', this.eventHandler.bind(this))\n    }\n\n    // All object added to scene being passed with container\n    if (object instanceof PANOLENS.Panorama && object.dispatchEvent) {\n      object.dispatchEvent({ type: 'panolens-container', container: this.container })\n    }\n\n    // Hookup default panorama event listeners\n    if (object.type === 'panorama') {\n      this.addPanoramaEventListener(object)\n\n      if (!this.panorama) {\n        this.setPanorama(object)\n      }\n    }\n  }\n\n  /**\n\t * Remove an object from the scene\n\t * @param  {THREE.Object3D} object - Object to be removed\n\t */\n  PANOLENS.Viewer.prototype.remove = function (object) {\n    if (object.removeEventListener) {\n      object.removeEventListener('panolens-viewer-handler', this.eventHandler.bind(this))\n    }\n\n    this.scene.remove(object)\n  }\n\n  /**\n\t * Add default control bar\n\t * @param {array} array - The control buttons array\n\t */\n  PANOLENS.Viewer.prototype.addDefaultControlBar = function (array) {\n    var scope = this\n\n    if (this.widget) {\n      console.warn('Default control bar exists')\n      return\n    }\n\n    this.widget = new PANOLENS.Widget(this.container)\n    this.widget.addEventListener('panolens-viewer-handler', this.eventHandler.bind(this))\n    this.widget.addControlBar()\n    array.forEach(function (buttonName) {\n      scope.widget.addControlButton(buttonName)\n    })\n  }\n\n  /**\n\t * Set a panorama to be the current one\n\t * @param {PANOLENS.Panorama} pano - Panorama to be set\n\t */\n  PANOLENS.Viewer.prototype.setPanorama = function (pano) {\n    var scope = this, leavingPanorama = this.panorama\n\n    if (pano.type === 'panorama' && leavingPanorama !== pano) {\n      // Clear exisiting infospot\n      this.hideInfospot()\n\n      var afterEnterComplete = function () {\n        leavingPanorama && leavingPanorama.onLeave()\n        pano.removeEventListener('enter-fade-start', afterEnterComplete)\n      }\n\n      pano.addEventListener('enter-fade-start', afterEnterComplete);\n\n      // Assign and enter panorama\n      (this.panorama = pano).onEnter()\n    }\n  }\n\n  /**\n\t * Event handler to execute commands from child objects\n\t * @param {object} event - The dispatched event with method as function name and data as an argument\n\t */\n  PANOLENS.Viewer.prototype.eventHandler = function (event) {\n    if (event.method && this[ event.method ]) {\n      this[ event.method ](event.data)\n    }\n  }\n\n  /**\n\t * Dispatch event to all descendants\n\t * @param  {object} event - Event to be passed along\n\t */\n  PANOLENS.Viewer.prototype.dispatchEventToChildren = function (event) {\n    this.scene.traverse(function (object) {\n      if (object.dispatchEvent) {\n        object.dispatchEvent(event)\n      }\n    })\n  }\n\n  /**\n\t * Set widget content\n\t * @param  {integer} controlIndex - Control index\n\t * @param  {PANOLENS.Modes} mode - Modes for effects\n\t */\n  PANOLENS.Viewer.prototype.activateWidgetItem = function (controlIndex, mode) {\n    var mainMenu = this.widget.mainMenu\n    var ControlMenuItem = mainMenu.children[ 0 ]\n    var ModeMenuItem = mainMenu.children[ 1 ]\n\n    var item\n\n    if (controlIndex !== undefined) {\n      switch (controlIndex) {\n        case 0:\n\n          item = ControlMenuItem.subMenu.children[ 1 ]\n\n          break\n\n        case 1:\n\n          item = ControlMenuItem.subMenu.children[ 2 ]\n\n          break\n\n        default:\n\n          item = ControlMenuItem.subMenu.children[ 1 ]\n\n          break\n      }\n\n      ControlMenuItem.subMenu.setActiveItem(item)\n      ControlMenuItem.setSelectionTitle(item.textContent)\n    }\n\n    if (mode !== undefined) {\n      switch (mode) {\n        case PANOLENS.Modes.CARDBOARD:\n\n          item = ModeMenuItem.subMenu.children[ 2 ]\n\n          break\n\n        case PANOLENS.Modes.STEREO:\n\n          item = ModeMenuItem.subMenu.children[ 3 ]\n\n          break\n\n        default:\n\n          item = ModeMenuItem.subMenu.children[ 1 ]\n\n          break\n      }\n\n      ModeMenuItem.subMenu.setActiveItem(item)\n      ModeMenuItem.setSelectionTitle(item.textContent)\n    }\n  }\n\n  /**\n\t * Enable rendering effect\n\t * @param  {PANOLENS.Modes} mode - Modes for effects\n\t */\n  PANOLENS.Viewer.prototype.enableEffect = function (mode) {\n    if (this.mode === mode) { return }\n    if (mode === PANOLENS.Modes.NORMAL) { this.disableEffect(); return } else { this.mode = mode }\n\n    var fov = this.camera.fov\n\n    switch (mode) {\n      case PANOLENS.Modes.CARDBOARD:\n\n        this.effect = this.CardboardEffect\n        this.enableReticleControl()\n\n        break\n\n      case PANOLENS.Modes.STEREO:\n\n        this.effect = this.StereoEffect\n        this.enableReticleControl()\n\n        break\n\n      default:\n\n        this.effect = null\n        this.disableReticleControl()\n\n        break\n    }\n\n    this.activateWidgetItem(undefined, this.mode)\n\n    /**\n\t\t * Dual eye effect event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#panolens-dual-eye-effect\n\t\t * @event PANOLENS.Infospot#panolens-dual-eye-effect\n\t\t * @property {PANOLENS.Modes} mode - Current display mode\n\t\t */\n    this.dispatchEventToChildren({ type: 'panolens-dual-eye-effect', mode: this.mode })\n\n    // Force effect stereo camera to update by refreshing fov\n    this.camera.fov = fov + 10e-3\n    this.effect.setSize(this.container.clientWidth, this.container.clientHeight)\n    this.render()\n    this.camera.fov = fov\n  }\n\n  /**\n\t * Disable additional rendering effect\n\t */\n  PANOLENS.Viewer.prototype.disableEffect = function () {\n    if (this.mode === PANOLENS.Modes.NORMAL) { return }\n\n    this.mode = PANOLENS.Modes.NORMAL\n    this.disableReticleControl()\n\n    this.activateWidgetItem(undefined, this.mode)\n\n    /**\n\t\t * Dual eye effect event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#panolens-dual-eye-effect\n\t\t * @event PANOLENS.Infospot#panolens-dual-eye-effect\n\t\t * @property {PANOLENS.Modes} mode - Current display mode\n\t\t */\n    this.dispatchEventToChildren({ type: 'panolens-dual-eye-effect', mode: this.mode })\n\n    this.renderer.setSize(this.container.clientWidth, this.container.clientHeight)\n    this.render()\n  }\n\n  /**\n\t * Enable reticle control\n\t */\n  PANOLENS.Viewer.prototype.enableReticleControl = function () {\n    if (this.reticle.visible) { return }\n    if (!this.reticle.textureLoaded) { this.reticle.loadTextures() }\n\n    this.tempEnableReticle = true\n\n    // Register reticle event and unregister mouse event\n    this.unregisterMouseAndTouchEvents()\n    this.reticle.show()\n    this.registerReticleEvent()\n    this.updateReticleEvent()\n  }\n\n  /**\n\t * Disable reticle control\n\t */\n  PANOLENS.Viewer.prototype.disableReticleControl = function () {\n    this.tempEnableReticle = false\n\n    // Register mouse event and unregister reticle event\n    if (!this.options.enableReticle) {\n      this.reticle.hide()\n      this.unregisterReticleEvent()\n      this.registerMouseAndTouchEvents()\n    } else {\n      this.updateReticleEvent()\n    }\n  }\n\n  /**\n\t * Toggle video play or stop\n\t * @fires PANOLENS.Viewer#video-toggle\n\t */\n  PANOLENS.Viewer.prototype.toggleVideoPlay = function (pause) {\n    if (this.panorama instanceof PANOLENS.VideoPanorama) {\n      /**\n\t\t\t * Toggle video event\n\t\t\t * @type {object}\n\t\t\t * @event PANOLENS.Viewer#video-toggle\n\t\t\t */\n      this.panorama.dispatchEvent({ type: 'video-toggle', pause: pause })\n    }\n  }\n\n  /**\n\t * Set currentTime in a video\n\t * @param {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t * @fires PANOLENS.Viewer#video-time\n\t */\n  PANOLENS.Viewer.prototype.setVideoCurrentTime = function (percentage) {\n    if (this.panorama instanceof PANOLENS.VideoPanorama) {\n      /**\n\t\t\t * Setting video time event\n\t\t\t * @type {object}\n\t\t\t * @event PANOLENS.Viewer#video-time\n\t\t\t * @property {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t\t\t */\n      this.panorama.dispatchEvent({ type: 'video-time', percentage: percentage })\n    }\n  }\n\n  /**\n\t * This will be called when video updates if an widget is present\n\t * @param {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t * @fires PANOLENS.Viewer#video-update\n\t */\n  PANOLENS.Viewer.prototype.onVideoUpdate = function (percentage) {\n    /**\n\t\t * Video update event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#video-update\n\t\t * @property {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t\t */\n    this.widget && this.widget.dispatchEvent({ type: 'video-update', percentage: percentage })\n  }\n\n  /**\n\t * Add update callback to be called every animation frame\n\t */\n  PANOLENS.Viewer.prototype.addUpdateCallback = function (fn) {\n    if (fn) {\n      this.updateCallbacks.push(fn)\n    }\n  }\n\n  /**\n\t * Remove update callback\n\t * @param  {Function} fn - The function to be removed\n\t */\n  PANOLENS.Viewer.prototype.removeUpdateCallback = function (fn) {\n    var index = this.updateCallbacks.indexOf(fn)\n\n    if (fn && index >= 0) {\n      this.updateCallbacks.splice(index, 1)\n    }\n  }\n\n  /**\n\t * Show video widget\n\t */\n  PANOLENS.Viewer.prototype.showVideoWidget = function () {\n    /**\n\t\t * Show video widget event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#video-control-show\n\t\t */\n    this.widget && this.widget.dispatchEvent({ type: 'video-control-show' })\n  }\n\n  /**\n\t * Hide video widget\n\t */\n  PANOLENS.Viewer.prototype.hideVideoWidget = function () {\n    /**\n\t\t * Hide video widget\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#video-control-hide\n\t\t */\n    this.widget && this.widget.dispatchEvent({ type: 'video-control-hide' })\n  }\n\n  PANOLENS.Viewer.prototype.updateVideoPlayButton = function (paused) {\n    if (this.widget &&\n\t\t\t this.widget.videoElement &&\n\t\t\t this.widget.videoElement.controlButton) {\n      this.widget.videoElement.controlButton.update(paused)\n    }\n  }\n\n  /**\n\t * Add default panorama event listeners\n\t * @param {PANOLENS.Panorama} pano - The panorama to be added with event listener\n\t */\n  PANOLENS.Viewer.prototype.addPanoramaEventListener = function (pano) {\n    var scope = this\n\n    // Set camera control on every panorama\n    pano.addEventListener('enter-fade-start', this.setCameraControl.bind(this))\n\n    // Show and hide widget event only when it's PANOLENS.VideoPanorama\n    if (pano instanceof PANOLENS.VideoPanorama) {\n      pano.addEventListener('enter-fade-start', this.showVideoWidget.bind(this))\n      pano.addEventListener('leave', function () {\n        if (!(this.panorama instanceof PANOLENS.VideoPanorama)) {\n          this.hideVideoWidget.call(this)\n        }\n      }.bind(this))\n    }\n  }\n\n  /**\n\t * Set camera control\n\t */\n  PANOLENS.Viewer.prototype.setCameraControl = function () {\n    this.OrbitControls.target.copy(this.panorama.position)\n  }\n\n  /**\n\t * Get current camera control\n\t * @return {object} - Current navigation control. THREE.OrbitControls or THREE.DeviceOrientationControls\n\t */\n  PANOLENS.Viewer.prototype.getControl = function () {\n    return this.control\n  },\n\n  /**\n\t * Get scene\n\t * @return {THREE.Scene} - Current scene which the viewer is built on\n\t */\n  PANOLENS.Viewer.prototype.getScene = function () {\n    return this.scene\n  }\n\n  /**\n\t * Get camera\n\t * @return {THREE.Camera} - The scene camera\n\t */\n  PANOLENS.Viewer.prototype.getCamera = function () {\n    return this.camera\n  },\n\n  /**\n\t * Get renderer\n\t * @return {THREE.WebGLRenderer} - The renderer using webgl\n\t */\n  PANOLENS.Viewer.prototype.getRenderer = function () {\n    return this.renderer\n  }\n\n  /**\n\t * Get container\n\t * @return {HTMLDOMElement} - The container holds rendererd canvas\n\t */\n  PANOLENS.Viewer.prototype.getContainer = function () {\n    return this.container\n  }\n\n  /**\n\t * Get control name\n\t * @return {string} - Control name. 'orbit' or 'device-orientation'\n\t */\n  PANOLENS.Viewer.prototype.getControlName = function () {\n    return this.control.name\n  }\n\n  /**\n\t * Get next navigation control name\n\t * @return {string} - Next control name\n\t */\n  PANOLENS.Viewer.prototype.getNextControlName = function () {\n    return this.controls[ this.getNextControlIndex() ].name\n  }\n\n  /**\n\t * Get next navigation control index\n\t * @return {number} - Next control index\n\t */\n  PANOLENS.Viewer.prototype.getNextControlIndex = function () {\n    var controls, control, nextIndex\n\n    controls = this.controls\n    control = this.control\n    nextIndex = controls.indexOf(control) + 1\n\n    return (nextIndex >= controls.length) ? 0 : nextIndex\n  }\n\n  /**\n\t * Set field of view of camera\n\t */\n  PANOLENS.Viewer.prototype.setCameraFov = function (fov) {\n    this.camera.fov = fov\n    this.camera.updateProjectionMatrix()\n  }\n\n  /**\n\t * Enable control by index\n\t * @param  {PANOLENS.Controls} index - Index of camera control\n\t */\n  PANOLENS.Viewer.prototype.enableControl = function (index) {\n    index = (index >= 0 && index < this.controls.length) ? index : 0\n\n    this.control.enabled = false\n\n    this.control = this.controls[ index ]\n\n    this.control.enabled = true\n\n    switch (index) {\n      case PANOLENS.Controls.ORBIT:\n\n        this.camera.position.copy(this.panorama.position)\n        this.camera.position.z += 1\n\n        break\n\n      case PANOLENS.Controls.DEVICEORIENTATION:\n\n        this.camera.position.copy(this.panorama.position)\n\n        break\n\n      default:\n\n        break\n    }\n\n    this.control.update()\n\n    this.activateWidgetItem(index, undefined)\n  }\n\n  /**\n\t * Disable current control\n\t */\n  PANOLENS.Viewer.prototype.disableControl = function () {\n    this.control.enabled = false\n  }\n\n  /**\n\t * Toggle next control\n\t */\n  PANOLENS.Viewer.prototype.toggleNextControl = function () {\n    this.enableControl(this.getNextControlIndex())\n  }\n\n  /**\n\t * Screen Space Projection\n\t */\n  PANOLENS.Viewer.prototype.getScreenVector = function (worldVector) {\n    var vector = worldVector.clone()\n    var widthHalf = (this.container.clientWidth) / 2\n    var heightHalf = this.container.clientHeight / 2\n\n    vector.project(this.camera)\n\n    vector.x = (vector.x * widthHalf) + widthHalf\n    vector.y = -(vector.y * heightHalf) + heightHalf\n    vector.z = 0\n\n    return vector\n  }\n\n  /**\n\t * Check Sprite in Viewport\n\t */\n  PANOLENS.Viewer.prototype.checkSpriteInViewport = function (sprite) {\n    this.camera.matrixWorldInverse.getInverse(this.camera.matrixWorld)\n    this.cameraViewProjectionMatrix.multiplyMatrices(this.camera.projectionMatrix, this.camera.matrixWorldInverse)\n    this.cameraFrustum.setFromMatrix(this.cameraViewProjectionMatrix)\n\n    return sprite.visible && this.cameraFrustum.intersectsSprite(sprite)\n  }\n\n  /**\n\t * Reverse dragging direction\n\t */\n  PANOLENS.Viewer.prototype.reverseDraggingDirection = function () {\n    this.OrbitControls.rotateSpeed *= -1\n    this.OrbitControls.momentumScalingFactor *= -1\n  }\n\n  /**\n\t * Add reticle\n\t */\n  PANOLENS.Viewer.prototype.addReticle = function () {\n    this.reticle = new PANOLENS.Reticle(0xffffff,\n      this.options.autoReticleSelect,\n      PANOLENS.DataImage.ReticleIdle,\n      PANOLENS.DataImage.ReticleDwell,\n      this.options.dwellTime,\n      45)\n    this.reticle.position.z = -10\n    this.camera.add(this.reticle)\n    this.scene.add(this.camera)\n  }\n\n  /**\n\t * Tween control looking center\n\t * @param {THREE.Vector3} vector - Vector to be looked at the center\n\t * @param {number} [duration=1000] - Duration to tween\n\t * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t */\n  PANOLENS.Viewer.prototype.tweenControlCenter = function (vector, duration, easing) {\n    if (this.control !== this.OrbitControls) {\n      return\n    }\n\n    // Pass in arguments as array\n    if (vector instanceof Array) {\n      duration = vector[ 1 ]\n      easing = vector[ 2 ]\n      vector = vector[ 0 ]\n    }\n\n    duration = duration !== undefined ? duration : 1000\n    easing = easing || TWEEN.Easing.Exponential.Out\n\n    var scope, ha, va, chv, cvv, hv, vv, vptc, ov, nv\n\n    scope = this\n\n    chv = this.camera.getWorldDirection()\n    cvv = chv.clone()\n\n    vptc = this.panorama.getWorldPosition().sub(this.camera.getWorldPosition())\n\n    hv = vector.clone()\n    // Scale effect\n    hv.x *= -1\n    hv.add(vptc).normalize()\n    vv = hv.clone()\n\n    chv.y = 0\n    hv.y = 0\n\n    ha = Math.atan2(hv.z, hv.x) - Math.atan2(chv.z, chv.x)\n    ha = ha > Math.PI ? ha - 2 * Math.PI : ha\n    ha = ha < -Math.PI ? ha + 2 * Math.PI : ha\n    va = Math.abs(cvv.angleTo(chv) + (cvv.y * vv.y <= 0 ? vv.angleTo(hv) : -vv.angleTo(hv)))\n    va *= vv.y < cvv.y ? 1 : -1\n\n    ov = { left: 0, up: 0 }\n    nv = { left: 0, up: 0 }\n\n    this.tweenLeftAnimation.stop()\n    this.tweenUpAnimation.stop()\n\n    this.tweenLeftAnimation = new TWEEN.Tween(ov)\n      .to({ left: ha }, duration)\n      .easing(easing)\n      .onUpdate(function () {\n        scope.control.rotateLeft(this.left - nv.left)\n        nv.left = this.left\n      })\n      .start()\n\n    this.tweenUpAnimation = new TWEEN.Tween(ov)\n      .to({ up: va }, duration)\n      .easing(easing)\n      .onUpdate(function () {\n        scope.control.rotateUp(this.up - nv.up)\n        nv.up = this.up\n      })\n      .start()\n  }\n\n  /**\n\t * Tween control looking center by object\n\t * @param {THREE.Object3D} object - Object to be looked at the center\n\t * @param {number} [duration=1000] - Duration to tween\n\t * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t */\n  PANOLENS.Viewer.prototype.tweenControlCenterByObject = function (object, duration, easing) {\n    var isUnderScalePlaceHolder = false\n\n    object.traverseAncestors(function (ancestor) {\n      if (ancestor.scalePlaceHolder) {\n        isUnderScalePlaceHolder = true\n      }\n    })\n\n    if (isUnderScalePlaceHolder) {\n      var invertXVector = new THREE.Vector3(-1, 1, 1)\n\n      this.tweenControlCenter(object.getWorldPosition().multiply(invertXVector), duration, easing)\n    } else {\n      this.tweenControlCenter(object.getWorldPosition(), duration, easing)\n    }\n  }\n\n  /**\n\t * This is called when window size is changed\n\t * @fires PANOLENS.Viewer#window-resize\n\t * @param {number} [windowWidth] - Specify if custom element has changed width\n\t * @param {number} [windowHeight] - Specify if custom element has changed height\n\t */\n  PANOLENS.Viewer.prototype.onWindowResize = function (windowWidth, windowHeight) {\n    var width, height, expand\n\n    expand = this.container.classList.contains('panolens-container') || this.container.isFullscreen\n\n    if (windowWidth !== undefined && windowHeight !== undefined) {\n      width = windowWidth\n      height = windowHeight\n      this.container._width = windowWidth\n      this.container._height = windowHeight\n    } else {\n      width = expand ? Math.max(document.documentElement.clientWidth, window.innerWidth || 0) : this.container.clientWidth\n      height = expand ? Math.max(document.documentElement.clientHeight, window.innerHeight || 0) : this.container.clientHeight\n      this.container._width = width\n      this.container._height = height\n    }\n\n    this.camera.aspect = width / height\n    this.camera.updateProjectionMatrix()\n\n    this.renderer.setSize(width, height)\n\n    // Update reticle\n    if (this.options.enableReticle || this.tempEnableReticle) {\n      this.updateReticleEvent()\n    }\n\n    /**\n\t\t * Window resizing event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#window-resize\n\t\t * @property {number} width  - Width of the window\n\t\t * @property {number} height - Height of the window\n\t\t */\n    this.dispatchEvent({ type: 'window-resize', width: width, height: height })\n    this.scene.traverse(function (object) {\n      if (object.dispatchEvent) {\n        object.dispatchEvent({ type: 'window-resize', width: width, height: height })\n      }\n    })\n  }\n\n  PANOLENS.Viewer.prototype.addOutputElement = function () {\n    var element = document.createElement('div')\n    element.style.position = 'absolute'\n    element.style.right = '10px'\n    element.style.top = '10px'\n    element.style.color = '#fff'\n    this.container.appendChild(element)\n    this.outputDivElement = element\n  }\n\n  /**\n\t * Output infospot attach position in developer console by holding down Ctrl button\n\t */\n  PANOLENS.Viewer.prototype.outputInfospotPosition = function () {\n    var intersects, point, panoramaWorldPosition, outputPosition\n\n    intersects = this.raycaster.intersectObject(this.panorama, true)\n\n    if (intersects.length > 0) {\n      point = intersects[0].point\n      panoramaWorldPosition = this.panorama.getWorldPosition()\n\n      // Panorama is scaled -1 on X axis\n      outputPosition = new THREE.Vector3(\n        -(point.x - panoramaWorldPosition.x).toFixed(2),\n        (point.y - panoramaWorldPosition.y).toFixed(2),\n        (point.z - panoramaWorldPosition.z).toFixed(2)\n      )\n\n      switch (this.options.output) {\n        case 'console':\n          console.info(outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z)\n          break\n\n        case 'overlay':\n          this.outputDivElement.textContent = outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z\n          break\n\n        default:\n          break\n      }\n    }\n  }\n\n  PANOLENS.Viewer.prototype.onMouseDown = function (event) {\n    event.preventDefault()\n\n    this.userMouse.x = (event.clientX >= 0) ? event.clientX : event.touches[0].clientX\n    this.userMouse.y = (event.clientY >= 0) ? event.clientY : event.touches[0].clientY\n    this.userMouse.type = 'mousedown'\n    this.onTap(event)\n  }\n\n  PANOLENS.Viewer.prototype.onMouseMove = function (event) {\n    event.preventDefault()\n    this.userMouse.type = 'mousemove'\n    this.onTap(event)\n  }\n\n  PANOLENS.Viewer.prototype.onMouseUp = function (event) {\n    var onTarget = false, type\n\n    this.userMouse.type = 'mouseup'\n\n    type = (this.userMouse.x >= event.clientX - this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.x <= event.clientX + this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.y >= event.clientY - this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.y <= event.clientY + this.options.clickTolerance) ||\n\t\t\t\t(event.changedTouches &&\n\t\t\t\tthis.userMouse.x >= event.changedTouches[0].clientX - this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.x <= event.changedTouches[0].clientX + this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.y >= event.changedTouches[0].clientY - this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.y <= event.changedTouches[0].clientY + this.options.clickTolerance)\n      ? 'click' : undefined\n\n    // Event should happen on canvas\n    if (event && event.target && !event.target.classList.contains('panolens-canvas')) { return }\n\n    event.preventDefault()\n\n    if (event.changedTouches && event.changedTouches.length === 1) {\n      onTarget = this.onTap({ clientX: event.changedTouches[0].clientX, clientY: event.changedTouches[0].clientY }, type)\n    } else {\n      onTarget = this.onTap(event, type)\n    }\n\n    this.userMouse.type = 'none'\n\n    if (onTarget) {\n      return\n    }\n\n    if (type === 'click') {\n      this.options.autoHideInfospot && this.panorama && this.panorama.toggleInfospotVisibility()\n      this.options.autoHideControlBar && this.toggleControlBar()\n    }\n  }\n\n  PANOLENS.Viewer.prototype.onTap = function (event, type) {\n    var intersects, intersect_entity, intersect\n\n    this.raycasterPoint.x = ((event.clientX - this.container.offsetLeft) / this.container.clientWidth) * 2 - 1\n    this.raycasterPoint.y = -((event.clientY - this.container.offsetTop) / this.container.clientHeight) * 2 + 1\n\n    this.raycaster.setFromCamera(this.raycasterPoint, this.camera)\n\n    // Return if no panorama\n    if (!this.panorama) {\n      return\n    }\n\n    // output infospot information\n    if (event.type !== 'mousedown' && PANOLENS.Utils.checkTouchSupported() || this.OUTPUT_INFOSPOT) {\n      this.outputInfospotPosition()\n    }\n\n    intersects = this.raycaster.intersectObjects(this.panorama.children, true)\n\n    intersect_entity = this.getConvertedIntersect(intersects)\n\n    intersect = (intersects.length > 0) ? intersects[0].object : intersect\n\n    if (this.userMouse.type === 'mouseup') {\n      if (intersect_entity && this.pressEntityObject === intersect_entity && this.pressEntityObject.dispatchEvent) {\n        this.pressEntityObject.dispatchEvent({ type: 'pressstop-entity', mouseEvent: event })\n      }\n\n      this.pressEntityObject = undefined\n    }\n\n    if (this.userMouse.type === 'mouseup') {\n      if (intersect && this.pressObject === intersect && this.pressObject.dispatchEvent) {\n        this.pressObject.dispatchEvent({ type: 'pressstop', mouseEvent: event })\n      }\n\n      this.pressObject = undefined\n    }\n\n    if (type === 'click') {\n      this.panorama.dispatchEvent({ type: 'click', intersects: intersects, mouseEvent: event })\n\n      if (intersect_entity && intersect_entity.dispatchEvent) {\n        intersect_entity.dispatchEvent({ type: 'click-entity', mouseEvent: event })\n      }\n\n      if (intersect && intersect.dispatchEvent) {\n        intersect.dispatchEvent({ type: 'click', mouseEvent: event })\n      }\n    } else {\n      this.panorama.dispatchEvent({ type: 'hover', intersects: intersects, mouseEvent: event })\n\n      if ((this.hoverObject && intersects.length > 0 && this.hoverObject !== intersect_entity) ||\n\t\t\t\t(this.hoverObject && intersects.length === 0)) {\n        if (this.hoverObject.dispatchEvent) {\n          this.hoverObject.dispatchEvent({ type: 'hoverleave', mouseEvent: event })\n\n          // Cancel dwelling\n          this.reticle.cancelDwelling()\n        }\n\n        this.hoverObject = undefined\n      }\n\n      if (intersect_entity && intersects.length > 0) {\n        if (this.hoverObject !== intersect_entity) {\n          this.hoverObject = intersect_entity\n\n          if (this.hoverObject.dispatchEvent) {\n            this.hoverObject.dispatchEvent({ type: 'hoverenter', mouseEvent: event })\n\n            // Start reticle timer\n            if (this.options.autoReticleSelect && this.options.enableReticle || this.tempEnableReticle) {\n              this.reticle.startDwelling(this.onTap.bind(this, event, 'click'))\n            }\n          }\n        }\n\n        if (this.userMouse.type === 'mousedown' && this.pressEntityObject != intersect_entity) {\n          this.pressEntityObject = intersect_entity\n\n          if (this.pressEntityObject.dispatchEvent) {\n            this.pressEntityObject.dispatchEvent({ type: 'pressstart-entity', mouseEvent: event })\n          }\n        }\n\n        if (this.userMouse.type === 'mousedown' && this.pressObject != intersect) {\n          this.pressObject = intersect\n\n          if (this.pressObject.dispatchEvent) {\n            this.pressObject.dispatchEvent({ type: 'pressstart', mouseEvent: event })\n          }\n        }\n\n        if (this.userMouse.type === 'mousemove' || this.options.enableReticle) {\n          if (intersect && intersect.dispatchEvent) {\n            intersect.dispatchEvent({ type: 'hover', mouseEvent: event })\n          }\n\n          if (this.pressEntityObject && this.pressEntityObject.dispatchEvent) {\n            this.pressEntityObject.dispatchEvent({ type: 'pressmove-entity', mouseEvent: event })\n          }\n\n          if (this.pressObject && this.pressObject.dispatchEvent) {\n            this.pressObject.dispatchEvent({ type: 'pressmove', mouseEvent: event })\n          }\n        }\n      }\n\n      if (!intersect_entity && this.pressEntityObject && this.pressEntityObject.dispatchEvent) {\n        this.pressEntityObject.dispatchEvent({ type: 'pressstop-entity', mouseEvent: event })\n\n        this.pressEntityObject = undefined\n      }\n\n      if (!intersect && this.pressObject && this.pressObject.dispatchEvent) {\n        this.pressObject.dispatchEvent({ type: 'pressstop', mouseEvent: event })\n\n        this.pressObject = undefined\n      }\n    }\n\n    // Infospot handler\n    if (intersect && intersect instanceof PANOLENS.Infospot) {\n      this.infospot = intersect\n\n      if (type === 'click') {\n        return true\n      }\n    } else if (this.infospot) {\n      this.hideInfospot()\n    }\n  }\n\n  PANOLENS.Viewer.prototype.getConvertedIntersect = function (intersects) {\n    var intersect\n\n    for (var i = 0; i < intersects.length; i++) {\n      if (intersects[i].distance >= 0 && intersects[i].object && !intersects[i].object.passThrough) {\n        if (intersects[i].object.entity && intersects[i].object.entity.passThrough) {\n          continue\n        } else if (intersects[i].object.entity && !intersects[i].object.entity.passThrough) {\n          intersect = intersects[i].object.entity\n          break\n        } else {\n          intersect = intersects[i].object\n          break\n        }\n      }\n    }\n\n    return intersect\n  }\n\n  PANOLENS.Viewer.prototype.hideInfospot = function (intersects) {\n    if (this.infospot) {\n      this.infospot.onHoverEnd()\n\n      this.infospot = undefined\n    }\n  }\n\n  /**\n\t * Toggle control bar\n\t * @fires [PANOLENS.Viewer#control-bar-toggle]\n\t */\n  PANOLENS.Viewer.prototype.toggleControlBar = function () {\n    /**\n\t\t * Toggle control bar event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#control-bar-toggle\n\t\t */\n    this.widget && this.widget.dispatchEvent({ type: 'control-bar-toggle' })\n  }\n\n  PANOLENS.Viewer.prototype.onKeyDown = function (event) {\n    if (this.options.output && this.options.output !== 'none' && event.key === 'Control') {\n      this.OUTPUT_INFOSPOT = true\n    }\n  }\n\n  PANOLENS.Viewer.prototype.onKeyUp = function (event) {\n    this.OUTPUT_INFOSPOT = false\n  }\n\n  /**\n\t * Update control and callbacks\n\t */\n  PANOLENS.Viewer.prototype.update = function () {\n    TWEEN.update()\n\n    this.updateCallbacks.forEach(function (callback) { callback() })\n\n    this.control.update()\n\n    this.scene.traverse(function (child) {\n      if (child instanceof PANOLENS.Infospot &&\n\t\t\t\tchild.element &&\n\t\t\t\t(this.hoverObject === child ||\n\t\t\t\t\tchild.element.style.display !== 'none' ||\n\t\t\t\t\t(child.element.left && child.element.left.style.display !== 'none') ||\n\t\t\t\t\t(child.element.right && child.element.right.style.display !== 'none'))) {\n        if (this.checkSpriteInViewport(child)) {\n          var vector = this.getScreenVector(child.getWorldPosition())\n          child.translateElement(vector.x, vector.y)\n        } else {\n          child.onDismiss()\n        }\n      }\n    }.bind(this))\n  }\n\n  /**\n\t * Rendering function to be called on every animation frame\n\t */\n  PANOLENS.Viewer.prototype.render = function () {\n    if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n      this.effect.render(this.scene, this.camera)\n    } else {\n      this.renderer.render(this.scene, this.camera)\n    }\n  }\n\n  PANOLENS.Viewer.prototype.animate = function () {\n    this.requestAnimationId = window.requestAnimationFrame(this.animate.bind(this))\n\n    this.onChange()\n  }\n\n  PANOLENS.Viewer.prototype.onChange = function () {\n    this.update()\n    this.render()\n  }\n\n  /**\n\t * Register mouse and touch event on container\n\t */\n  PANOLENS.Viewer.prototype.registerMouseAndTouchEvents = function () {\n    this.container.addEventListener('mousedown', \tthis.HANDLER_MOUSE_DOWN, false)\n    this.container.addEventListener('mousemove', \tthis.HANDLER_MOUSE_MOVE, false)\n    this.container.addEventListener('mouseup', \tthis.HANDLER_MOUSE_UP, false)\n    this.container.addEventListener('touchstart', \tthis.HANDLER_MOUSE_DOWN, false)\n    this.container.addEventListener('touchend', \tthis.HANDLER_MOUSE_UP, false)\n  }\n\n  /**\n\t * Unregister mouse and touch event on container\n\t */\n  PANOLENS.Viewer.prototype.unregisterMouseAndTouchEvents = function () {\n    this.container.removeEventListener('mousedown', this.HANDLER_MOUSE_DOWN, false)\n    this.container.removeEventListener('mousemove', this.HANDLER_MOUSE_MOVE, false)\n    this.container.removeEventListener('mouseup', this.HANDLER_MOUSE_UP, false)\n    this.container.removeEventListener('touchstart', this.HANDLER_MOUSE_DOWN, false)\n    this.container.removeEventListener('touchend', this.HANDLER_MOUSE_UP, false)\n  }\n\n  /**\n\t * Register reticle event\n\t */\n  PANOLENS.Viewer.prototype.registerReticleEvent = function () {\n    this.addUpdateCallback(this.HANDLER_TAP)\n  }\n\n  /**\n\t * Unregister reticle event\n\t */\n  PANOLENS.Viewer.prototype.unregisterReticleEvent = function () {\n    this.removeUpdateCallback(this.HANDLER_TAP)\n  }\n\n  /**\n\t * Update reticle event\n\t */\n  PANOLENS.Viewer.prototype.updateReticleEvent = function () {\n    var centerX, centerY\n\n    centerX = this.container.clientWidth / 2 + this.container.offsetLeft\n    centerY = this.container.clientHeight / 2\n\n    this.removeUpdateCallback(this.HANDLER_TAP)\n    this.HANDLER_TAP = this.onTap.bind(this, { clientX: centerX, clientY: centerY })\n    this.addUpdateCallback(this.HANDLER_TAP)\n  }\n\n  /**\n\t * Register container and window listeners\n\t */\n  PANOLENS.Viewer.prototype.registerEventListeners = function () {\n    // Resize Event\n    window.addEventListener('resize', this.HANDLER_WINDOW_RESIZE, true)\n\n    // Keyboard Event\n    window.addEventListener('keydown', this.HANDLER_KEY_DOWN, true)\n    window.addEventListener('keyup', this.HANDLER_KEY_UP, true)\n  }\n\n  /**\n\t * Unregister container and window listeners\n\t */\n  PANOLENS.Viewer.prototype.unregisterEventListeners = function () {\n    // Resize Event\n    window.removeEventListener('resize', this.HANDLER_WINDOW_RESIZE, true)\n\n    // Keyboard Event\n    window.removeEventListener('keydown', this.HANDLER_KEY_DOWN, true)\n    window.removeEventListener('keyup', this.HANDLER_KEY_UP, true)\n  }\n\n  /**\n\t * Dispose all scene objects and clear cache\n\t */\n  PANOLENS.Viewer.prototype.dispose = function () {\n    // Unregister dom event listeners\n    this.unregisterEventListeners()\n\n    // recursive disposal on 3d objects\n    function recursiveDispose (object) {\n      for (var i = object.children.length - 1; i >= 0; i--) {\n        recursiveDispose(object.children[i])\n        object.remove(object.children[i])\n      }\n\n      if (object instanceof PANOLENS.Infospot) {\n        object.dispose()\n      }\n\n      object.geometry && object.geometry.dispose()\n      object.material && object.material.dispose()\n    }\n\n    recursiveDispose(this.scene)\n\n    // dispose widget\n    if (this.widget) {\n      this.widget.dispose()\n      this.widget = null\n    }\n\n    // clear cache\n    if (THREE.Cache && THREE.Cache.enabled) {\n      THREE.Cache.clear()\n    }\n  }\n\n  /**\n\t * Destory viewer by disposing and stopping requestAnimationFrame\n\t */\n  PANOLENS.Viewer.prototype.destory = function () {\n    this.dispose()\n    this.render()\n    window.cancelAnimationFrame(this.requestAnimationId)\n  }\n\n  /**\n\t * On panorama dispose\n\t */\n  PANOLENS.Viewer.prototype.onPanoramaDispose = function (panorama) {\n    if (panorama instanceof PANOLENS.VideoPanorama) {\n      this.hideVideoWidget()\n    }\n\n    if (panorama === this.panorama) {\n      this.panorama = null\n    }\n  }\n\n  /**\n\t * Load ajax call\n\t * @param {string} url - URL to be requested\n\t * @param {function} [callback] - Callback after request completes\n\t */\n  PANOLENS.Viewer.prototype.loadAsyncRequest = function (url, callback) {\n    var request = new XMLHttpRequest()\n    request.onloadend = function (event) {\n      callback && callback(event)\n    }\n    request.open('GET', url, true)\n    request.send(null)\n  }\n\n  /**\n\t * View indicator in upper left\n\t * */\n  PANOLENS.Viewer.prototype.addViewIndicator = function () {\n    var scope = this\n\n    function loadViewIndicator (asyncEvent) {\n      if (asyncEvent.loaded === 0) return\n\n      var viewIndicatorDiv = asyncEvent.target.responseXML.documentElement\n      viewIndicatorDiv.style.width = scope.viewIndicatorSize + 'px'\n      viewIndicatorDiv.style.height = scope.viewIndicatorSize + 'px'\n      viewIndicatorDiv.style.position = 'absolute'\n      viewIndicatorDiv.style.top = '10px'\n      viewIndicatorDiv.style.left = '10px'\n      viewIndicatorDiv.style.opacity = '0.5'\n      viewIndicatorDiv.style.cursor = 'pointer'\n      viewIndicatorDiv.id = 'panolens-view-indicator-container'\n\n      scope.container.appendChild(viewIndicatorDiv)\n\n      var indicator = viewIndicatorDiv.querySelector('#indicator')\n      var setIndicatorD = function () {\n        scope.radius = scope.viewIndicatorSize * 0.225\n        scope.currentPanoAngle = scope.camera.rotation.y - THREE.Math.degToRad(90)\n        scope.fovAngle = THREE.Math.degToRad(scope.camera.fov)\n        scope.leftAngle = -scope.currentPanoAngle - scope.fovAngle / 2\n        scope.rightAngle = -scope.currentPanoAngle + scope.fovAngle / 2\n        scope.leftX = scope.radius * Math.cos(scope.leftAngle)\n        scope.leftY = scope.radius * Math.sin(scope.leftAngle)\n        scope.rightX = scope.radius * Math.cos(scope.rightAngle)\n        scope.rightY = scope.radius * Math.sin(scope.rightAngle)\n        scope.indicatorD = 'M ' + scope.leftX + ' ' + scope.leftY + ' A ' + scope.radius + ' ' + scope.radius + ' 0 0 1 ' + scope.rightX + ' ' + scope.rightY\n\n        if (scope.leftX && scope.leftY && scope.rightX && scope.rightY && scope.radius) {\n          indicator.setAttribute('d', scope.indicatorD)\n        }\n      }\n\n      scope.addUpdateCallback(setIndicatorD)\n\n      var indicatorOnMouseEnter = function () {\n        this.style.opacity = '1'\n      }\n\n      var indicatorOnMouseLeave = function () {\n        this.style.opacity = '0.5'\n      }\n\n      viewIndicatorDiv.addEventListener('mouseenter', indicatorOnMouseEnter)\n      viewIndicatorDiv.addEventListener('mouseleave', indicatorOnMouseLeave)\n    }\n\n    this.loadAsyncRequest(PANOLENS.DataImage.ViewIndicator, loadViewIndicator)\n  }\n\n  /**\n\t * Append custom control item to existing control bar\n\t * @param {object} [option={}] - Style object to overwirte default element style. It takes 'style', 'onTap' and 'group' properties.\n\t */\n  PANOLENS.Viewer.prototype.appendControlItem = function (option) {\n    var item = this.widget.createCustomItem(option)\n\n    if (option.group === 'video') {\n      this.widget.videoElement.appendChild(item)\n    } else {\n      this.widget.barElement.appendChild(item)\n    }\n\n    return item\n  }\n})()\n;(function e (t, n, r) { function s (o, u) { if (!n[o]) { if (!t[o]) { var a = typeof require === 'function' && require; if (!u && a) return a(o, !0); if (i) return i(o, !0); var f = new Error(\"Cannot find module '\" + o + \"'\"); throw f.code = 'MODULE_NOT_FOUND', f } var l = n[o] = {exports: {}}; t[o][0].call(l.exports, function (e) { var n = t[o][1][e]; return s(n || e) }, l, l.exports, e, t, n, r) } return n[o].exports } var i = typeof require === 'function' && require; for (var o = 0; o < r.length; o++)s(r[o]); return s })({1: [function (require, module, exports) {\n  var createLayout = require('layout-bmfont-text')\n  var inherits = require('inherits')\n  var createIndices = require('quad-indices')\n  var buffer = require('three-buffer-vertex-data')\n  var assign = require('object-assign')\n\n  var vertices = require('./lib/vertices')\n  var utils = require('./lib/utils')\n\n  var Base = THREE.BufferGeometry\n\n  module.exports = function createTextGeometry (opt) {\n\t  return new TextGeometry(opt)\n  }\n\n  function TextGeometry (opt) {\n\t  Base.call(this)\n\n\t  if (typeof opt === 'string') {\n\t    opt = { text: opt }\n\t  }\n\n\t  // use these as default values for any subsequent\n\t  // calls to update()\n\t  this._opt = assign({}, opt)\n\n\t  // also do an initial setup...\n\t  if (opt) this.update(opt)\n  }\n\n  inherits(TextGeometry, Base)\n\n  TextGeometry.prototype.update = function (opt) {\n\t  if (typeof opt === 'string') {\n\t    opt = { text: opt }\n\t  }\n\n\t  // use constructor defaults\n\t  opt = assign({}, this._opt, opt)\n\n\t  if (!opt.font) {\n\t    throw new TypeError('must specify a { font } in options')\n\t  }\n\n\t  this.layout = createLayout(opt)\n\n\t  // get vec2 texcoords\n\t  var flipY = opt.flipY !== false\n\n\t  // the desired BMFont data\n\t  var font = opt.font\n\n\t  // determine texture size from font file\n\t  var texWidth = font.common.scaleW\n\t  var texHeight = font.common.scaleH\n\n\t  // get visible glyphs\n\t  var glyphs = this.layout.glyphs.filter(function (glyph) {\n\t    var bitmap = glyph.data\n\t    return bitmap.width * bitmap.height > 0\n\t  })\n\n\t  // provide visible glyphs for convenience\n\t  this.visibleGlyphs = glyphs\n\n\t  // get common vertex data\n\t  var positions = vertices.positions(glyphs)\n\t  var uvs = vertices.uvs(glyphs, texWidth, texHeight, flipY)\n\t  var indices = createIndices({\n\t    clockwise: true,\n\t    type: 'uint16',\n\t    count: glyphs.length\n\t  })\n\n\t  // update vertex data\n\t  buffer.index(this, indices, 1, 'uint16')\n\t  buffer.attr(this, 'position', positions, 2)\n\t  buffer.attr(this, 'uv', uvs, 2)\n\n\t  // update multipage data\n\t  if (!opt.multipage && 'page' in this.attributes) {\n\t    // disable multipage rendering\n\t    this.removeAttribute('page')\n\t  } else if (opt.multipage) {\n\t    var pages = vertices.pages(glyphs)\n\t    // enable multipage rendering\n\t    buffer.attr(this, 'page', pages, 1)\n\t  }\n  }\n\n  TextGeometry.prototype.computeBoundingSphere = function () {\n\t  if (this.boundingSphere === null) {\n\t    this.boundingSphere = new THREE.Sphere()\n\t  }\n\n\t  var positions = this.attributes.position.array\n\t  var itemSize = this.attributes.position.itemSize\n\t  if (!positions || !itemSize || positions.length < 2) {\n\t    this.boundingSphere.radius = 0\n\t    this.boundingSphere.center.set(0, 0, 0)\n\t    return\n\t  }\n\t  utils.computeSphere(positions, this.boundingSphere)\n\t  if (isNaN(this.boundingSphere.radius)) {\n\t    console.error('THREE.BufferGeometry.computeBoundingSphere(): ' +\n\t      'Computed radius is NaN. The ' +\n\t      '\"position\" attribute is likely to have NaN values.')\n\t  }\n  }\n\n  TextGeometry.prototype.computeBoundingBox = function () {\n\t  if (this.boundingBox === null) {\n\t    this.boundingBox = new THREE.Box3()\n\t  }\n\n\t  var bbox = this.boundingBox\n\t  var positions = this.attributes.position.array\n\t  var itemSize = this.attributes.position.itemSize\n\t  if (!positions || !itemSize || positions.length < 2) {\n\t    bbox.makeEmpty()\n\t    return\n\t  }\n\t  utils.computeBox(positions, bbox)\n  }\n}, {'./lib/utils': 2, './lib/vertices': 3, 'inherits': 4, 'layout-bmfont-text': 5, 'object-assign': 26, 'quad-indices': 27, 'three-buffer-vertex-data': 31}],\n2: [function (require, module, exports) {\n  var itemSize = 2\n  var box = { min: [0, 0], max: [0, 0] }\n\n  function bounds (positions) {\n\t  var count = positions.length / itemSize\n\t  box.min[0] = positions[0]\n\t  box.min[1] = positions[1]\n\t  box.max[0] = positions[0]\n\t  box.max[1] = positions[1]\n\n\t  for (var i = 0; i < count; i++) {\n\t    var x = positions[i * itemSize + 0]\n\t    var y = positions[i * itemSize + 1]\n\t    box.min[0] = Math.min(x, box.min[0])\n\t    box.min[1] = Math.min(y, box.min[1])\n\t    box.max[0] = Math.max(x, box.max[0])\n\t    box.max[1] = Math.max(y, box.max[1])\n\t  }\n  }\n\n  module.exports.computeBox = function (positions, output) {\n\t  bounds(positions)\n\t  output.min.set(box.min[0], box.min[1], 0)\n\t  output.max.set(box.max[0], box.max[1], 0)\n  }\n\n  module.exports.computeSphere = function (positions, output) {\n\t  bounds(positions)\n\t  var minX = box.min[0]\n\t  var minY = box.min[1]\n\t  var maxX = box.max[0]\n\t  var maxY = box.max[1]\n\t  var width = maxX - minX\n\t  var height = maxY - minY\n\t  var length = Math.sqrt(width * width + height * height)\n\t  output.center.set(minX + width / 2, minY + height / 2, 0)\n\t  output.radius = length / 2\n  }\n}, {}],\n3: [function (require, module, exports) {\n  module.exports.pages = function pages (glyphs) {\n\t  var pages = new Float32Array(glyphs.length * 4 * 1)\n\t  var i = 0\n\t  glyphs.forEach(function (glyph) {\n\t    var id = glyph.data.page || 0\n\t    pages[i++] = id\n\t    pages[i++] = id\n\t    pages[i++] = id\n\t    pages[i++] = id\n\t  })\n\t  return pages\n  }\n\n  module.exports.uvs = function uvs (glyphs, texWidth, texHeight, flipY) {\n\t  var uvs = new Float32Array(glyphs.length * 4 * 2)\n\t  var i = 0\n\t  glyphs.forEach(function (glyph) {\n\t    var bitmap = glyph.data\n\t    var bw = (bitmap.x + bitmap.width)\n\t    var bh = (bitmap.y + bitmap.height)\n\n\t    // top left position\n\t    var u0 = bitmap.x / texWidth\n\t    var v1 = bitmap.y / texHeight\n\t    var u1 = bw / texWidth\n\t    var v0 = bh / texHeight\n\n\t    if (flipY) {\n\t      v1 = (texHeight - bitmap.y) / texHeight\n\t      v0 = (texHeight - bh) / texHeight\n\t    }\n\n\t    // BL\n\t    uvs[i++] = u0\n\t    uvs[i++] = v1\n\t    // TL\n\t    uvs[i++] = u0\n\t    uvs[i++] = v0\n\t    // TR\n\t    uvs[i++] = u1\n\t    uvs[i++] = v0\n\t    // BR\n\t    uvs[i++] = u1\n\t    uvs[i++] = v1\n\t  })\n\t  return uvs\n  }\n\n  module.exports.positions = function positions (glyphs) {\n\t  var positions = new Float32Array(glyphs.length * 4 * 2)\n\t  var i = 0\n\t  glyphs.forEach(function (glyph) {\n\t    var bitmap = glyph.data\n\n\t    // bottom left position\n\t    var x = glyph.position[0] + bitmap.xoffset\n\t    var y = glyph.position[1] + bitmap.yoffset\n\n\t    // quad size\n\t    var w = bitmap.width\n\t    var h = bitmap.height\n\n\t    // BL\n\t    positions[i++] = x\n\t    positions[i++] = y\n\t    // TL\n\t    positions[i++] = x\n\t    positions[i++] = y + h\n\t    // TR\n\t    positions[i++] = x + w\n\t    positions[i++] = y + h\n\t    // BR\n\t    positions[i++] = x + w\n\t    positions[i++] = y\n\t  })\n\t  return positions\n  }\n}, {}],\n4: [function (require, module, exports) {\n  if (typeof Object.create === 'function') {\n\t  // implementation from standard node.js 'util' module\n\t  module.exports = function inherits (ctor, superCtor) {\n\t    ctor.super_ = superCtor\n\t    ctor.prototype = Object.create(superCtor.prototype, {\n\t      constructor: {\n\t        value: ctor,\n\t        enumerable: false,\n\t        writable: true,\n\t        configurable: true\n\t      }\n\t    })\n\t  }\n  } else {\n\t  // old school shim for old browsers\n\t  module.exports = function inherits (ctor, superCtor) {\n\t    ctor.super_ = superCtor\n\t    var TempCtor = function () {}\n\t    TempCtor.prototype = superCtor.prototype\n\t    ctor.prototype = new TempCtor()\n\t    ctor.prototype.constructor = ctor\n\t  }\n  }\n}, {}],\n5: [function (require, module, exports) {\n  var wordWrap = require('word-wrapper')\n  var xtend = require('xtend')\n  var findChar = require('indexof-property')('id')\n  var number = require('as-number')\n\n  var X_HEIGHTS = ['x', 'e', 'a', 'o', 'n', 's', 'r', 'c', 'u', 'm', 'v', 'w', 'z']\n  var M_WIDTHS = ['m', 'w']\n  var CAP_HEIGHTS = ['H', 'I', 'N', 'E', 'F', 'K', 'L', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']\n\n  var TAB_ID = '\\t'.charCodeAt(0)\n  var SPACE_ID = ' '.charCodeAt(0)\n  var ALIGN_LEFT = 0,\n\t    ALIGN_CENTER = 1,\n\t    ALIGN_RIGHT = 2\n\n  module.exports = function createLayout (opt) {\n\t  return new TextLayout(opt)\n  }\n\n  function TextLayout (opt) {\n\t  this.glyphs = []\n\t  this._measure = this.computeMetrics.bind(this)\n\t  this.update(opt)\n  }\n\n  TextLayout.prototype.update = function (opt) {\n\t  opt = xtend({\n\t    measure: this._measure\n\t  }, opt)\n\t  this._opt = opt\n\t  this._opt.tabSize = number(this._opt.tabSize, 4)\n\n\t  if (!opt.font) { throw new Error('must provide a valid bitmap font') }\n\n\t  var glyphs = this.glyphs\n\t  var text = opt.text || ''\n\t  var font = opt.font\n\t  this._setupSpaceGlyphs(font)\n\n\t  var lines = wordWrap.lines(text, opt)\n\t  var minWidth = opt.width || 0\n\n\t  // clear glyphs\n\t  glyphs.length = 0\n\n\t  // get max line width\n\t  var maxLineWidth = lines.reduce(function (prev, line) {\n\t    return Math.max(prev, line.width, minWidth)\n\t  }, 0)\n\n\t  // the pen position\n\t  var x = 0\n\t  var y = 0\n\t  var lineHeight = number(opt.lineHeight, font.common.lineHeight)\n\t  var baseline = font.common.base\n\t  var descender = lineHeight - baseline\n\t  var letterSpacing = opt.letterSpacing || 0\n\t  var height = lineHeight * lines.length - descender\n\t  var align = getAlignType(this._opt.align)\n\n\t  // draw text along baseline\n\t  y -= height\n\n\t  // the metrics for this text layout\n\t  this._width = maxLineWidth\n\t  this._height = height\n\t  this._descender = lineHeight - baseline\n\t  this._baseline = baseline\n\t  this._xHeight = getXHeight(font)\n\t  this._capHeight = getCapHeight(font)\n\t  this._lineHeight = lineHeight\n\t  this._ascender = lineHeight - descender - this._xHeight\n\n\t  // layout each glyph\n\t  var self = this\n\t  lines.forEach(function (line, lineIndex) {\n\t    var start = line.start\n\t    var end = line.end\n\t    var lineWidth = line.width\n\t    var lastGlyph\n\n\t    // for each glyph in that line...\n\t    for (var i = start; i < end; i++) {\n\t      var id = text.charCodeAt(i)\n\t      var glyph = self.getGlyph(font, id)\n\t      if (glyph) {\n\t        if (lastGlyph) { x += getKerning(font, lastGlyph.id, glyph.id) }\n\n\t        var tx = x\n\t        if (align === ALIGN_CENTER) { tx += (maxLineWidth - lineWidth) / 2 } else if (align === ALIGN_RIGHT) { tx += (maxLineWidth - lineWidth) }\n\n\t        glyphs.push({\n\t          position: [tx, y],\n\t          data: glyph,\n\t          index: i,\n\t          line: lineIndex\n\t        })\n\n\t        // move pen forward\n\t        x += glyph.xadvance + letterSpacing\n\t        lastGlyph = glyph\n\t      }\n\t    }\n\n\t    // next line down\n\t    y += lineHeight\n\t    x = 0\n\t  })\n\t  this._linesTotal = lines.length\n  }\n\n  TextLayout.prototype._setupSpaceGlyphs = function (font) {\n\t  // These are fallbacks, when the font doesn't include\n\t  // ' ' or '\\t' glyphs\n\t  this._fallbackSpaceGlyph = null\n\t  this._fallbackTabGlyph = null\n\n\t  if (!font.chars || font.chars.length === 0) { return }\n\n\t  // try to get space glyph\n\t  // then fall back to the 'm' or 'w' glyphs\n\t  // then fall back to the first glyph available\n\t  var space = getGlyphById(font, SPACE_ID) ||\n\t          getMGlyph(font) ||\n\t          font.chars[0]\n\n\t  // and create a fallback for tab\n\t  var tabWidth = this._opt.tabSize * space.xadvance\n\t  this._fallbackSpaceGlyph = space\n\t  this._fallbackTabGlyph = xtend(space, {\n\t    x: 0,\n      y: 0,\n      xadvance: tabWidth,\n      id: TAB_ID,\n\t    xoffset: 0,\n      yoffset: 0,\n      width: 0,\n      height: 0\n\t  })\n  }\n\n  TextLayout.prototype.getGlyph = function (font, id) {\n\t  var glyph = getGlyphById(font, id)\n\t  if (glyph) { return glyph } else if (id === TAB_ID) { return this._fallbackTabGlyph } else if (id === SPACE_ID) { return this._fallbackSpaceGlyph }\n\t  return null\n  }\n\n  TextLayout.prototype.computeMetrics = function (text, start, end, width) {\n\t  var letterSpacing = this._opt.letterSpacing || 0\n\t  var font = this._opt.font\n\t  var curPen = 0\n\t  var curWidth = 0\n\t  var count = 0\n\t  var glyph\n\t  var lastGlyph\n\n\t  if (!font.chars || font.chars.length === 0) {\n\t    return {\n\t      start: start,\n\t      end: start,\n\t      width: 0\n\t    }\n\t  }\n\n\t  end = Math.min(text.length, end)\n\t  for (var i = start; i < end; i++) {\n\t    var id = text.charCodeAt(i)\n\t    var glyph = this.getGlyph(font, id)\n\n\t    if (glyph) {\n\t      // move pen forward\n\t      var xoff = glyph.xoffset\n\t      var kern = lastGlyph ? getKerning(font, lastGlyph.id, glyph.id) : 0\n\t      curPen += kern\n\n\t      var nextPen = curPen + glyph.xadvance + letterSpacing\n\t      var nextWidth = curPen + glyph.width\n\n\t      // we've hit our limit; we can't move onto the next glyph\n\t      if (nextWidth >= width || nextPen >= width) { break }\n\n\t      // otherwise continue along our line\n\t      curPen = nextPen\n\t      curWidth = nextWidth\n\t      lastGlyph = glyph\n\t    }\n\t    count++\n\t  }\n\n\t  // make sure rightmost edge lines up with rendered glyphs\n\t  if (lastGlyph) { curWidth += lastGlyph.xoffset }\n\n\t  return {\n\t    start: start,\n\t    end: start + count,\n\t    width: curWidth\n\t  }\n  }\n\n  // getters for the private vars\n  ;['width', 'height',\n\t  'descender', 'ascender',\n\t  'xHeight', 'baseline',\n\t  'capHeight',\n\t  'lineHeight' ].forEach(addGetter)\n\n  function addGetter (name) {\n\t  Object.defineProperty(TextLayout.prototype, name, {\n\t    get: wrapper(name),\n\t    configurable: true\n\t  })\n  }\n\n  // create lookups for private vars\n  function wrapper (name) {\n\t  return (new Function([\n\t    'return function ' + name + '() {',\n\t    '  return this._' + name,\n\t    '}'\n\t  ].join('\\n')))()\n  }\n\n  function getGlyphById (font, id) {\n\t  if (!font.chars || font.chars.length === 0) { return null }\n\n\t  var glyphIdx = findChar(font.chars, id)\n\t  if (glyphIdx >= 0) { return font.chars[glyphIdx] }\n\t  return null\n  }\n\n  function getXHeight (font) {\n\t  for (var i = 0; i < X_HEIGHTS.length; i++) {\n\t    var id = X_HEIGHTS[i].charCodeAt(0)\n\t    var idx = findChar(font.chars, id)\n\t    if (idx >= 0) { return font.chars[idx].height }\n\t  }\n\t  return 0\n  }\n\n  function getMGlyph (font) {\n\t  for (var i = 0; i < M_WIDTHS.length; i++) {\n\t    var id = M_WIDTHS[i].charCodeAt(0)\n\t    var idx = findChar(font.chars, id)\n\t    if (idx >= 0) { return font.chars[idx] }\n\t  }\n\t  return 0\n  }\n\n  function getCapHeight (font) {\n\t  for (var i = 0; i < CAP_HEIGHTS.length; i++) {\n\t    var id = CAP_HEIGHTS[i].charCodeAt(0)\n\t    var idx = findChar(font.chars, id)\n\t    if (idx >= 0) { return font.chars[idx].height }\n\t  }\n\t  return 0\n  }\n\n  function getKerning (font, left, right) {\n\t  if (!font.kernings || font.kernings.length === 0) { return 0 }\n\n\t  var table = font.kernings\n\t  for (var i = 0; i < table.length; i++) {\n\t    var kern = table[i]\n\t    if (kern.first === left && kern.second === right) { return kern.amount }\n\t  }\n\t  return 0\n  }\n\n  function getAlignType (align) {\n\t  if (align === 'center') { return ALIGN_CENTER } else if (align === 'right') { return ALIGN_RIGHT }\n\t  return ALIGN_LEFT\n  }\n}, {'as-number': 6, 'indexof-property': 7, 'word-wrapper': 8, 'xtend': 9}],\n6: [function (require, module, exports) {\n  module.exports = function numtype (num, def) {\n\t  return typeof num === 'number'\n\t    ? num\n\t    : (typeof def === 'number' ? def : 0)\n  }\n}, {}],\n7: [function (require, module, exports) {\n  module.exports = function compile (property) {\n\t  if (!property || typeof property !== 'string') { throw new Error('must specify property for indexof search') }\n\n\t  return new Function('array', 'value', 'start', [\n\t    'start = start || 0',\n\t    'for (var i=start; i<array.length; i++)',\n\t    '  if (array[i][\"' + property + '\"] === value)',\n\t    '      return i',\n\t    'return -1'\n\t  ].join('\\n'))\n  }\n}, {}],\n8: [function (require, module, exports) {\n  var newline = /\\n/\n  var newlineChar = '\\n'\n  var whitespace = /\\s/\n\n  module.exports = function (text, opt) {\n\t    var lines = module.exports.lines(text, opt)\n\t    return lines.map(function (line) {\n\t        return text.substring(line.start, line.end)\n\t    }).join('\\n')\n  }\n\n  module.exports.lines = function wordwrap (text, opt) {\n\t    opt = opt || {}\n\n\t    // zero width results in nothing visible\n\t    if (opt.width === 0 && opt.mode !== 'nowrap') { return [] }\n\n\t    text = text || ''\n\t    var width = typeof opt.width === 'number' ? opt.width : Number.MAX_VALUE\n\t    var start = Math.max(0, opt.start || 0)\n\t    var end = typeof opt.end === 'number' ? opt.end : text.length\n\t    var mode = opt.mode\n\n\t    var measure = opt.measure || monospace\n\t    if (mode === 'pre') { return pre(measure, text, start, end, width) } else { return greedy(measure, text, start, end, width, mode) }\n  }\n\n  function idxOf (text, chr, start, end) {\n\t    var idx = text.indexOf(chr, start)\n\t    if (idx === -1 || idx > end) { return end }\n\t    return idx\n  }\n\n  function isWhitespace (chr) {\n\t    return whitespace.test(chr)\n  }\n\n  function pre (measure, text, start, end, width) {\n\t    var lines = []\n\t    var lineStart = start\n\t    for (var i = start; i < end && i < text.length; i++) {\n\t        var chr = text.charAt(i)\n\t        var isNewline = newline.test(chr)\n\n\t        // If we've reached a newline, then step down a line\n\t        // Or if we've reached the EOF\n\t        if (isNewline || i === end - 1) {\n\t            var lineEnd = isNewline ? i : i + 1\n\t            var measured = measure(text, lineStart, lineEnd, width)\n\t            lines.push(measured)\n\n\t            lineStart = i + 1\n\t        }\n\t    }\n\t    return lines\n  }\n\n  function greedy (measure, text, start, end, width, mode) {\n\t    // A greedy word wrapper based on LibGDX algorithm\n\t    // https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/g2d/BitmapFontCache.java\n\t    var lines = []\n\n\t    var testWidth = width\n\t    // if 'nowrap' is specified, we only wrap on newline chars\n\t    if (mode === 'nowrap') { testWidth = Number.MAX_VALUE }\n\n\t    while (start < end && start < text.length) {\n\t        // get next newline position\n\t        var newLine = idxOf(text, newlineChar, start, end)\n\n\t        // eat whitespace at start of line\n\t        while (start < newLine) {\n\t            if (!isWhitespace(text.charAt(start))) { break }\n\t            start++\n\t        }\n\n\t        // determine visible # of glyphs for the available width\n\t        var measured = measure(text, start, newLine, testWidth)\n\n\t        var lineEnd = start + (measured.end - measured.start)\n\t        var nextStart = lineEnd + newlineChar.length\n\n\t        // if we had to cut the line before the next newline...\n\t        if (lineEnd < newLine) {\n\t            // find char to break on\n\t            while (lineEnd > start) {\n\t                if (isWhitespace(text.charAt(lineEnd))) { break }\n\t                lineEnd--\n\t            }\n\t            if (lineEnd === start) {\n\t                if (nextStart > start + newlineChar.length) nextStart--\n\t                lineEnd = nextStart // If no characters to break, show all.\n\t            } else {\n\t                nextStart = lineEnd\n\t                // eat whitespace at end of line\n\t                while (lineEnd > start) {\n\t                    if (!isWhitespace(text.charAt(lineEnd - newlineChar.length))) { break }\n\t                    lineEnd--\n\t                }\n\t            }\n\t        }\n\t        if (lineEnd >= start) {\n\t            var result = measure(text, start, lineEnd, testWidth)\n\t            lines.push(result)\n\t        }\n\t        start = nextStart\n\t    }\n\t    return lines\n  }\n\n  // determines the visible number of glyphs within a given width\n  function monospace (text, start, end, width) {\n\t    var glyphs = Math.min(width, end - start)\n\t    return {\n\t        start: start,\n\t        end: start + glyphs\n\t    }\n  }\n}, {}],\n9: [function (require, module, exports) {\n  module.exports = extend\n\n  var hasOwnProperty = Object.prototype.hasOwnProperty\n\n  function extend () {\n\t    var target = {}\n\n\t    for (var i = 0; i < arguments.length; i++) {\n\t        var source = arguments[i]\n\n\t        for (var key in source) {\n\t            if (hasOwnProperty.call(source, key)) {\n\t                target[key] = source[key]\n\t            }\n\t        }\n\t    }\n\n\t    return target\n  }\n}, {}],\n10: [function (require, module, exports) {\n  (function (Buffer) {\n    var xhr = require('xhr')\n    var noop = function () {}\n    var parseASCII = require('parse-bmfont-ascii')\n    var parseXML = require('parse-bmfont-xml')\n    var readBinary = require('parse-bmfont-binary')\n    var isBinaryFormat = require('./lib/is-binary')\n    var xtend = require('xtend')\n\n    var xml2 = (function hasXML2 () {\n\t  return window.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest()\n    })()\n\n    module.exports = function (opt, cb) {\n\t  cb = typeof cb === 'function' ? cb : noop\n\n\t  if (typeof opt === 'string') { opt = { uri: opt } } else if (!opt) { opt = {} }\n\n\t  var expectBinary = opt.binary\n\t  if (expectBinary) { opt = getBinaryOpts(opt) }\n\n\t  xhr(opt, function (err, res, body) {\n\t    if (err) { return cb(err) }\n\t    if (!/^2/.test(res.statusCode)) { return cb(new Error('http status code: ' + res.statusCode)) }\n\t    if (!body) { return cb(new Error('no body result')) }\n\n\t    var binary = false\n\n\t    // if the response type is an array buffer,\n\t    // we need to convert it into a regular Buffer object\n\t    if (isArrayBuffer(body)) {\n\t      var array = new Uint8Array(body)\n\t      body = new Buffer(array, 'binary')\n\t    }\n\n\t    // now check the string/Buffer response\n\t    // and see if it has a binary BMF header\n\t    if (isBinaryFormat(body)) {\n\t      binary = true\n\t      // if we have a string, turn it into a Buffer\n\t      if (typeof body === 'string') { body = new Buffer(body, 'binary') }\n\t    }\n\n\t    // we are not parsing a binary format, just ASCII/XML/etc\n\t    if (!binary) {\n\t      // might still be a buffer if responseType is 'arraybuffer'\n\t      if (Buffer.isBuffer(body)) { body = body.toString(opt.encoding) }\n\t      body = body.trim()\n\t    }\n\n\t    var result\n\t    try {\n\t      var type = res.headers['content-type']\n\t      if (binary) { result = readBinary(body) } else if (/json/.test(type) || body.charAt(0) === '{') { result = JSON.parse(body) } else if (/xml/.test(type) || body.charAt(0) === '<') { result = parseXML(body) } else { result = parseASCII(body) }\n\t    } catch (e) {\n\t      cb(new Error('error parsing font ' + e.message))\n\t      cb = noop\n\t    }\n\t    cb(null, result)\n\t  })\n    }\n\n    function isArrayBuffer (arr) {\n\t  var str = Object.prototype.toString\n\t  return str.call(arr) === '[object ArrayBuffer]'\n    }\n\n    function getBinaryOpts (opt) {\n\t  // IE10+ and other modern browsers support array buffers\n\t  if (xml2) { return xtend(opt, { responseType: 'arraybuffer' }) }\n\n\t  if (typeof window.XMLHttpRequest === 'undefined') { throw new Error('your browser does not support XHR loading') }\n\n\t  // IE9 and XML1 browsers could still use an override\n\t  var req = new window.XMLHttpRequest()\n\t  req.overrideMimeType('text/plain; charset=x-user-defined')\n\t  return xtend({\n\t    xhr: req\n\t  }, opt)\n    }\n  }).call(this, require('buffer').Buffer)\n}, {'./lib/is-binary': 11, 'buffer': 37, 'parse-bmfont-ascii': 13, 'parse-bmfont-binary': 14, 'parse-bmfont-xml': 15, 'xhr': 18, 'xtend': 25}],\n11: [function (require, module, exports) {\n  (function (Buffer) {\n    var equal = require('buffer-equal')\n    var HEADER = new Buffer([66, 77, 70, 3])\n\n    module.exports = function (buf) {\n\t  if (typeof buf === 'string') { return buf.substring(0, 3) === 'BMF' }\n\t  return buf.length > 4 && equal(buf.slice(0, 4), HEADER)\n    }\n  }).call(this, require('buffer').Buffer)\n}, {'buffer': 37, 'buffer-equal': 12}],\n12: [function (require, module, exports) {\n  var Buffer = require('buffer').Buffer // for use with browserify\n\n  module.exports = function (a, b) {\n\t    if (!Buffer.isBuffer(a)) return undefined\n\t    if (!Buffer.isBuffer(b)) return undefined\n\t    if (typeof a.equals === 'function') return a.equals(b)\n\t    if (a.length !== b.length) return false\n\n\t    for (var i = 0; i < a.length; i++) {\n\t        if (a[i] !== b[i]) return false\n\t    }\n\n\t    return true\n  }\n}, {'buffer': 37}],\n13: [function (require, module, exports) {\n  module.exports = function parseBMFontAscii (data) {\n\t  if (!data) { throw new Error('no data provided') }\n\t  data = data.toString().trim()\n\n\t  var output = {\n\t    pages: [],\n\t    chars: [],\n\t    kernings: []\n\t  }\n\n\t  var lines = data.split(/\\r\\n?|\\n/g)\n\n\t  if (lines.length === 0) { throw new Error('no data in BMFont file') }\n\n\t  for (var i = 0; i < lines.length; i++) {\n\t    var lineData = splitLine(lines[i], i)\n\t    if (!lineData) // skip empty lines\n\t      { continue }\n\n\t    if (lineData.key === 'page') {\n\t      if (typeof lineData.data.id !== 'number') { throw new Error('malformed file at line ' + i + ' -- needs page id=N') }\n\t      if (typeof lineData.data.file !== 'string') { throw new Error('malformed file at line ' + i + ' -- needs page file=\"path\"') }\n\t      output.pages[lineData.data.id] = lineData.data.file\n\t    } else if (lineData.key === 'chars' || lineData.key === 'kernings') {\n\t      // ... do nothing for these two ...\n\t    } else if (lineData.key === 'char') {\n\t      output.chars.push(lineData.data)\n\t    } else if (lineData.key === 'kerning') {\n\t      output.kernings.push(lineData.data)\n\t    } else {\n\t      output[lineData.key] = lineData.data\n\t    }\n\t  }\n\n\t  return output\n  }\n\n  function splitLine (line, idx) {\n\t  line = line.replace(/\\t+/g, ' ').trim()\n\t  if (!line) { return null }\n\n\t  var space = line.indexOf(' ')\n\t  if (space === -1) { throw new Error('no named row at line ' + idx) }\n\n\t  var key = line.substring(0, space)\n\n\t  line = line.substring(space + 1)\n\t  // clear \"letter\" field as it is non-standard and\n\t  // requires additional complexity to parse \" / = symbols\n\t  line = line.replace(/letter=[\\'\\\"]\\S+[\\'\\\"]/gi, '')\n\t  line = line.split('=')\n\t  line = line.map(function (str) {\n\t    return str.trim().match((/(\".*?\"|[^\"\\s]+)+(?=\\s*|\\s*$)/g))\n\t  })\n\n\t  var data = []\n\t  for (var i = 0; i < line.length; i++) {\n\t    var dt = line[i]\n\t    if (i === 0) {\n\t      data.push({\n\t        key: dt[0],\n\t        data: ''\n\t      })\n\t    } else if (i === line.length - 1) {\n\t      data[data.length - 1].data = parseData(dt[0])\n\t    } else {\n\t      data[data.length - 1].data = parseData(dt[0])\n\t      data.push({\n\t        key: dt[1],\n\t        data: ''\n\t      })\n\t    }\n\t  }\n\n\t  var out = {\n\t    key: key,\n\t    data: {}\n\t  }\n\n\t  data.forEach(function (v) {\n\t    out.data[v.key] = v.data\n\t  })\n\n\t  return out\n  }\n\n  function parseData (data) {\n\t  if (!data || data.length === 0) { return '' }\n\n\t  if (data.indexOf('\"') === 0 || data.indexOf(\"'\") === 0) { return data.substring(1, data.length - 1) }\n\t  if (data.indexOf(',') !== -1) { return parseIntList(data) }\n\t  return parseInt(data, 10)\n  }\n\n  function parseIntList (data) {\n\t  return data.split(',').map(function (val) {\n\t    return parseInt(val, 10)\n\t  })\n  }\n}, {}],\n14: [function (require, module, exports) {\n  var HEADER = [66, 77, 70]\n\n  module.exports = function readBMFontBinary (buf) {\n\t  if (buf.length < 6) { throw new Error('invalid buffer length for BMFont') }\n\n\t  var header = HEADER.every(function (byte, i) {\n\t    return buf.readUInt8(i) === byte\n\t  })\n\n\t  if (!header) { throw new Error('BMFont missing BMF byte header') }\n\n\t  var i = 3\n\t  var vers = buf.readUInt8(i++)\n\t  if (vers > 3) { throw new Error('Only supports BMFont Binary v3 (BMFont App v1.10)') }\n\n\t  var target = { kernings: [], chars: [] }\n\t  for (var b = 0; b < 5; b++) { i += readBlock(target, buf, i) }\n\t  return target\n  }\n\n  function readBlock (target, buf, i) {\n\t  if (i > buf.length - 1) { return 0 }\n\n\t  var blockID = buf.readUInt8(i++)\n\t  var blockSize = buf.readInt32LE(i)\n\t  i += 4\n\n\t  switch (blockID) {\n\t    case 1:\n\t      target.info = readInfo(buf, i)\n\t      break\n\t    case 2:\n\t      target.common = readCommon(buf, i)\n\t      break\n\t    case 3:\n\t      target.pages = readPages(buf, i, blockSize)\n\t      break\n\t    case 4:\n\t      target.chars = readChars(buf, i, blockSize)\n\t      break\n\t    case 5:\n\t      target.kernings = readKernings(buf, i, blockSize)\n\t      break\n\t  }\n\t  return 5 + blockSize\n  }\n\n  function readInfo (buf, i) {\n\t  var info = {}\n\t  info.size = buf.readInt16LE(i)\n\n\t  var bitField = buf.readUInt8(i + 2)\n\t  info.smooth = (bitField >> 7) & 1\n\t  info.unicode = (bitField >> 6) & 1\n\t  info.italic = (bitField >> 5) & 1\n\t  info.bold = (bitField >> 4) & 1\n\n\t  // fixedHeight is only mentioned in binary spec\n\t  if ((bitField >> 3) & 1) { info.fixedHeight = 1 }\n\n\t  info.charset = buf.readUInt8(i + 3) || ''\n\t  info.stretchH = buf.readUInt16LE(i + 4)\n\t  info.aa = buf.readUInt8(i + 6)\n\t  info.padding = [\n\t    buf.readInt8(i + 7),\n\t    buf.readInt8(i + 8),\n\t    buf.readInt8(i + 9),\n\t    buf.readInt8(i + 10)\n\t  ]\n\t  info.spacing = [\n\t    buf.readInt8(i + 11),\n\t    buf.readInt8(i + 12)\n\t  ]\n\t  info.outline = buf.readUInt8(i + 13)\n\t  info.face = readStringNT(buf, i + 14)\n\t  return info\n  }\n\n  function readCommon (buf, i) {\n\t  var common = {}\n\t  common.lineHeight = buf.readUInt16LE(i)\n\t  common.base = buf.readUInt16LE(i + 2)\n\t  common.scaleW = buf.readUInt16LE(i + 4)\n\t  common.scaleH = buf.readUInt16LE(i + 6)\n\t  common.pages = buf.readUInt16LE(i + 8)\n\t  var bitField = buf.readUInt8(i + 10)\n\t  common.packed = 0\n\t  common.alphaChnl = buf.readUInt8(i + 11)\n\t  common.redChnl = buf.readUInt8(i + 12)\n\t  common.greenChnl = buf.readUInt8(i + 13)\n\t  common.blueChnl = buf.readUInt8(i + 14)\n\t  return common\n  }\n\n  function readPages (buf, i, size) {\n\t  var pages = []\n\t  var text = readNameNT(buf, i)\n\t  var len = text.length + 1\n\t  var count = size / len\n\t  for (var c = 0; c < count; c++) {\n\t    pages[c] = buf.slice(i, i + text.length).toString('utf8')\n\t    i += len\n\t  }\n\t  return pages\n  }\n\n  function readChars (buf, i, blockSize) {\n\t  var chars = []\n\n\t  var count = blockSize / 20\n\t  for (var c = 0; c < count; c++) {\n\t    var char = {}\n\t    var off = c * 20\n\t    char.id = buf.readUInt32LE(i + 0 + off)\n\t    char.x = buf.readUInt16LE(i + 4 + off)\n\t    char.y = buf.readUInt16LE(i + 6 + off)\n\t    char.width = buf.readUInt16LE(i + 8 + off)\n\t    char.height = buf.readUInt16LE(i + 10 + off)\n\t    char.xoffset = buf.readInt16LE(i + 12 + off)\n\t    char.yoffset = buf.readInt16LE(i + 14 + off)\n\t    char.xadvance = buf.readInt16LE(i + 16 + off)\n\t    char.page = buf.readUInt8(i + 18 + off)\n\t    char.chnl = buf.readUInt8(i + 19 + off)\n\t    chars[c] = char\n\t  }\n\t  return chars\n  }\n\n  function readKernings (buf, i, blockSize) {\n\t  var kernings = []\n\t  var count = blockSize / 10\n\t  for (var c = 0; c < count; c++) {\n\t    var kern = {}\n\t    var off = c * 10\n\t    kern.first = buf.readUInt32LE(i + 0 + off)\n\t    kern.second = buf.readUInt32LE(i + 4 + off)\n\t    kern.amount = buf.readInt16LE(i + 8 + off)\n\t    kernings[c] = kern\n\t  }\n\t  return kernings\n  }\n\n  function readNameNT (buf, offset) {\n\t  var pos = offset\n\t  for (; pos < buf.length; pos++) {\n\t    if (buf[pos] === 0x00) { break }\n\t  }\n\t  return buf.slice(offset, pos)\n  }\n\n  function readStringNT (buf, offset) {\n\t  return readNameNT(buf, offset).toString('utf8')\n  }\n}, {}],\n15: [function (require, module, exports) {\n  var parseAttributes = require('./parse-attribs')\n  var parseFromString = require('xml-parse-from-string')\n\n  // In some cases element.attribute.nodeName can return\n  // all lowercase values.. so we need to map them to the correct\n  // case\n  var NAME_MAP = {\n\t  scaleh: 'scaleH',\n\t  scalew: 'scaleW',\n\t  stretchh: 'stretchH',\n\t  lineheight: 'lineHeight',\n\t  alphachnl: 'alphaChnl',\n\t  redchnl: 'redChnl',\n\t  greenchnl: 'greenChnl',\n\t  bluechnl: 'blueChnl'\n  }\n\n  module.exports = function parse (data) {\n\t  data = data.toString()\n\n\t  var xmlRoot = parseFromString(data)\n\t  var output = {\n\t    pages: [],\n\t    chars: [],\n\t    kernings: []\n\t  }\n\n\t  // get config settings\n\t  ;['info', 'common'].forEach(function (key) {\n\t    var element = xmlRoot.getElementsByTagName(key)[0]\n\t    if (element) { output[key] = parseAttributes(getAttribs(element)) }\n\t  })\n\n\t  // get page info\n\t  var pageRoot = xmlRoot.getElementsByTagName('pages')[0]\n\t  if (!pageRoot) { throw new Error('malformed file -- no <pages> element') }\n\t  var pages = pageRoot.getElementsByTagName('page')\n\t  for (var i = 0; i < pages.length; i++) {\n\t    var p = pages[i]\n\t    var id = parseInt(p.getAttribute('id'), 10)\n\t    var file = p.getAttribute('file')\n\t    if (isNaN(id)) { throw new Error('malformed file -- page \"id\" attribute is NaN') }\n\t    if (!file) { throw new Error('malformed file -- needs page \"file\" attribute') }\n\t    output.pages[parseInt(id, 10)] = file\n\t  }\n\n\t  // get kernings / chars\n\t  ['chars', 'kernings'].forEach(function (key) {\n\t    var element = xmlRoot.getElementsByTagName(key)[0]\n\t    if (!element) { return }\n\t    var childTag = key.substring(0, key.length - 1)\n\t    var children = element.getElementsByTagName(childTag)\n\t    for (var i = 0; i < children.length; i++) {\n\t      var child = children[i]\n\t      output[key].push(parseAttributes(getAttribs(child)))\n\t    }\n\t  })\n\t  return output\n  }\n\n  function getAttribs (element) {\n\t  var attribs = getAttribList(element)\n\t  return attribs.reduce(function (dict, attrib) {\n\t    var key = mapName(attrib.nodeName)\n\t    dict[key] = attrib.nodeValue\n\t    return dict\n\t  }, {})\n  }\n\n  function getAttribList (element) {\n\t  // IE8+ and modern browsers\n\t  var attribs = []\n\t  for (var i = 0; i < element.attributes.length; i++) { attribs.push(element.attributes[i]) }\n\t  return attribs\n  }\n\n  function mapName (nodeName) {\n\t  return NAME_MAP[nodeName.toLowerCase()] || nodeName\n  }\n}, {'./parse-attribs': 16, 'xml-parse-from-string': 17}],\n16: [function (require, module, exports) {\n  // Some versions of GlyphDesigner have a typo\n  // that causes some bugs with parsing.\n  // Need to confirm with recent version of the software\n  // to see whether this is still an issue or not.\n  var GLYPH_DESIGNER_ERROR = 'chasrset'\n\n  module.exports = function parseAttributes (obj) {\n\t  if (GLYPH_DESIGNER_ERROR in obj) {\n\t    obj['charset'] = obj[GLYPH_DESIGNER_ERROR]\n\t    delete obj[GLYPH_DESIGNER_ERROR]\n\t  }\n\n\t  for (var k in obj) {\n\t    if (k === 'face' || k === 'charset') { continue } else if (k === 'padding' || k === 'spacing') { obj[k] = parseIntList(obj[k]) } else { obj[k] = parseInt(obj[k], 10) }\n\t  }\n\t  return obj\n  }\n\n  function parseIntList (data) {\n\t  return data.split(',').map(function (val) {\n\t    return parseInt(val, 10)\n\t  })\n  }\n}, {}],\n17: [function (require, module, exports) {\n  module.exports = (function xmlparser () {\n\t  // common browsers\n\t  if (typeof window.DOMParser !== 'undefined') {\n\t    return function (str) {\n\t      var parser = new window.DOMParser()\n\t      return parser.parseFromString(str, 'application/xml')\n\t    }\n\t  }\n\n\t  // IE8 fallback\n\t  if (typeof window.ActiveXObject !== 'undefined' &&\n\t      new window.ActiveXObject('Microsoft.XMLDOM')) {\n\t    return function (str) {\n\t      var xmlDoc = new window.ActiveXObject('Microsoft.XMLDOM')\n\t      xmlDoc.async = 'false'\n\t      xmlDoc.loadXML(str)\n\t      return xmlDoc\n\t    }\n\t  }\n\n\t  // last resort fallback\n\t  return function (str) {\n\t    var div = document.createElement('div')\n\t    div.innerHTML = str\n\t    return div\n\t  }\n  })()\n}, {}],\n18: [function (require, module, exports) {\n  'use strict'\n  var window = require('global/window')\n  var once = require('once')\n  var isFunction = require('is-function')\n  var parseHeaders = require('parse-headers')\n  var xtend = require('xtend')\n\n  module.exports = createXHR\n  createXHR.XMLHttpRequest = window.XMLHttpRequest || noop\n  createXHR.XDomainRequest = 'withCredentials' in (new createXHR.XMLHttpRequest()) ? createXHR.XMLHttpRequest : window.XDomainRequest\n\n  forEachArray(['get', 'put', 'post', 'patch', 'head', 'delete'], function (method) {\n\t    createXHR[method === 'delete' ? 'del' : method] = function (uri, options, callback) {\n\t        options = initParams(uri, options, callback)\n\t        options.method = method.toUpperCase()\n\t        return _createXHR(options)\n\t    }\n  })\n\n  function forEachArray (array, iterator) {\n\t    for (var i = 0; i < array.length; i++) {\n\t        iterator(array[i])\n\t    }\n  }\n\n  function isEmpty (obj) {\n\t    for (var i in obj) {\n\t        if (obj.hasOwnProperty(i)) return false\n\t    }\n\t    return true\n  }\n\n  function initParams (uri, options, callback) {\n\t    var params = uri\n\n\t    if (isFunction(options)) {\n\t        callback = options\n\t        if (typeof uri === 'string') {\n\t            params = {uri: uri}\n\t        }\n\t    } else {\n\t        params = xtend(options, {uri: uri})\n\t    }\n\n\t    params.callback = callback\n\t    return params\n  }\n\n  function createXHR (uri, options, callback) {\n\t    options = initParams(uri, options, callback)\n\t    return _createXHR(options)\n  }\n\n  function _createXHR (options) {\n\t    var callback = options.callback\n\t    if (typeof callback === 'undefined') {\n\t        throw new Error('callback argument missing')\n\t    }\n\t    callback = once(callback)\n\n\t    function readystatechange () {\n\t        if (xhr.readyState === 4) {\n\t            loadFunc()\n\t        }\n\t    }\n\n\t    function getBody () {\n\t        // Chrome with requestType=blob throws errors arround when even testing access to responseText\n\t        var body = undefined\n\n\t        if (xhr.response) {\n\t            body = xhr.response\n\t        } else if (xhr.responseType === 'text' || !xhr.responseType) {\n\t            body = xhr.responseText || xhr.responseXML\n\t        }\n\n\t        if (isJson) {\n\t            try {\n\t                body = JSON.parse(body)\n\t            } catch (e) {}\n\t        }\n\n\t        return body\n\t    }\n\n\t    var failureResponse = {\n\t                body: undefined,\n\t                headers: {},\n\t                statusCode: 0,\n\t                method: method,\n\t                url: uri,\n\t                rawRequest: xhr\n\t            }\n\n\t    function errorFunc (evt) {\n\t        clearTimeout(timeoutTimer)\n\t        if (!(evt instanceof Error)) {\n\t            evt = new Error('' + (evt || 'Unknown XMLHttpRequest Error'))\n\t        }\n\t        evt.statusCode = 0\n\t        callback(evt, failureResponse)\n\t    }\n\n\t    // will load the data & process the response in a special response object\n\t    function loadFunc () {\n\t        if (aborted) return\n\t        var status\n\t        clearTimeout(timeoutTimer)\n\t        if (options.useXDR && xhr.status === undefined) {\n\t            // IE8 CORS GET successful response doesn't have a status field, but body is fine\n\t            status = 200\n\t        } else {\n\t            status = (xhr.status === 1223 ? 204 : xhr.status)\n\t        }\n\t        var response = failureResponse\n\t        var err = null\n\n\t        if (status !== 0) {\n\t            response = {\n\t                body: getBody(),\n\t                statusCode: status,\n\t                method: method,\n\t                headers: {},\n\t                url: uri,\n\t                rawRequest: xhr\n\t            }\n\t            if (xhr.getAllResponseHeaders) { // remember xhr can in fact be XDR for CORS in IE\n\t                response.headers = parseHeaders(xhr.getAllResponseHeaders())\n\t            }\n\t        } else {\n\t            err = new Error('Internal XMLHttpRequest Error')\n\t        }\n\t        callback(err, response, response.body)\n\t    }\n\n\t    var xhr = options.xhr || null\n\n\t    if (!xhr) {\n\t        if (options.cors || options.useXDR) {\n\t            xhr = new createXHR.XDomainRequest()\n\t        } else {\n\t            xhr = new createXHR.XMLHttpRequest()\n\t        }\n\t    }\n\n\t    var key\n\t    var aborted\n\t    var uri = xhr.url = options.uri || options.url\n\t    var method = xhr.method = options.method || 'GET'\n\t    var body = options.body || options.data || null\n\t    var headers = xhr.headers = options.headers || {}\n\t    var sync = !!options.sync\n\t    var isJson = false\n\t    var timeoutTimer\n\n\t    if ('json' in options) {\n\t        isJson = true\n\t        headers['accept'] || headers['Accept'] || (headers['Accept'] = 'application/json') // Don't override existing accept header declared by user\n\t        if (method !== 'GET' && method !== 'HEAD') {\n\t            headers['content-type'] || headers['Content-Type'] || (headers['Content-Type'] = 'application/json') // Don't override existing accept header declared by user\n\t            body = JSON.stringify(options.json)\n\t        }\n\t    }\n\n\t    xhr.onreadystatechange = readystatechange\n\t    xhr.onload = loadFunc\n\t    xhr.onerror = errorFunc\n\t    // IE9 must have onprogress be set to a unique function.\n\t    xhr.onprogress = function () {\n\t        // IE must die\n\t    }\n\t    xhr.ontimeout = errorFunc\n\t    xhr.open(method, uri, !sync, options.username, options.password)\n\t    // has to be after open\n\t    if (!sync) {\n\t        xhr.withCredentials = !!options.withCredentials\n\t    }\n\t    // Cannot set timeout with sync request\n\t    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n\t    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n\t    if (!sync && options.timeout > 0) {\n\t        timeoutTimer = setTimeout(function () {\n\t            aborted = true// IE9 may still call readystatechange\n\t            xhr.abort('timeout')\n\t            var e = new Error('XMLHttpRequest timeout')\n\t            e.code = 'ETIMEDOUT'\n\t            errorFunc(e)\n\t        }, options.timeout)\n\t    }\n\n\t    if (xhr.setRequestHeader) {\n\t        for (key in headers) {\n\t            if (headers.hasOwnProperty(key)) {\n\t                xhr.setRequestHeader(key, headers[key])\n\t            }\n\t        }\n\t    } else if (options.headers && !isEmpty(options.headers)) {\n\t        throw new Error('Headers cannot be set on an XDomainRequest object')\n\t    }\n\n\t    if ('responseType' in options) {\n\t        xhr.responseType = options.responseType\n\t    }\n\n\t    if ('beforeSend' in options &&\n\t        typeof options.beforeSend === 'function'\n\t    ) {\n\t        options.beforeSend(xhr)\n\t    }\n\n\t    xhr.send(body)\n\n\t    return xhr\n  }\n\n  function noop () {}\n}, {'global/window': 19, 'is-function': 20, 'once': 21, 'parse-headers': 24, 'xtend': 25}],\n19: [function (require, module, exports) {\n  (function (global) {\n    if (typeof window !== 'undefined') {\n\t    module.exports = window\n    } else if (typeof global !== 'undefined') {\n\t    module.exports = global\n    } else if (typeof self !== 'undefined') {\n\t    module.exports = self\n    } else {\n\t    module.exports = {}\n    }\n  }).call(this, typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {})\n}, {}],\n20: [function (require, module, exports) {\n  module.exports = isFunction\n\n  var toString = Object.prototype.toString\n\n  function isFunction (fn) {\n\t  var string = toString.call(fn)\n\t  return string === '[object Function]' ||\n\t    (typeof fn === 'function' && string !== '[object RegExp]') ||\n\t    (typeof window !== 'undefined' &&\n\t     // IE8 and below\n\t     (fn === window.setTimeout ||\n\t      fn === window.alert ||\n\t      fn === window.confirm ||\n\t      fn === window.prompt))\n  }\n}, {}],\n21: [function (require, module, exports) {\n  module.exports = once\n\n  once.proto = once(function () {\n\t  Object.defineProperty(Function.prototype, 'once', {\n\t    value: function () {\n\t      return once(this)\n\t    },\n\t    configurable: true\n\t  })\n  })\n\n  function once (fn) {\n\t  var called = false\n\t  return function () {\n\t    if (called) return\n\t    called = true\n\t    return fn.apply(this, arguments)\n\t  }\n  }\n}, {}],\n22: [function (require, module, exports) {\n  var isFunction = require('is-function')\n\n  module.exports = forEach\n\n  var toString = Object.prototype.toString\n  var hasOwnProperty = Object.prototype.hasOwnProperty\n\n  function forEach (list, iterator, context) {\n\t    if (!isFunction(iterator)) {\n\t        throw new TypeError('iterator must be a function')\n\t    }\n\n\t    if (arguments.length < 3) {\n\t        context = this\n\t    }\n\n\t    if (toString.call(list) === '[object Array]') { forEachArray(list, iterator, context) } else if (typeof list === 'string') { forEachString(list, iterator, context) } else { forEachObject(list, iterator, context) }\n  }\n\n  function forEachArray (array, iterator, context) {\n\t    for (var i = 0, len = array.length; i < len; i++) {\n\t        if (hasOwnProperty.call(array, i)) {\n\t            iterator.call(context, array[i], i, array)\n\t        }\n\t    }\n  }\n\n  function forEachString (string, iterator, context) {\n\t    for (var i = 0, len = string.length; i < len; i++) {\n\t        // no such thing as a sparse string.\n\t        iterator.call(context, string.charAt(i), i, string)\n\t    }\n  }\n\n  function forEachObject (object, iterator, context) {\n\t    for (var k in object) {\n\t        if (hasOwnProperty.call(object, k)) {\n\t            iterator.call(context, object[k], k, object)\n\t        }\n\t    }\n  }\n}, {'is-function': 20}],\n23: [function (require, module, exports) {\n  exports = module.exports = trim\n\n  function trim (str) {\n\t  return str.replace(/^\\s*|\\s*$/g, '')\n  }\n\n  exports.left = function (str) {\n\t  return str.replace(/^\\s*/, '')\n  }\n\n  exports.right = function (str) {\n\t  return str.replace(/\\s*$/, '')\n  }\n}, {}],\n24: [function (require, module, exports) {\n  var trim = require('trim'),\n\t   forEach = require('for-each'),\n\t   isArray = function (arg) {\n\t      return Object.prototype.toString.call(arg) === '[object Array]'\n\t    }\n\n  module.exports = function (headers) {\n\t  if (!headers) { return {} }\n\n\t  var result = {}\n\n\t  forEach(\n\t      trim(headers).split('\\n')\n\t    , function (row) {\n\t        var index = row.indexOf(':'),\n\t           key = trim(row.slice(0, index)).toLowerCase(),\n\t           value = trim(row.slice(index + 1))\n\n\t        if (typeof (result[key]) === 'undefined') {\n\t          result[key] = value\n\t        } else if (isArray(result[key])) {\n\t          result[key].push(value)\n\t        } else {\n\t          result[key] = [ result[key], value ]\n\t        }\n\t      }\n\t  )\n\n\t  return result\n  }\n}, {'for-each': 22, 'trim': 23}],\n25: [function (require, module, exports) {\n  arguments[4][9][0].apply(exports, arguments)\n}, {'dup': 9}],\n26: [function (require, module, exports) {\n  /* eslint-disable no-unused-vars */\n  'use strict'\n  var hasOwnProperty = Object.prototype.hasOwnProperty\n  var propIsEnumerable = Object.prototype.propertyIsEnumerable\n\n  function toObject (val) {\n\t  if (val === null || val === undefined) {\n\t    throw new TypeError('Object.assign cannot be called with null or undefined')\n\t  }\n\n\t  return Object(val)\n  }\n\n  module.exports = Object.assign || function (target, source) {\n\t  var from\n\t  var to = toObject(target)\n\t  var symbols\n\n\t  for (var s = 1; s < arguments.length; s++) {\n\t    from = Object(arguments[s])\n\n\t    for (var key in from) {\n\t      if (hasOwnProperty.call(from, key)) {\n\t        to[key] = from[key]\n\t      }\n\t    }\n\n\t    if (Object.getOwnPropertySymbols) {\n\t      symbols = Object.getOwnPropertySymbols(from)\n\t      for (var i = 0; i < symbols.length; i++) {\n\t        if (propIsEnumerable.call(from, symbols[i])) {\n\t          to[symbols[i]] = from[symbols[i]]\n\t        }\n\t      }\n\t    }\n\t  }\n\n\t  return to\n  }\n}, {}],\n27: [function (require, module, exports) {\n  var dtype = require('dtype')\n  var anArray = require('an-array')\n  var isBuffer = require('is-buffer')\n\n  var CW = [0, 2, 3]\n  var CCW = [2, 1, 3]\n\n  module.exports = function createQuadElements (array, opt) {\n\t    // if user didn't specify an output array\n\t    if (!array || !(anArray(array) || isBuffer(array))) {\n\t        opt = array || {}\n\t        array = null\n\t    }\n\n\t    if (typeof opt === 'number') // backwards-compatible\n\t        { opt = { count: opt } } else { opt = opt || {} }\n\n\t    var type = typeof opt.type === 'string' ? opt.type : 'uint16'\n\t    var count = typeof opt.count === 'number' ? opt.count : 1\n\t    var start = (opt.start || 0)\n\n\t    var dir = opt.clockwise !== false ? CW : CCW,\n\t        a = dir[0],\n\t        b = dir[1],\n\t        c = dir[2]\n\n\t    var numIndices = count * 6\n\n\t    var indices = array || new (dtype(type))(numIndices)\n\t    for (var i = 0, j = 0; i < numIndices; i += 6, j += 4) {\n\t        var x = i + start\n\t        indices[x + 0] = j + 0\n\t        indices[x + 1] = j + 1\n\t        indices[x + 2] = j + 2\n\t        indices[x + 3] = j + a\n\t        indices[x + 4] = j + b\n\t        indices[x + 5] = j + c\n\t    }\n\t    return indices\n  }\n}, {'an-array': 28, 'dtype': 29, 'is-buffer': 30}],\n28: [function (require, module, exports) {\n  var str = Object.prototype.toString\n\n  module.exports = anArray\n\n  function anArray (arr) {\n\t  return (\n\t       arr.BYTES_PER_ELEMENT &&\n\t    str.call(arr.buffer) === '[object ArrayBuffer]' ||\n\t    Array.isArray(arr)\n\t  )\n  }\n}, {}],\n29: [function (require, module, exports) {\n  module.exports = function (dtype) {\n\t  switch (dtype) {\n\t    case 'int8':\n\t      return Int8Array\n\t    case 'int16':\n\t      return Int16Array\n\t    case 'int32':\n\t      return Int32Array\n\t    case 'uint8':\n\t      return Uint8Array\n\t    case 'uint16':\n\t      return Uint16Array\n\t    case 'uint32':\n\t      return Uint32Array\n\t    case 'float32':\n\t      return Float32Array\n\t    case 'float64':\n\t      return Float64Array\n\t    case 'array':\n\t      return Array\n\t    case 'uint8_clamped':\n\t      return Uint8ClampedArray\n\t  }\n  }\n}, {}],\n30: [function (require, module, exports) {\n  /**\n\t * Determine if an object is Buffer\n\t *\n\t * Author:   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n\t * License:  MIT\n\t *\n\t * `npm install is-buffer`\n\t */\n\n  module.exports = function (obj) {\n\t  return !!(obj != null &&\n\t    (obj._isBuffer || // For Safari 5-7 (missing Object.prototype.constructor)\n\t      (obj.constructor &&\n\t      typeof obj.constructor.isBuffer === 'function' &&\n\t      obj.constructor.isBuffer(obj))\n\t    ))\n  }\n}, {}],\n31: [function (require, module, exports) {\n  var flatten = require('flatten-vertex-data')\n\n  module.exports.attr = setAttribute\n  module.exports.index = setIndex\n\n  function setIndex (geometry, data, itemSize, dtype) {\n\t  if (typeof itemSize !== 'number') itemSize = 1\n\t  if (typeof dtype !== 'number') dtype = 'uint16'\n\n\t  var isR69 = !geometry.index && typeof geometry.setIndex !== 'function'\n\t  var attrib = isR69 ? geometry.getAttribute('index') : geometry.index\n\t  var newAttrib = updateAttribute(attrib, data, itemSize, dtype)\n\t  if (newAttrib) {\n\t    if (isR69) geometry.addAttribute('index', newAttrib)\n\t    else geometry.index = newAttrib\n\t  }\n  }\n\n  function setAttribute (geometry, key, data, itemSize, dtype) {\n\t  if (typeof itemSize !== 'number') itemSize = 3\n\t  if (typeof dtype !== 'number') dtype = 'float32'\n\t  if (Array.isArray(data) &&\n\t    Array.isArray(data[0]) &&\n\t    data[0].length !== itemSize) {\n\t    throw new Error('Nested vertex array has unexpected size; expected ' +\n\t      itemSize + ' but found ' + data[0].length)\n\t  }\n\n\t  var attrib = geometry.getAttribute(key)\n\t  var newAttrib = updateAttribute(attrib, data, itemSize, dtype)\n\t  if (newAttrib) {\n\t    geometry.addAttribute(key, newAttrib)\n\t  }\n  }\n\n  function updateAttribute (attrib, data, itemSize, dtype) {\n\t  data = data || []\n\t  if (!attrib || rebuildAttribute(attrib, data, itemSize)) {\n\t    // create a new array with desired type\n\t    data = flatten(data, dtype)\n\t    attrib = new THREE.BufferAttribute(data, itemSize)\n\t    attrib.needsUpdate = true\n\t    return attrib\n\t  } else {\n\t    // copy data into the existing array\n\t    flatten(data, attrib.array)\n\t    attrib.needsUpdate = true\n\t    return null\n\t  }\n  }\n\n  // Test whether the attribute needs to be re-created,\n  // returns false if we can re-use it as-is.\n  function rebuildAttribute (attrib, data, itemSize) {\n\t  if (attrib.itemSize !== itemSize) return true\n\t  if (!attrib.array) return true\n\t  var attribLength = attrib.array.length\n\t  if (Array.isArray(data) && Array.isArray(data[0])) {\n\t    // [ [ x, y, z ] ]\n\t    return attribLength !== data.length * itemSize\n\t  } else {\n\t    // [ x, y, z ]\n\t    return attribLength !== data.length\n\t  }\n  }\n}, {'flatten-vertex-data': 32}],\n32: [function (require, module, exports) {\n  /* eslint new-cap:0 */\n  var dtype = require('dtype')\n  module.exports = flattenVertexData\n  function flattenVertexData (data, output, offset) {\n\t  if (!data) throw new TypeError('must specify data as first parameter')\n\t  offset = +(offset || 0) | 0\n\n\t  if (Array.isArray(data) && Array.isArray(data[0])) {\n\t    var dim = data[0].length\n\t    var length = data.length * dim\n\n\t    // no output specified, create a new typed array\n\t    if (!output || typeof output === 'string') {\n\t      output = new (dtype(output || 'float32'))(length + offset)\n\t    }\n\n\t    var dstLength = output.length - offset\n\t    if (length !== dstLength) {\n\t      throw new Error('source length ' + length + ' (' + dim + 'x' + data.length + ')' +\n\t        ' does not match destination length ' + dstLength)\n\t    }\n\n\t    for (var i = 0, k = offset; i < data.length; i++) {\n\t      for (var j = 0; j < dim; j++) {\n\t        output[k++] = data[i][j]\n\t      }\n\t    }\n\t  } else {\n\t    if (!output || typeof output === 'string') {\n\t      // no output, create a new one\n\t      var Ctor = dtype(output || 'float32')\n\t      if (offset === 0) {\n\t        output = new Ctor(data)\n\t      } else {\n\t        output = new Ctor(data.length + offset)\n\t        output.set(data, offset)\n\t      }\n\t    } else {\n\t      // store output in existing array\n\t      output.set(data, offset)\n\t    }\n\t  }\n\n\t  return output\n  }\n}, {'dtype': 33}],\n33: [function (require, module, exports) {\n  arguments[4][29][0].apply(exports, arguments)\n}, {'dup': 29}],\n34: [function (require, module, exports) {\n  var assign = require('object-assign')\n\n  module.exports = function createSDFShader (opt) {\n\t  opt = opt || {}\n\t  var opacity = typeof opt.opacity === 'number' ? opt.opacity : 1\n\t  var alphaTest = typeof opt.alphaTest === 'number' ? opt.alphaTest : 0.0001\n\t  var precision = opt.precision || 'highp'\n\t  var color = opt.color\n\t  var map = opt.map\n\n\t  // remove to satisfy r73\n\t  delete opt.map\n\t  delete opt.color\n\t  delete opt.precision\n\t  delete opt.opacity\n\n\t  return assign({\n\t    uniforms: {\n\t      opacity: { type: 'f', value: opacity },\n\t      map: { type: 't', value: map || new THREE.Texture() },\n\t      color: { type: 'c', value: new THREE.Color(color) }\n\t    },\n\t    vertexShader: [\n\t      'attribute vec2 uv;',\n\t      'attribute vec4 position;',\n\t      'uniform mat4 projectionMatrix;',\n\t      'uniform mat4 modelViewMatrix;',\n\t      'varying vec2 vUv;',\n\t      'void main() {',\n\t      'vUv = uv;',\n\t      'gl_Position = projectionMatrix * modelViewMatrix * position;',\n\t      '}'\n\t    ].join('\\n'),\n\t    fragmentShader: [\n\t      '#ifdef GL_OES_standard_derivatives',\n\t      '#extension GL_OES_standard_derivatives : enable',\n\t      '#endif',\n\t      'precision ' + precision + ' float;',\n\t      'uniform float opacity;',\n\t      'uniform vec3 color;',\n\t      'uniform sampler2D map;',\n\t      'varying vec2 vUv;',\n\n\t      'float aastep(float value) {',\n\t      '  #ifdef GL_OES_standard_derivatives',\n\t      '    float afwidth = length(vec2(dFdx(value), dFdy(value))) * 0.70710678118654757;',\n\t      '  #else',\n\t      '    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));',\n\t      '  #endif',\n\t      '  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);',\n\t      '}',\n\n\t      'void main() {',\n\t      '  vec4 texColor = texture2D(map, vUv);',\n\t      '  float alpha = aastep(texColor.a);',\n\t      '  gl_FragColor = vec4(color, opacity * alpha);',\n\t      alphaTest === 0\n\t        ? ''\n\t        : '  if (gl_FragColor.a < ' + alphaTest + ') discard;',\n\t      '}'\n\t    ].join('\\n')\n\t  }, opt)\n  }\n}, {'object-assign': 26}],\n35: [function (require, module, exports) {\n  var loadFont = require('load-bmfont')\n  // global.THREE = require('three')\n\n  // A utility to load a font, then a texture\n  module.exports = function (opt, cb) {\n\t  loadFont(opt.font, function (err, font) {\n\t    if (err) throw err\n      PANOLENS.Utils.TextureLoader.load(opt.image, function (tex) {\n\t      cb(font, tex)\n\t    })\n\t  })\n  }\n}, {'load-bmfont': 10}],\n36: [function (require, module, exports) {\n  var createText = require('../')\n  var SDFShader = require('../shaders/sdf')\n\n  if (PANOLENS && PANOLENS.Utils && PANOLENS.SpriteText) {\n    PANOLENS.Utils.loadBMFont = function (fontObject, callback) {\n      require('./load')(fontObject, PANOLENS.SpriteText.prototype.setBMFont.bind(PANOLENS.SpriteText.prototype, callback))\n    }\n    PANOLENS.SpriteText.prototype.generateTextGeometry = createText\n    PANOLENS.SpriteText.prototype.generateSDFShader = SDFShader\n  }\n}, {'../': 1, '../shaders/sdf': 34, './load': 35}],\n37: [function (require, module, exports) {\n  (function (global) {\n    /*!\n\t * The buffer module from node.js, for the browser.\n\t *\n\t * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n\t * @license  MIT\n\t */\n    /* eslint-disable no-proto */\n\n    'use strict'\n\n    var base64 = require('base64-js')\n    var ieee754 = require('ieee754')\n    var isArray = require('isarray')\n\n    exports.Buffer = Buffer\n    exports.SlowBuffer = SlowBuffer\n    exports.INSPECT_MAX_BYTES = 50\n    Buffer.poolSize = 8192 // not used by this implementation\n\n    var rootParent = {}\n\n    /**\n\t * If `Buffer.TYPED_ARRAY_SUPPORT`:\n\t *   === true    Use Uint8Array implementation (fastest)\n\t *   === false   Use Object implementation (most compatible, even IE6)\n\t *\n\t * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n\t * Opera 11.6+, iOS 4.2+.\n\t *\n\t * Due to various browser bugs, sometimes the Object implementation will be used even\n\t * when the browser supports typed arrays.\n\t *\n\t * Note:\n\t *\n\t *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n\t *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n\t *\n\t *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n\t *\n\t *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n\t *     incorrect length in some situations.\n\n\t * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n\t * get the Object implementation, which is slower but behaves correctly.\n\t */\n    Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n\t  ? global.TYPED_ARRAY_SUPPORT\n\t  : typedArraySupport()\n\n    function typedArraySupport () {\n\t  try {\n\t    var arr = new Uint8Array(1)\n\t    arr.foo = function () { return 42 }\n\t    return arr.foo() === 42 && // typed array instances can be augmented\n\t        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n\t        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n\t  } catch (e) {\n\t    return false\n\t  }\n    }\n\n    function kMaxLength () {\n\t  return Buffer.TYPED_ARRAY_SUPPORT\n\t    ? 0x7fffffff\n\t    : 0x3fffffff\n    }\n\n    /**\n\t * Class: Buffer\n\t * =============\n\t *\n\t * The Buffer constructor returns instances of `Uint8Array` that are augmented\n\t * with function properties for all the node `Buffer` API functions. We use\n\t * `Uint8Array` so that square bracket notation works as expected -- it returns\n\t * a single octet.\n\t *\n\t * By augmenting the instances, we can avoid modifying the `Uint8Array`\n\t * prototype.\n\t */\n    function Buffer (arg) {\n\t  if (!(this instanceof Buffer)) {\n\t    // Avoid going through an ArgumentsAdaptorTrampoline in the common case.\n\t    if (arguments.length > 1) return new Buffer(arg, arguments[1])\n\t    return new Buffer(arg)\n\t  }\n\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this.length = 0\n\t    this.parent = undefined\n\t  }\n\n\t  // Common case.\n\t  if (typeof arg === 'number') {\n\t    return fromNumber(this, arg)\n\t  }\n\n\t  // Slightly less common case.\n\t  if (typeof arg === 'string') {\n\t    return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8')\n\t  }\n\n\t  // Unusual.\n\t  return fromObject(this, arg)\n    }\n\n    function fromNumber (that, length) {\n\t  that = allocate(that, length < 0 ? 0 : checked(length) | 0)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n\t    for (var i = 0; i < length; i++) {\n\t      that[i] = 0\n\t    }\n\t  }\n\t  return that\n    }\n\n    function fromString (that, string, encoding) {\n\t  if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8'\n\n\t  // Assumption: byteLength() return value is always < kMaxLength.\n\t  var length = byteLength(string, encoding) | 0\n\t  that = allocate(that, length)\n\n\t  that.write(string, encoding)\n\t  return that\n    }\n\n    function fromObject (that, object) {\n\t  if (Buffer.isBuffer(object)) return fromBuffer(that, object)\n\n\t  if (isArray(object)) return fromArray(that, object)\n\n\t  if (object == null) {\n\t    throw new TypeError('must start with number, buffer, array or string')\n\t  }\n\n\t  if (typeof ArrayBuffer !== 'undefined') {\n\t    if (object.buffer instanceof ArrayBuffer) {\n\t      return fromTypedArray(that, object)\n\t    }\n\t    if (object instanceof ArrayBuffer) {\n\t      return fromArrayBuffer(that, object)\n\t    }\n\t  }\n\n\t  if (object.length) return fromArrayLike(that, object)\n\n\t  return fromJsonObject(that, object)\n    }\n\n    function fromBuffer (that, buffer) {\n\t  var length = checked(buffer.length) | 0\n\t  that = allocate(that, length)\n\t  buffer.copy(that, 0, 0, length)\n\t  return that\n    }\n\n    function fromArray (that, array) {\n\t  var length = checked(array.length) | 0\n\t  that = allocate(that, length)\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n    }\n\n    // Duplicate of fromArray() to keep fromArray() monomorphic.\n    function fromTypedArray (that, array) {\n\t  var length = checked(array.length) | 0\n\t  that = allocate(that, length)\n\t  // Truncating the elements is probably not what people expect from typed\n\t  // arrays with BYTES_PER_ELEMENT > 1 but it's compatible with the behavior\n\t  // of the old Buffer constructor.\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n    }\n\n    function fromArrayBuffer (that, array) {\n\t  // array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // Return an augmented `Uint8Array` instance, for best performance\n\t    that = new Uint8Array(array)\n\t    that.__proto__ = Buffer.prototype\n\t  } else {\n\t    // Fallback: Return an object instance of the Buffer class\n\t    that = fromTypedArray(that, new Uint8Array(array))\n\t  }\n\t  return that\n    }\n\n    function fromArrayLike (that, array) {\n\t  var length = checked(array.length) | 0\n\t  that = allocate(that, length)\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n    }\n\n    // Deserialize { type: 'Buffer', data: [1,2,3,...] } into a Buffer object.\n    // Returns a zero-length buffer for inputs that don't conform to the spec.\n    function fromJsonObject (that, object) {\n\t  var array\n\t  var length = 0\n\n\t  if (object.type === 'Buffer' && isArray(object.data)) {\n\t    array = object.data\n\t    length = checked(array.length) | 0\n\t  }\n\t  that = allocate(that, length)\n\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n    }\n\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t  Buffer.prototype.__proto__ = Uint8Array.prototype\n\t  Buffer.__proto__ = Uint8Array\n    } else {\n\t  // pre-set for values that may exist in the future\n\t  Buffer.prototype.length = undefined\n\t  Buffer.prototype.parent = undefined\n    }\n\n    function allocate (that, length) {\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // Return an augmented `Uint8Array` instance, for best performance\n\t    that = new Uint8Array(length)\n\t    that.__proto__ = Buffer.prototype\n\t  } else {\n\t    // Fallback: Return an object instance of the Buffer class\n\t    that.length = length\n\t  }\n\n\t  var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1\n\t  if (fromPool) that.parent = rootParent\n\n\t  return that\n    }\n\n    function checked (length) {\n\t  // Note: cannot use `length < kMaxLength` here because that fails when\n\t  // length is NaN (which is otherwise coerced to zero.)\n\t  if (length >= kMaxLength()) {\n\t    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n\t                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n\t  }\n\t  return length | 0\n    }\n\n    function SlowBuffer (subject, encoding) {\n\t  if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding)\n\n\t  var buf = new Buffer(subject, encoding)\n\t  delete buf.parent\n\t  return buf\n    }\n\n    Buffer.isBuffer = function isBuffer (b) {\n\t  return !!(b != null && b._isBuffer)\n    }\n\n    Buffer.compare = function compare (a, b) {\n\t  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n\t    throw new TypeError('Arguments must be Buffers')\n\t  }\n\n\t  if (a === b) return 0\n\n\t  var x = a.length\n\t  var y = b.length\n\n\t  var i = 0\n\t  var len = Math.min(x, y)\n\t  while (i < len) {\n\t    if (a[i] !== b[i]) break\n\n\t    ++i\n\t  }\n\n\t  if (i !== len) {\n\t    x = a[i]\n\t    y = b[i]\n\t  }\n\n\t  if (x < y) return -1\n\t  if (y < x) return 1\n\t  return 0\n    }\n\n    Buffer.isEncoding = function isEncoding (encoding) {\n\t  switch (String(encoding).toLowerCase()) {\n\t    case 'hex':\n\t    case 'utf8':\n\t    case 'utf-8':\n\t    case 'ascii':\n\t    case 'binary':\n\t    case 'base64':\n\t    case 'raw':\n\t    case 'ucs2':\n\t    case 'ucs-2':\n\t    case 'utf16le':\n\t    case 'utf-16le':\n\t      return true\n\t    default:\n\t      return false\n\t  }\n    }\n\n    Buffer.concat = function concat (list, length) {\n\t  if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.')\n\n\t  if (list.length === 0) {\n\t    return new Buffer(0)\n\t  }\n\n\t  var i\n\t  if (length === undefined) {\n\t    length = 0\n\t    for (i = 0; i < list.length; i++) {\n\t      length += list[i].length\n\t    }\n\t  }\n\n\t  var buf = new Buffer(length)\n\t  var pos = 0\n\t  for (i = 0; i < list.length; i++) {\n\t    var item = list[i]\n\t    item.copy(buf, pos)\n\t    pos += item.length\n\t  }\n\t  return buf\n    }\n\n    function byteLength (string, encoding) {\n\t  if (typeof string !== 'string') string = '' + string\n\n\t  var len = string.length\n\t  if (len === 0) return 0\n\n\t  // Use a for loop to avoid recursion\n\t  var loweredCase = false\n\t  for (;;) {\n\t    switch (encoding) {\n\t      case 'ascii':\n\t      case 'binary':\n\t      // Deprecated\n\t      case 'raw':\n\t      case 'raws':\n\t        return len\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8ToBytes(string).length\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return len * 2\n\t      case 'hex':\n\t        return len >>> 1\n\t      case 'base64':\n\t        return base64ToBytes(string).length\n\t      default:\n\t        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n\t        encoding = ('' + encoding).toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n    }\n    Buffer.byteLength = byteLength\n\n    function slowToString (encoding, start, end) {\n\t  var loweredCase = false\n\n\t  start = start | 0\n\t  end = end === undefined || end === Infinity ? this.length : end | 0\n\n\t  if (!encoding) encoding = 'utf8'\n\t  if (start < 0) start = 0\n\t  if (end > this.length) end = this.length\n\t  if (end <= start) return ''\n\n\t  while (true) {\n\t    switch (encoding) {\n\t      case 'hex':\n\t        return hexSlice(this, start, end)\n\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8Slice(this, start, end)\n\n\t      case 'ascii':\n\t        return asciiSlice(this, start, end)\n\n\t      case 'binary':\n\t        return binarySlice(this, start, end)\n\n\t      case 'base64':\n\t        return base64Slice(this, start, end)\n\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return utf16leSlice(this, start, end)\n\n\t      default:\n\t        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n\t        encoding = (encoding + '').toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n    }\n\n    // Even though this property is private, it shouldn't be removed because it is\n    // used by `is-buffer` to detect buffer instances in Safari 5-7.\n    Buffer.prototype._isBuffer = true\n\n    Buffer.prototype.toString = function toString () {\n\t  var length = this.length | 0\n\t  if (length === 0) return ''\n\t  if (arguments.length === 0) return utf8Slice(this, 0, length)\n\t  return slowToString.apply(this, arguments)\n    }\n\n    Buffer.prototype.equals = function equals (b) {\n\t  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n\t  if (this === b) return true\n\t  return Buffer.compare(this, b) === 0\n    }\n\n    Buffer.prototype.inspect = function inspect () {\n\t  var str = ''\n\t  var max = exports.INSPECT_MAX_BYTES\n\t  if (this.length > 0) {\n\t    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n\t    if (this.length > max) str += ' ... '\n\t  }\n\t  return '<Buffer ' + str + '>'\n    }\n\n    Buffer.prototype.compare = function compare (b) {\n\t  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n\t  if (this === b) return 0\n\t  return Buffer.compare(this, b)\n    }\n\n    Buffer.prototype.indexOf = function indexOf (val, byteOffset) {\n\t  if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff\n\t  else if (byteOffset < -0x80000000) byteOffset = -0x80000000\n\t  byteOffset >>= 0\n\n\t  if (this.length === 0) return -1\n\t  if (byteOffset >= this.length) return -1\n\n\t  // Negative offsets start from the end of the buffer\n\t  if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0)\n\n\t  if (typeof val === 'string') {\n\t    if (val.length === 0) return -1 // special case: looking for empty string always fails\n\t    return String.prototype.indexOf.call(this, val, byteOffset)\n\t  }\n\t  if (Buffer.isBuffer(val)) {\n\t    return arrayIndexOf(this, val, byteOffset)\n\t  }\n\t  if (typeof val === 'number') {\n\t    if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n\t      return Uint8Array.prototype.indexOf.call(this, val, byteOffset)\n\t    }\n\t    return arrayIndexOf(this, [ val ], byteOffset)\n\t  }\n\n\t  function arrayIndexOf (arr, val, byteOffset) {\n\t    var foundIndex = -1\n\t    for (var i = 0; byteOffset + i < arr.length; i++) {\n\t      if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n\t        if (foundIndex === -1) foundIndex = i\n\t        if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex\n\t      } else {\n\t        foundIndex = -1\n\t      }\n\t    }\n\t    return -1\n\t  }\n\n\t  throw new TypeError('val must be string, number or Buffer')\n    }\n\n    function hexWrite (buf, string, offset, length) {\n\t  offset = Number(offset) || 0\n\t  var remaining = buf.length - offset\n\t  if (!length) {\n\t    length = remaining\n\t  } else {\n\t    length = Number(length)\n\t    if (length > remaining) {\n\t      length = remaining\n\t    }\n\t  }\n\n\t  // must be an even number of digits\n\t  var strLen = string.length\n\t  if (strLen % 2 !== 0) throw new Error('Invalid hex string')\n\n\t  if (length > strLen / 2) {\n\t    length = strLen / 2\n\t  }\n\t  for (var i = 0; i < length; i++) {\n\t    var parsed = parseInt(string.substr(i * 2, 2), 16)\n\t    if (isNaN(parsed)) throw new Error('Invalid hex string')\n\t    buf[offset + i] = parsed\n\t  }\n\t  return i\n    }\n\n    function utf8Write (buf, string, offset, length) {\n\t  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n    }\n\n    function asciiWrite (buf, string, offset, length) {\n\t  return blitBuffer(asciiToBytes(string), buf, offset, length)\n    }\n\n    function binaryWrite (buf, string, offset, length) {\n\t  return asciiWrite(buf, string, offset, length)\n    }\n\n    function base64Write (buf, string, offset, length) {\n\t  return blitBuffer(base64ToBytes(string), buf, offset, length)\n    }\n\n    function ucs2Write (buf, string, offset, length) {\n\t  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n    }\n\n    Buffer.prototype.write = function write (string, offset, length, encoding) {\n\t  // Buffer#write(string)\n\t  if (offset === undefined) {\n\t    encoding = 'utf8'\n\t    length = this.length\n\t    offset = 0\n\t  // Buffer#write(string, encoding)\n\t  } else if (length === undefined && typeof offset === 'string') {\n\t    encoding = offset\n\t    length = this.length\n\t    offset = 0\n\t  // Buffer#write(string, offset[, length][, encoding])\n\t  } else if (isFinite(offset)) {\n\t    offset = offset | 0\n\t    if (isFinite(length)) {\n\t      length = length | 0\n\t      if (encoding === undefined) encoding = 'utf8'\n\t    } else {\n\t      encoding = length\n\t      length = undefined\n\t    }\n\t  // legacy write(string, encoding, offset, length) - remove in v0.13\n\t  } else {\n\t    var swap = encoding\n\t    encoding = offset\n\t    offset = length | 0\n\t    length = swap\n\t  }\n\n\t  var remaining = this.length - offset\n\t  if (length === undefined || length > remaining) length = remaining\n\n\t  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n\t    throw new RangeError('attempt to write outside buffer bounds')\n\t  }\n\n\t  if (!encoding) encoding = 'utf8'\n\n\t  var loweredCase = false\n\t  for (;;) {\n\t    switch (encoding) {\n\t      case 'hex':\n\t        return hexWrite(this, string, offset, length)\n\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8Write(this, string, offset, length)\n\n\t      case 'ascii':\n\t        return asciiWrite(this, string, offset, length)\n\n\t      case 'binary':\n\t        return binaryWrite(this, string, offset, length)\n\n\t      case 'base64':\n\t        // Warning: maxLength not taken into account in base64Write\n\t        return base64Write(this, string, offset, length)\n\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return ucs2Write(this, string, offset, length)\n\n\t      default:\n\t        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n\t        encoding = ('' + encoding).toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n    }\n\n    Buffer.prototype.toJSON = function toJSON () {\n\t  return {\n\t    type: 'Buffer',\n\t    data: Array.prototype.slice.call(this._arr || this, 0)\n\t  }\n    }\n\n    function base64Slice (buf, start, end) {\n\t  if (start === 0 && end === buf.length) {\n\t    return base64.fromByteArray(buf)\n\t  } else {\n\t    return base64.fromByteArray(buf.slice(start, end))\n\t  }\n    }\n\n    function utf8Slice (buf, start, end) {\n\t  end = Math.min(buf.length, end)\n\t  var res = []\n\n\t  var i = start\n\t  while (i < end) {\n\t    var firstByte = buf[i]\n\t    var codePoint = null\n\t    var bytesPerSequence = (firstByte > 0xEF) ? 4\n\t      : (firstByte > 0xDF) ? 3\n\t      : (firstByte > 0xBF) ? 2\n\t      : 1\n\n\t    if (i + bytesPerSequence <= end) {\n\t      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n\t      switch (bytesPerSequence) {\n\t        case 1:\n\t          if (firstByte < 0x80) {\n\t            codePoint = firstByte\n\t          }\n\t          break\n\t        case 2:\n\t          secondByte = buf[i + 1]\n\t          if ((secondByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n\t            if (tempCodePoint > 0x7F) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t          break\n\t        case 3:\n\t          secondByte = buf[i + 1]\n\t          thirdByte = buf[i + 2]\n\t          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n\t            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t          break\n\t        case 4:\n\t          secondByte = buf[i + 1]\n\t          thirdByte = buf[i + 2]\n\t          fourthByte = buf[i + 3]\n\t          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n\t            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t      }\n\t    }\n\n\t    if (codePoint === null) {\n\t      // we did not generate a valid codePoint so insert a\n\t      // replacement char (U+FFFD) and advance only 1 byte\n\t      codePoint = 0xFFFD\n\t      bytesPerSequence = 1\n\t    } else if (codePoint > 0xFFFF) {\n\t      // encode to utf16 (surrogate pair dance)\n\t      codePoint -= 0x10000\n\t      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n\t      codePoint = 0xDC00 | codePoint & 0x3FF\n\t    }\n\n\t    res.push(codePoint)\n\t    i += bytesPerSequence\n\t  }\n\n\t  return decodeCodePointsArray(res)\n    }\n\n    // Based on http://stackoverflow.com/a/22747272/680742, the browser with\n    // the lowest limit is Chrome, with 0x10000 args.\n    // We go 1 magnitude less, for safety\n    var MAX_ARGUMENTS_LENGTH = 0x1000\n\n    function decodeCodePointsArray (codePoints) {\n\t  var len = codePoints.length\n\t  if (len <= MAX_ARGUMENTS_LENGTH) {\n\t    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n\t  }\n\n\t  // Decode in chunks to avoid \"call stack size exceeded\".\n\t  var res = ''\n\t  var i = 0\n\t  while (i < len) {\n\t    res += String.fromCharCode.apply(\n\t      String,\n\t      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n\t    )\n\t  }\n\t  return res\n    }\n\n    function asciiSlice (buf, start, end) {\n\t  var ret = ''\n\t  end = Math.min(buf.length, end)\n\n\t  for (var i = start; i < end; i++) {\n\t    ret += String.fromCharCode(buf[i] & 0x7F)\n\t  }\n\t  return ret\n    }\n\n    function binarySlice (buf, start, end) {\n\t  var ret = ''\n\t  end = Math.min(buf.length, end)\n\n\t  for (var i = start; i < end; i++) {\n\t    ret += String.fromCharCode(buf[i])\n\t  }\n\t  return ret\n    }\n\n    function hexSlice (buf, start, end) {\n\t  var len = buf.length\n\n\t  if (!start || start < 0) start = 0\n\t  if (!end || end < 0 || end > len) end = len\n\n\t  var out = ''\n\t  for (var i = start; i < end; i++) {\n\t    out += toHex(buf[i])\n\t  }\n\t  return out\n    }\n\n    function utf16leSlice (buf, start, end) {\n\t  var bytes = buf.slice(start, end)\n\t  var res = ''\n\t  for (var i = 0; i < bytes.length; i += 2) {\n\t    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n\t  }\n\t  return res\n    }\n\n    Buffer.prototype.slice = function slice (start, end) {\n\t  var len = this.length\n\t  start = ~~start\n\t  end = end === undefined ? len : ~~end\n\n\t  if (start < 0) {\n\t    start += len\n\t    if (start < 0) start = 0\n\t  } else if (start > len) {\n\t    start = len\n\t  }\n\n\t  if (end < 0) {\n\t    end += len\n\t    if (end < 0) end = 0\n\t  } else if (end > len) {\n\t    end = len\n\t  }\n\n\t  if (end < start) end = start\n\n\t  var newBuf\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    newBuf = this.subarray(start, end)\n\t    newBuf.__proto__ = Buffer.prototype\n\t  } else {\n\t    var sliceLen = end - start\n\t    newBuf = new Buffer(sliceLen, undefined)\n\t    for (var i = 0; i < sliceLen; i++) {\n\t      newBuf[i] = this[i + start]\n\t    }\n\t  }\n\n\t  if (newBuf.length) newBuf.parent = this.parent || this\n\n\t  return newBuf\n    }\n\n    /*\n\t * Need to make sure that buffer isn't trying to write out of bounds.\n\t */\n    function checkOffset (offset, ext, length) {\n\t  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n\t  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n    }\n\n    Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n\t  var val = this[offset]\n\t  var mul = 1\n\t  var i = 0\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    val += this[offset + i] * mul\n\t  }\n\n\t  return val\n    }\n\n    Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) {\n\t    checkOffset(offset, byteLength, this.length)\n\t  }\n\n\t  var val = this[offset + --byteLength]\n\t  var mul = 1\n\t  while (byteLength > 0 && (mul *= 0x100)) {\n\t    val += this[offset + --byteLength] * mul\n\t  }\n\n\t  return val\n    }\n\n    Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 1, this.length)\n\t  return this[offset]\n    }\n\n    Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  return this[offset] | (this[offset + 1] << 8)\n    }\n\n    Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  return (this[offset] << 8) | this[offset + 1]\n    }\n\n    Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return ((this[offset]) |\n\t      (this[offset + 1] << 8) |\n\t      (this[offset + 2] << 16)) +\n\t      (this[offset + 3] * 0x1000000)\n    }\n\n    Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return (this[offset] * 0x1000000) +\n\t    ((this[offset + 1] << 16) |\n\t    (this[offset + 2] << 8) |\n\t    this[offset + 3])\n    }\n\n    Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n\t  var val = this[offset]\n\t  var mul = 1\n\t  var i = 0\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    val += this[offset + i] * mul\n\t  }\n\t  mul *= 0x80\n\n\t  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n\t  return val\n    }\n\n    Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n\t  var i = byteLength\n\t  var mul = 1\n\t  var val = this[offset + --i]\n\t  while (i > 0 && (mul *= 0x100)) {\n\t    val += this[offset + --i] * mul\n\t  }\n\t  mul *= 0x80\n\n\t  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n\t  return val\n    }\n\n    Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 1, this.length)\n\t  if (!(this[offset] & 0x80)) return (this[offset])\n\t  return ((0xff - this[offset] + 1) * -1)\n    }\n\n    Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  var val = this[offset] | (this[offset + 1] << 8)\n\t  return (val & 0x8000) ? val | 0xFFFF0000 : val\n    }\n\n    Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  var val = this[offset + 1] | (this[offset] << 8)\n\t  return (val & 0x8000) ? val | 0xFFFF0000 : val\n    }\n\n    Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return (this[offset]) |\n\t    (this[offset + 1] << 8) |\n\t    (this[offset + 2] << 16) |\n\t    (this[offset + 3] << 24)\n    }\n\n    Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return (this[offset] << 24) |\n\t    (this[offset + 1] << 16) |\n\t    (this[offset + 2] << 8) |\n\t    (this[offset + 3])\n    }\n\n    Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\t  return ieee754.read(this, offset, true, 23, 4)\n    }\n\n    Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\t  return ieee754.read(this, offset, false, 23, 4)\n    }\n\n    Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 8, this.length)\n\t  return ieee754.read(this, offset, true, 52, 8)\n    }\n\n    Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 8, this.length)\n\t  return ieee754.read(this, offset, false, 52, 8)\n    }\n\n    function checkInt (buf, value, offset, ext, max, min) {\n\t  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')\n\t  if (value > max || value < min) throw new RangeError('value is out of bounds')\n\t  if (offset + ext > buf.length) throw new RangeError('index out of range')\n    }\n\n    Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n\t  var mul = 1\n\t  var i = 0\n\t  this[offset] = value & 0xFF\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    this[offset + i] = (value / mul) & 0xFF\n\t  }\n\n\t  return offset + byteLength\n    }\n\n    Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n\t  var i = byteLength - 1\n\t  var mul = 1\n\t  this[offset + i] = value & 0xFF\n\t  while (--i >= 0 && (mul *= 0x100)) {\n\t    this[offset + i] = (value / mul) & 0xFF\n\t  }\n\n\t  return offset + byteLength\n    }\n\n    Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n\t  this[offset] = (value & 0xff)\n\t  return offset + 1\n    }\n\n    function objectWriteUInt16 (buf, value, offset, littleEndian) {\n\t  if (value < 0) value = 0xffff + value + 1\n\t  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n\t    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n\t      (littleEndian ? i : 1 - i) * 8\n\t  }\n    }\n\n    Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, true)\n\t  }\n\t  return offset + 2\n    }\n\n    Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 8)\n\t    this[offset + 1] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, false)\n\t  }\n\t  return offset + 2\n    }\n\n    function objectWriteUInt32 (buf, value, offset, littleEndian) {\n\t  if (value < 0) value = 0xffffffff + value + 1\n\t  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n\t    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n\t  }\n    }\n\n    Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset + 3] = (value >>> 24)\n\t    this[offset + 2] = (value >>> 16)\n\t    this[offset + 1] = (value >>> 8)\n\t    this[offset] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, true)\n\t  }\n\t  return offset + 4\n    }\n\n    Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 24)\n\t    this[offset + 1] = (value >>> 16)\n\t    this[offset + 2] = (value >>> 8)\n\t    this[offset + 3] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, false)\n\t  }\n\t  return offset + 4\n    }\n\n    Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) {\n\t    var limit = Math.pow(2, 8 * byteLength - 1)\n\n\t    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n\t  }\n\n\t  var i = 0\n\t  var mul = 1\n\t  var sub = value < 0 ? 1 : 0\n\t  this[offset] = value & 0xFF\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n\t  }\n\n\t  return offset + byteLength\n    }\n\n    Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) {\n\t    var limit = Math.pow(2, 8 * byteLength - 1)\n\n\t    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n\t  }\n\n\t  var i = byteLength - 1\n\t  var mul = 1\n\t  var sub = value < 0 ? 1 : 0\n\t  this[offset + i] = value & 0xFF\n\t  while (--i >= 0 && (mul *= 0x100)) {\n\t    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n\t  }\n\n\t  return offset + byteLength\n    }\n\n    Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n\t  if (value < 0) value = 0xff + value + 1\n\t  this[offset] = (value & 0xff)\n\t  return offset + 1\n    }\n\n    Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, true)\n\t  }\n\t  return offset + 2\n    }\n\n    Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 8)\n\t    this[offset + 1] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, false)\n\t  }\n\t  return offset + 2\n    }\n\n    Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t    this[offset + 2] = (value >>> 16)\n\t    this[offset + 3] = (value >>> 24)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, true)\n\t  }\n\t  return offset + 4\n    }\n\n    Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n\t  if (value < 0) value = 0xffffffff + value + 1\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 24)\n\t    this[offset + 1] = (value >>> 16)\n\t    this[offset + 2] = (value >>> 8)\n\t    this[offset + 3] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, false)\n\t  }\n\t  return offset + 4\n    }\n\n    function checkIEEE754 (buf, value, offset, ext, max, min) {\n\t  if (value > max || value < min) throw new RangeError('value is out of bounds')\n\t  if (offset + ext > buf.length) throw new RangeError('index out of range')\n\t  if (offset < 0) throw new RangeError('index out of range')\n    }\n\n    function writeFloat (buf, value, offset, littleEndian, noAssert) {\n\t  if (!noAssert) {\n\t    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n\t  }\n\t  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n\t  return offset + 4\n    }\n\n    Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n\t  return writeFloat(this, value, offset, true, noAssert)\n    }\n\n    Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n\t  return writeFloat(this, value, offset, false, noAssert)\n    }\n\n    function writeDouble (buf, value, offset, littleEndian, noAssert) {\n\t  if (!noAssert) {\n\t    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n\t  }\n\t  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n\t  return offset + 8\n    }\n\n    Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n\t  return writeDouble(this, value, offset, true, noAssert)\n    }\n\n    Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n\t  return writeDouble(this, value, offset, false, noAssert)\n    }\n\n    // copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\n    Buffer.prototype.copy = function copy (target, targetStart, start, end) {\n\t  if (!start) start = 0\n\t  if (!end && end !== 0) end = this.length\n\t  if (targetStart >= target.length) targetStart = target.length\n\t  if (!targetStart) targetStart = 0\n\t  if (end > 0 && end < start) end = start\n\n\t  // Copy 0 bytes; we're done\n\t  if (end === start) return 0\n\t  if (target.length === 0 || this.length === 0) return 0\n\n\t  // Fatal error conditions\n\t  if (targetStart < 0) {\n\t    throw new RangeError('targetStart out of bounds')\n\t  }\n\t  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n\t  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n\t  // Are we oob?\n\t  if (end > this.length) end = this.length\n\t  if (target.length - targetStart < end - start) {\n\t    end = target.length - targetStart + start\n\t  }\n\n\t  var len = end - start\n\t  var i\n\n\t  if (this === target && start < targetStart && targetStart < end) {\n\t    // descending copy from end\n\t    for (i = len - 1; i >= 0; i--) {\n\t      target[i + targetStart] = this[i + start]\n\t    }\n\t  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // ascending copy from start\n\t    for (i = 0; i < len; i++) {\n\t      target[i + targetStart] = this[i + start]\n\t    }\n\t  } else {\n\t    Uint8Array.prototype.set.call(\n\t      target,\n\t      this.subarray(start, start + len),\n\t      targetStart\n\t    )\n\t  }\n\n\t  return len\n    }\n\n    // fill(value, start=0, end=buffer.length)\n    Buffer.prototype.fill = function fill (value, start, end) {\n\t  if (!value) value = 0\n\t  if (!start) start = 0\n\t  if (!end) end = this.length\n\n\t  if (end < start) throw new RangeError('end < start')\n\n\t  // Fill 0 bytes; we're done\n\t  if (end === start) return\n\t  if (this.length === 0) return\n\n\t  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')\n\t  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')\n\n\t  var i\n\t  if (typeof value === 'number') {\n\t    for (i = start; i < end; i++) {\n\t      this[i] = value\n\t    }\n\t  } else {\n\t    var bytes = utf8ToBytes(value.toString())\n\t    var len = bytes.length\n\t    for (i = start; i < end; i++) {\n\t      this[i] = bytes[i % len]\n\t    }\n\t  }\n\n\t  return this\n    }\n\n    // HELPER FUNCTIONS\n    // ================\n\n    var INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\n    function base64clean (str) {\n\t  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n\t  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n\t  // Node converts strings with length < 2 to ''\n\t  if (str.length < 2) return ''\n\t  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n\t  while (str.length % 4 !== 0) {\n\t    str = str + '='\n\t  }\n\t  return str\n    }\n\n    function stringtrim (str) {\n\t  if (str.trim) return str.trim()\n\t  return str.replace(/^\\s+|\\s+$/g, '')\n    }\n\n    function toHex (n) {\n\t  if (n < 16) return '0' + n.toString(16)\n\t  return n.toString(16)\n    }\n\n    function utf8ToBytes (string, units) {\n\t  units = units || Infinity\n\t  var codePoint\n\t  var length = string.length\n\t  var leadSurrogate = null\n\t  var bytes = []\n\n\t  for (var i = 0; i < length; i++) {\n\t    codePoint = string.charCodeAt(i)\n\n\t    // is surrogate component\n\t    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n\t      // last char was a lead\n\t      if (!leadSurrogate) {\n\t        // no lead yet\n\t        if (codePoint > 0xDBFF) {\n\t          // unexpected trail\n\t          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t          continue\n\t        } else if (i + 1 === length) {\n\t          // unpaired lead\n\t          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t          continue\n\t        }\n\n\t        // valid lead\n\t        leadSurrogate = codePoint\n\n\t        continue\n\t      }\n\n\t      // 2 leads in a row\n\t      if (codePoint < 0xDC00) {\n\t        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t        leadSurrogate = codePoint\n\t        continue\n\t      }\n\n\t      // valid surrogate pair\n\t      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n\t    } else if (leadSurrogate) {\n\t      // valid bmp char, but last char was a lead\n\t      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t    }\n\n\t    leadSurrogate = null\n\n\t    // encode utf8\n\t    if (codePoint < 0x80) {\n\t      if ((units -= 1) < 0) break\n\t      bytes.push(codePoint)\n\t    } else if (codePoint < 0x800) {\n\t      if ((units -= 2) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0x6 | 0xC0,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else if (codePoint < 0x10000) {\n\t      if ((units -= 3) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0xC | 0xE0,\n\t        codePoint >> 0x6 & 0x3F | 0x80,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else if (codePoint < 0x110000) {\n\t      if ((units -= 4) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0x12 | 0xF0,\n\t        codePoint >> 0xC & 0x3F | 0x80,\n\t        codePoint >> 0x6 & 0x3F | 0x80,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else {\n\t      throw new Error('Invalid code point')\n\t    }\n\t  }\n\n\t  return bytes\n    }\n\n    function asciiToBytes (str) {\n\t  var byteArray = []\n\t  for (var i = 0; i < str.length; i++) {\n\t    // Node's code seems to be doing this and not & 0x7F..\n\t    byteArray.push(str.charCodeAt(i) & 0xFF)\n\t  }\n\t  return byteArray\n    }\n\n    function utf16leToBytes (str, units) {\n\t  var c, hi, lo\n\t  var byteArray = []\n\t  for (var i = 0; i < str.length; i++) {\n\t    if ((units -= 2) < 0) break\n\n\t    c = str.charCodeAt(i)\n\t    hi = c >> 8\n\t    lo = c % 256\n\t    byteArray.push(lo)\n\t    byteArray.push(hi)\n\t  }\n\n\t  return byteArray\n    }\n\n    function base64ToBytes (str) {\n\t  return base64.toByteArray(base64clean(str))\n    }\n\n    function blitBuffer (src, dst, offset, length) {\n\t  for (var i = 0; i < length; i++) {\n\t    if ((i + offset >= dst.length) || (i >= src.length)) break\n\t    dst[i + offset] = src[i]\n\t  }\n\t  return i\n    }\n  }).call(this, typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {})\n}, {'base64-js': 38, 'ieee754': 39, 'isarray': 40}],\n38: [function (require, module, exports) {\n  (function (exports) {\n\t  'use strict'\n\n\t  var lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n\n\t  var Arr = (typeof Uint8Array !== 'undefined')\n\t    ? Uint8Array\n\t    : Array\n\n\t  var PLUS = '+'.charCodeAt(0)\n\t  var SLASH = '/'.charCodeAt(0)\n\t  var NUMBER = '0'.charCodeAt(0)\n\t  var LOWER = 'a'.charCodeAt(0)\n\t  var UPPER = 'A'.charCodeAt(0)\n\t  var PLUS_URL_SAFE = '-'.charCodeAt(0)\n\t  var SLASH_URL_SAFE = '_'.charCodeAt(0)\n\n\t  function decode (elt) {\n\t    var code = elt.charCodeAt(0)\n\t    if (code === PLUS || code === PLUS_URL_SAFE) return 62 // '+'\n\t    if (code === SLASH || code === SLASH_URL_SAFE) return 63 // '/'\n\t    if (code < NUMBER) return -1 // no match\n\t    if (code < NUMBER + 10) return code - NUMBER + 26 + 26\n\t    if (code < UPPER + 26) return code - UPPER\n\t    if (code < LOWER + 26) return code - LOWER + 26\n\t  }\n\n\t  function b64ToByteArray (b64) {\n\t    var i, j, l, tmp, placeHolders, arr\n\n\t    if (b64.length % 4 > 0) {\n\t      throw new Error('Invalid string. Length must be a multiple of 4')\n\t    }\n\n\t    // the number of equal signs (place holders)\n\t    // if there are two placeholders, than the two characters before it\n\t    // represent one byte\n\t    // if there is only one, then the three characters before it represent 2 bytes\n\t    // this is just a cheap hack to not do indexOf twice\n\t    var len = b64.length\n\t    placeHolders = b64.charAt(len - 2) === '=' ? 2 : b64.charAt(len - 1) === '=' ? 1 : 0\n\n\t    // base64 is 4/3 + up to two characters of the original data\n\t    arr = new Arr(b64.length * 3 / 4 - placeHolders)\n\n\t    // if there are placeholders, only get up to the last complete 4 chars\n\t    l = placeHolders > 0 ? b64.length - 4 : b64.length\n\n\t    var L = 0\n\n\t    function push (v) {\n\t      arr[L++] = v\n\t    }\n\n\t    for (i = 0, j = 0; i < l; i += 4, j += 3) {\n\t      tmp = (decode(b64.charAt(i)) << 18) | (decode(b64.charAt(i + 1)) << 12) | (decode(b64.charAt(i + 2)) << 6) | decode(b64.charAt(i + 3))\n\t      push((tmp & 0xFF0000) >> 16)\n\t      push((tmp & 0xFF00) >> 8)\n\t      push(tmp & 0xFF)\n\t    }\n\n\t    if (placeHolders === 2) {\n\t      tmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4)\n\t      push(tmp & 0xFF)\n\t    } else if (placeHolders === 1) {\n\t      tmp = (decode(b64.charAt(i)) << 10) | (decode(b64.charAt(i + 1)) << 4) | (decode(b64.charAt(i + 2)) >> 2)\n\t      push((tmp >> 8) & 0xFF)\n\t      push(tmp & 0xFF)\n\t    }\n\n\t    return arr\n\t  }\n\n\t  function uint8ToBase64 (uint8) {\n\t    var i\n\t    var extraBytes = uint8.length % 3 // if we have 1 byte left, pad 2 bytes\n\t    var output = ''\n\t    var temp, length\n\n\t    function encode (num) {\n\t      return lookup.charAt(num)\n\t    }\n\n\t    function tripletToBase64 (num) {\n\t      return encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F)\n\t    }\n\n\t    // go through the array every three bytes, we'll deal with trailing stuff later\n\t    for (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {\n\t      temp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n\t      output += tripletToBase64(temp)\n\t    }\n\n\t    // pad the end with zeros, but make sure to not forget the extra bytes\n\t    switch (extraBytes) {\n\t      case 1:\n\t        temp = uint8[uint8.length - 1]\n\t        output += encode(temp >> 2)\n\t        output += encode((temp << 4) & 0x3F)\n\t        output += '=='\n\t        break\n\t      case 2:\n\t        temp = (uint8[uint8.length - 2] << 8) + (uint8[uint8.length - 1])\n\t        output += encode(temp >> 10)\n\t        output += encode((temp >> 4) & 0x3F)\n\t        output += encode((temp << 2) & 0x3F)\n\t        output += '='\n\t        break\n\t      default:\n\t        break\n\t    }\n\n\t    return output\n\t  }\n\n\t  exports.toByteArray = b64ToByteArray\n\t  exports.fromByteArray = uint8ToBase64\n  }(typeof exports === 'undefined' ? (this.base64js = {}) : exports))\n}, {}],\n39: [function (require, module, exports) {\n  exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n\t  var e, m\n\t  var eLen = nBytes * 8 - mLen - 1\n\t  var eMax = (1 << eLen) - 1\n\t  var eBias = eMax >> 1\n\t  var nBits = -7\n\t  var i = isLE ? (nBytes - 1) : 0\n\t  var d = isLE ? -1 : 1\n\t  var s = buffer[offset + i]\n\n\t  i += d\n\n\t  e = s & ((1 << (-nBits)) - 1)\n\t  s >>= (-nBits)\n\t  nBits += eLen\n\t  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n\t  m = e & ((1 << (-nBits)) - 1)\n\t  e >>= (-nBits)\n\t  nBits += mLen\n\t  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n\t  if (e === 0) {\n\t    e = 1 - eBias\n\t  } else if (e === eMax) {\n\t    return m ? NaN : ((s ? -1 : 1) * Infinity)\n\t  } else {\n\t    m = m + Math.pow(2, mLen)\n\t    e = e - eBias\n\t  }\n\t  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n  }\n\n  exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n\t  var e, m, c\n\t  var eLen = nBytes * 8 - mLen - 1\n\t  var eMax = (1 << eLen) - 1\n\t  var eBias = eMax >> 1\n\t  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n\t  var i = isLE ? 0 : (nBytes - 1)\n\t  var d = isLE ? 1 : -1\n\t  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n\t  value = Math.abs(value)\n\n\t  if (isNaN(value) || value === Infinity) {\n\t    m = isNaN(value) ? 1 : 0\n\t    e = eMax\n\t  } else {\n\t    e = Math.floor(Math.log(value) / Math.LN2)\n\t    if (value * (c = Math.pow(2, -e)) < 1) {\n\t      e--\n\t      c *= 2\n\t    }\n\t    if (e + eBias >= 1) {\n\t      value += rt / c\n\t    } else {\n\t      value += rt * Math.pow(2, 1 - eBias)\n\t    }\n\t    if (value * c >= 2) {\n\t      e++\n\t      c /= 2\n\t    }\n\n\t    if (e + eBias >= eMax) {\n\t      m = 0\n\t      e = eMax\n\t    } else if (e + eBias >= 1) {\n\t      m = (value * c - 1) * Math.pow(2, mLen)\n\t      e = e + eBias\n\t    } else {\n\t      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n\t      e = 0\n\t    }\n\t  }\n\n\t  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n\t  e = (e << mLen) | m\n\t  eLen += mLen\n\t  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n\t  buffer[offset + i - d] |= s * 128\n  }\n}, {}],\n40: [function (require, module, exports) {\n  var toString = {}.toString\n\n  module.exports = Array.isArray || function (arr) {\n\t  return toString.call(arr) == '[object Array]'\n  }\n}, {}]}, {}, [36])\n\nexport default PANOLENS\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/panolens.js","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-cube-pano.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-29108898\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-cube-pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-cube-pano.vue\n// module id = 326\n// module chunks = 1","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-2a5bfa54\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./demo-pano.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-pano.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2a5bfa54\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-pano.vue\"),\n  /* scopeId */\n  \"data-v-2a5bfa54\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-pano.vue\n// module id = 327\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-scene.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5a673dcc\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-scene.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-scene.vue\n// module id = 328\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-tour.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8ad7c38c\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-tour.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-tour.vue\n// module id = 329\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-video-pano.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-32faa3e6\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-video-pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-video-pano.vue\n// module id = 330\n// module chunks = 1","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-66d382e3\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./Scene.vue\")\n\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./Scene.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-66d382e3\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./Scene.vue\"),\n  /* scopeId */\n  \"data-v-66d382e3\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Scene.vue\n// module id = 331\n// module chunks = 1","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-09ad1f51\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./Tour.vue\")\n\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./Tour.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-09ad1f51\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./Tour.vue\"),\n  /* scopeId */\n  \"data-v-09ad1f51\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Tour.vue\n// module id = 332\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-09ad1f51\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/Tour.vue\n// module id = 333\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demo-block\"\n  }, [_c('div', {\n    staticClass: \"demo-block-preview\"\n  }, [_vm._t(\"preview\")], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code\"\n  }, [_c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"Vue Component & Webpack\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"             \"), _c('code', {\n    ref: \"vueCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.vueCode)))]), _vm._v(\"\\n        \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"HTML & JS\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"          \"), _c('code', {\n    ref: \"htmlCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.htmlCode)) + \"\\n          \")]), _vm._v(\"\\n        \")])])])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-213df8bf\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/components/demo-block.vue\n// module id = 334\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demos\"\n  }, [_c('div', {\n    staticClass: \"demos-content\"\n  }, [_c('ul', {\n    staticClass: \"demos-menu\"\n  }, [_c('li', {\n    staticClass: \"demos-menu-title\"\n  }, [_vm._v(\"demos\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-pano\"\n    }\n  }, [_vm._v(\"basic panorama\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-cube-pano\"\n    }\n  }, [_vm._v(\"Cube Faces\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-video-pano\"\n    }\n  }, [_vm._v(\"Video Pano\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-scene\"\n    }\n  }, [_vm._v(\"Scene with hotspot\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-tour\"\n    }\n  }, [_vm._v(\"VR Tour\")])], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demos-pages\"\n  }, [_c('router-view')], 1)])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-223dbf78\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/App.vue\n// module id = 335\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"type\": \"cube\",\n      \"source\": \"assets/faces/pano_%s.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-29108898\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-cube-pano.vue\n// module id = 336\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('div', {\n    staticClass: \"info\"\n  }, [_vm._v(\"\\n      Pano index:\" + _vm._s(_vm.index) + \"\\n      \"), _c('button', {\n    on: {\n      \"click\": _vm.change\n    }\n  }, [_vm._v(\"Toggle\")])]), _vm._v(\" \"), _c('Pano', {\n    attrs: {\n      \"source\": _vm.urls[_vm.index]\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-2a5bfa54\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-pano.vue\n// module id = 337\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"type\": \"video\",\n      \"source\": \"assets/ClashofClans.mp4\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-32faa3e6\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-video-pano.vue\n// module id = 338\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Scene', {\n    attrs: {\n      \"pano\": _vm.scene.pano,\n      \"position\": _vm.scene.position,\n      \"rotation\": _vm.scene.rotation,\n      \"links\": _vm.scene.links\n    },\n    on: {\n      \"on-load-start\": _vm.onLoadStart,\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-5a673dcc\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-scene.vue\n// module id = 339\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-66d382e3\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/Scene.vue\n// module id = 340\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"v-pano\"\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-7974fb6b\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/Pano.vue\n// module id = 341\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Tour', {\n    attrs: {\n      \"scenes\": _vm.scenes\n    },\n    on: {\n      \"on-load-start\": _vm.onLoadStart,\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-8ad7c38c\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-tour.vue\n// module id = 342\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-09ad1f51\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Tour.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"4136a65b\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-09ad1f51\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/Tour.vue\n// module id = 344\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-213df8bf\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./demo-block.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"56304fc1\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-213df8bf\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/components/demo-block.vue\n// module id = 345\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-223dbf78\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./App.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"48e2ad6a\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-223dbf78\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/App.vue\n// module id = 346\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-2a5bfa54\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/less-loader/dist/cjs.js?{}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./demo-pano.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"740377fa\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-2a5bfa54\",\"scoped\":true,\"hasInlineConfig\":false}!./~/less-loader/dist/cjs.js?{}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/pages/demo-pano.vue\n// module id = 347\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-66d382e3\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Scene.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"356c544a\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-66d382e3\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/Scene.vue\n// module id = 348\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-7974fb6b\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/less-loader/dist/cjs.js?{}!../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Pano.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"49e91b24\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-7974fb6b\",\"scoped\":false,\"hasInlineConfig\":false}!./~/less-loader/dist/cjs.js?{}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/Pano.vue\n// module id = 349\n// module chunks = 1","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-7974fb6b\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./Pano.vue\")\n\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./Pano.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7974fb6b\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./Pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Pano.vue\n// module id = 42\n// module chunks = 1","import Vue from 'vue'\nimport Router from 'vue-router'\n\nimport { pages } from '../pages'\n\nVue.use(Router)\n\nconst routes = pages.map(page => {\n  const name = page.name\n  return {\n    path: '/' + name.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase(),\n    name,\n    component: page\n  }\n})\n\nconsole.log(routes)\n\nroutes.push({\n  path: '*',\n  redirect: '/demo-pano'\n})\n\nexport default new Router({ routes })\n\n\n\n// WEBPACK FOOTER //\n// ./demos/router/index.js","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-223dbf78\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-223dbf78\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/App.vue\n// module id = 63\n// module chunks = 1","import Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\n\nnew Vue({ // eslint-disable-line no-new\n  el: '#app',\n  router,\n  render: h => h(App)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./demos/index.js","import DemoPano from './demo-pano'\nimport DemoCubePano from './demo-cube-pano'\nimport DemoVideoPano from './demo-video-pano'\nimport DemoScene from './demo-scene'\nimport DemoTour from './demo-tour'\n\nconst pages = [\n  DemoPano,\n  DemoCubePano,\n  DemoVideoPano,\n  DemoScene,\n  DemoTour\n]\n\nexport { pages }\n\n\n\n// WEBPACK FOOTER //\n// ./demos/pages/index.js","<template>\n  <div class=\"demos\">\n    <div class=\"demos-content\">\n      <ul class=\"demos-menu\">\n        <li class=\"demos-menu-title\">demos</li>\n        <li class=\"demos-menu-item\">\n          <router-link to=\"demo-pano\">basic panorama</router-link>\n        </li>\n        <li class=\"demos-menu-item\">\n          <router-link to=\"demo-cube-pano\">Cube Faces</router-link>\n        </li>\n        <li class=\"demos-menu-item\">\n          <router-link to=\"demo-video-pano\">Video Pano</router-link>\n        </li>\n        <li class=\"demos-menu-item\">\n          <router-link to=\"demo-scene\">Scene with hotspot</router-link>\n        </li>\n        <li class=\"demos-menu-item\">\n          <router-link to=\"demo-tour\">VR Tour</router-link>\n        </li>\n      </ul>\n\n      <div class=\"demos-pages\">\n        <router-view></router-view>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'App'\n}\n\n</script>\n\n<style>\n* {\n    margin: 0;\n    border: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\nul,\nol,\nli {\n    list-style: none;\n}\n\na {\n    color: #657180;\n    text-decoration: none;\n}\n\nhtml,\nbody,\n.demos {\n    width: 100%;\n    height: 100%;\n    color: #657180;\n}\n\nbody {\n    background: #eee;\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", SimSun, sans-serif;\n    background: #fff;\n}\n\n.demos-header {\n    position: absolute;\n    top: 0;\n    width: 100%;\n    background: #f3f6fb;\n    text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);\n    border-bottom: solid 1px #dfe2e7;\n    padding: 15px 15px 15px 30px;\n    line-height: 20px;\n}\n\n.demos-header .title {\n    font-weight: bold;\n    font-size: 18px;\n    display: inline-block;\n}\n\n.demos-header .github {\n    color: #39f;\n    display: inline-block;\n    font-size: 12px;\n    float: right;\n}\n\n.demos-content {\n    width: 100%;\n    height: 100%;\n    padding-top: 52px;\n    overflow: hidden;\n}\n\n.demos-menu {\n    float: left;\n    width: 230px;\n    height: 100%;\n    border-right: solid 1px #dfe2e7;\n    padding: 10px 30px;\n}\n\n.demos-menu .demos-menu-item {\n    display: block;\n    width: 100%;\n    height: 30px;\n    line-height: 30px;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.demos-menu .demos-menu-item>a {\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n.demos-menu .demos-menu-title {\n    display: block;\n    width: 100%;\n    padding: 6px 0;\n    margin-top: 10px;\n    font-size: 14px;\n    font-weight: bold;\n}\n\n.demos-menu .demos-menu-item:hover>a {\n    color: #39f;\n}\n\n.demos-pages {\n    height: 100%;\n    overflow: hidden;\n}\n\n.demo-loading {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    text-align: center;\n}\n\n.demo-loading::before {\n    content: '';\n    border-radius: 100%;\n    margin: 2px;\n    border: 3px solid #20a0ff;\n    border-bottom-color: transparent;\n    height: 36px;\n    width: 36px;\n    display: inline-block;\n    animation: loading-rotate .75s 0s linear infinite;\n    vertical-align: middle;\n}\n\n.demo-loading::after {\n    content: '';\n    display: inline-block;\n    height: 100%;\n    width: 0;\n    vertical-align: middle;\n}\n\n@keyframes loading-rotate {\n    0% {\n        transform: rotate(0) scale(1);\n    }\n    50% {\n        transform: rotate(180deg) scale(.6);\n    }\n    100% {\n        transform: rotate(360deg) scale(1);\n    }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?49e2f417","<template>\n  <div class=\"demo-block\">\n    <div class=\"demo-block-preview\">\n      <slot name=\"preview\"></slot>\n    </div>\n    <div class=\"demo-block-code\">\n      <div class=\"demo-block-code-box\">\n        <h3>Vue Component & Webpack</h3>\n        <div class=\"demo-block-code-box-content\">\n          <pre>\n               <code\n                ref=\"vueCode\"\n                class=\"html\">{{ vueCode | code }}</code>\n          </pre>\n        </div>\n      </div>\n      <div class=\"demo-block-code-box\">\n        <h3>HTML & JS</h3>\n        <div class=\"demo-block-code-box-content\">\n          <pre>\n            <code\n              ref=\"htmlCode\"\n              class=\"html\">{{ htmlCode | code }}\n            </code>\n          </pre>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport 'highlight.js/styles/github.css'\nimport hljs from 'highlight.js'\n\n/* eslint-disable no-useless-escape */\nconst codeHandler = (code) => {\n  const scripts = `\n  <script src=\"vue.js\"><\\/script> \n  <script src=\"vue-vr.min.js\"><\\/script>`\n  return code.replace(/#scripts#/ig, scripts)\n}\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'App',\n  props: {\n    vueCode: {\n      type: String,\n      default: ''\n    },\n    htmlCode: {\n      type: String,\n      default: '// TODO'\n    }\n  },\n  mounted () {\n    hljs.highlightBlock(this.$refs.vueCode)\n    hljs.highlightBlock(this.$refs.htmlCode)\n  },\n  data () {\n    return {}\n  },\n  filters: {\n    code (val) {\n      return codeHandler(val)\n    }\n  },\n  components: {\n\n  }\n}\n</script>\n\n<style>\n.demo-block {\n    width: 100%;\n    height: 100%;\n    background-color: #fff;\n    border-radius: 3px;\n}\n\n.demo-block .demo-block-preview {\n    width: 70%;\n    height: 100%;\n    float: left;\n    position: relative;\n}\n\n.demo-block .demo-block-code {\n    width: 30%;\n    height: 100%;\n    background: #f9fafc;\n    border-left: solid 1px #dfe2e7;\n    font-size: 13px;\n    float: left;\n}\n\n.demo-block .demo-block-code pre code {\n    font: normal 10pt Consolas, Monaco, monospace;\n}\n\n.demo-block .demo-block-code .demo-block-code-box {\n    width: 100%;\n    height: 50%;\n    position: relative;\n    overflow: hidden;\n}\n\n.demo-block .demo-block-code-box::after {\n    content: '';\n    display: block;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 90%;\n    height: 1px;\n    background: -webkit-linear-gradient(left, #dfe2e7 80%, rgba(223,226,231,0) 100%);\n}\n\n.demo-block .demo-block-code-box h3 {\n    width: 100%;\n    padding: 10px 20px;\n    font-size: 16px;\n    font-weight: bold;\n    position: absolute;\n}\n\n.demo-block .demo-block-code-box-content {\n    position: absolute;\n    top: 40px;\n    bottom: 10px;\n    left: 20px;\n    right: 20px;\n    overflow: auto;\n}\n\n.demo-block .hljs {\n    background: transparent;\n}\n\n.demo-block .demo-block-code code {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// demo-block.vue?70142542","<template>\n  <demo-block\n    :vue-code=\"code\"\n    :html-code=\"htmlCode\">\n    <template slot=\"preview\">\n      <Pano\n        @on-load=\"onLoad\"\n        type='cube'\n        source=\"assets/faces/pano_%s.jpg\"></Pano>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\"></div>\n    </template>\n  </demo-block>\n</template>\n\n<script>\n\nimport DemoBlock from '../components/demo-block'\nimport Pano from '../../src/Pano.vue'\n\n/* eslint-disable no-useless-escape */\nconst code = `\n<template>\n    <Pano\n        @on-load=\"onLoad\"\n        type='cube'\n        source=\"assets/faces/pano_%s.jpg\"></Pano>\n</template>\n<script>\n    import { Pano } from 'vuejs-vr'\n\n    export default {\n        components: {\n            Pano\n        }\n    }\n <\\/script>`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Pano\n            @on-load=\"onLoad\"\n            type='cube'\n            source=\"assets/faces/pano_%s.jpg\">\n        </Pano>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>\n`\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'DemoCubePano',\n  data () {\n    return {\n      code,\n      htmlCode,\n      loading: true\n    }\n  },\n  methods: {\n    onLoad () {\n      this.loading = false\n    }\n  },\n  components: {\n    Pano,\n    DemoBlock\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-cube-pano.vue?fdd2d788","<template>\n  <demo-block\n    :vue-code=\"code\"\n    :html-code=\"htmlCode\">\n\n    <template slot=\"preview\">\n      <div class=\"info\">\n        Pano index:{{ index }}\n        <button @click=\"change\">Toggle</button>\n      </div>\n      <Pano\n        @on-load=\"onLoad\"\n        :source=\"urls[index]\"></Pano>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\"/>\n    </template>\n  </demo-block>\n</template>\n\n<script>\nimport Pano from '../../src/Pano.vue'\nimport DemoBlock from '../components/demo-block.vue'\n\n/* eslint-disable no-useless-escape */\nconst code = `\n<template>\n    <Pano\n        @on-load=\"onLoad\"\n        :source=\"urls[index]\">\n    </Pano>\n</template>\n\n<script>\n    import { Pano } from 'vue-vr'\n\n    export default {\n        components: {\n            Pano\n        },\n        data () {\n          return {\n            urls: [\n              '../assets/equirectangular.jpg',\n              '../assets/pano.png'\n            ],\n            index: 0\n          }\n        },\n    }\n<\\/script>\n`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Pano\n            @on-load=\"onLoad\"\n            :source=\"urls[index]\">\n        </Pano>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>`\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'DemoPano',\n  data () {\n    return {\n      code,\n      htmlCode,\n      loading: true,\n      urls: [\n        'assets/equirectangular.jpg',\n        'assets/pano.png'\n      ],\n      index: 0\n    }\n  },\n  methods: {\n    onLoad () {\n      this.loading = false\n    },\n    change () {\n      this.index = 1 - this.index\n    }\n  },\n  components: {\n    Pano,\n    DemoBlock\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  .info {\n    position: absolute;\n    top: 30px;\n    left: 10%;\n\n    button {\n      padding: 10px;\n      cursor: pointer;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// demo-pano.vue?35359a16","<template>\n  <demo-block\n    :vue-code=\"code\"\n    :html-code=\"htmlCode\">\n    <template slot=\"preview\">\n      <Scene\n        @on-load-start=\"onLoadStart\"\n        @on-load=\"onLoad\"\n        :pano='scene.pano'\n        :position='scene.position'\n        :rotation='scene.rotation'\n        :links='scene.links'>\n      </Scene>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\">\n      </div>\n    </template>\n  </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block'\nimport Scene from '../../src/Scene.vue'\n\n/* eslint-disable no-useless-escape */\nconst code = `\n<template>\n    <Scene\n        @on-load=\"onLoad\"\n        :scene='scene'>\n\n    </Scene>\n    <div\n      class=\"demo-loading\"\n      v-show=\"loading\"></div>\n      \n</template>\n\n<script>\n    import { Scene } from 'vue-vr'\n\n    export default {\n        components: {\n            Scene\n        },\n        data(){\n          return {\n            scene: {\n              key: 'M4wOy2s',\n              panorama: {\n                source: 'assets/equirectangular.jpg',\n                type: 'image'\n              },\n              x: 0,\n              y: 0,\n              z: 0,\n              rotation:90\n            }\n          }\n        }\n    }\n<\\/script>`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Scene\n          @on-load=\"onLoad\"\n          :scene='scene'>\n      </Scene>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\"></div>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>`\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'DemoScene',\n  data () {\n    return {\n      code,\n      htmlCode,\n      loading: true,\n      scene: {\n        pano: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        position: {\n          x: 0,\n          y: 0,\n          z: 0\n        },\n        rotation: {\n          x: 0,\n          y: 135.0 * Math.PI / 180.0,\n          z: 0\n        },\n        links: [\n          {\n            sceneId: 'scene1',\n            position: {\n              x: 100,\n              y: 0,\n              z: -100\n            }\n          },\n          {\n            sceneId: 'scene2',\n            position: {\n              x: 200,\n              y: 0,\n              z: -20\n            }\n          }\n        ]\n      }\n    }\n  },\n  methods: {\n    onLoad () {\n      console.log('onLoad')\n      this.loading = false\n    },\n    onLoadStart () {\n      console.log('onLoadStart')\n      this.loading = true\n    }\n  },\n  components: {\n    Scene,\n    DemoBlock\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-scene.vue?18edadf8","<template>\n  <demo-block\n    :vue-code=\"code\"\n    :html-code=\"htmlCode\">\n    <template slot=\"preview\">\n      <Tour\n        @on-load-start=\"onLoadStart\"\n        @on-load=\"onLoad\"\n        :scenes='scenes'>\n      </Tour>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\"></div>\n    </template>\n  </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block'\nimport Tour from '../../src/Tour.vue'\n\n/* eslint-disable no-useless-escape */\nconst code = `\n<template>\n    <Tour\n        @on-load=\"onLoad\"\n        :scenes='scenes'>\n\n    </Tour>\n    <div\n      class=\"demo-loading\"\n      v-show=\"loading\"></div>\n      \n</template>\n\n<script>\n    import { Tour } from 'vue-vr'\n\n    export default {\n        components: {\n            Tour\n        },\n        data(){\n          return {\n            scenes: [{\n              key: 'M4wOy2s',\n              panorama: {\n                source: 'assets/equirectangular.jpg',\n                type: 'image'\n              },\n              x: 0,\n              y: 0,\n              z: 0,\n              rx: 0,\n              rz: 0,\n              ry: 90,\n              connections: [\n                'eIm7la',\n                'eId9l0',\n                'fK2dL7l'\n              ]\n            },\n            {\n              key: 'eIm7la',\n              panorama: {\n                source: 'assets/faces/pano_%s.jpg',\n                type: 'cube'\n              },\n              x: 100,\n              y: 0,\n              z: 200,\n              rx: 0,\n              rz: 0,\n              ry: 0,\n              connections: [\n                'M4wOy2s'\n              ]\n            },\n            {\n              key: 'eId9l0',\n              panorama: {\n                source: 'assets/faces/pano_%s.jpg',\n                type: 'cube'\n              },\n              x: 150,\n              y: 0,\n              z: -300,\n              rx: 0,\n              rz: 0,\n              ry: 0,\n              connections: [\n                'M4wOy2s'\n              ]\n            },\n            {\n              key: 'fK2dL7l',\n              panorama: {\n                source: 'assets/faces/pano_%s.jpg',\n                type: 'cube'\n              },\n              x: -150,\n              y: 0,\n              z: -300,\n              rx: 0,\n              rz: 0,\n              ry: 0,\n              connections: [\n                'M4wOy2s'\n              ]\n            }]\n          }\n        }\n    }\n<\\/script>`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Tour\n          @on-load=\"onLoad\"\n          :scenes='scenes'>\n      </Tour>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\"></div>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>`\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'DemoTour',\n  data () {\n    return {\n      code,\n      htmlCode,\n      loading: true,\n      scenes: [{\n        key: 'M4wOy2s',\n        panorama: {\n          source: 'assets/equirectangular.jpg',\n          type: 'image'\n        },\n        x: 0,\n        y: 0,\n        z: 0,\n        rx: 0,\n        rz: 0,\n        ry: 90,\n        connections: [\n          'eIm7la',\n          'eId9l0',\n          'fK2dL7l'\n        ]\n      },\n      {\n        key: 'eIm7la',\n        panorama: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        x: 100,\n        y: 0,\n        z: 200,\n        rx: 0,\n        rz: 0,\n        ry: 0,\n        connections: [\n          'M4wOy2s'\n        ]\n      },\n      {\n        key: 'eId9l0',\n        panorama: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        x: 150,\n        y: 0,\n        z: -300,\n        rx: 0,\n        rz: 0,\n        ry: 0,\n        connections: [\n          'M4wOy2s'\n        ]\n      },\n      {\n        key: 'fK2dL7l',\n        panorama: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        x: -150,\n        y: 0,\n        z: -300,\n        rx: 0,\n        rz: 0,\n        ry: 0,\n        connections: [\n          'M4wOy2s'\n        ]\n      }\n      ]\n    }\n  },\n  methods: {\n    onLoad () {\n      console.log('onLoad')\n      this.loading = false\n    },\n    onLoadStart () {\n      console.log('onLoadStart')\n      this.loading = true\n    }\n  },\n  components: {\n    Tour,\n    DemoBlock\n  },\n  mounted () {\n    this.initialScene = this.scenes[0].key\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-tour.vue?6564f667","<template>\n  <demo-block\n    :vue-code=\"code\"\n    :html-code=\"htmlCode\">\n    <template slot=\"preview\">\n      <Pano\n        @on-load=\"onLoad\"\n        type='video'\n        source=\"assets/ClashofClans.mp4\"></Pano>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\"></div>\n    </template>\n  </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block'\nimport Pano from '../../src/Pano.vue'\n\n/* eslint-disable no-useless-escape */\nconst code = `\n<template>\n    <Pano\n        @on-load=\"onLoad\"\n        type='video'\n        source=\"assets/ClashofClans.mp4\">\n    </Pano>\n</template>\n\n<script>\n    import { Pano } from 'vue-vr'\n\n    export default {\n        components: {\n            Pano\n        }\n    }\n<\\/script>`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Pano\n            @on-load=\"onLoad\"\n            type='video'\n            source=\"assets/ClashofClans.mp4\">\n        </Pano>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>`\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'DemoVideoPano',\n  data () {\n    return {\n      code,\n      htmlCode,\n      loading: true\n    }\n  },\n  methods: {\n    onLoad () {\n      this.loading = false\n    }\n  },\n  components: {\n    Pano,\n    DemoBlock\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-video-pano.vue?17bba2d2","<template>\n  <div class=\"v-pano\">\n  </div>\n</template>\n\n<script>\nimport PanoLens from './lib/panolens'\nconst _log = console.log.bind(console)\n\nexport default {\n  name: 'Pano',\n\n  props: {\n    source: {\n      type: String,\n      default: ''\n    },\n    type: {\n      type: String,\n      default: 'image'\n    },\n    width: {\n      type: Number,\n      default: 100\n    },\n    height: {\n      type: Number,\n      default: 100\n    }\n  },\n\n  data () {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      viewer: null,\n      panorama: null\n    }\n  },\n\n  created () {\n    window.addEventListener('resize', this.onResize, false)\n  },\n\n  destroyed () {\n    if (this.panorama && this.panorama.dispose) {\n      this.panorama.dispose()\n    }\n  },\n\n  mounted () {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      }\n    }\n\n    this.viewer = new PanoLens.Viewer({\n      container: this.$el,\n      cameraFov: 100\n    })\n\n    this.loadPano()\n  },\n  watch: {\n    source () {\n      if (!this.viewer) return\n      if (!this.panorama) return\n      this.loadPano()\n    }\n  },\n\n  methods: {\n    onResize () {\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(() => {\n          this.size = {\n            width: this.$el.offsetWidth,\n            height: this.$el.offsetHeight\n          }\n        })\n      }\n    },\n    loadPano () {\n      _log('this.source = ' + this.source)\n      if (!this.source) return\n\n      let pano\n      switch (this.type) {\n        case 'cube':\n          var l = this.source.replace('%s', 'l')\n          var f = this.source.replace('%s', 'f')\n          var r = this.source.replace('%s', 'r')\n          var b = this.source.replace('%s', 'b')\n          var u = this.source.replace('%s', 'u')\n          var d = this.source.replace('%s', 'd')\n          pano = new PanoLens.CubePanorama([r, l, u, d, f, b])\n          break\n        case 'video':\n          pano = new PanoLens.VideoPanorama(this.source, { autoplay: true })\n          break\n        default:\n          pano = new PanoLens.ImagePanorama(this.source)\n          break\n      }\n      this.setPano(pano)\n    },\n    setPano (pano) {\n      if (!pano) return\n      if (this.panorama) {\n        this.viewer.remove(this.panorama)\n      }\n      this.panorama = pano\n      this.viewer.add(this.panorama)\n      this.viewer.setPanorama(this.panorama)\n\n      const that = this\n      this.panorama.addEventListener('load', () => {\n        that.$emit('on-load')\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\">\n.v-pano {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  border: 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Pano.vue?55eac492","<template>\n  <div style=\"width: 100%; height: 100%; margin: 0; border: 0; padding: 0;\">\n  </div>\n</template>\n\n<style scoped>\n  div{\n    cursor: pointer;\n  }\n</style>\n\n<script>\nimport PanoLens from './lib/panolens'\nimport * as THREE from 'three'\nconst _log = console.log.bind(console)\n\nexport default {\n  name: 'Scene',\n  props: {\n    pano: {\n      type: Object,\n      default: () => { return {} }\n    },\n    position: {\n      type: Object,\n      default: () => {\n        return {\n          x: 0,\n          y: 0,\n          z: 0\n        }\n      }\n    },\n    rotation: {\n      type: Object,\n      default: () => {\n        return {\n          x: 0,\n          y: 0,\n          z: 0\n        }\n      }\n    },\n    links: {\n      type: Array,\n      default: () => { return [] }\n    },\n    width: {\n      type: Number,\n      default: undefined\n    },\n    height: {\n      type: Number,\n      default: undefined\n    }\n  },\n  data () {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      scene_index: -1,\n      viewer: null,\n      panorama: null,\n      hotspots: []\n    }\n  },\n  created () {\n    window.addEventListener('resize', this.onResize, false)\n  },\n  mounted () {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      }\n    }\n\n    this.viewer = new PanoLens.Viewer({\n      container: this.$el,\n      cameraFov: 100\n    })\n\n    this.loadScene()\n  },\n  // watch: {\n  //   scenes () {\n  //     if (!this.viewer) return\n  //     if (!this.scenes || this.scenes.length === 0) return\n  //     this.loadScene()\n  //   }\n  // },\n  methods: {\n    onResize () {\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(() => {\n          this.size = {\n            width: this.$el.offsetWidth,\n            height: this.$el.offsetHeight\n          }\n        })\n      }\n    },\n\n    loadScene () {\n      _log('this.pano = ' + this.pano)\n      if (!this.pano) return\n\n      var source = this.pano.source\n\n      switch (this.pano.type) {\n        case 'cube':\n          var l = source.replace('%s', 'l')\n          var f = source.replace('%s', 'f')\n          var r = source.replace('%s', 'r')\n          var b = source.replace('%s', 'b')\n          var u = source.replace('%s', 'u')\n          var d = source.replace('%s', 'd')\n          this.panorama = new PanoLens.CubePanorama([r, l, u, d, f, b])\n          break\n        case 'video':\n          this.panorama = new PanoLens.VideoPanorama(source, { autoplay: true })\n          break\n        default:\n          this.panorama = new PanoLens.ImagePanorama(source)\n          break\n      }\n\n      // init this.viewer\n      this.initViewer()\n      // add hotspots\n      var group = new THREE.Object3D()\n\n      this.links.forEach((link, index) => {\n        _log(index)\n\n        var hotspot = addHotspot(link)\n        this.viewer.add(hotspot)\n\n        this.hotspots.push(hotspot)\n\n        var arrow = addArrow(this.position, link)\n\n        arrow.addEventListener('mouseover', () => {\n          _log('hoverred')\n        })\n\n        group.add(arrow)\n      })\n\n      var that = this\n\n      var raycaster = new THREE.Raycaster()\n\n      var INTERSECTED = null\n\n      this.viewer.container.addEventListener('click', (event) => {\n        if (INTERSECTED) {\n          _log(INTERSECTED.targetScene)\n          that.scene_index = that.getSceneIndexByKey(INTERSECTED.targetScene.key)\n\n          that.viewer.remove(that.panorama)\n          that.loadScene()\n          INTERSECTED = null\n        }\n      })\n\n      this.viewer.container.addEventListener('mousemove', (event) => {\n        // _log(e)\n\n        var mouse = new THREE.Vector2()\n        var camera = that.viewer.camera\n        mouse.x = ((event.clientX - that.$el.parentElement.offsetLeft) / that.viewer.container.offsetWidth) * 2 - 1\n        mouse.y = -((event.clientY - that.$el.parentElement.offsetTop) / that.viewer.container.offsetHeight) * 2 + 1\n\n        raycaster.setFromCamera(mouse, camera)\n\n        var\tintersects = raycaster.intersectObjects(that.viewer.scene.children, true)\n\n        var intersectedObject = null\n\n        if (intersects.length >= 0) {\n          intersects.forEach((intersect, index) => {\n            if (intersect.object.type === 'hotspot' || intersect.object.type === 'arrow') {\n              intersectedObject = intersect.object\n            }\n          })\n        }\n\n        if (intersectedObject) {\n          if (INTERSECTED) {\n            if (INTERSECTED.material.color) {\n              INTERSECTED.material.color.setHex(INTERSECTED.currentHex)\n            }\n\n            INTERSECTED.scale.set(1, 1, 1)\n          }\n          // store reference to closest object as current intersection object\n          INTERSECTED = intersects[0].object\n          // store color of closest object (for later restoration)\n          if (INTERSECTED.material.color) {\n            INTERSECTED.currentHex = INTERSECTED.material.color.getHex()\n          }\n          // set a new color for closest object\n          if (INTERSECTED.material.color) {\n            INTERSECTED.material.color.setHex(0xffff00)\n          }\n          INTERSECTED.scale.set(1.2, 1.2, 1.2)\n        } else {\n          // restore previous intersection object (if it exists) to its original color\n          if (INTERSECTED) {\n            if (INTERSECTED.material.color) {\n              INTERSECTED.material.color.setHex(INTERSECTED.currentHex)\n            }\n            INTERSECTED.scale.set(1, 1, 1)\n          }\n          // remove previous intersection object reference\n          //     by setting current intersection object to \"nothing\"\n          INTERSECTED = null\n        }\n      })\n\n      this.viewer.addUpdateCallback(function () {\n        // if (objects.length > 0) {\n        //   this.position.copy(objects[0].origin)\n        // } else {\n\n        // }\n\n        this.position.copy(that.viewer.control.target)\n        // this.rotation.y = that.viewer.camera.rotation.y\n        this.rotation.z = that.viewer.camera.rotation.z\n        // this.rotation.x = that.viewer.camera.rotation.x\n        this.translateZ(0)\n        this.translateX(0)\n        this.translateY(-1)\n        this.translateZ(0)\n\n        // this.scale.set(that.viewer.zoom)\n      }.bind(group))\n\n      this.viewer.add(group)\n      // If you want a visible bounding box\n\n      // this.viewer.add(helper)\n\n      this.panorama.addEventListener('load', () => {\n        that.$emit('on-load')\n      })\n    },\n\n    initViewer () {\n      this.viewer.add(this.panorama)\n\n      this.viewer.camera.near = 0.001\n      this.viewer.camera.target = this.panorama.position\n\n      this.viewer.panorama.rotation.set(0, Math.PI, 0)\n      // this.viewer.rotation.set(0, Math.PI / 2, 0)\n      this.viewer.panorama.position.copy(this.position)\n    }\n  }\n}\n\nfunction addHotspot (hotspotData) {\n  var geometry = new THREE.RingGeometry(8, 13, 100, 100)\n  var material = new THREE.MeshPhongMaterial({\n    color: 1668818,\n    emissive: 0xffffff,\n    transparent: true,\n    opacity: 1,\n    side: THREE.DoubleSide,\n    polygonOffset: !0,\n    polygonOffsetFactor: -4,\n    polygonOffsetUnits: -4\n  })\n\n  var geometryBorder = new THREE.CircleGeometry(9, 32, 32)\n  var materialBorder = new THREE.MeshPhongMaterial()\n  materialBorder.copy(material)\n\n  materialBorder.opacity = 0.5\n\n  var circle = new THREE.Mesh(geometryBorder)\n\n  var hotspot = new THREE.Mesh(geometry)\n\n  var merged = new THREE.Geometry()\n\n  circle.updateMatrix()\n  merged.merge(circle.geometry, circle.matrix, 0)\n  hotspot.updateMatrix()\n\n  merged.merge(hotspot.geometry, hotspot.matrix, 1)\n\n  var group = new THREE.Mesh(merged, new THREE.MeshFaceMaterial([material, materialBorder]))\n\n  group.rotation.set(toRadian(90), 0, 0)\n  group.position.set(hotspotData.position.x, hotspotData.position.y - 100, hotspotData.position.z)\n\n  group.type = 'hotspot'\n\n  group.targetScene = hotspotData\n\n  return group\n}\n\nfunction addArrow (currentPosition, targetScene) {\n  var arrowGeometry = makeArrowGeometry()\n  var arrowMaterial = new THREE.MeshBasicMaterial({\n    transparent: true,\n    opacity: 0.8,\n    color: 1668818,\n    emissive: 0xffffff,\n    side: THREE.DoubleSide,\n    polygonOffset: !0,\n    polygonOffsetFactor: -4,\n    polygonOffsetUnits: -4\n  })\n\n  var arrow = new THREE.Mesh(arrowGeometry, arrowMaterial)\n\n  var x1 = targetScene.x\n  var z1 = targetScene.z\n  var x2 = currentPosition.x\n  var z2 = currentPosition.z\n\n  var ath = toDegree(Math.atan2((z1 - z2), (x1 - x2)))\n\n  arrow.rotation.set(toRadian(90), 0, toRadian(ath))\n\n  var arrowPos = sphereToWorld(ath, 0)\n\n  arrow.position.set(arrowPos.x, arrowPos.y, arrowPos.z)\n  arrow.type = 'arrow'\n  arrow.targetScene = targetScene\n  return arrow\n}\n\nfunction makeArrowGeometry () {\n  var t = 1 / 10.0\n  var i = 2 * t / 3\n  var n = t * Math.cos(60 * THREE.Math.DEG2RAD)\n  var r = t * Math.sin(60 * THREE.Math.DEG2RAD)\n  var o = new THREE.Shape()\n\n  o.moveTo(i, 0)\n  o.lineTo(i - n, r)\n  o.lineTo(-n, r)\n  o.lineTo(0, 0)\n  o.lineTo(-n, -r)\n  o.lineTo(i - n, -r)\n  o.lineTo(i, 0)\n\n  return new THREE.ShapeGeometry(o)\n}\n\nfunction sphereToWorld (ath, atv) {\n  var d = 1 / 2.0\n  ath += 90\n  var mY = -d * Math.sin(toRadian(atv))\n  var r = -d * Math.cos(toRadian(atv))\n  var mX = r * Math.sin(toRadian(-ath))\n  var mZ = r * Math.cos(toRadian(-ath))\n\n  return new THREE.Vector3(mX, mY, mZ)\n}\nfunction toRadian (a) {\n  return a * Math.PI / 180.0\n}\n\nfunction toDegree (a) {\n  return a * 180.0 / Math.PI\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// Scene.vue?565eb048","<template>\n  <div style=\"width: 100%; height: 100%; margin: 0; border: 0; padding: 0;\">\n  </div>\n</template>\n\n<style scoped>\n  div{\n    cursor: pointer;\n  }\n</style>\n\n<script>\nimport PanoLens from './lib/panolens'\nimport * as THREE from 'three'\nconst _log = console.log.bind(console)\n\nexport default {\n  name: 'Tour',\n  props: {\n    scenes: {\n      type: Array,\n      default: () => { return [] }\n    },\n    sceneIndex: {\n      type: Number,\n      default: 0\n    },\n    width: {\n      type: Number,\n      default: undefined\n    },\n    height: {\n      type: Number,\n      default: undefined\n    }\n  },\n  data () {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      scene_index: -1,\n      viewer: null,\n      panorama: null,\n      hotspots: [],\n      arrowGroup: null\n    }\n  },\n  created () {\n    window.addEventListener('resize', this.onResize, false)\n  },\n  mounted () {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      }\n    }\n\n    this.viewer = new PanoLens.Viewer({\n      container: this.$el,\n      cameraFov: 100\n    })\n    if (this.scene_index === -1) {\n      this.loadScene(this.sceneIndex)\n    }\n  },\n  // watch: {\n  //   scenes () {\n  //     if (!this.viewer) return\n  //     if (!this.scenes || this.scenes.length === 0) return\n  //     this.loadScene()\n  //   }\n  // },\n  methods: {\n    onResize () {\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(() => {\n          this.size = {\n            width: this.$el.offsetWidth,\n            height: this.$el.offsetHeight\n          }\n        })\n      }\n    },\n    getSceneIndexByKey (key) {\n      for (let i = 0; i < this.scenes.length; i++) {\n        if (this.scenes[i].key === key) {\n          return i\n        }\n      }\n      return -1\n    },\n    loadScene (index) {\n      this.$emit('on-load-start')\n      _log('this.scenes = ' + this.scenes)\n      if (!this.scenes || this.scenes.length === 0) return\n\n      if (this.scene_index === index) return\n\n      this.scene_index = index\n\n      let scene = this.scenes[index]\n\n      let pano = scene.panorama\n      let source = pano.source\n\n      switch (pano.type) {\n        case 'cube':\n          let l = source.replace('%s', 'l')\n          let f = source.replace('%s', 'f')\n          let r = source.replace('%s', 'r')\n          let b = source.replace('%s', 'b')\n          let u = source.replace('%s', 'u')\n          let d = source.replace('%s', 'd')\n          this.panorama = new PanoLens.CubePanorama([r, l, u, d, f, b])\n          break\n        case 'video':\n          this.panorama = new PanoLens.VideoPanorama(source, { autoplay: true })\n          _log('this is video')\n          break\n        default:\n          this.panorama = new PanoLens.ImagePanorama(source)\n          break\n      }\n\n      this.viewer.camera.near = 0.001\n      this.viewer.camera.position.set(scene.x, scene.y, scene.z)\n\n      this.viewer.camera.translateZ(1)\n\n      this.viewer.add(this.panorama)\n\n      this.viewer.panorama.rotation.set(0, Math.PI, 0)\n      this.panorama.parent.rotation.set(0, Math.PI, 0)\n      this.viewer.panorama.position.set(scene.x, scene.y, scene.z)\n\n      this.viewer.control.target = this.viewer.panorama.position\n\n      _log(this.viewer)\n      _log('panorama = ', this.panorama)\n\n      // remove arrows if exist\n      if (this.arrowGroup) {\n        this.viewer.remove(this.arrowGroup)\n      }\n\n      // remove hotspots if exist\n      if (this.hotspots) {\n        this.hotspots.forEach((hotspot) => {\n          this.viewer.remove(hotspot)\n        })\n      }\n\n      // add hotspots\n\n      this.arrowGroup = new THREE.Object3D()\n\n      scene.connections.forEach(key => {\n        _log('connections key = ', key)\n        let index = this.getSceneIndexByKey(key)\n        _log('connections index = ', index)\n        if (index === -1) return\n\n        let hotspot = addHotspot(scene, this.scenes[index])\n        this.viewer.add(hotspot)\n\n        this.hotspots.push(hotspot)\n\n        let arrow = addArrow(scene, this.scenes[index])\n\n        arrow.addEventListener('mouseover', () => {\n          _log('hoverred')\n        })\n\n        this.arrowGroup.add(arrow)\n      })\n\n      let that = this\n\n      let raycaster = new THREE.Raycaster()\n\n      let INTERSECTED = null\n\n      this.viewer.container.addEventListener('click', (event) => {\n        if (Date.now() - timeStamp < rate) return\n\n        if (INTERSECTED) {\n          _log(INTERSECTED.targetScene)\n          // let index = that.getSceneIndexByKey(INTERSECTED.targetScene.key)\n\n          alert('TODO: move to next scene ' + INTERSECTED.targetScene.key)\n\n          // todo move to scene\n          // that.panorama.dispose()\n\n          // this.$emit('on-load-start')\n\n          // setTimeout(that.loadScene(index), 10)\n          // timeStamp = Date.now()\n          // INTERSECTED = null\n        }\n      })\n\n      // this.viewer.container.addEventListener('mousemove', (event) => {\n      //   // _log(e)\n\n      //   let mouse = new THREE.Vector2()\n      //   let camera = that.viewer.camera\n      //   mouse.x = ((event.clientX - that.$el.parentElement.offsetLeft) / that.viewer.container.offsetWidth) * 2 - 1\n      //   mouse.y = -((event.clientY - that.$el.parentElement.offsetTop) / that.viewer.container.offsetHeight) * 2 + 1\n\n      //   raycaster.setFromCamera(mouse, camera)\n\n      //   let\tintersects = raycaster.intersectObjects(that.viewer.scene.children, true)\n\n      //   let intersectedObject = null\n\n      //   if (intersects.length >= 0) {\n      //     intersects.forEach((intersect, index) => {\n      //       if (intersect.object.type === 'hotspot' || intersect.object.type === 'arrow') {\n      //         intersectedObject = intersect.object\n      //       }\n      //     })\n      //   }\n\n      //   if (intersectedObject) {\n      //     if (INTERSECTED) {\n      //       if (INTERSECTED.material.color) {\n      //         INTERSECTED.material.color.setHex(INTERSECTED.currentHex)\n      //       }\n\n      //       INTERSECTED.scale.set(1, 1, 1)\n      //     }\n      //     // store reference to closest object as current intersection object\n      //     INTERSECTED = intersects[0].object\n      //     // store color of closest object (for later restoration)\n      //     if (INTERSECTED.material.color) {\n      //       INTERSECTED.currentHex = INTERSECTED.material.color.getHex()\n      //     }\n      //     // set a new color for closest object\n      //     if (INTERSECTED.material.color) {\n      //       INTERSECTED.material.color.setHex(0xffff00)\n      //     }\n      //     INTERSECTED.scale.set(1.2, 1.2, 1.2)\n      //   } else {\n      //     // restore previous intersection object (if it exists) to its original color\n      //     if (INTERSECTED) {\n      //       if (INTERSECTED.material.color) {\n      //         INTERSECTED.material.color.setHex(INTERSECTED.currentHex)\n      //       }\n      //       INTERSECTED.scale.set(1, 1, 1)\n      //     }\n      //     // remove previous intersection object reference\n      //     //     by setting current intersection object to \"nothing\"\n      //     INTERSECTED = null\n      //   }\n      // })\n\n      // this.viewer.addUpdateCallback(function () {\n      //   // if (objects.length > 0) {\n      //   //   this.position.copy(objects[0].origin)\n      //   // } else {\n\n      //   // }\n\n      //   this.position.copy(that.viewer.control.target)\n      //   // this.rotation.y = that.viewer.camera.rotation.y\n      //   this.rotation.z = that.viewer.camera.rotation.z\n      //   // this.rotation.x = that.viewer.camera.rotation.x\n      //   this.translateZ(0)\n      //   this.translateX(0)\n      //   this.translateY(-1)\n      //   this.translateZ(0)\n\n      //   // this.scale.set(that.viewer.zoom)\n      // }.bind(this.arrowGroup))\n\n      this.viewer.add(this.arrowGroup)\n      // If you want a visible bounding box\n\n      // this.viewer.add(helper)\n\n      this.panorama.addEventListener('load', () => {\n        that.$emit('on-load')\n      })\n    }\n  }\n}\n\nlet rate = 1000\nlet timeStamp = Date.now() - rate\n\nfunction addHotspot (scene, targetScene) {\n  let pos = {\n    x: targetScene.x,\n    y: targetScene.y,\n    z: targetScene.z\n  }\n\n  let geometry = new THREE.RingGeometry(8, 13, 100, 100)\n  let material = new THREE.MeshPhongMaterial({\n    color: 1668818,\n    emissive: 0xffffff,\n    transparent: true,\n    opacity: 1,\n    side: THREE.DoubleSide,\n    polygonOffset: !0,\n    polygonOffsetFactor: -4,\n    polygonOffsetUnits: -4\n  })\n\n  let geometryBorder = new THREE.CircleGeometry(9, 32, 32)\n  let materialBorder = new THREE.MeshPhongMaterial()\n  materialBorder.copy(material)\n\n  materialBorder.opacity = 0.5\n\n  let circle = new THREE.Mesh(geometryBorder)\n\n  let hotspot = new THREE.Mesh(geometry)\n\n  let merged = new THREE.Geometry()\n\n  circle.updateMatrix()\n  merged.merge(circle.geometry, circle.matrix, 0)\n  hotspot.updateMatrix()\n\n  merged.merge(hotspot.geometry, hotspot.matrix, 1)\n\n  let group = new THREE.Mesh(merged, new THREE.MeshFaceMaterial([material, materialBorder]))\n\n  group.rotation.set(toRadian(90), 0, 0)\n  group.position.set(pos.x, pos.y - 100, pos.z)\n\n  group.type = 'hotspot'\n\n  group.targetScene = targetScene\n\n  return group\n}\n\nfunction addArrow (scene, targetScene) {\n  let arrowGeometry = makeArrowGeometry()\n  let arrowMaterial = new THREE.MeshBasicMaterial({\n    transparent: true,\n    opacity: 0.8,\n    color: 1668818,\n    emissive: 0xffffff,\n    side: THREE.DoubleSide,\n    polygonOffset: !0,\n    polygonOffsetFactor: -4,\n    polygonOffsetUnits: -4\n  })\n\n  let arrow = new THREE.Mesh(arrowGeometry, arrowMaterial)\n\n  let x1 = targetScene.x\n  let z1 = targetScene.z\n  let x2 = scene.x\n  let z2 = scene.z\n\n  let ath = toDegree(Math.atan2((z1 - z2), (x1 - x2)))\n\n  arrow.rotation.set(toRadian(90), 0, toRadian(ath))\n\n  let arrowPos = sphereToWorld(ath, 0)\n\n  arrow.position.set(arrowPos.x, arrowPos.y, arrowPos.z)\n  arrow.type = 'arrow'\n  arrow.targetScene = targetScene\n  return arrow\n}\n\nfunction makeArrowGeometry () {\n  let t = 1 / 10.0\n  let i = 2 * t / 3\n  let n = t * Math.cos(60 * THREE.Math.DEG2RAD)\n  let r = t * Math.sin(60 * THREE.Math.DEG2RAD)\n  let o = new THREE.Shape()\n  o.moveTo(i, 0)\n  o.lineTo(i - n, r)\n  o.lineTo(-n, r)\n  o.lineTo(0, 0)\n  o.lineTo(-n, -r)\n  o.lineTo(i - n, -r)\n  o.lineTo(i, 0)\n  return new THREE.ShapeGeometry(o)\n}\n\nfunction sphereToWorld (ath, atv) {\n  let d = 1 / 2.0\n  ath += 90\n  let mY = -d * Math.sin(toRadian(atv))\n  let r = -d * Math.cos(toRadian(atv))\n  let mX = r * Math.sin(toRadian(-ath))\n  let mZ = r * Math.cos(toRadian(-ath))\n\n  return new THREE.Vector3(mX, mY, mZ)\n}\nfunction toRadian (a) {\n  return a * Math.PI / 180.0\n}\n\nfunction toDegree (a) {\n  return a * 180.0 / Math.PI\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// Tour.vue?2f6abc58"],"sourceRoot":""}